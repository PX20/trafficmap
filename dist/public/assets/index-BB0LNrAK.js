var w6=Object.defineProperty;var Q1=e=>{throw TypeError(e)};var _6=(e,t,n)=>t in e?w6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var I=(e,t,n)=>_6(e,typeof t!="symbol"?t+"":t,n),Vy=(e,t,n)=>t.has(e)||Q1("Cannot "+n);var T=(e,t,n)=>(Vy(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?Q1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ne=(e,t,n,r)=>(Vy(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ie=(e,t,n)=>(Vy(e,t,"access private method"),n);var Uf=(e,t,n,r)=>({set _(s){ne(e,t,s,n)},get _(){return T(e,t,r)}});function S6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ei(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wk={exports:{}},bg={},qk={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh=Symbol.for("react.element"),N6=Symbol.for("react.portal"),C6=Symbol.for("react.fragment"),j6=Symbol.for("react.strict_mode"),P6=Symbol.for("react.profiler"),T6=Symbol.for("react.provider"),k6=Symbol.for("react.context"),E6=Symbol.for("react.forward_ref"),A6=Symbol.for("react.suspense"),I6=Symbol.for("react.memo"),M6=Symbol.for("react.lazy"),Y1=Symbol.iterator;function R6(e){return e===null||typeof e!="object"?null:(e=Y1&&e[Y1]||e["@@iterator"],typeof e=="function"?e:null)}var Zk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gk=Object.assign,Kk={};function bu(e,t,n){this.props=e,this.context=t,this.refs=Kk,this.updater=n||Zk}bu.prototype.isReactComponent={};bu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qk(){}Qk.prototype=bu.prototype;function bb(e,t,n){this.props=e,this.context=t,this.refs=Kk,this.updater=n||Zk}var wb=bb.prototype=new Qk;wb.constructor=bb;Gk(wb,bu.prototype);wb.isPureReactComponent=!0;var X1=Array.isArray,Yk=Object.prototype.hasOwnProperty,_b={current:null},Xk={key:!0,ref:!0,__self:!0,__source:!0};function Jk(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Yk.call(t,r)&&!Xk.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];s.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Jh,type:e,key:i,ref:l,props:s,_owner:_b.current}}function L6(e,t){return{$$typeof:Jh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jh}function F6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var J1=/\/+/g;function Hy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F6(""+e.key):t.toString(36)}function wp(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Jh:case N6:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+Hy(l,0):r,X1(s)?(n="",e!=null&&(n=e.replace(J1,"$&/")+"/"),wp(s,t,n,"",function(h){return h})):s!=null&&(Sb(s)&&(s=L6(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(J1,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",X1(e))for(var c=0;c<e.length;c++){i=e[c];var d=r+Hy(i,c);l+=wp(i,t,n,d,s)}else if(d=R6(e),typeof d=="function")for(e=d.call(e),c=0;!(i=e.next()).done;)i=i.value,d=r+Hy(i,c++),l+=wp(i,t,n,d,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Bf(e,t,n){if(e==null)return e;var r=[],s=0;return wp(e,r,"","",function(i){return t.call(n,i,s++)}),r}function O6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ur={current:null},_p={transition:null},D6={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:_p,ReactCurrentOwner:_b};function eE(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:Bf,forEach:function(e,t,n){Bf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bf(e,function(){t++}),t},toArray:function(e){return Bf(e,function(t){return t})||[]},only:function(e){if(!Sb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dt.Component=bu;dt.Fragment=C6;dt.Profiler=P6;dt.PureComponent=bb;dt.StrictMode=j6;dt.Suspense=A6;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D6;dt.act=eE;dt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Gk({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=_b.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Yk.call(t,d)&&!Xk.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Jh,type:e.type,key:s,ref:i,props:r,_owner:l}};dt.createContext=function(e){return e={$$typeof:k6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:T6,_context:e},e.Consumer=e};dt.createElement=Jk;dt.createFactory=function(e){var t=Jk.bind(null,e);return t.type=e,t};dt.createRef=function(){return{current:null}};dt.forwardRef=function(e){return{$$typeof:E6,render:e}};dt.isValidElement=Sb;dt.lazy=function(e){return{$$typeof:M6,_payload:{_status:-1,_result:e},_init:O6}};dt.memo=function(e,t){return{$$typeof:I6,type:e,compare:t===void 0?null:t}};dt.startTransition=function(e){var t=_p.transition;_p.transition={};try{e()}finally{_p.transition=t}};dt.unstable_act=eE;dt.useCallback=function(e,t){return ur.current.useCallback(e,t)};dt.useContext=function(e){return ur.current.useContext(e)};dt.useDebugValue=function(){};dt.useDeferredValue=function(e){return ur.current.useDeferredValue(e)};dt.useEffect=function(e,t){return ur.current.useEffect(e,t)};dt.useId=function(){return ur.current.useId()};dt.useImperativeHandle=function(e,t,n){return ur.current.useImperativeHandle(e,t,n)};dt.useInsertionEffect=function(e,t){return ur.current.useInsertionEffect(e,t)};dt.useLayoutEffect=function(e,t){return ur.current.useLayoutEffect(e,t)};dt.useMemo=function(e,t){return ur.current.useMemo(e,t)};dt.useReducer=function(e,t,n){return ur.current.useReducer(e,t,n)};dt.useRef=function(e){return ur.current.useRef(e)};dt.useState=function(e){return ur.current.useState(e)};dt.useSyncExternalStore=function(e,t,n){return ur.current.useSyncExternalStore(e,t,n)};dt.useTransition=function(){return ur.current.useTransition()};dt.version="18.3.1";qk.exports=dt;var v=qk.exports;const Je=Ei(v),Nb=S6({__proto__:null,default:Je},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U6=v,B6=Symbol.for("react.element"),z6=Symbol.for("react.fragment"),$6=Object.prototype.hasOwnProperty,V6=U6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H6={key:!0,ref:!0,__self:!0,__source:!0};function tE(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)$6.call(t,r)&&!H6.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:B6,type:e,key:i,ref:l,props:s,_owner:V6.current}}bg.Fragment=z6;bg.jsx=tE;bg.jsxs=tE;Wk.exports=bg;var o=Wk.exports,nE={exports:{}},Hr={},rE={exports:{}},sE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,G){var X=O.length;O.push(G);e:for(;0<X;){var ce=X-1>>>1,Te=O[ce];if(0<s(Te,G))O[ce]=G,O[X]=Te,X=ce;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],X=O.pop();if(X!==G){O[0]=X;e:for(var ce=0,Te=O.length,Ve=Te>>>1;ce<Ve;){var Ie=2*(ce+1)-1,ye=O[Ie],ue=Ie+1,fe=O[ue];if(0>s(ye,X))ue<Te&&0>s(fe,ye)?(O[ce]=fe,O[ue]=X,ce=ue):(O[ce]=ye,O[Ie]=X,ce=Ie);else if(ue<Te&&0>s(fe,X))O[ce]=fe,O[ue]=X,ce=ue;else break e}}return G}function s(O,G){var X=O.sortIndex-G.sortIndex;return X!==0?X:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],h=[],f=1,p=null,g=3,b=!1,j=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(O){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=O)r(h),G.sortIndex=G.expirationTime,t(d,G);else break;G=n(h)}}function P(O){if(_=!1,N(O),!j)if(n(d)!==null)j=!0,V(E);else{var G=n(h);G!==null&&K(P,G.startTime-O)}}function E(O,G){j=!1,_&&(_=!1,S(z),z=-1),b=!0;var X=g;try{for(N(G),p=n(d);p!==null&&(!(p.expirationTime>G)||O&&!J());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,g=p.priorityLevel;var Te=ce(p.expirationTime<=G);G=e.unstable_now(),typeof Te=="function"?p.callback=Te:p===n(d)&&r(d),N(G)}else r(d);p=n(d)}if(p!==null)var Ve=!0;else{var Ie=n(h);Ie!==null&&K(P,Ie.startTime-G),Ve=!1}return Ve}finally{p=null,g=X,b=!1}}var k=!1,M=null,z=-1,D=5,F=-1;function J(){return!(e.unstable_now()-F<D)}function H(){if(M!==null){var O=e.unstable_now();F=O;var G=!0;try{G=M(!0,O)}finally{G?Y():(k=!1,M=null)}}else k=!1}var Y;if(typeof x=="function")Y=function(){x(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,U=Z.port2;Z.port1.onmessage=H,Y=function(){U.postMessage(null)}}else Y=function(){w(H,0)};function V(O){M=O,k||(k=!0,Y())}function K(O,G){z=w(function(){O(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){j||b||(j=!0,V(E))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(O){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var X=g;g=G;try{return O()}finally{g=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=g;g=O;try{return G()}finally{g=X}},e.unstable_scheduleCallback=function(O,G,X){var ce=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,O){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=X+Te,O={id:f++,callback:G,priorityLevel:O,startTime:X,expirationTime:Te,sortIndex:-1},X>ce?(O.sortIndex=X,t(h,O),n(d)===null&&O===n(h)&&(_?(S(z),z=-1):_=!0,K(P,X-ce))):(O.sortIndex=Te,t(d,O),j||b||(j=!0,V(E))),O},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(O){var G=g;return function(){var X=g;g=G;try{return O.apply(this,arguments)}finally{g=X}}}})(sE);rE.exports=sE;var W6=rE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q6=v,Vr=W6;function he(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iE=new Set,Ud={};function Cl(e,t){tu(e,t),tu(e+"Capture",t)}function tu(e,t){for(Ud[e]=t,e=0;e<t.length;e++)iE.add(t[e])}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ix=Object.prototype.hasOwnProperty,Z6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eS={},tS={};function G6(e){return ix.call(tS,e)?!0:ix.call(eS,e)?!1:Z6.test(e)?tS[e]=!0:(eS[e]=!0,!1)}function K6(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q6(e,t,n,r){if(t===null||typeof t>"u"||K6(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dr(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dn[e]=new dr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dn[t]=new dr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dn[e]=new dr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dn[e]=new dr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dn[e]=new dr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dn[e]=new dr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dn[e]=new dr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dn[e]=new dr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dn[e]=new dr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cb=/[\-:]([a-z])/g;function jb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cb,jb);Dn[t]=new dr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cb,jb);Dn[t]=new dr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cb,jb);Dn[t]=new dr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dn[e]=new dr(e,1,!1,e.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dn[e]=new dr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pb(e,t,n,r){var s=Dn.hasOwnProperty(t)?Dn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q6(t,n,s,r)&&(n=null),r||s===null?G6(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mo=q6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zf=Symbol.for("react.element"),Zl=Symbol.for("react.portal"),Gl=Symbol.for("react.fragment"),Tb=Symbol.for("react.strict_mode"),ox=Symbol.for("react.profiler"),oE=Symbol.for("react.provider"),aE=Symbol.for("react.context"),kb=Symbol.for("react.forward_ref"),ax=Symbol.for("react.suspense"),lx=Symbol.for("react.suspense_list"),Eb=Symbol.for("react.memo"),Co=Symbol.for("react.lazy"),lE=Symbol.for("react.offscreen"),nS=Symbol.iterator;function qu(e){return e===null||typeof e!="object"?null:(e=nS&&e[nS]||e["@@iterator"],typeof e=="function"?e:null)}var qt=Object.assign,Wy;function ud(e){if(Wy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wy=t&&t[1]||""}return`
`+Wy+e}var qy=!1;function Zy(e,t){if(!e||qy)return"";qy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,c=i.length-1;1<=l&&0<=c&&s[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==i[c]){var d=`
`+s[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=c);break}}}finally{qy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ud(e):""}function Y6(e){switch(e.tag){case 5:return ud(e.type);case 16:return ud("Lazy");case 13:return ud("Suspense");case 19:return ud("SuspenseList");case 0:case 2:case 15:return e=Zy(e.type,!1),e;case 11:return e=Zy(e.type.render,!1),e;case 1:return e=Zy(e.type,!0),e;default:return""}}function cx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gl:return"Fragment";case Zl:return"Portal";case ox:return"Profiler";case Tb:return"StrictMode";case ax:return"Suspense";case lx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aE:return(e.displayName||"Context")+".Consumer";case oE:return(e._context.displayName||"Context")+".Provider";case kb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Eb:return t=e.displayName||null,t!==null?t:cx(e.type)||"Memo";case Co:t=e._payload,e=e._init;try{return cx(e(t))}catch{}}return null}function X6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cx(t);case 8:return t===Tb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J6(e){var t=cE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $f(e){e._valueTracker||(e._valueTracker=J6(e))}function uE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Kp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ux(e,t){var n=t.checked;return qt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dE(e,t){t=t.checked,t!=null&&Pb(e,"checked",t,!1)}function dx(e,t){dE(e,t);var n=sa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hx(e,t.type,n):t.hasOwnProperty("defaultValue")&&hx(e,t.type,sa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hx(e,t,n){(t!=="number"||Kp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var dd=Array.isArray;function ac(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sa(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function fx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(he(91));return qt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(he(92));if(dd(n)){if(1<n.length)throw Error(he(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sa(n)}}function hE(e,t){var n=sa(t.value),r=sa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function oS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function px(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vf,pE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vf=Vf||document.createElement("div"),Vf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e8=["Webkit","ms","Moz","O"];Object.keys(_d).forEach(function(e){e8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_d[t]=_d[e]})});function mE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_d.hasOwnProperty(e)&&_d[e]?(""+t).trim():t+"px"}function gE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var t8=qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mx(e,t){if(t){if(t8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(he(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(he(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(he(61))}if(t.style!=null&&typeof t.style!="object")throw Error(he(62))}}function gx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yx=null;function Ab(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vx=null,lc=null,cc=null;function aS(e){if(e=nf(e)){if(typeof vx!="function")throw Error(he(280));var t=e.stateNode;t&&(t=Cg(t),vx(e.stateNode,e.type,t))}}function yE(e){lc?cc?cc.push(e):cc=[e]:lc=e}function vE(){if(lc){var e=lc,t=cc;if(cc=lc=null,aS(e),t)for(e=0;e<t.length;e++)aS(t[e])}}function xE(e,t){return e(t)}function bE(){}var Gy=!1;function wE(e,t,n){if(Gy)return e(t,n);Gy=!0;try{return xE(e,t,n)}finally{Gy=!1,(lc!==null||cc!==null)&&(bE(),vE())}}function zd(e,t){var n=e.stateNode;if(n===null)return null;var r=Cg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(he(231,t,typeof n));return n}var xx=!1;if(io)try{var Zu={};Object.defineProperty(Zu,"passive",{get:function(){xx=!0}}),window.addEventListener("test",Zu,Zu),window.removeEventListener("test",Zu,Zu)}catch{xx=!1}function n8(e,t,n,r,s,i,l,c,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(f){this.onError(f)}}var Sd=!1,Qp=null,Yp=!1,bx=null,r8={onError:function(e){Sd=!0,Qp=e}};function s8(e,t,n,r,s,i,l,c,d){Sd=!1,Qp=null,n8.apply(r8,arguments)}function i8(e,t,n,r,s,i,l,c,d){if(s8.apply(this,arguments),Sd){if(Sd){var h=Qp;Sd=!1,Qp=null}else throw Error(he(198));Yp||(Yp=!0,bx=h)}}function jl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _E(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lS(e){if(jl(e)!==e)throw Error(he(188))}function o8(e){var t=e.alternate;if(!t){if(t=jl(e),t===null)throw Error(he(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lS(s),e;if(i===r)return lS(s),t;i=i.sibling}throw Error(he(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,r=i;break}if(c===r){l=!0,r=s,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,r=s;break}if(c===r){l=!0,r=i,n=s;break}c=c.sibling}if(!l)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?e:t}function SE(e){return e=o8(e),e!==null?NE(e):null}function NE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=NE(e);if(t!==null)return t;e=e.sibling}return null}var CE=Vr.unstable_scheduleCallback,cS=Vr.unstable_cancelCallback,a8=Vr.unstable_shouldYield,l8=Vr.unstable_requestPaint,nn=Vr.unstable_now,c8=Vr.unstable_getCurrentPriorityLevel,Ib=Vr.unstable_ImmediatePriority,jE=Vr.unstable_UserBlockingPriority,Xp=Vr.unstable_NormalPriority,u8=Vr.unstable_LowPriority,PE=Vr.unstable_IdlePriority,wg=null,vi=null;function d8(e){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(wg,e,void 0,(e.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:p8,h8=Math.log,f8=Math.LN2;function p8(e){return e>>>=0,e===0?32:31-(h8(e)/f8|0)|0}var Hf=64,Wf=4194304;function hd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jp(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?r=hd(c):(i&=l,i!==0&&(r=hd(i)))}else l=n&~s,l!==0?r=hd(l):i!==0&&(r=hd(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Os(t),s=1<<n,r|=e[n],t&=~s;return r}function m8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g8(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Os(i),c=1<<l,d=s[l];d===-1?(!(c&n)||c&r)&&(s[l]=m8(c,t)):d<=t&&(e.expiredLanes|=c),i&=~c}}function wx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TE(){var e=Hf;return Hf<<=1,!(Hf&4194240)&&(Hf=64),e}function Ky(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ef(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Os(t),e[t]=n}function y8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Os(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Mb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Os(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var jt=0;function kE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var EE,Rb,AE,IE,ME,_x=!1,qf=[],Zo=null,Go=null,Ko=null,$d=new Map,Vd=new Map,ko=[],v8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uS(e,t){switch(e){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Ko=null;break;case"pointerover":case"pointerout":$d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vd.delete(t.pointerId)}}function Gu(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=nf(t),t!==null&&Rb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function x8(e,t,n,r,s){switch(t){case"focusin":return Zo=Gu(Zo,e,t,n,r,s),!0;case"dragenter":return Go=Gu(Go,e,t,n,r,s),!0;case"mouseover":return Ko=Gu(Ko,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return $d.set(i,Gu($d.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vd.set(i,Gu(Vd.get(i)||null,e,t,n,r,s)),!0}return!1}function RE(e){var t=Ma(e.target);if(t!==null){var n=jl(t);if(n!==null){if(t=n.tag,t===13){if(t=_E(n),t!==null){e.blockedOn=t,ME(e.priority,function(){AE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yx=r,n.target.dispatchEvent(r),yx=null}else return t=nf(n),t!==null&&Rb(t),e.blockedOn=n,!1;t.shift()}return!0}function dS(e,t,n){Sp(e)&&n.delete(t)}function b8(){_x=!1,Zo!==null&&Sp(Zo)&&(Zo=null),Go!==null&&Sp(Go)&&(Go=null),Ko!==null&&Sp(Ko)&&(Ko=null),$d.forEach(dS),Vd.forEach(dS)}function Ku(e,t){e.blockedOn===t&&(e.blockedOn=null,_x||(_x=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,b8)))}function Hd(e){function t(s){return Ku(s,e)}if(0<qf.length){Ku(qf[0],e);for(var n=1;n<qf.length;n++){var r=qf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zo!==null&&Ku(Zo,e),Go!==null&&Ku(Go,e),Ko!==null&&Ku(Ko,e),$d.forEach(t),Vd.forEach(t),n=0;n<ko.length;n++)r=ko[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ko.length&&(n=ko[0],n.blockedOn===null);)RE(n),n.blockedOn===null&&ko.shift()}var uc=mo.ReactCurrentBatchConfig,em=!0;function w8(e,t,n,r){var s=jt,i=uc.transition;uc.transition=null;try{jt=1,Lb(e,t,n,r)}finally{jt=s,uc.transition=i}}function _8(e,t,n,r){var s=jt,i=uc.transition;uc.transition=null;try{jt=4,Lb(e,t,n,r)}finally{jt=s,uc.transition=i}}function Lb(e,t,n,r){if(em){var s=Sx(e,t,n,r);if(s===null)iv(e,t,r,tm,n),uS(e,r);else if(x8(s,e,t,n,r))r.stopPropagation();else if(uS(e,r),t&4&&-1<v8.indexOf(e)){for(;s!==null;){var i=nf(s);if(i!==null&&EE(i),i=Sx(e,t,n,r),i===null&&iv(e,t,r,tm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else iv(e,t,r,null,n)}}var tm=null;function Sx(e,t,n,r){if(tm=null,e=Ab(r),e=Ma(e),e!==null)if(t=jl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_E(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tm=e,null}function LE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c8()){case Ib:return 1;case jE:return 4;case Xp:case u8:return 16;case PE:return 536870912;default:return 16}default:return 16}}var Ho=null,Fb=null,Np=null;function FE(){if(Np)return Np;var e,t=Fb,n=t.length,r,s="value"in Ho?Ho.value:Ho.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return Np=s.slice(e,1<r?1-r:void 0)}function Cp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zf(){return!0}function hS(){return!1}function Wr(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zf:hS,this.isPropagationStopped=hS,this}return qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zf)},persist:function(){},isPersistent:Zf}),t}var wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ob=Wr(wu),tf=qt({},wu,{view:0,detail:0}),S8=Wr(tf),Qy,Yy,Qu,_g=qt({},tf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Db,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qu&&(Qu&&e.type==="mousemove"?(Qy=e.screenX-Qu.screenX,Yy=e.screenY-Qu.screenY):Yy=Qy=0,Qu=e),Qy)},movementY:function(e){return"movementY"in e?e.movementY:Yy}}),fS=Wr(_g),N8=qt({},_g,{dataTransfer:0}),C8=Wr(N8),j8=qt({},tf,{relatedTarget:0}),Xy=Wr(j8),P8=qt({},wu,{animationName:0,elapsedTime:0,pseudoElement:0}),T8=Wr(P8),k8=qt({},wu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),E8=Wr(k8),A8=qt({},wu,{data:0}),pS=Wr(A8),I8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R8[e])?!!t[e]:!1}function Db(){return L8}var F8=qt({},tf,{key:function(e){if(e.key){var t=I8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?M8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Db,charCode:function(e){return e.type==="keypress"?Cp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O8=Wr(F8),D8=qt({},_g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mS=Wr(D8),U8=qt({},tf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Db}),B8=Wr(U8),z8=qt({},wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),$8=Wr(z8),V8=qt({},_g,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H8=Wr(V8),W8=[9,13,27,32],Ub=io&&"CompositionEvent"in window,Nd=null;io&&"documentMode"in document&&(Nd=document.documentMode);var q8=io&&"TextEvent"in window&&!Nd,OE=io&&(!Ub||Nd&&8<Nd&&11>=Nd),gS=" ",yS=!1;function DE(e,t){switch(e){case"keyup":return W8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kl=!1;function Z8(e,t){switch(e){case"compositionend":return UE(t);case"keypress":return t.which!==32?null:(yS=!0,gS);case"textInput":return e=t.data,e===gS&&yS?null:e;default:return null}}function G8(e,t){if(Kl)return e==="compositionend"||!Ub&&DE(e,t)?(e=FE(),Np=Fb=Ho=null,Kl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return OE&&t.locale!=="ko"?null:t.data;default:return null}}var K8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K8[e.type]:t==="textarea"}function BE(e,t,n,r){yE(r),t=nm(t,"onChange"),0<t.length&&(n=new Ob("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cd=null,Wd=null;function Q8(e){YE(e,0)}function Sg(e){var t=Xl(e);if(uE(t))return e}function Y8(e,t){if(e==="change")return t}var zE=!1;if(io){var Jy;if(io){var ev="oninput"in document;if(!ev){var xS=document.createElement("div");xS.setAttribute("oninput","return;"),ev=typeof xS.oninput=="function"}Jy=ev}else Jy=!1;zE=Jy&&(!document.documentMode||9<document.documentMode)}function bS(){Cd&&(Cd.detachEvent("onpropertychange",$E),Wd=Cd=null)}function $E(e){if(e.propertyName==="value"&&Sg(Wd)){var t=[];BE(t,Wd,e,Ab(e)),wE(Q8,t)}}function X8(e,t,n){e==="focusin"?(bS(),Cd=t,Wd=n,Cd.attachEvent("onpropertychange",$E)):e==="focusout"&&bS()}function J8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sg(Wd)}function eU(e,t){if(e==="click")return Sg(t)}function tU(e,t){if(e==="input"||e==="change")return Sg(t)}function nU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bs=typeof Object.is=="function"?Object.is:nU;function qd(e,t){if(Bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ix.call(t,s)||!Bs(e[s],t[s]))return!1}return!0}function wS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _S(e,t){var n=wS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wS(n)}}function VE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?VE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HE(){for(var e=window,t=Kp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kp(e.document)}return t}function Bb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rU(e){var t=HE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&VE(n.ownerDocument.documentElement,n)){if(r!==null&&Bb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=_S(n,i);var l=_S(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sU=io&&"documentMode"in document&&11>=document.documentMode,Ql=null,Nx=null,jd=null,Cx=!1;function SS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cx||Ql==null||Ql!==Kp(r)||(r=Ql,"selectionStart"in r&&Bb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jd&&qd(jd,r)||(jd=r,r=nm(Nx,"onSelect"),0<r.length&&(t=new Ob("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ql)))}function Gf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yl={animationend:Gf("Animation","AnimationEnd"),animationiteration:Gf("Animation","AnimationIteration"),animationstart:Gf("Animation","AnimationStart"),transitionend:Gf("Transition","TransitionEnd")},tv={},WE={};io&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function Ng(e){if(tv[e])return tv[e];if(!Yl[e])return e;var t=Yl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in WE)return tv[e]=t[n];return e}var qE=Ng("animationend"),ZE=Ng("animationiteration"),GE=Ng("animationstart"),KE=Ng("transitionend"),QE=new Map,NS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(e,t){QE.set(e,t),Cl(t,[e])}for(var nv=0;nv<NS.length;nv++){var rv=NS[nv],iU=rv.toLowerCase(),oU=rv[0].toUpperCase()+rv.slice(1);ga(iU,"on"+oU)}ga(qE,"onAnimationEnd");ga(ZE,"onAnimationIteration");ga(GE,"onAnimationStart");ga("dblclick","onDoubleClick");ga("focusin","onFocus");ga("focusout","onBlur");ga(KE,"onTransitionEnd");tu("onMouseEnter",["mouseout","mouseover"]);tu("onMouseLeave",["mouseout","mouseover"]);tu("onPointerEnter",["pointerout","pointerover"]);tu("onPointerLeave",["pointerout","pointerover"]);Cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aU=new Set("cancel close invalid load scroll toggle".split(" ").concat(fd));function CS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,i8(r,t,void 0,e),e.currentTarget=null}function YE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==i&&s.isPropagationStopped())break e;CS(s,c,h),i=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,h=c.currentTarget,c=c.listener,d!==i&&s.isPropagationStopped())break e;CS(s,c,h),i=d}}}if(Yp)throw e=bx,Yp=!1,bx=null,e}function Ot(e,t){var n=t[Ex];n===void 0&&(n=t[Ex]=new Set);var r=e+"__bubble";n.has(r)||(XE(t,e,2,!1),n.add(r))}function sv(e,t,n){var r=0;t&&(r|=4),XE(n,e,r,t)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Kf]){e[Kf]=!0,iE.forEach(function(n){n!=="selectionchange"&&(aU.has(n)||sv(n,!1,e),sv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kf]||(t[Kf]=!0,sv("selectionchange",!1,t))}}function XE(e,t,n,r){switch(LE(t)){case 1:var s=w8;break;case 4:s=_8;break;default:s=Lb}n=s.bind(null,t,n,e),s=void 0,!xx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function iv(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;c!==null;){if(l=Ma(c),l===null)return;if(d=l.tag,d===5||d===6){r=i=l;continue e}c=c.parentNode}}r=r.return}wE(function(){var h=i,f=Ab(n),p=[];e:{var g=QE.get(e);if(g!==void 0){var b=Ob,j=e;switch(e){case"keypress":if(Cp(n)===0)break e;case"keydown":case"keyup":b=O8;break;case"focusin":j="focus",b=Xy;break;case"focusout":j="blur",b=Xy;break;case"beforeblur":case"afterblur":b=Xy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=fS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=C8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=B8;break;case qE:case ZE:case GE:b=T8;break;case KE:b=$8;break;case"scroll":b=S8;break;case"wheel":b=H8;break;case"copy":case"cut":case"paste":b=E8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=mS}var _=(t&4)!==0,w=!_&&e==="scroll",S=_?g!==null?g+"Capture":null:g;_=[];for(var x=h,N;x!==null;){N=x;var P=N.stateNode;if(N.tag===5&&P!==null&&(N=P,S!==null&&(P=zd(x,S),P!=null&&_.push(Gd(x,P,N)))),w)break;x=x.return}0<_.length&&(g=new b(g,j,null,n,f),p.push({event:g,listeners:_}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",g&&n!==yx&&(j=n.relatedTarget||n.fromElement)&&(Ma(j)||j[oo]))break e;if((b||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,b?(j=n.relatedTarget||n.toElement,b=h,j=j?Ma(j):null,j!==null&&(w=jl(j),j!==w||j.tag!==5&&j.tag!==6)&&(j=null)):(b=null,j=h),b!==j)){if(_=fS,P="onMouseLeave",S="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(_=mS,P="onPointerLeave",S="onPointerEnter",x="pointer"),w=b==null?g:Xl(b),N=j==null?g:Xl(j),g=new _(P,x+"leave",b,n,f),g.target=w,g.relatedTarget=N,P=null,Ma(f)===h&&(_=new _(S,x+"enter",j,n,f),_.target=N,_.relatedTarget=w,P=_),w=P,b&&j)t:{for(_=b,S=j,x=0,N=_;N;N=Ul(N))x++;for(N=0,P=S;P;P=Ul(P))N++;for(;0<x-N;)_=Ul(_),x--;for(;0<N-x;)S=Ul(S),N--;for(;x--;){if(_===S||S!==null&&_===S.alternate)break t;_=Ul(_),S=Ul(S)}_=null}else _=null;b!==null&&jS(p,g,b,_,!1),j!==null&&w!==null&&jS(p,w,j,_,!0)}}e:{if(g=h?Xl(h):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var E=Y8;else if(vS(g))if(zE)E=tU;else{E=J8;var k=X8}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(E=eU);if(E&&(E=E(e,h))){BE(p,E,n,f);break e}k&&k(e,g,h),e==="focusout"&&(k=g._wrapperState)&&k.controlled&&g.type==="number"&&hx(g,"number",g.value)}switch(k=h?Xl(h):window,e){case"focusin":(vS(k)||k.contentEditable==="true")&&(Ql=k,Nx=h,jd=null);break;case"focusout":jd=Nx=Ql=null;break;case"mousedown":Cx=!0;break;case"contextmenu":case"mouseup":case"dragend":Cx=!1,SS(p,n,f);break;case"selectionchange":if(sU)break;case"keydown":case"keyup":SS(p,n,f)}var M;if(Ub)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Kl?DE(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(OE&&n.locale!=="ko"&&(Kl||z!=="onCompositionStart"?z==="onCompositionEnd"&&Kl&&(M=FE()):(Ho=f,Fb="value"in Ho?Ho.value:Ho.textContent,Kl=!0)),k=nm(h,z),0<k.length&&(z=new pS(z,e,null,n,f),p.push({event:z,listeners:k}),M?z.data=M:(M=UE(n),M!==null&&(z.data=M)))),(M=q8?Z8(e,n):G8(e,n))&&(h=nm(h,"onBeforeInput"),0<h.length&&(f=new pS("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=M))}YE(p,t)})}function Gd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nm(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zd(e,n),i!=null&&r.unshift(Gd(e,i,s)),i=zd(e,t),i!=null&&r.push(Gd(e,i,s))),e=e.return}return r}function Ul(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jS(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var c=n,d=c.alternate,h=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&h!==null&&(c=h,s?(d=zd(n,i),d!=null&&l.unshift(Gd(n,d,c))):s||(d=zd(n,i),d!=null&&l.push(Gd(n,d,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var lU=/\r\n?/g,cU=/\u0000|\uFFFD/g;function PS(e){return(typeof e=="string"?e:""+e).replace(lU,`
`).replace(cU,"")}function Qf(e,t,n){if(t=PS(t),PS(e)!==t&&n)throw Error(he(425))}function rm(){}var jx=null,Px=null;function Tx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kx=typeof setTimeout=="function"?setTimeout:void 0,uU=typeof clearTimeout=="function"?clearTimeout:void 0,TS=typeof Promise=="function"?Promise:void 0,dU=typeof queueMicrotask=="function"?queueMicrotask:typeof TS<"u"?function(e){return TS.resolve(null).then(e).catch(hU)}:kx;function hU(e){setTimeout(function(){throw e})}function ov(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Hd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Hd(t)}function Qo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _u=Math.random().toString(36).slice(2),hi="__reactFiber$"+_u,Kd="__reactProps$"+_u,oo="__reactContainer$"+_u,Ex="__reactEvents$"+_u,fU="__reactListeners$"+_u,pU="__reactHandles$"+_u;function Ma(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[oo]||n[hi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kS(e);e!==null;){if(n=e[hi])return n;e=kS(e)}return t}e=n,n=e.parentNode}return null}function nf(e){return e=e[hi]||e[oo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(he(33))}function Cg(e){return e[Kd]||null}var Ax=[],Jl=-1;function ya(e){return{current:e}}function Ut(e){0>Jl||(e.current=Ax[Jl],Ax[Jl]=null,Jl--)}function It(e,t){Jl++,Ax[Jl]=e.current,e.current=t}var ia={},Kn=ya(ia),Nr=ya(!1),al=ia;function nu(e,t){var n=e.type.contextTypes;if(!n)return ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Cr(e){return e=e.childContextTypes,e!=null}function sm(){Ut(Nr),Ut(Kn)}function ES(e,t,n){if(Kn.current!==ia)throw Error(he(168));It(Kn,t),It(Nr,n)}function JE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(he(108,X6(e)||"Unknown",s));return qt({},n,r)}function im(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ia,al=Kn.current,It(Kn,e),It(Nr,Nr.current),!0}function AS(e,t,n){var r=e.stateNode;if(!r)throw Error(he(169));n?(e=JE(e,t,al),r.__reactInternalMemoizedMergedChildContext=e,Ut(Nr),Ut(Kn),It(Kn,e)):Ut(Nr),It(Nr,n)}var Vi=null,jg=!1,av=!1;function e4(e){Vi===null?Vi=[e]:Vi.push(e)}function mU(e){jg=!0,e4(e)}function va(){if(!av&&Vi!==null){av=!0;var e=0,t=jt;try{var n=Vi;for(jt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vi=null,jg=!1}catch(s){throw Vi!==null&&(Vi=Vi.slice(e+1)),CE(Ib,va),s}finally{jt=t,av=!1}}return null}var ec=[],tc=0,om=null,am=0,ns=[],rs=0,ll=null,eo=1,to="";function Ta(e,t){ec[tc++]=am,ec[tc++]=om,om=e,am=t}function t4(e,t,n){ns[rs++]=eo,ns[rs++]=to,ns[rs++]=ll,ll=e;var r=eo;e=to;var s=32-Os(r)-1;r&=~(1<<s),n+=1;var i=32-Os(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,eo=1<<32-Os(t)+s|n<<s|r,to=i+e}else eo=1<<i|n<<s|r,to=e}function zb(e){e.return!==null&&(Ta(e,1),t4(e,1,0))}function $b(e){for(;e===om;)om=ec[--tc],ec[tc]=null,am=ec[--tc],ec[tc]=null;for(;e===ll;)ll=ns[--rs],ns[rs]=null,to=ns[--rs],ns[rs]=null,eo=ns[--rs],ns[rs]=null}var Dr=null,Or=null,Bt=!1,Is=null;function n4(e,t){var n=is(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function IS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dr=e,Or=Qo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dr=e,Or=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ll!==null?{id:eo,overflow:to}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=is(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dr=e,Or=null,!0):!1;default:return!1}}function Ix(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mx(e){if(Bt){var t=Or;if(t){var n=t;if(!IS(e,t)){if(Ix(e))throw Error(he(418));t=Qo(n.nextSibling);var r=Dr;t&&IS(e,t)?n4(r,n):(e.flags=e.flags&-4097|2,Bt=!1,Dr=e)}}else{if(Ix(e))throw Error(he(418));e.flags=e.flags&-4097|2,Bt=!1,Dr=e}}}function MS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dr=e}function Yf(e){if(e!==Dr)return!1;if(!Bt)return MS(e),Bt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tx(e.type,e.memoizedProps)),t&&(t=Or)){if(Ix(e))throw r4(),Error(he(418));for(;t;)n4(e,t),t=Qo(t.nextSibling)}if(MS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(he(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Or=Qo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Or=null}}else Or=Dr?Qo(e.stateNode.nextSibling):null;return!0}function r4(){for(var e=Or;e;)e=Qo(e.nextSibling)}function ru(){Or=Dr=null,Bt=!1}function Vb(e){Is===null?Is=[e]:Is.push(e)}var gU=mo.ReactCurrentBatchConfig;function Yu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=s.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,e))}return e}function Xf(e,t){throw e=Object.prototype.toString.call(t),Error(he(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function RS(e){var t=e._init;return t(e._payload)}function s4(e){function t(S,x){if(e){var N=S.deletions;N===null?(S.deletions=[x],S.flags|=16):N.push(x)}}function n(S,x){if(!e)return null;for(;x!==null;)t(S,x),x=x.sibling;return null}function r(S,x){for(S=new Map;x!==null;)x.key!==null?S.set(x.key,x):S.set(x.index,x),x=x.sibling;return S}function s(S,x){return S=ea(S,x),S.index=0,S.sibling=null,S}function i(S,x,N){return S.index=N,e?(N=S.alternate,N!==null?(N=N.index,N<x?(S.flags|=2,x):N):(S.flags|=2,x)):(S.flags|=1048576,x)}function l(S){return e&&S.alternate===null&&(S.flags|=2),S}function c(S,x,N,P){return x===null||x.tag!==6?(x=pv(N,S.mode,P),x.return=S,x):(x=s(x,N),x.return=S,x)}function d(S,x,N,P){var E=N.type;return E===Gl?f(S,x,N.props.children,P,N.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Co&&RS(E)===x.type)?(P=s(x,N.props),P.ref=Yu(S,x,N),P.return=S,P):(P=Ip(N.type,N.key,N.props,null,S.mode,P),P.ref=Yu(S,x,N),P.return=S,P)}function h(S,x,N,P){return x===null||x.tag!==4||x.stateNode.containerInfo!==N.containerInfo||x.stateNode.implementation!==N.implementation?(x=mv(N,S.mode,P),x.return=S,x):(x=s(x,N.children||[]),x.return=S,x)}function f(S,x,N,P,E){return x===null||x.tag!==7?(x=sl(N,S.mode,P,E),x.return=S,x):(x=s(x,N),x.return=S,x)}function p(S,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return x=pv(""+x,S.mode,N),x.return=S,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zf:return N=Ip(x.type,x.key,x.props,null,S.mode,N),N.ref=Yu(S,null,x),N.return=S,N;case Zl:return x=mv(x,S.mode,N),x.return=S,x;case Co:var P=x._init;return p(S,P(x._payload),N)}if(dd(x)||qu(x))return x=sl(x,S.mode,N,null),x.return=S,x;Xf(S,x)}return null}function g(S,x,N,P){var E=x!==null?x.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return E!==null?null:c(S,x,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case zf:return N.key===E?d(S,x,N,P):null;case Zl:return N.key===E?h(S,x,N,P):null;case Co:return E=N._init,g(S,x,E(N._payload),P)}if(dd(N)||qu(N))return E!==null?null:f(S,x,N,P,null);Xf(S,N)}return null}function b(S,x,N,P,E){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(N)||null,c(x,S,""+P,E);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case zf:return S=S.get(P.key===null?N:P.key)||null,d(x,S,P,E);case Zl:return S=S.get(P.key===null?N:P.key)||null,h(x,S,P,E);case Co:var k=P._init;return b(S,x,N,k(P._payload),E)}if(dd(P)||qu(P))return S=S.get(N)||null,f(x,S,P,E,null);Xf(x,P)}return null}function j(S,x,N,P){for(var E=null,k=null,M=x,z=x=0,D=null;M!==null&&z<N.length;z++){M.index>z?(D=M,M=null):D=M.sibling;var F=g(S,M,N[z],P);if(F===null){M===null&&(M=D);break}e&&M&&F.alternate===null&&t(S,M),x=i(F,x,z),k===null?E=F:k.sibling=F,k=F,M=D}if(z===N.length)return n(S,M),Bt&&Ta(S,z),E;if(M===null){for(;z<N.length;z++)M=p(S,N[z],P),M!==null&&(x=i(M,x,z),k===null?E=M:k.sibling=M,k=M);return Bt&&Ta(S,z),E}for(M=r(S,M);z<N.length;z++)D=b(M,S,z,N[z],P),D!==null&&(e&&D.alternate!==null&&M.delete(D.key===null?z:D.key),x=i(D,x,z),k===null?E=D:k.sibling=D,k=D);return e&&M.forEach(function(J){return t(S,J)}),Bt&&Ta(S,z),E}function _(S,x,N,P){var E=qu(N);if(typeof E!="function")throw Error(he(150));if(N=E.call(N),N==null)throw Error(he(151));for(var k=E=null,M=x,z=x=0,D=null,F=N.next();M!==null&&!F.done;z++,F=N.next()){M.index>z?(D=M,M=null):D=M.sibling;var J=g(S,M,F.value,P);if(J===null){M===null&&(M=D);break}e&&M&&J.alternate===null&&t(S,M),x=i(J,x,z),k===null?E=J:k.sibling=J,k=J,M=D}if(F.done)return n(S,M),Bt&&Ta(S,z),E;if(M===null){for(;!F.done;z++,F=N.next())F=p(S,F.value,P),F!==null&&(x=i(F,x,z),k===null?E=F:k.sibling=F,k=F);return Bt&&Ta(S,z),E}for(M=r(S,M);!F.done;z++,F=N.next())F=b(M,S,z,F.value,P),F!==null&&(e&&F.alternate!==null&&M.delete(F.key===null?z:F.key),x=i(F,x,z),k===null?E=F:k.sibling=F,k=F);return e&&M.forEach(function(H){return t(S,H)}),Bt&&Ta(S,z),E}function w(S,x,N,P){if(typeof N=="object"&&N!==null&&N.type===Gl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case zf:e:{for(var E=N.key,k=x;k!==null;){if(k.key===E){if(E=N.type,E===Gl){if(k.tag===7){n(S,k.sibling),x=s(k,N.props.children),x.return=S,S=x;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Co&&RS(E)===k.type){n(S,k.sibling),x=s(k,N.props),x.ref=Yu(S,k,N),x.return=S,S=x;break e}n(S,k);break}else t(S,k);k=k.sibling}N.type===Gl?(x=sl(N.props.children,S.mode,P,N.key),x.return=S,S=x):(P=Ip(N.type,N.key,N.props,null,S.mode,P),P.ref=Yu(S,x,N),P.return=S,S=P)}return l(S);case Zl:e:{for(k=N.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===N.containerInfo&&x.stateNode.implementation===N.implementation){n(S,x.sibling),x=s(x,N.children||[]),x.return=S,S=x;break e}else{n(S,x);break}else t(S,x);x=x.sibling}x=mv(N,S.mode,P),x.return=S,S=x}return l(S);case Co:return k=N._init,w(S,x,k(N._payload),P)}if(dd(N))return j(S,x,N,P);if(qu(N))return _(S,x,N,P);Xf(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,x!==null&&x.tag===6?(n(S,x.sibling),x=s(x,N),x.return=S,S=x):(n(S,x),x=pv(N,S.mode,P),x.return=S,S=x),l(S)):n(S,x)}return w}var su=s4(!0),i4=s4(!1),lm=ya(null),cm=null,nc=null,Hb=null;function Wb(){Hb=nc=cm=null}function qb(e){var t=lm.current;Ut(lm),e._currentValue=t}function Rx(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dc(e,t){cm=e,Hb=nc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wr=!0),e.firstContext=null)}function us(e){var t=e._currentValue;if(Hb!==e)if(e={context:e,memoizedValue:t,next:null},nc===null){if(cm===null)throw Error(he(308));nc=e,cm.dependencies={lanes:0,firstContext:e}}else nc=nc.next=e;return t}var Ra=null;function Zb(e){Ra===null?Ra=[e]:Ra.push(e)}function o4(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Zb(t)):(n.next=s.next,s.next=n),t.interleaved=n,ao(e,r)}function ao(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jo=!1;function Gb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ao(e,n)}return s=r.interleaved,s===null?(t.next=t,Zb(r)):(t.next=s.next,s.next=t),r.interleaved=t,ao(e,n)}function jp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mb(e,n)}}function LS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function um(e,t,n,r){var s=e.updateQueue;jo=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var d=c,h=d.next;d.next=null,l===null?i=h:l.next=h,l=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==l&&(c===null?f.firstBaseUpdate=h:c.next=h,f.lastBaseUpdate=d))}if(i!==null){var p=s.baseState;l=0,f=h=d=null,c=i;do{var g=c.lane,b=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,_=c;switch(g=t,b=n,_.tag){case 1:if(j=_.payload,typeof j=="function"){p=j.call(b,p,g);break e}p=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=_.payload,g=typeof j=="function"?j.call(b,p,g):j,g==null)break e;p=qt({},p,g);break e;case 2:jo=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else b={eventTime:b,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(h=f=b,d=p):f=f.next=b,l|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(d=p),s.baseState=d,s.firstBaseUpdate=h,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ul|=l,e.lanes=l,e.memoizedState=p}}function FS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(he(191,s));s.call(r)}}}var rf={},xi=ya(rf),Qd=ya(rf),Yd=ya(rf);function La(e){if(e===rf)throw Error(he(174));return e}function Kb(e,t){switch(It(Yd,t),It(Qd,e),It(xi,rf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:px(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=px(t,e)}Ut(xi),It(xi,t)}function iu(){Ut(xi),Ut(Qd),Ut(Yd)}function l4(e){La(Yd.current);var t=La(xi.current),n=px(t,e.type);t!==n&&(It(Qd,e),It(xi,n))}function Qb(e){Qd.current===e&&(Ut(xi),Ut(Qd))}var Ht=ya(0);function dm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lv=[];function Yb(){for(var e=0;e<lv.length;e++)lv[e]._workInProgressVersionPrimary=null;lv.length=0}var Pp=mo.ReactCurrentDispatcher,cv=mo.ReactCurrentBatchConfig,cl=0,Wt=null,gn=null,Nn=null,hm=!1,Pd=!1,Xd=0,yU=0;function $n(){throw Error(he(321))}function Xb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bs(e[n],t[n]))return!1;return!0}function Jb(e,t,n,r,s,i){if(cl=i,Wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pp.current=e===null||e.memoizedState===null?wU:_U,e=n(r,s),Pd){i=0;do{if(Pd=!1,Xd=0,25<=i)throw Error(he(301));i+=1,Nn=gn=null,t.updateQueue=null,Pp.current=SU,e=n(r,s)}while(Pd)}if(Pp.current=fm,t=gn!==null&&gn.next!==null,cl=0,Nn=gn=Wt=null,hm=!1,t)throw Error(he(300));return e}function ew(){var e=Xd!==0;return Xd=0,e}function ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Wt.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function ds(){if(gn===null){var e=Wt.alternate;e=e!==null?e.memoizedState:null}else e=gn.next;var t=Nn===null?Wt.memoizedState:Nn.next;if(t!==null)Nn=t,gn=e;else{if(e===null)throw Error(he(310));gn=e,e={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},Nn===null?Wt.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}function Jd(e,t){return typeof t=="function"?t(e):t}function uv(e){var t=ds(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=gn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=l=null,d=null,h=i;do{var f=h.lane;if((cl&f)===f)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=p,l=r):d=d.next=p,Wt.lanes|=f,ul|=f}h=h.next}while(h!==null&&h!==i);d===null?l=r:d.next=c,Bs(r,t.memoizedState)||(wr=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Wt.lanes|=i,ul|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function dv(e){var t=ds(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);Bs(i,t.memoizedState)||(wr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function c4(){}function u4(e,t){var n=Wt,r=ds(),s=t(),i=!Bs(r.memoizedState,s);if(i&&(r.memoizedState=s,wr=!0),r=r.queue,tw(f4.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,eh(9,h4.bind(null,n,r,s,t),void 0,null),Cn===null)throw Error(he(349));cl&30||d4(n,t,s)}return s}function d4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Wt.updateQueue,t===null?(t={lastEffect:null,stores:null},Wt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function h4(e,t,n,r){t.value=n,t.getSnapshot=r,p4(t)&&m4(e)}function f4(e,t,n){return n(function(){p4(t)&&m4(e)})}function p4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bs(e,n)}catch{return!0}}function m4(e){var t=ao(e,1);t!==null&&Ds(t,e,1,-1)}function OS(e){var t=ni();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jd,lastRenderedState:e},t.queue=e,e=e.dispatch=bU.bind(null,Wt,e),[t.memoizedState,e]}function eh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Wt.updateQueue,t===null?(t={lastEffect:null,stores:null},Wt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function g4(){return ds().memoizedState}function Tp(e,t,n,r){var s=ni();Wt.flags|=e,s.memoizedState=eh(1|t,n,void 0,r===void 0?null:r)}function Pg(e,t,n,r){var s=ds();r=r===void 0?null:r;var i=void 0;if(gn!==null){var l=gn.memoizedState;if(i=l.destroy,r!==null&&Xb(r,l.deps)){s.memoizedState=eh(t,n,i,r);return}}Wt.flags|=e,s.memoizedState=eh(1|t,n,i,r)}function DS(e,t){return Tp(8390656,8,e,t)}function tw(e,t){return Pg(2048,8,e,t)}function y4(e,t){return Pg(4,2,e,t)}function v4(e,t){return Pg(4,4,e,t)}function x4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function b4(e,t,n){return n=n!=null?n.concat([e]):null,Pg(4,4,x4.bind(null,t,e),n)}function nw(){}function w4(e,t){var n=ds();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _4(e,t){var n=ds();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function S4(e,t,n){return cl&21?(Bs(n,t)||(n=TE(),Wt.lanes|=n,ul|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wr=!0),e.memoizedState=n)}function vU(e,t){var n=jt;jt=n!==0&&4>n?n:4,e(!0);var r=cv.transition;cv.transition={};try{e(!1),t()}finally{jt=n,cv.transition=r}}function N4(){return ds().memoizedState}function xU(e,t,n){var r=Jo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C4(e))j4(t,n);else if(n=o4(e,t,n,r),n!==null){var s=ar();Ds(n,e,r,s),P4(n,t,r)}}function bU(e,t,n){var r=Jo(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C4(e))j4(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,n);if(s.hasEagerState=!0,s.eagerState=c,Bs(c,l)){var d=t.interleaved;d===null?(s.next=s,Zb(t)):(s.next=d.next,d.next=s),t.interleaved=s;return}}catch{}finally{}n=o4(e,t,s,r),n!==null&&(s=ar(),Ds(n,e,r,s),P4(n,t,r))}}function C4(e){var t=e.alternate;return e===Wt||t!==null&&t===Wt}function j4(e,t){Pd=hm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function P4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mb(e,n)}}var fm={readContext:us,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},wU={readContext:us,useCallback:function(e,t){return ni().memoizedState=[e,t===void 0?null:t],e},useContext:us,useEffect:DS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Tp(4194308,4,x4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tp(4,2,e,t)},useMemo:function(e,t){var n=ni();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ni();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xU.bind(null,Wt,e),[r.memoizedState,e]},useRef:function(e){var t=ni();return e={current:e},t.memoizedState=e},useState:OS,useDebugValue:nw,useDeferredValue:function(e){return ni().memoizedState=e},useTransition:function(){var e=OS(!1),t=e[0];return e=vU.bind(null,e[1]),ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Wt,s=ni();if(Bt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=t(),Cn===null)throw Error(he(349));cl&30||d4(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,DS(f4.bind(null,r,i,e),[e]),r.flags|=2048,eh(9,h4.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ni(),t=Cn.identifierPrefix;if(Bt){var n=to,r=eo;n=(r&~(1<<32-Os(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_U={readContext:us,useCallback:w4,useContext:us,useEffect:tw,useImperativeHandle:b4,useInsertionEffect:y4,useLayoutEffect:v4,useMemo:_4,useReducer:uv,useRef:g4,useState:function(){return uv(Jd)},useDebugValue:nw,useDeferredValue:function(e){var t=ds();return S4(t,gn.memoizedState,e)},useTransition:function(){var e=uv(Jd)[0],t=ds().memoizedState;return[e,t]},useMutableSource:c4,useSyncExternalStore:u4,useId:N4,unstable_isNewReconciler:!1},SU={readContext:us,useCallback:w4,useContext:us,useEffect:tw,useImperativeHandle:b4,useInsertionEffect:y4,useLayoutEffect:v4,useMemo:_4,useReducer:dv,useRef:g4,useState:function(){return dv(Jd)},useDebugValue:nw,useDeferredValue:function(e){var t=ds();return gn===null?t.memoizedState=e:S4(t,gn.memoizedState,e)},useTransition:function(){var e=dv(Jd)[0],t=ds().memoizedState;return[e,t]},useMutableSource:c4,useSyncExternalStore:u4,useId:N4,unstable_isNewReconciler:!1};function bs(e,t){if(e&&e.defaultProps){t=qt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Lx(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tg={isMounted:function(e){return(e=e._reactInternals)?jl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ar(),s=Jo(e),i=ro(r,s);i.payload=t,n!=null&&(i.callback=n),t=Yo(e,i,s),t!==null&&(Ds(t,e,s,r),jp(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ar(),s=Jo(e),i=ro(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Yo(e,i,s),t!==null&&(Ds(t,e,s,r),jp(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ar(),r=Jo(e),s=ro(n,r);s.tag=2,t!=null&&(s.callback=t),t=Yo(e,s,r),t!==null&&(Ds(t,e,r,n),jp(t,e,r))}};function US(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!qd(n,r)||!qd(s,i):!0}function T4(e,t,n){var r=!1,s=ia,i=t.contextType;return typeof i=="object"&&i!==null?i=us(i):(s=Cr(t)?al:Kn.current,r=t.contextTypes,i=(r=r!=null)?nu(e,s):ia),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function BS(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Tg.enqueueReplaceState(t,t.state,null)}function Fx(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Gb(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=us(i):(i=Cr(t)?al:Kn.current,s.context=nu(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Lx(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Tg.enqueueReplaceState(s,s.state,null),um(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ou(e,t){try{var n="",r=t;do n+=Y6(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function hv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ox(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var NU=typeof WeakMap=="function"?WeakMap:Map;function k4(e,t,n){n=ro(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mm||(mm=!0,Zx=r),Ox(e,t)},n}function E4(e,t,n){n=ro(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ox(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ox(e,t),typeof r!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function zS(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new NU;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=DU.bind(null,e,t,n),t.then(e,e))}function $S(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function VS(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ro(-1,1),t.tag=2,Yo(n,t,1))),n.lanes|=1),e)}var CU=mo.ReactCurrentOwner,wr=!1;function rr(e,t,n,r){t.child=e===null?i4(t,null,n,r):su(t,e.child,n,r)}function HS(e,t,n,r,s){n=n.render;var i=t.ref;return dc(t,s),r=Jb(e,t,n,r,i,s),n=ew(),e!==null&&!wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lo(e,t,s)):(Bt&&n&&zb(t),t.flags|=1,rr(e,t,r,s),t.child)}function WS(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!uw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,A4(e,t,i,r,s)):(e=Ip(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:qd,n(l,r)&&e.ref===t.ref)return lo(e,t,s)}return t.flags|=1,e=ea(i,r),e.ref=t.ref,e.return=t,t.child=e}function A4(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(qd(i,r)&&e.ref===t.ref)if(wr=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(wr=!0);else return t.lanes=e.lanes,lo(e,t,s)}return Dx(e,t,n,r,s)}function I4(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(sc,Er),Er|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,It(sc,Er),Er|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,It(sc,Er),Er|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,It(sc,Er),Er|=r;return rr(e,t,s,n),t.child}function M4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Dx(e,t,n,r,s){var i=Cr(n)?al:Kn.current;return i=nu(t,i),dc(t,s),n=Jb(e,t,n,r,i,s),r=ew(),e!==null&&!wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lo(e,t,s)):(Bt&&r&&zb(t),t.flags|=1,rr(e,t,n,s),t.child)}function qS(e,t,n,r,s){if(Cr(n)){var i=!0;im(t)}else i=!1;if(dc(t,s),t.stateNode===null)kp(e,t),T4(t,n,r),Fx(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var d=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=us(h):(h=Cr(n)?al:Kn.current,h=nu(t,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==h)&&BS(t,l,r,h),jo=!1;var g=t.memoizedState;l.state=g,um(t,r,l,s),d=t.memoizedState,c!==r||g!==d||Nr.current||jo?(typeof f=="function"&&(Lx(t,n,f,r),d=t.memoizedState),(c=jo||US(t,n,c,r,g,d,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=h,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,a4(e,t),c=t.memoizedProps,h=t.type===t.elementType?c:bs(t.type,c),l.props=h,p=t.pendingProps,g=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=us(d):(d=Cr(n)?al:Kn.current,d=nu(t,d));var b=n.getDerivedStateFromProps;(f=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==p||g!==d)&&BS(t,l,r,d),jo=!1,g=t.memoizedState,l.state=g,um(t,r,l,s);var j=t.memoizedState;c!==p||g!==j||Nr.current||jo?(typeof b=="function"&&(Lx(t,n,b,r),j=t.memoizedState),(h=jo||US(t,n,h,r,g,j,d)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,j,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,j,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),l.props=r,l.state=j,l.context=d,r=h):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ux(e,t,n,r,i,s)}function Ux(e,t,n,r,s,i){M4(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&AS(t,n,!1),lo(e,t,i);r=t.stateNode,CU.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=su(t,e.child,null,i),t.child=su(t,null,c,i)):rr(e,t,c,i),t.memoizedState=r.state,s&&AS(t,n,!0),t.child}function R4(e){var t=e.stateNode;t.pendingContext?ES(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ES(e,t.context,!1),Kb(e,t.containerInfo)}function ZS(e,t,n,r,s){return ru(),Vb(s),t.flags|=256,rr(e,t,n,r),t.child}var Bx={dehydrated:null,treeContext:null,retryLane:0};function zx(e){return{baseLanes:e,cachePool:null,transitions:null}}function L4(e,t,n){var r=t.pendingProps,s=Ht.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),It(Ht,s&1),e===null)return Mx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ag(l,r,0,null),e=sl(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=zx(n),t.memoizedState=Bx,e):rw(t,l));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return jU(e,t,l,r,c,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,c=s.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=ea(s,d),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=ea(c,i):(i=sl(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?zx(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Bx,r}return i=e.child,e=i.sibling,r=ea(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rw(e,t){return t=Ag({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jf(e,t,n,r){return r!==null&&Vb(r),su(t,e.child,null,n),e=rw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jU(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=hv(Error(he(422))),Jf(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ag({mode:"visible",children:r.children},s,0,null),i=sl(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&su(t,e.child,null,l),t.child.memoizedState=zx(l),t.memoizedState=Bx,i);if(!(t.mode&1))return Jf(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(he(419)),r=hv(i,r,void 0),Jf(e,t,l,r)}if(c=(l&e.childLanes)!==0,wr||c){if(r=Cn,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ao(e,s),Ds(r,e,s,-1))}return cw(),r=hv(Error(he(421))),Jf(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=UU.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Or=Qo(s.nextSibling),Dr=t,Bt=!0,Is=null,e!==null&&(ns[rs++]=eo,ns[rs++]=to,ns[rs++]=ll,eo=e.id,to=e.overflow,ll=t),t=rw(t,r.children),t.flags|=4096,t)}function GS(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rx(e.return,t,n)}function fv(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function F4(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(rr(e,t,r.children,n),r=Ht.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GS(e,n,t);else if(e.tag===19)GS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(It(Ht,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&dm(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),fv(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&dm(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}fv(t,!0,n,null,i);break;case"together":fv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ul|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(he(153));if(t.child!==null){for(e=t.child,n=ea(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ea(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function PU(e,t,n){switch(t.tag){case 3:R4(t),ru();break;case 5:l4(t);break;case 1:Cr(t.type)&&im(t);break;case 4:Kb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;It(lm,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(It(Ht,Ht.current&1),t.flags|=128,null):n&t.child.childLanes?L4(e,t,n):(It(Ht,Ht.current&1),e=lo(e,t,n),e!==null?e.sibling:null);It(Ht,Ht.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return F4(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),It(Ht,Ht.current),r)break;return null;case 22:case 23:return t.lanes=0,I4(e,t,n)}return lo(e,t,n)}var O4,$x,D4,U4;O4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$x=function(){};D4=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,La(xi.current);var i=null;switch(n){case"input":s=ux(e,s),r=ux(e,r),i=[];break;case"select":s=qt({},s,{value:void 0}),r=qt({},r,{value:void 0}),i=[];break;case"textarea":s=fx(e,s),r=fx(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rm)}mx(n,r);var l;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ud.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var d=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(i||(i=[]),i.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Ot("scroll",e),i||c===d||(i=[])):(i=i||[]).push(h,d))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};U4=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xu(e,t){if(!Bt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function TU(e,t,n){var r=t.pendingProps;switch($b(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(t),null;case 1:return Cr(t.type)&&sm(),Vn(t),null;case 3:return r=t.stateNode,iu(),Ut(Nr),Ut(Kn),Yb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Yf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Is!==null&&(Qx(Is),Is=null))),$x(e,t),Vn(t),null;case 5:Qb(t);var s=La(Yd.current);if(n=t.type,e!==null&&t.stateNode!=null)D4(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(he(166));return Vn(t),null}if(e=La(xi.current),Yf(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[hi]=t,r[Kd]=i,e=(t.mode&1)!==0,n){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(s=0;s<fd.length;s++)Ot(fd[s],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":rS(r,i),Ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ot("invalid",r);break;case"textarea":iS(r,i),Ot("invalid",r)}mx(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Qf(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Qf(r.textContent,c,e),s=["children",""+c]):Ud.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Ot("scroll",r)}switch(n){case"input":$f(r),sS(r,i,!0);break;case"textarea":$f(r),oS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rm)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[Kd]=r,O4(e,t,!1,!1),t.stateNode=e;e:{switch(l=gx(n,r),n){case"dialog":Ot("cancel",e),Ot("close",e),s=r;break;case"iframe":case"object":case"embed":Ot("load",e),s=r;break;case"video":case"audio":for(s=0;s<fd.length;s++)Ot(fd[s],e);s=r;break;case"source":Ot("error",e),s=r;break;case"img":case"image":case"link":Ot("error",e),Ot("load",e),s=r;break;case"details":Ot("toggle",e),s=r;break;case"input":rS(e,r),s=ux(e,r),Ot("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=qt({},r,{value:void 0}),Ot("invalid",e);break;case"textarea":iS(e,r),s=fx(e,r),Ot("invalid",e);break;default:s=r}mx(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?gE(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&pE(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Bd(e,d):typeof d=="number"&&Bd(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ud.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Ot("scroll",e):d!=null&&Pb(e,i,d,l))}switch(n){case"input":$f(e),sS(e,r,!1);break;case"textarea":$f(e),oS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sa(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ac(e,!!r.multiple,i,!1):r.defaultValue!=null&&ac(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=rm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vn(t),null;case 6:if(e&&t.stateNode!=null)U4(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(he(166));if(n=La(Yd.current),La(xi.current),Yf(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(i=r.nodeValue!==n)&&(e=Dr,e!==null))switch(e.tag){case 3:Qf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qf(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hi]=t,t.stateNode=r}return Vn(t),null;case 13:if(Ut(Ht),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Bt&&Or!==null&&t.mode&1&&!(t.flags&128))r4(),ru(),t.flags|=98560,i=!1;else if(i=Yf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(he(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[hi]=t}else ru(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vn(t),i=!1}else Is!==null&&(Qx(Is),Is=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ht.current&1?bn===0&&(bn=3):cw())),t.updateQueue!==null&&(t.flags|=4),Vn(t),null);case 4:return iu(),$x(e,t),e===null&&Zd(t.stateNode.containerInfo),Vn(t),null;case 10:return qb(t.type._context),Vn(t),null;case 17:return Cr(t.type)&&sm(),Vn(t),null;case 19:if(Ut(Ht),i=t.memoizedState,i===null)return Vn(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Xu(i,!1);else{if(bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=dm(e),l!==null){for(t.flags|=128,Xu(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return It(Ht,Ht.current&1|2),t.child}e=e.sibling}i.tail!==null&&nn()>au&&(t.flags|=128,r=!0,Xu(i,!1),t.lanes=4194304)}else{if(!r)if(e=dm(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Bt)return Vn(t),null}else 2*nn()-i.renderingStartTime>au&&n!==1073741824&&(t.flags|=128,r=!0,Xu(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nn(),t.sibling=null,n=Ht.current,It(Ht,r?n&1|2:n&1),t):(Vn(t),null);case 22:case 23:return lw(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Er&1073741824&&(Vn(t),t.subtreeFlags&6&&(t.flags|=8192)):Vn(t),null;case 24:return null;case 25:return null}throw Error(he(156,t.tag))}function kU(e,t){switch($b(t),t.tag){case 1:return Cr(t.type)&&sm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return iu(),Ut(Nr),Ut(Kn),Yb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qb(t),null;case 13:if(Ut(Ht),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(he(340));ru()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ut(Ht),null;case 4:return iu(),null;case 10:return qb(t.type._context),null;case 22:case 23:return lw(),null;case 24:return null;default:return null}}var ep=!1,Wn=!1,EU=typeof WeakSet=="function"?WeakSet:Set,ke=null;function rc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gt(e,t,r)}else n.current=null}function Vx(e,t,n){try{n()}catch(r){Gt(e,t,r)}}var KS=!1;function AU(e,t){if(jx=em,e=HE(),Bb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,h=0,f=0,p=e,g=null;t:for(;;){for(var b;p!==n||s!==0&&p.nodeType!==3||(c=l+s),p!==i||r!==0&&p.nodeType!==3||(d=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(b=p.firstChild)!==null;)g=p,p=b;for(;;){if(p===e)break t;if(g===n&&++h===s&&(c=l),g===i&&++f===r&&(d=l),(b=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=b}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Px={focusedElem:e,selectionRange:n},em=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var _=j.memoizedProps,w=j.memoizedState,S=t.stateNode,x=S.getSnapshotBeforeUpdate(t.elementType===t.type?_:bs(t.type,_),w);S.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(P){Gt(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return j=KS,KS=!1,j}function Td(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vx(t,n,i)}s=s.next}while(s!==r)}}function kg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function B4(e){var t=e.alternate;t!==null&&(e.alternate=null,B4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hi],delete t[Kd],delete t[Ex],delete t[fU],delete t[pU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function z4(e){return e.tag===5||e.tag===3||e.tag===4}function QS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||z4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wx(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rm));else if(r!==4&&(e=e.child,e!==null))for(Wx(e,t,n),e=e.sibling;e!==null;)Wx(e,t,n),e=e.sibling}function qx(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qx(e,t,n),e=e.sibling;e!==null;)qx(e,t,n),e=e.sibling}var Mn=null,ks=!1;function vo(e,t,n){for(n=n.child;n!==null;)$4(e,t,n),n=n.sibling}function $4(e,t,n){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(wg,n)}catch{}switch(n.tag){case 5:Wn||rc(n,t);case 6:var r=Mn,s=ks;Mn=null,vo(e,t,n),Mn=r,ks=s,Mn!==null&&(ks?(e=Mn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&(ks?(e=Mn,n=n.stateNode,e.nodeType===8?ov(e.parentNode,n):e.nodeType===1&&ov(e,n),Hd(e)):ov(Mn,n.stateNode));break;case 4:r=Mn,s=ks,Mn=n.stateNode.containerInfo,ks=!0,vo(e,t,n),Mn=r,ks=s;break;case 0:case 11:case 14:case 15:if(!Wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Vx(n,t,l),s=s.next}while(s!==r)}vo(e,t,n);break;case 1:if(!Wn&&(rc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Gt(n,t,c)}vo(e,t,n);break;case 21:vo(e,t,n);break;case 22:n.mode&1?(Wn=(r=Wn)||n.memoizedState!==null,vo(e,t,n),Wn=r):vo(e,t,n);break;default:vo(e,t,n)}}function YS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new EU),t.forEach(function(r){var s=BU.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ys(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Mn=c.stateNode,ks=!1;break e;case 3:Mn=c.stateNode.containerInfo,ks=!0;break e;case 4:Mn=c.stateNode.containerInfo,ks=!0;break e}c=c.return}if(Mn===null)throw Error(he(160));$4(i,l,s),Mn=null,ks=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(h){Gt(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)V4(t,e),t=t.sibling}function V4(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),ei(e),r&4){try{Td(3,e,e.return),kg(3,e)}catch(_){Gt(e,e.return,_)}try{Td(5,e,e.return)}catch(_){Gt(e,e.return,_)}}break;case 1:ys(t,e),ei(e),r&512&&n!==null&&rc(n,n.return);break;case 5:if(ys(t,e),ei(e),r&512&&n!==null&&rc(n,n.return),e.flags&32){var s=e.stateNode;try{Bd(s,"")}catch(_){Gt(e,e.return,_)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&dE(s,i),gx(c,l);var h=gx(c,i);for(l=0;l<d.length;l+=2){var f=d[l],p=d[l+1];f==="style"?gE(s,p):f==="dangerouslySetInnerHTML"?pE(s,p):f==="children"?Bd(s,p):Pb(s,f,p,h)}switch(c){case"input":dx(s,i);break;case"textarea":hE(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ac(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?ac(s,!!i.multiple,i.defaultValue,!0):ac(s,!!i.multiple,i.multiple?[]:"",!1))}s[Kd]=i}catch(_){Gt(e,e.return,_)}}break;case 6:if(ys(t,e),ei(e),r&4){if(e.stateNode===null)throw Error(he(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(_){Gt(e,e.return,_)}}break;case 3:if(ys(t,e),ei(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hd(t.containerInfo)}catch(_){Gt(e,e.return,_)}break;case 4:ys(t,e),ei(e);break;case 13:ys(t,e),ei(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ow=nn())),r&4&&YS(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Wn=(h=Wn)||f,ys(t,e),Wn=h):ys(t,e),ei(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(ke=e,f=e.child;f!==null;){for(p=ke=f;ke!==null;){switch(g=ke,b=g.child,g.tag){case 0:case 11:case 14:case 15:Td(4,g,g.return);break;case 1:rc(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(_){Gt(r,n,_)}}break;case 5:rc(g,g.return);break;case 22:if(g.memoizedState!==null){JS(p);continue}}b!==null?(b.return=g,ke=b):JS(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,d=p.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=mE("display",l))}catch(_){Gt(e,e.return,_)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(_){Gt(e,e.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ys(t,e),ei(e),r&4&&YS(e);break;case 21:break;default:ys(t,e),ei(e)}}function ei(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(z4(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bd(s,""),r.flags&=-33);var i=QS(e);qx(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,c=QS(e);Wx(e,c,l);break;default:throw Error(he(161))}}catch(d){Gt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IU(e,t,n){ke=e,H4(e)}function H4(e,t,n){for(var r=(e.mode&1)!==0;ke!==null;){var s=ke,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||ep;if(!l){var c=s.alternate,d=c!==null&&c.memoizedState!==null||Wn;c=ep;var h=Wn;if(ep=l,(Wn=d)&&!h)for(ke=s;ke!==null;)l=ke,d=l.child,l.tag===22&&l.memoizedState!==null?eN(s):d!==null?(d.return=l,ke=d):eN(s);for(;i!==null;)ke=i,H4(i),i=i.sibling;ke=s,ep=c,Wn=h}XS(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ke=i):XS(e)}}function XS(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wn||kg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Wn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:bs(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&FS(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}FS(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Hd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}Wn||t.flags&512&&Hx(t)}catch(g){Gt(t,t.return,g)}}if(t===e){ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,ke=n;break}ke=t.return}}function JS(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ke=n;break}ke=t.return}}function eN(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{kg(4,t)}catch(d){Gt(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(d){Gt(t,s,d)}}var i=t.return;try{Hx(t)}catch(d){Gt(t,i,d)}break;case 5:var l=t.return;try{Hx(t)}catch(d){Gt(t,l,d)}}}catch(d){Gt(t,t.return,d)}if(t===e){ke=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ke=c;break}ke=t.return}}var MU=Math.ceil,pm=mo.ReactCurrentDispatcher,sw=mo.ReactCurrentOwner,os=mo.ReactCurrentBatchConfig,xt=0,Cn=null,fn=null,Ln=0,Er=0,sc=ya(0),bn=0,th=null,ul=0,Eg=0,iw=0,kd=null,br=null,ow=0,au=1/0,$i=null,mm=!1,Zx=null,Xo=null,tp=!1,Wo=null,gm=0,Ed=0,Gx=null,Ep=-1,Ap=0;function ar(){return xt&6?nn():Ep!==-1?Ep:Ep=nn()}function Jo(e){return e.mode&1?xt&2&&Ln!==0?Ln&-Ln:gU.transition!==null?(Ap===0&&(Ap=TE()),Ap):(e=jt,e!==0||(e=window.event,e=e===void 0?16:LE(e.type)),e):1}function Ds(e,t,n,r){if(50<Ed)throw Ed=0,Gx=null,Error(he(185));ef(e,n,r),(!(xt&2)||e!==Cn)&&(e===Cn&&(!(xt&2)&&(Eg|=n),bn===4&&Eo(e,Ln)),jr(e,r),n===1&&xt===0&&!(t.mode&1)&&(au=nn()+500,jg&&va()))}function jr(e,t){var n=e.callbackNode;g8(e,t);var r=Jp(e,e===Cn?Ln:0);if(r===0)n!==null&&cS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cS(n),t===1)e.tag===0?mU(tN.bind(null,e)):e4(tN.bind(null,e)),dU(function(){!(xt&6)&&va()}),n=null;else{switch(kE(r)){case 1:n=Ib;break;case 4:n=jE;break;case 16:n=Xp;break;case 536870912:n=PE;break;default:n=Xp}n=X4(n,W4.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function W4(e,t){if(Ep=-1,Ap=0,xt&6)throw Error(he(327));var n=e.callbackNode;if(hc()&&e.callbackNode!==n)return null;var r=Jp(e,e===Cn?Ln:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ym(e,r);else{t=r;var s=xt;xt|=2;var i=Z4();(Cn!==e||Ln!==t)&&($i=null,au=nn()+500,rl(e,t));do try{FU();break}catch(c){q4(e,c)}while(!0);Wb(),pm.current=i,xt=s,fn!==null?t=0:(Cn=null,Ln=0,t=bn)}if(t!==0){if(t===2&&(s=wx(e),s!==0&&(r=s,t=Kx(e,s))),t===1)throw n=th,rl(e,0),Eo(e,r),jr(e,nn()),n;if(t===6)Eo(e,r);else{if(s=e.current.alternate,!(r&30)&&!RU(s)&&(t=ym(e,r),t===2&&(i=wx(e),i!==0&&(r=i,t=Kx(e,i))),t===1))throw n=th,rl(e,0),Eo(e,r),jr(e,nn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(he(345));case 2:ka(e,br,$i);break;case 3:if(Eo(e,r),(r&130023424)===r&&(t=ow+500-nn(),10<t)){if(Jp(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ar(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=kx(ka.bind(null,e,br,$i),t);break}ka(e,br,$i);break;case 4:if(Eo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-Os(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=nn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MU(r/1960))-r,10<r){e.timeoutHandle=kx(ka.bind(null,e,br,$i),r);break}ka(e,br,$i);break;case 5:ka(e,br,$i);break;default:throw Error(he(329))}}}return jr(e,nn()),e.callbackNode===n?W4.bind(null,e):null}function Kx(e,t){var n=kd;return e.current.memoizedState.isDehydrated&&(rl(e,t).flags|=256),e=ym(e,t),e!==2&&(t=br,br=n,t!==null&&Qx(t)),e}function Qx(e){br===null?br=e:br.push.apply(br,e)}function RU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bs(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Eo(e,t){for(t&=~iw,t&=~Eg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Os(t),r=1<<n;e[n]=-1,t&=~r}}function tN(e){if(xt&6)throw Error(he(327));hc();var t=Jp(e,0);if(!(t&1))return jr(e,nn()),null;var n=ym(e,t);if(e.tag!==0&&n===2){var r=wx(e);r!==0&&(t=r,n=Kx(e,r))}if(n===1)throw n=th,rl(e,0),Eo(e,t),jr(e,nn()),n;if(n===6)throw Error(he(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ka(e,br,$i),jr(e,nn()),null}function aw(e,t){var n=xt;xt|=1;try{return e(t)}finally{xt=n,xt===0&&(au=nn()+500,jg&&va())}}function dl(e){Wo!==null&&Wo.tag===0&&!(xt&6)&&hc();var t=xt;xt|=1;var n=os.transition,r=jt;try{if(os.transition=null,jt=1,e)return e()}finally{jt=r,os.transition=n,xt=t,!(xt&6)&&va()}}function lw(){Er=sc.current,Ut(sc)}function rl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uU(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch($b(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sm();break;case 3:iu(),Ut(Nr),Ut(Kn),Yb();break;case 5:Qb(r);break;case 4:iu();break;case 13:Ut(Ht);break;case 19:Ut(Ht);break;case 10:qb(r.type._context);break;case 22:case 23:lw()}n=n.return}if(Cn=e,fn=e=ea(e.current,null),Ln=Er=t,bn=0,th=null,iw=Eg=ul=0,br=kd=null,Ra!==null){for(t=0;t<Ra.length;t++)if(n=Ra[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}Ra=null}return e}function q4(e,t){do{var n=fn;try{if(Wb(),Pp.current=fm,hm){for(var r=Wt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hm=!1}if(cl=0,Nn=gn=Wt=null,Pd=!1,Xd=0,sw.current=null,n===null||n.return===null){bn=1,th=t,fn=null;break}e:{var i=e,l=n.return,c=n,d=t;if(t=Ln,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=$S(l);if(b!==null){b.flags&=-257,VS(b,l,c,i,t),b.mode&1&&zS(i,h,t),t=b,d=h;var j=t.updateQueue;if(j===null){var _=new Set;_.add(d),t.updateQueue=_}else j.add(d);break e}else{if(!(t&1)){zS(i,h,t),cw();break e}d=Error(he(426))}}else if(Bt&&c.mode&1){var w=$S(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),VS(w,l,c,i,t),Vb(ou(d,c));break e}}i=d=ou(d,c),bn!==4&&(bn=2),kd===null?kd=[i]:kd.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var S=k4(i,d,t);LS(i,S);break e;case 1:c=d;var x=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Xo===null||!Xo.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var P=E4(i,c,t);LS(i,P);break e}}i=i.return}while(i!==null)}K4(n)}catch(E){t=E,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function Z4(){var e=pm.current;return pm.current=fm,e===null?fm:e}function cw(){(bn===0||bn===3||bn===2)&&(bn=4),Cn===null||!(ul&268435455)&&!(Eg&268435455)||Eo(Cn,Ln)}function ym(e,t){var n=xt;xt|=2;var r=Z4();(Cn!==e||Ln!==t)&&($i=null,rl(e,t));do try{LU();break}catch(s){q4(e,s)}while(!0);if(Wb(),xt=n,pm.current=r,fn!==null)throw Error(he(261));return Cn=null,Ln=0,bn}function LU(){for(;fn!==null;)G4(fn)}function FU(){for(;fn!==null&&!a8();)G4(fn)}function G4(e){var t=Y4(e.alternate,e,Er);e.memoizedProps=e.pendingProps,t===null?K4(e):fn=t,sw.current=null}function K4(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kU(n,t),n!==null){n.flags&=32767,fn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bn=6,fn=null;return}}else if(n=TU(n,t,Er),n!==null){fn=n;return}if(t=t.sibling,t!==null){fn=t;return}fn=t=e}while(t!==null);bn===0&&(bn=5)}function ka(e,t,n){var r=jt,s=os.transition;try{os.transition=null,jt=1,OU(e,t,n,r)}finally{os.transition=s,jt=r}return null}function OU(e,t,n,r){do hc();while(Wo!==null);if(xt&6)throw Error(he(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(he(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(y8(e,i),e===Cn&&(fn=Cn=null,Ln=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tp||(tp=!0,X4(Xp,function(){return hc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=os.transition,os.transition=null;var l=jt;jt=1;var c=xt;xt|=4,sw.current=null,AU(e,n),V4(n,e),rU(Px),em=!!jx,Px=jx=null,e.current=n,IU(n),l8(),xt=c,jt=l,os.transition=i}else e.current=n;if(tp&&(tp=!1,Wo=e,gm=s),i=e.pendingLanes,i===0&&(Xo=null),d8(n.stateNode),jr(e,nn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mm)throw mm=!1,e=Zx,Zx=null,e;return gm&1&&e.tag!==0&&hc(),i=e.pendingLanes,i&1?e===Gx?Ed++:(Ed=0,Gx=e):Ed=0,va(),null}function hc(){if(Wo!==null){var e=kE(gm),t=os.transition,n=jt;try{if(os.transition=null,jt=16>e?16:e,Wo===null)var r=!1;else{if(e=Wo,Wo=null,gm=0,xt&6)throw Error(he(331));var s=xt;for(xt|=4,ke=e.current;ke!==null;){var i=ke,l=i.child;if(ke.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(ke=h;ke!==null;){var f=ke;switch(f.tag){case 0:case 11:case 15:Td(8,f,i)}var p=f.child;if(p!==null)p.return=f,ke=p;else for(;ke!==null;){f=ke;var g=f.sibling,b=f.return;if(B4(f),f===h){ke=null;break}if(g!==null){g.return=b,ke=g;break}ke=b}}}var j=i.alternate;if(j!==null){var _=j.child;if(_!==null){j.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}ke=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ke=l;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Td(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,ke=S;break e}ke=i.return}}var x=e.current;for(ke=x;ke!==null;){l=ke;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,ke=N;else e:for(l=x;ke!==null;){if(c=ke,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:kg(9,c)}}catch(E){Gt(c,c.return,E)}if(c===l){ke=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,ke=P;break e}ke=c.return}}if(xt=s,va(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(wg,e)}catch{}r=!0}return r}finally{jt=n,os.transition=t}}return!1}function nN(e,t,n){t=ou(n,t),t=k4(e,t,1),e=Yo(e,t,1),t=ar(),e!==null&&(ef(e,1,t),jr(e,t))}function Gt(e,t,n){if(e.tag===3)nN(e,e,n);else for(;t!==null;){if(t.tag===3){nN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xo===null||!Xo.has(r))){e=ou(n,e),e=E4(t,e,1),t=Yo(t,e,1),e=ar(),t!==null&&(ef(t,1,e),jr(t,e));break}}t=t.return}}function DU(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ar(),e.pingedLanes|=e.suspendedLanes&n,Cn===e&&(Ln&n)===n&&(bn===4||bn===3&&(Ln&130023424)===Ln&&500>nn()-ow?rl(e,0):iw|=n),jr(e,t)}function Q4(e,t){t===0&&(e.mode&1?(t=Wf,Wf<<=1,!(Wf&130023424)&&(Wf=4194304)):t=1);var n=ar();e=ao(e,t),e!==null&&(ef(e,t,n),jr(e,n))}function UU(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Q4(e,n)}function BU(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(t),Q4(e,n)}var Y4;Y4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nr.current)wr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wr=!1,PU(e,t,n);wr=!!(e.flags&131072)}else wr=!1,Bt&&t.flags&1048576&&t4(t,am,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;kp(e,t),e=t.pendingProps;var s=nu(t,Kn.current);dc(t,n),s=Jb(null,t,r,e,s,n);var i=ew();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Cr(r)?(i=!0,im(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gb(t),s.updater=Tg,t.stateNode=s,s._reactInternals=t,Fx(t,r,e,n),t=Ux(null,t,r,!0,i,n)):(t.tag=0,Bt&&i&&zb(t),rr(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(kp(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=$U(r),e=bs(r,e),s){case 0:t=Dx(null,t,r,e,n);break e;case 1:t=qS(null,t,r,e,n);break e;case 11:t=HS(null,t,r,e,n);break e;case 14:t=WS(null,t,r,bs(r.type,e),n);break e}throw Error(he(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:bs(r,s),Dx(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:bs(r,s),qS(e,t,r,s,n);case 3:e:{if(R4(t),e===null)throw Error(he(387));r=t.pendingProps,i=t.memoizedState,s=i.element,a4(e,t),um(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ou(Error(he(423)),t),t=ZS(e,t,r,n,s);break e}else if(r!==s){s=ou(Error(he(424)),t),t=ZS(e,t,r,n,s);break e}else for(Or=Qo(t.stateNode.containerInfo.firstChild),Dr=t,Bt=!0,Is=null,n=i4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ru(),r===s){t=lo(e,t,n);break e}rr(e,t,r,n)}t=t.child}return t;case 5:return l4(t),e===null&&Mx(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,Tx(r,s)?l=null:i!==null&&Tx(r,i)&&(t.flags|=32),M4(e,t),rr(e,t,l,n),t.child;case 6:return e===null&&Mx(t),null;case 13:return L4(e,t,n);case 4:return Kb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=su(t,null,r,n):rr(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:bs(r,s),HS(e,t,r,s,n);case 7:return rr(e,t,t.pendingProps,n),t.child;case 8:return rr(e,t,t.pendingProps.children,n),t.child;case 12:return rr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,It(lm,r._currentValue),r._currentValue=l,i!==null)if(Bs(i.value,l)){if(i.children===s.children&&!Nr.current){t=lo(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=ro(-1,n&-n),d.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?d.next=d:(d.next=f.next,f.next=d),h.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Rx(i.return,n,t),c.lanes|=n;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(he(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Rx(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}rr(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,dc(t,n),s=us(s),r=r(s),t.flags|=1,rr(e,t,r,n),t.child;case 14:return r=t.type,s=bs(r,t.pendingProps),s=bs(r.type,s),WS(e,t,r,s,n);case 15:return A4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:bs(r,s),kp(e,t),t.tag=1,Cr(r)?(e=!0,im(t)):e=!1,dc(t,n),T4(t,r,s),Fx(t,r,s,n),Ux(null,t,r,!0,e,n);case 19:return F4(e,t,n);case 22:return I4(e,t,n)}throw Error(he(156,t.tag))};function X4(e,t){return CE(e,t)}function zU(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(e,t,n,r){return new zU(e,t,n,r)}function uw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $U(e){if(typeof e=="function")return uw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kb)return 11;if(e===Eb)return 14}return 2}function ea(e,t){var n=e.alternate;return n===null?(n=is(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ip(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")uw(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Gl:return sl(n.children,s,i,t);case Tb:l=8,s|=8;break;case ox:return e=is(12,n,t,s|2),e.elementType=ox,e.lanes=i,e;case ax:return e=is(13,n,t,s),e.elementType=ax,e.lanes=i,e;case lx:return e=is(19,n,t,s),e.elementType=lx,e.lanes=i,e;case lE:return Ag(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oE:l=10;break e;case aE:l=9;break e;case kb:l=11;break e;case Eb:l=14;break e;case Co:l=16,r=null;break e}throw Error(he(130,e==null?e:typeof e,""))}return t=is(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function sl(e,t,n,r){return e=is(7,e,r,t),e.lanes=n,e}function Ag(e,t,n,r){return e=is(22,e,r,t),e.elementType=lE,e.lanes=n,e.stateNode={isHidden:!1},e}function pv(e,t,n){return e=is(6,e,null,t),e.lanes=n,e}function mv(e,t,n){return t=is(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function VU(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ky(0),this.expirationTimes=Ky(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ky(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dw(e,t,n,r,s,i,l,c,d){return e=new VU(e,t,n,c,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=is(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gb(i),e}function HU(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function J4(e){if(!e)return ia;e=e._reactInternals;e:{if(jl(e)!==e||e.tag!==1)throw Error(he(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Cr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(he(171))}if(e.tag===1){var n=e.type;if(Cr(n))return JE(e,n,t)}return t}function eA(e,t,n,r,s,i,l,c,d){return e=dw(n,r,!0,e,s,i,l,c,d),e.context=J4(null),n=e.current,r=ar(),s=Jo(n),i=ro(r,s),i.callback=t??null,Yo(n,i,s),e.current.lanes=s,ef(e,s,r),jr(e,r),e}function Ig(e,t,n,r){var s=t.current,i=ar(),l=Jo(s);return n=J4(n),t.context===null?t.context=n:t.pendingContext=n,t=ro(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yo(s,t,l),e!==null&&(Ds(e,s,l,i),jp(e,s,l)),l}function vm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hw(e,t){rN(e,t),(e=e.alternate)&&rN(e,t)}function WU(){return null}var tA=typeof reportError=="function"?reportError:function(e){console.error(e)};function fw(e){this._internalRoot=e}Mg.prototype.render=fw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(he(409));Ig(e,t,null,null)};Mg.prototype.unmount=fw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dl(function(){Ig(null,e,null,null)}),t[oo]=null}};function Mg(e){this._internalRoot=e}Mg.prototype.unstable_scheduleHydration=function(e){if(e){var t=IE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ko.length&&t!==0&&t<ko[n].priority;n++);ko.splice(n,0,e),n===0&&RE(e)}};function pw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Rg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sN(){}function qU(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=vm(l);i.call(h)}}var l=eA(t,r,e,0,null,!1,!1,"",sN);return e._reactRootContainer=l,e[oo]=l.current,Zd(e.nodeType===8?e.parentNode:e),dl(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=vm(d);c.call(h)}}var d=dw(e,0,!1,null,null,!1,!1,"",sN);return e._reactRootContainer=d,e[oo]=d.current,Zd(e.nodeType===8?e.parentNode:e),dl(function(){Ig(t,d,n,r)}),d}function Lg(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var c=s;s=function(){var d=vm(l);c.call(d)}}Ig(t,l,e,s)}else l=qU(n,t,e,s,r);return vm(l)}EE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hd(t.pendingLanes);n!==0&&(Mb(t,n|1),jr(t,nn()),!(xt&6)&&(au=nn()+500,va()))}break;case 13:dl(function(){var r=ao(e,1);if(r!==null){var s=ar();Ds(r,e,1,s)}}),hw(e,1)}};Rb=function(e){if(e.tag===13){var t=ao(e,134217728);if(t!==null){var n=ar();Ds(t,e,134217728,n)}hw(e,134217728)}};AE=function(e){if(e.tag===13){var t=Jo(e),n=ao(e,t);if(n!==null){var r=ar();Ds(n,e,t,r)}hw(e,t)}};IE=function(){return jt};ME=function(e,t){var n=jt;try{return jt=e,t()}finally{jt=n}};vx=function(e,t,n){switch(t){case"input":if(dx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Cg(r);if(!s)throw Error(he(90));uE(r),dx(r,s)}}}break;case"textarea":hE(e,n);break;case"select":t=n.value,t!=null&&ac(e,!!n.multiple,t,!1)}};xE=aw;bE=dl;var ZU={usingClientEntryPoint:!1,Events:[nf,Xl,Cg,yE,vE,aw]},Ju={findFiberByHostInstance:Ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GU={bundleType:Ju.bundleType,version:Ju.version,rendererPackageName:Ju.rendererPackageName,rendererConfig:Ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=SE(e),e===null?null:e.stateNode},findFiberByHostInstance:Ju.findFiberByHostInstance||WU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!np.isDisabled&&np.supportsFiber)try{wg=np.inject(GU),vi=np}catch{}}Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZU;Hr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pw(t))throw Error(he(200));return HU(e,t,null,n)};Hr.createRoot=function(e,t){if(!pw(e))throw Error(he(299));var n=!1,r="",s=tA;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=dw(e,1,!1,null,null,n,!1,r,s),e[oo]=t.current,Zd(e.nodeType===8?e.parentNode:e),new fw(t)};Hr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(he(188)):(e=Object.keys(e).join(","),Error(he(268,e)));return e=SE(t),e=e===null?null:e.stateNode,e};Hr.flushSync=function(e){return dl(e)};Hr.hydrate=function(e,t,n){if(!Rg(t))throw Error(he(200));return Lg(null,e,t,!0,n)};Hr.hydrateRoot=function(e,t,n){if(!pw(e))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=tA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=eA(t,null,e,1,n??null,s,!1,i,l),e[oo]=t.current,Zd(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Mg(t)};Hr.render=function(e,t,n){if(!Rg(t))throw Error(he(200));return Lg(null,e,t,!1,n)};Hr.unmountComponentAtNode=function(e){if(!Rg(e))throw Error(he(40));return e._reactRootContainer?(dl(function(){Lg(null,null,e,!1,function(){e._reactRootContainer=null,e[oo]=null})}),!0):!1};Hr.unstable_batchedUpdates=aw;Hr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Rg(n))throw Error(he(200));if(e==null||e._reactInternals===void 0)throw Error(he(38));return Lg(e,t,n,!1,r)};Hr.version="18.3.1-next-f1338f8080-20240426";function nA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nA)}catch(e){console.error(e)}}nA(),nE.exports=Hr;var Pl=nE.exports;const KU=Ei(Pl);var rA,iN=Pl;rA=iN.createRoot,iN.hydrateRoot;function QU(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,i,l=[],c="",d=e.split("/");for(d[0]||d.shift();s=d.shift();)n=s[0],n==="*"?(l.push(n),c+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),l.push(s.substring(1,~r?r:~i?i:s.length)),c+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(c+=(~r?"?":"")+"\\"+s.substring(i))):c+="/"+s;return{keys:l,pattern:new RegExp("^"+c+(t?"(?=$|/)":"/?$"),"i")}}var sA={exports:{}},iA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lu=v;function YU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var XU=typeof Object.is=="function"?Object.is:YU,JU=lu.useState,eB=lu.useEffect,tB=lu.useLayoutEffect,nB=lu.useDebugValue;function rB(e,t){var n=t(),r=JU({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return tB(function(){s.value=n,s.getSnapshot=t,gv(s)&&i({inst:s})},[e,n,t]),eB(function(){return gv(s)&&i({inst:s}),e(function(){gv(s)&&i({inst:s})})},[e]),nB(n),n}function gv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!XU(e,n)}catch{return!0}}function sB(e,t){return t()}var iB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sB:rB;iA.useSyncExternalStore=lu.useSyncExternalStore!==void 0?lu.useSyncExternalStore:iB;sA.exports=iA;var oA=sA.exports;const oB=Nb.useInsertionEffect,aB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aA=aB?v.useLayoutEffect:v.useEffect,lB=oB||aA,mw=e=>{const t=v.useRef([e,(...n)=>t[0](...n)]).current;return lB(()=>{t[0]=e}),t[1]},cB="popstate",gw="pushState",yw="replaceState",uB="hashchange",oN=[cB,gw,yw,uB],dB=e=>{for(const t of oN)addEventListener(t,e);return()=>{for(const t of oN)removeEventListener(t,e)}},lA=(e,t)=>oA.useSyncExternalStore(dB,e,t),hB=()=>location.search,fB=({ssrSearch:e=""}={})=>lA(hB,()=>e),aN=()=>location.pathname,pB=({ssrPath:e}={})=>lA(aN,e?()=>e:aN),mB=(e,{replace:t=!1,state:n=null}={})=>history[t?yw:gw](n,"",e),gB=(e={})=>[pB(e),mB],lN=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[lN]>"u"){for(const e of[gw,yw]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,lN,{value:!0})}const yB=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",cA=(e="")=>e==="/"?"":e,vB=(e,t)=>e[0]==="~"?e.slice(1):cA(t)+e,xB=(e="",t)=>yB(cN(cA(e)),cN(t)),cN=e=>{try{return decodeURI(e)}catch{return e}},uA={hook:gB,searchHook:fB,parser:QU,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},dA=v.createContext(uA),Su=()=>v.useContext(dA),hA={},fA=v.createContext(hA),sf=()=>v.useContext(fA),of=e=>{const[t,n]=e.hook(e);return[xB(e.base,t),mw((r,s)=>n(vB(r,e.base),s))]},qr=()=>of(Su()),pA=(e,t,n,r)=>{const{pattern:s,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),l=s.exec(n)||[],[c,...d]=l;return c!==void 0?[!0,(()=>{const h=i!==!1?Object.fromEntries(i.map((p,g)=>[p,d[g]])):l.groups;let f={...d};return h&&Object.assign(f,h),f})(),...r?[c]:[]]:[!1,null]},bB=({children:e,...t})=>{var f,p;const n=Su(),r=t.hook?uA:n;let s=r;const[i,l]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=i),t.hrefs=t.hrefs??((p=t.hook)==null?void 0:p.hrefs);let c=v.useRef({}),d=c.current,h=d;for(let g in r){const b=g==="base"?r[g]+(t[g]||""):t[g]||r[g];d===h&&b!==h[g]&&(c.current=h={...h}),h[g]=b,(b!==r[g]||b!==s[g])&&(s=h)}return v.createElement(dA.Provider,{value:s,children:e})},uN=({children:e,component:t},n)=>t?v.createElement(t,{params:n}):typeof e=="function"?e(n):e,wB=e=>{let t=v.useRef(hA);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,s])=>s!==n[r])?e:n},xo=({path:e,nest:t,match:n,...r})=>{const s=Su(),[i]=of(s),[l,c,d]=n??pA(s.parser,e,i,t),h=wB({...sf(),...c});if(!l)return null;const f=d?v.createElement(bB,{base:d},uN(r,h)):uN(r,h);return v.createElement(fA.Provider,{value:h,children:f})},wt=v.forwardRef((e,t)=>{const n=Su(),[r,s]=of(n),{to:i="",href:l=i,onClick:c,asChild:d,children:h,className:f,replace:p,state:g,...b}=e,j=mw(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(c==null||c(w),w.defaultPrevented||(w.preventDefault(),s(l,e)))}),_=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return d&&v.isValidElement(h)?v.cloneElement(h,{onClick:j,href:_}):v.createElement("a",{...b,onClick:j,href:_,className:f!=null&&f.call?f(r===l):f,children:h,ref:t})}),mA=e=>Array.isArray(e)?e.flatMap(t=>mA(t&&t.type===v.Fragment?t.props.children:t)):[e],dN=({children:e,location:t})=>{const n=Su(),[r]=of(n);for(const s of mA(e)){let i=0;if(v.isValidElement(s)&&(i=pA(n.parser,s.props.path,t||r,s.props.nest))[0])return v.cloneElement(s,{match:i})}return null},_B=e=>{const{to:t,href:n=t}=e,r=Su(),[,s]=of(r),i=mw(()=>s(t||n,e)),{ssrContext:l}=r;return aA(()=>{i()},[]),l&&(l.redirectTo=t),null};var Nu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hl=typeof window>"u"||"Deno"in globalThis;function sr(){}function SB(e,t){return typeof e=="function"?e(t):e}function Yx(e){return typeof e=="number"&&e>=0&&e!==1/0}function gA(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ta(e,t){return typeof e=="function"?e(t):e}function es(e,t){return typeof e=="function"?e(t):e}function hN(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:l,stale:c}=e;if(l){if(r){if(t.queryHash!==vw(l,t.options))return!1}else if(!nh(t.queryKey,l))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||s&&s!==t.state.fetchStatus||i&&!i(t))}function fN(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(fl(t.options.mutationKey)!==fl(i))return!1}else if(!nh(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function vw(e,t){return((t==null?void 0:t.queryKeyHashFn)||fl)(e)}function fl(e){return JSON.stringify(e,(t,n)=>Xx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function nh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>nh(e[n],t[n])):!1}var NB=Object.prototype.hasOwnProperty;function yA(e,t){if(e===t)return e;const n=pN(e)&&pN(t);if(!n&&!(Xx(e)&&Xx(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),l=i.length,c=n?new Array(l):{};let d=0;for(let h=0;h<l;h++){const f=n?h:i[h],p=e[f],g=t[f];if(p===g){c[f]=p,(n?h<s:NB.call(e,f))&&d++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){c[f]=g;continue}const b=yA(p,g);c[f]=b,b===p&&d++}return s===l&&d===s?e:c}function xm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function pN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Xx(e){if(!mN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!mN(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function mN(e){return Object.prototype.toString.call(e)==="[object Object]"}function CB(e){return new Promise(t=>{setTimeout(t,e)})}function Jx(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?yA(e,t):t}function jB(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function PB(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var xw=Symbol();function vA(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function xA(e,t){return typeof e=="function"?e(...t):!!e}var Da,Mo,_c,q2,TB=(q2=class extends Nu{constructor(){super();te(this,Da);te(this,Mo);te(this,_c);ne(this,_c,t=>{if(!hl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){T(this,Mo)||this.setEventListener(T(this,_c))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Mo))==null||t.call(this),ne(this,Mo,void 0))}setEventListener(t){var n;ne(this,_c,t),(n=T(this,Mo))==null||n.call(this),ne(this,Mo,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){T(this,Da)!==t&&(ne(this,Da,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof T(this,Da)=="boolean"?T(this,Da):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Da=new WeakMap,Mo=new WeakMap,_c=new WeakMap,q2),bw=new TB,Sc,Ro,Nc,Z2,kB=(Z2=class extends Nu{constructor(){super();te(this,Sc,!0);te(this,Ro);te(this,Nc);ne(this,Nc,t=>{if(!hl&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){T(this,Ro)||this.setEventListener(T(this,Nc))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Ro))==null||t.call(this),ne(this,Ro,void 0))}setEventListener(t){var n;ne(this,Nc,t),(n=T(this,Ro))==null||n.call(this),ne(this,Ro,t(this.setOnline.bind(this)))}setOnline(t){T(this,Sc)!==t&&(ne(this,Sc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return T(this,Sc)}},Sc=new WeakMap,Ro=new WeakMap,Nc=new WeakMap,Z2),bm=new kB;function e0(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function EB(e){return Math.min(1e3*2**e,3e4)}function bA(e){return(e??"online")==="online"?bm.isOnline():!0}var t0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function wA(e){let t=!1,n=0,r;const s=e0(),i=()=>s.status!=="pending",l=_=>{var w;if(!i()){const S=new t0(_);g(S),(w=e.onCancel)==null||w.call(e,S)}},c=()=>{t=!0},d=()=>{t=!1},h=()=>bw.isFocused()&&(e.networkMode==="always"||bm.isOnline())&&e.canRun(),f=()=>bA(e.networkMode)&&e.canRun(),p=_=>{i()||(r==null||r(),s.resolve(_))},g=_=>{i()||(r==null||r(),s.reject(_))},b=()=>new Promise(_=>{var w;r=S=>{(i()||h())&&_(S)},(w=e.onPause)==null||w.call(e)}).then(()=>{var _;r=void 0,i()||(_=e.onContinue)==null||_.call(e)}),j=()=>{if(i())return;let _;const w=n===0?e.initialPromise:void 0;try{_=w??e.fn()}catch(S){_=Promise.reject(S)}Promise.resolve(_).then(p).catch(S=>{var k;if(i())return;const x=e.retry??(hl?0:3),N=e.retryDelay??EB,P=typeof N=="function"?N(n,S):N,E=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,S);if(t||!E){g(S);return}n++,(k=e.onFail)==null||k.call(e,n,S),CB(P).then(()=>h()?void 0:b()).then(()=>{t?g(S):j()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:c,continueRetry:d,canStart:f,start:()=>(f()?j():b().then(j),s)}}var AB=e=>setTimeout(e,0);function IB(){let e=[],t=0,n=c=>{c()},r=c=>{c()},s=AB;const i=c=>{t?e.push(c):s(()=>{n(c)})},l=()=>{const c=e;e=[],c.length&&s(()=>{r(()=>{c.forEach(d=>{n(d)})})})};return{batch:c=>{let d;t++;try{d=c()}finally{t--,t||l()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var vn=IB(),Ua,G2,_A=(G2=class{constructor(){te(this,Ua)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yx(this.gcTime)&&ne(this,Ua,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hl?1/0:5*60*1e3))}clearGcTimeout(){T(this,Ua)&&(clearTimeout(T(this,Ua)),ne(this,Ua,void 0))}},Ua=new WeakMap,G2),Cc,jc,Yr,Ba,Sn,Th,za,ws,Bi,K2,MB=(K2=class extends _A{constructor(t){super();te(this,ws);te(this,Cc);te(this,jc);te(this,Yr);te(this,Ba);te(this,Sn);te(this,Th);te(this,za);ne(this,za,!1),ne(this,Th,t.defaultOptions),this.setOptions(t.options),this.observers=[],ne(this,Ba,t.client),ne(this,Yr,T(this,Ba).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ne(this,Cc,RB(this.options)),this.state=t.state??T(this,Cc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=T(this,Sn))==null?void 0:t.promise}setOptions(t){this.options={...T(this,Th),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,Yr).remove(this)}setData(t,n){const r=Jx(this.state.data,t,this.options);return ie(this,ws,Bi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ie(this,ws,Bi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=T(this,Sn))==null?void 0:r.promise;return(s=T(this,Sn))==null||s.cancel(t),n?n.then(sr).catch(sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,Cc))}isActive(){return this.observers.some(t=>es(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ta(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!gA(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=T(this,Sn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=T(this,Sn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),T(this,Yr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(T(this,Sn)&&(T(this,za)?T(this,Sn).cancel({revert:!0}):T(this,Sn).cancelRetry()),this.scheduleGc()),T(this,Yr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ie(this,ws,Bi).call(this,{type:"invalidate"})}async fetch(t,n){var d,h,f,p,g,b,j,_,w,S,x,N;if(this.state.fetchStatus!=="idle"&&((d=T(this,Sn))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(T(this,Sn))return T(this,Sn).continueRetry(),T(this,Sn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const P=this.observers.find(E=>E.options.queryFn);P&&this.setOptions(P.options)}const r=new AbortController,s=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(ne(this,za,!0),r.signal)})},i=()=>{const P=vA(this.options,n),k=(()=>{const M={client:T(this,Ba),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return ne(this,za,!1),this.options.persister?this.options.persister(P,k,this):P(k)},c=(()=>{const P={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:T(this,Ba),state:this.state,fetchFn:i};return s(P),P})();(h=this.options.behavior)==null||h.onFetch(c,this),ne(this,jc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&ie(this,ws,Bi).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta}),ne(this,Sn,wA({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,onCancel:P=>{P instanceof t0&&P.revert&&this.setState({...T(this,jc),fetchStatus:"idle"}),r.abort()},onFail:(P,E)=>{ie(this,ws,Bi).call(this,{type:"failed",failureCount:P,error:E})},onPause:()=>{ie(this,ws,Bi).call(this,{type:"pause"})},onContinue:()=>{ie(this,ws,Bi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const P=await T(this,Sn).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(b=(g=T(this,Yr).config).onSuccess)==null||b.call(g,P,this),(_=(j=T(this,Yr).config).onSettled)==null||_.call(j,P,this.state.error,this),P}catch(P){if(P instanceof t0){if(P.silent)return T(this,Sn).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw ie(this,ws,Bi).call(this,{type:"error",error:P}),(S=(w=T(this,Yr).config).onError)==null||S.call(w,P,this),(N=(x=T(this,Yr).config).onSettled)==null||N.call(x,this.state.data,P,this),P}finally{this.scheduleGc()}}},Cc=new WeakMap,jc=new WeakMap,Yr=new WeakMap,Ba=new WeakMap,Sn=new WeakMap,Th=new WeakMap,za=new WeakMap,ws=new WeakSet,Bi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...SA(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ne(this,jc,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),vn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),T(this,Yr).notify({query:this,type:"updated",action:t})})},K2);function SA(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bA(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function RB(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var si,Q2,LB=(Q2=class extends Nu{constructor(t={}){super();te(this,si);this.config=t,ne(this,si,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??vw(s,n);let l=this.get(i);return l||(l=new MB({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){T(this,si).has(t.queryHash)||(T(this,si).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=T(this,si).get(t.queryHash);n&&(t.destroy(),n===t&&T(this,si).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){vn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return T(this,si).get(t)}getAll(){return[...T(this,si).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>hN(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>hN(t,r)):n}notify(t){vn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){vn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){vn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},si=new WeakMap,Q2),ii,er,$a,oi,_o,Y2,FB=(Y2=class extends _A{constructor(t){super();te(this,oi);te(this,ii);te(this,er);te(this,$a);this.mutationId=t.mutationId,ne(this,er,t.mutationCache),ne(this,ii,[]),this.state=t.state||NA(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){T(this,ii).includes(t)||(T(this,ii).push(t),this.clearGcTimeout(),T(this,er).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ne(this,ii,T(this,ii).filter(n=>n!==t)),this.scheduleGc(),T(this,er).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){T(this,ii).length||(this.state.status==="pending"?this.scheduleGc():T(this,er).remove(this))}continue(){var t;return((t=T(this,$a))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,d,h,f,p,g,b,j,_,w,S,x,N,P,E,k,M,z;const n=()=>{ie(this,oi,_o).call(this,{type:"continue"})};ne(this,$a,wA({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(D,F)=>{ie(this,oi,_o).call(this,{type:"failed",failureCount:D,error:F})},onPause:()=>{ie(this,oi,_o).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,er).canRun(this)}));const r=this.state.status==="pending",s=!T(this,$a).canStart();try{if(r)n();else{ie(this,oi,_o).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(i=T(this,er).config).onMutate)==null?void 0:l.call(i,t,this));const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t));F!==this.state.context&&ie(this,oi,_o).call(this,{type:"pending",context:F,variables:t,isPaused:s})}const D=await T(this,$a).start();return await((f=(h=T(this,er).config).onSuccess)==null?void 0:f.call(h,D,t,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,D,t,this.state.context)),await((j=(b=T(this,er).config).onSettled)==null?void 0:j.call(b,D,null,this.state.variables,this.state.context,this)),await((w=(_=this.options).onSettled)==null?void 0:w.call(_,D,null,t,this.state.context)),ie(this,oi,_o).call(this,{type:"success",data:D}),D}catch(D){try{throw await((x=(S=T(this,er).config).onError)==null?void 0:x.call(S,D,t,this.state.context,this)),await((P=(N=this.options).onError)==null?void 0:P.call(N,D,t,this.state.context)),await((k=(E=T(this,er).config).onSettled)==null?void 0:k.call(E,void 0,D,this.state.variables,this.state.context,this)),await((z=(M=this.options).onSettled)==null?void 0:z.call(M,void 0,D,t,this.state.context)),D}finally{ie(this,oi,_o).call(this,{type:"error",error:D})}}finally{T(this,er).runNext(this)}}},ii=new WeakMap,er=new WeakMap,$a=new WeakMap,oi=new WeakSet,_o=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vn.batch(()=>{T(this,ii).forEach(r=>{r.onMutationUpdate(t)}),T(this,er).notify({mutation:this,type:"updated",action:t})})},Y2);function NA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wi,_s,kh,X2,OB=(X2=class extends Nu{constructor(t={}){super();te(this,Wi);te(this,_s);te(this,kh);this.config=t,ne(this,Wi,new Set),ne(this,_s,new Map),ne(this,kh,0)}build(t,n,r){const s=new FB({mutationCache:this,mutationId:++Uf(this,kh)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){T(this,Wi).add(t);const n=rp(t);if(typeof n=="string"){const r=T(this,_s).get(n);r?r.push(t):T(this,_s).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(T(this,Wi).delete(t)){const n=rp(t);if(typeof n=="string"){const r=T(this,_s).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&T(this,_s).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=rp(t);if(typeof n=="string"){const r=T(this,_s).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=rp(t);if(typeof n=="string"){const s=(r=T(this,_s).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vn.batch(()=>{T(this,Wi).forEach(t=>{this.notify({type:"removed",mutation:t})}),T(this,Wi).clear(),T(this,_s).clear()})}getAll(){return Array.from(T(this,Wi))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>fN(n,r))}findAll(t={}){return this.getAll().filter(n=>fN(t,n))}notify(t){vn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return vn.batch(()=>Promise.all(t.map(n=>n.continue().catch(sr))))}},Wi=new WeakMap,_s=new WeakMap,kh=new WeakMap,X2);function rp(e){var t;return(t=e.options.scope)==null?void 0:t.id}function gN(e){return{onFetch:(t,n)=>{var f,p,g,b,j;const r=t.options,s=(g=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,i=((b=t.state.data)==null?void 0:b.pages)||[],l=((j=t.state.data)==null?void 0:j.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let _=!1;const w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},S=vA(t.options,t.fetchOptions),x=async(N,P,E)=>{if(_)return Promise.reject();if(P==null&&N.pages.length)return Promise.resolve(N);const M=(()=>{const J={client:t.client,queryKey:t.queryKey,pageParam:P,direction:E?"backward":"forward",meta:t.options.meta};return w(J),J})(),z=await S(M),{maxPages:D}=t.options,F=E?PB:jB;return{pages:F(N.pages,z,D),pageParams:F(N.pageParams,P,D)}};if(s&&i.length){const N=s==="backward",P=N?DB:yN,E={pages:i,pageParams:l},k=P(r,E);c=await x(E,k,N)}else{const N=e??i.length;do{const P=d===0?l[0]??r.initialPageParam:yN(r,c);if(d>0&&P==null)break;c=await x(c,P),d++}while(d<N)}return c};t.options.persister?t.fetchFn=()=>{var _,w;return(w=(_=t.options).persister)==null?void 0:w.call(_,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function yN(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function DB(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Zt,Lo,Fo,Pc,Tc,Oo,kc,Ec,J2,UB=(J2=class{constructor(e={}){te(this,Zt);te(this,Lo);te(this,Fo);te(this,Pc);te(this,Tc);te(this,Oo);te(this,kc);te(this,Ec);ne(this,Zt,e.queryCache||new LB),ne(this,Lo,e.mutationCache||new OB),ne(this,Fo,e.defaultOptions||{}),ne(this,Pc,new Map),ne(this,Tc,new Map),ne(this,Oo,0)}mount(){Uf(this,Oo)._++,T(this,Oo)===1&&(ne(this,kc,bw.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,Zt).onFocus())})),ne(this,Ec,bm.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,Zt).onOnline())})))}unmount(){var e,t;Uf(this,Oo)._--,T(this,Oo)===0&&((e=T(this,kc))==null||e.call(this),ne(this,kc,void 0),(t=T(this,Ec))==null||t.call(this),ne(this,Ec,void 0))}isFetching(e){return T(this,Zt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return T(this,Lo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=T(this,Zt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=T(this,Zt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ta(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return T(this,Zt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=T(this,Zt).get(r.queryHash),i=s==null?void 0:s.state.data,l=SB(t,i);if(l!==void 0)return T(this,Zt).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return vn.batch(()=>T(this,Zt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=T(this,Zt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=T(this,Zt);vn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=T(this,Zt);return vn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=vn.batch(()=>T(this,Zt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(sr).catch(sr)}invalidateQueries(e,t={}){return vn.batch(()=>(T(this,Zt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=vn.batch(()=>T(this,Zt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(sr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(sr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=T(this,Zt).build(this,t);return n.isStaleByTime(ta(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(sr).catch(sr)}fetchInfiniteQuery(e){return e.behavior=gN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(sr).catch(sr)}ensureInfiniteQueryData(e){return e.behavior=gN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bm.isOnline()?T(this,Lo).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,Zt)}getMutationCache(){return T(this,Lo)}getDefaultOptions(){return T(this,Fo)}setDefaultOptions(e){ne(this,Fo,e)}setQueryDefaults(e,t){T(this,Pc).set(fl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...T(this,Pc).values()],n={};return t.forEach(r=>{nh(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){T(this,Tc).set(fl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...T(this,Tc).values()],n={};return t.forEach(r=>{nh(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...T(this,Fo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=vw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===xw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...T(this,Fo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){T(this,Zt).clear(),T(this,Lo).clear()}},Zt=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,Pc=new WeakMap,Tc=new WeakMap,Oo=new WeakMap,kc=new WeakMap,Ec=new WeakMap,J2),yr,pt,Eh,tr,Va,Ac,qi,Do,Ah,Ic,Mc,Ha,Wa,Uo,Rc,Nt,pd,n0,r0,s0,i0,o0,a0,l0,CA,ej,BB=(ej=class extends Nu{constructor(t,n){super();te(this,Nt);te(this,yr);te(this,pt);te(this,Eh);te(this,tr);te(this,Va);te(this,Ac);te(this,qi);te(this,Do);te(this,Ah);te(this,Ic);te(this,Mc);te(this,Ha);te(this,Wa);te(this,Uo);te(this,Rc,new Set);this.options=n,ne(this,yr,t),ne(this,Do,null),ne(this,qi,e0()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,pt).addObserver(this),vN(T(this,pt),this.options)?ie(this,Nt,pd).call(this):this.updateResult(),ie(this,Nt,i0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c0(T(this,pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c0(T(this,pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ie(this,Nt,o0).call(this),ie(this,Nt,a0).call(this),T(this,pt).removeObserver(this)}setOptions(t){const n=this.options,r=T(this,pt);if(this.options=T(this,yr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof es(this.options.enabled,T(this,pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ie(this,Nt,l0).call(this),T(this,pt).setOptions(this.options),n._defaulted&&!xm(this.options,n)&&T(this,yr).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,pt),observer:this});const s=this.hasListeners();s&&xN(T(this,pt),r,this.options,n)&&ie(this,Nt,pd).call(this),this.updateResult(),s&&(T(this,pt)!==r||es(this.options.enabled,T(this,pt))!==es(n.enabled,T(this,pt))||ta(this.options.staleTime,T(this,pt))!==ta(n.staleTime,T(this,pt)))&&ie(this,Nt,n0).call(this);const i=ie(this,Nt,r0).call(this);s&&(T(this,pt)!==r||es(this.options.enabled,T(this,pt))!==es(n.enabled,T(this,pt))||i!==T(this,Uo))&&ie(this,Nt,s0).call(this,i)}getOptimisticResult(t){const n=T(this,yr).getQueryCache().build(T(this,yr),t),r=this.createResult(n,t);return $B(this,r)&&(ne(this,tr,r),ne(this,Ac,this.options),ne(this,Va,T(this,pt).state)),r}getCurrentResult(){return T(this,tr)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&!this.options.experimental_prefetchInRender&&T(this,qi).status==="pending"&&T(this,qi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(t){T(this,Rc).add(t)}getCurrentQuery(){return T(this,pt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=T(this,yr).defaultQueryOptions(t),r=T(this,yr).getQueryCache().build(T(this,yr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ie(this,Nt,pd).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,tr)))}createResult(t,n){var D;const r=T(this,pt),s=this.options,i=T(this,tr),l=T(this,Va),c=T(this,Ac),h=t!==r?t.state:T(this,Eh),{state:f}=t;let p={...f},g=!1,b;if(n._optimisticResults){const F=this.hasListeners(),J=!F&&vN(t,n),H=F&&xN(t,r,n,s);(J||H)&&(p={...p,...SA(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:j,errorUpdatedAt:_,status:w}=p;b=p.data;let S=!1;if(n.placeholderData!==void 0&&b===void 0&&w==="pending"){let F;i!=null&&i.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(F=i.data,S=!0):F=typeof n.placeholderData=="function"?n.placeholderData((D=T(this,Mc))==null?void 0:D.state.data,T(this,Mc)):n.placeholderData,F!==void 0&&(w="success",b=Jx(i==null?void 0:i.data,F,n),g=!0)}if(n.select&&b!==void 0&&!S)if(i&&b===(l==null?void 0:l.data)&&n.select===T(this,Ah))b=T(this,Ic);else try{ne(this,Ah,n.select),b=n.select(b),b=Jx(i==null?void 0:i.data,b,n),ne(this,Ic,b),ne(this,Do,null)}catch(F){ne(this,Do,F)}T(this,Do)&&(j=T(this,Do),b=T(this,Ic),_=Date.now(),w="error");const x=p.fetchStatus==="fetching",N=w==="pending",P=w==="error",E=N&&x,k=b!==void 0,z={status:w,fetchStatus:p.fetchStatus,isPending:N,isSuccess:w==="success",isError:P,isInitialLoading:E,isLoading:E,data:b,dataUpdatedAt:p.dataUpdatedAt,error:j,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:x,isRefetching:x&&!N,isLoadingError:P&&!k,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:P&&k,isStale:ww(t,n),refetch:this.refetch,promise:T(this,qi),isEnabled:es(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const F=Y=>{z.status==="error"?Y.reject(z.error):z.data!==void 0&&Y.resolve(z.data)},J=()=>{const Y=ne(this,qi,z.promise=e0());F(Y)},H=T(this,qi);switch(H.status){case"pending":t.queryHash===r.queryHash&&F(H);break;case"fulfilled":(z.status==="error"||z.data!==H.value)&&J();break;case"rejected":(z.status!=="error"||z.error!==H.reason)&&J();break}}return z}updateResult(){const t=T(this,tr),n=this.createResult(T(this,pt),this.options);if(ne(this,Va,T(this,pt).state),ne(this,Ac,this.options),T(this,Va).data!==void 0&&ne(this,Mc,T(this,pt)),xm(n,t))return;ne(this,tr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!T(this,Rc).size)return!0;const l=new Set(i??T(this,Rc));return this.options.throwOnError&&l.add("error"),Object.keys(T(this,tr)).some(c=>{const d=c;return T(this,tr)[d]!==t[d]&&l.has(d)})};ie(this,Nt,CA).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ie(this,Nt,i0).call(this)}},yr=new WeakMap,pt=new WeakMap,Eh=new WeakMap,tr=new WeakMap,Va=new WeakMap,Ac=new WeakMap,qi=new WeakMap,Do=new WeakMap,Ah=new WeakMap,Ic=new WeakMap,Mc=new WeakMap,Ha=new WeakMap,Wa=new WeakMap,Uo=new WeakMap,Rc=new WeakMap,Nt=new WeakSet,pd=function(t){ie(this,Nt,l0).call(this);let n=T(this,pt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(sr)),n},n0=function(){ie(this,Nt,o0).call(this);const t=ta(this.options.staleTime,T(this,pt));if(hl||T(this,tr).isStale||!Yx(t))return;const r=gA(T(this,tr).dataUpdatedAt,t)+1;ne(this,Ha,setTimeout(()=>{T(this,tr).isStale||this.updateResult()},r))},r0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,pt)):this.options.refetchInterval)??!1},s0=function(t){ie(this,Nt,a0).call(this),ne(this,Uo,t),!(hl||es(this.options.enabled,T(this,pt))===!1||!Yx(T(this,Uo))||T(this,Uo)===0)&&ne(this,Wa,setInterval(()=>{(this.options.refetchIntervalInBackground||bw.isFocused())&&ie(this,Nt,pd).call(this)},T(this,Uo)))},i0=function(){ie(this,Nt,n0).call(this),ie(this,Nt,s0).call(this,ie(this,Nt,r0).call(this))},o0=function(){T(this,Ha)&&(clearTimeout(T(this,Ha)),ne(this,Ha,void 0))},a0=function(){T(this,Wa)&&(clearInterval(T(this,Wa)),ne(this,Wa,void 0))},l0=function(){const t=T(this,yr).getQueryCache().build(T(this,yr),this.options);if(t===T(this,pt))return;const n=T(this,pt);ne(this,pt,t),ne(this,Eh,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},CA=function(t){vn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(T(this,tr))}),T(this,yr).getQueryCache().notify({query:T(this,pt),type:"observerResultsUpdated"})})},ej);function zB(e,t){return es(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vN(e,t){return zB(e,t)||e.state.data!==void 0&&c0(e,t,t.refetchOnMount)}function c0(e,t,n){if(es(t.enabled,e)!==!1&&ta(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ww(e,t)}return!1}function xN(e,t,n,r){return(e!==t||es(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ww(e,n)}function ww(e,t){return es(t.enabled,e)!==!1&&e.isStaleByTime(ta(t.staleTime,e))}function $B(e,t){return!xm(e.getCurrentResult(),t)}var Bo,zo,vr,Zi,so,Mp,u0,tj,VB=(tj=class extends Nu{constructor(n,r){super();te(this,so);te(this,Bo);te(this,zo);te(this,vr);te(this,Zi);ne(this,Bo,n),this.setOptions(r),this.bindMethods(),ie(this,so,Mp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=T(this,Bo).defaultMutationOptions(n),xm(this.options,r)||T(this,Bo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:T(this,vr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&fl(r.mutationKey)!==fl(this.options.mutationKey)?this.reset():((s=T(this,vr))==null?void 0:s.state.status)==="pending"&&T(this,vr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=T(this,vr))==null||n.removeObserver(this)}onMutationUpdate(n){ie(this,so,Mp).call(this),ie(this,so,u0).call(this,n)}getCurrentResult(){return T(this,zo)}reset(){var n;(n=T(this,vr))==null||n.removeObserver(this),ne(this,vr,void 0),ie(this,so,Mp).call(this),ie(this,so,u0).call(this)}mutate(n,r){var s;return ne(this,Zi,r),(s=T(this,vr))==null||s.removeObserver(this),ne(this,vr,T(this,Bo).getMutationCache().build(T(this,Bo),this.options)),T(this,vr).addObserver(this),T(this,vr).execute(n)}},Bo=new WeakMap,zo=new WeakMap,vr=new WeakMap,Zi=new WeakMap,so=new WeakSet,Mp=function(){var r;const n=((r=T(this,vr))==null?void 0:r.state)??NA();ne(this,zo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},u0=function(n){vn.batch(()=>{var r,s,i,l,c,d,h,f;if(T(this,Zi)&&this.hasListeners()){const p=T(this,zo).variables,g=T(this,zo).context;(n==null?void 0:n.type)==="success"?((s=(r=T(this,Zi)).onSuccess)==null||s.call(r,n.data,p,g),(l=(i=T(this,Zi)).onSettled)==null||l.call(i,n.data,null,p,g)):(n==null?void 0:n.type)==="error"&&((d=(c=T(this,Zi)).onError)==null||d.call(c,n.error,p,g),(f=(h=T(this,Zi)).onSettled)==null||f.call(h,void 0,n.error,p,g))}this.listeners.forEach(p=>{p(T(this,zo))})})},tj),jA=v.createContext(void 0),xa=e=>{const t=v.useContext(jA);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},HB=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(jA.Provider,{value:e,children:t})),PA=v.createContext(!1),WB=()=>v.useContext(PA);PA.Provider;function qB(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ZB=v.createContext(qB()),GB=()=>v.useContext(ZB),KB=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},QB=e=>{v.useEffect(()=>{e.clearReset()},[e])},YB=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||xA(n,[e.error,r])),XB=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},JB=(e,t)=>e.isLoading&&e.isFetching&&!t,ez=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bN=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function tz(e,t,n){var p,g,b,j,_;const r=WB(),s=GB(),i=xa(),l=i.defaultQueryOptions(e);(g=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||g.call(p,l),l._optimisticResults=r?"isRestoring":"optimistic",XB(l),KB(l,s),QB(s);const c=!i.getQueryCache().get(l.queryHash),[d]=v.useState(()=>new t(i,l)),h=d.getOptimisticResult(l),f=!r&&e.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(w=>{const S=f?d.subscribe(vn.batchCalls(w)):sr;return d.updateResult(),S},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(l)},[l,d]),ez(l,h))throw bN(l,d,s);if(YB({result:h,errorResetBoundary:s,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((j=(b=i.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,l,h),l.experimental_prefetchInRender&&!hl&&JB(h,r)){const w=c?bN(l,d,s):(_=i.getQueryCache().get(l.queryHash))==null?void 0:_.promise;w==null||w.catch(sr).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?h:d.trackResult(h)}function Dt(e,t){return tz(e,BB)}function Fn(e,t){const n=xa(),[r]=v.useState(()=>new VB(n,e));v.useEffect(()=>{r.setOptions(e)},[r,e]);const s=v.useSyncExternalStore(v.useCallback(l=>r.subscribe(vn.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=v.useCallback((l,c)=>{r.mutate(l,c).catch(sr)},[r]);if(s.error&&xA(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function TA(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function On(e,t,n){const r=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await TA(r),r}const nz=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t.join("/"),{credentials:"include"});return await TA(n),await n.json()},ss=new UB({defaultOptions:{queries:{queryFn:nz({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!0,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1},mutations:{retry:!1}}}),rz=1,sz=1e6;let yv=0;function iz(){return yv=(yv+1)%Number.MAX_SAFE_INTEGER,yv.toString()}const vv=new Map,wN=e=>{if(vv.has(e))return;const t=setTimeout(()=>{vv.delete(e),Ad({type:"REMOVE_TOAST",toastId:e})},sz);vv.set(e,t)},oz=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,rz)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?wN(n):e.toasts.forEach(r=>{wN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Rp=[];let Lp={toasts:[]};function Ad(e){Lp=oz(Lp,e),Rp.forEach(t=>{t(Lp)})}function az({...e}){const t=iz(),n=s=>Ad({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Ad({type:"DISMISS_TOAST",toastId:t});return Ad({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Pn(){const[e,t]=v.useState(Lp);return v.useEffect(()=>(Rp.push(t),()=>{const n=Rp.indexOf(t);n>-1&&Rp.splice(n,1)}),[e]),{...e,toast:az,dismiss:n=>Ad({type:"DISMISS_TOAST",toastId:n})}}function me(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function _N(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Fg(...e){return t=>{let n=!1;const r=e.map(s=>{const i=_N(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():_N(e[s],null)}}}}function et(...e){return v.useCallback(Fg(...e),e)}function lz(e,t){const n=v.createContext(t),r=i=>{const{children:l,...c}=i,d=v.useMemo(()=>c,Object.values(c));return o.jsx(n.Provider,{value:d,children:l})};r.displayName=e+"Provider";function s(i){const l=v.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Yn(e,t=[]){let n=[];function r(i,l){const c=v.createContext(l),d=n.length;n=[...n,l];const h=p=>{var S;const{scope:g,children:b,...j}=p,_=((S=g==null?void 0:g[e])==null?void 0:S[d])||c,w=v.useMemo(()=>j,Object.values(j));return o.jsx(_.Provider,{value:w,children:b})};h.displayName=i+"Provider";function f(p,g){var _;const b=((_=g==null?void 0:g[e])==null?void 0:_[d])||c,j=v.useContext(b);if(j)return j;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[h,f]}const s=()=>{const i=n.map(l=>v.createContext(l));return function(c){const d=(c==null?void 0:c[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return s.scopeName=e,[r,cz(s,...t)]}function cz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=r.reduce((c,{useScope:d,scopeName:h})=>{const p=d(i)[`__scope${h}`];return{...c,...p}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function pl(e){const t=uz(e),n=v.forwardRef((r,s)=>{const{children:i,...l}=r,c=v.Children.toArray(i),d=c.find(hz);if(d){const h=d.props.children,f=c.map(p=>p===d?v.Children.count(h)>1?v.Children.only(null):v.isValidElement(h)?h.props.children:null:p);return o.jsx(t,{...l,ref:s,children:v.isValidElement(h)?v.cloneElement(h,void 0,f):null})}return o.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var kA=pl("Slot");function uz(e){const t=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const l=pz(s),c=fz(i,s.props);return s.type!==v.Fragment&&(c.ref=r?Fg(r,l):l),v.cloneElement(s,c)}return v.Children.count(s)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var EA=Symbol("radix.slottable");function dz(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=EA,t}function hz(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===EA}function fz(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...c)=>{const d=i(...c);return s(...c),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function pz(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Og(e){const t=e+"CollectionProvider",[n,r]=Yn(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=_=>{const{scope:w,children:S}=_,x=Je.useRef(null),N=Je.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:N,collectionRef:x,children:S})};l.displayName=t;const c=e+"CollectionSlot",d=pl(c),h=Je.forwardRef((_,w)=>{const{scope:S,children:x}=_,N=i(c,S),P=et(w,N.collectionRef);return o.jsx(d,{ref:P,children:x})});h.displayName=c;const f=e+"CollectionItemSlot",p="data-radix-collection-item",g=pl(f),b=Je.forwardRef((_,w)=>{const{scope:S,children:x,...N}=_,P=Je.useRef(null),E=et(w,P),k=i(f,S);return Je.useEffect(()=>(k.itemMap.set(P,{ref:P,...N}),()=>void k.itemMap.delete(P))),o.jsx(g,{[p]:"",ref:E,children:x})});b.displayName=f;function j(_){const w=i(e+"CollectionConsumer",_);return Je.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const N=Array.from(x.querySelectorAll(`[${p}]`));return Array.from(w.itemMap.values()).sort((k,M)=>N.indexOf(k.ref.current)-N.indexOf(M.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:h,ItemSlot:b},j,r]}var mz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=mz.reduce((e,t)=>{const n=pl(`Primitive.${t}`),r=v.forwardRef((s,i)=>{const{asChild:l,...c}=s,d=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(d,{...c,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function _w(e,t){e&&Pl.flushSync(()=>e.dispatchEvent(t))}function Kt(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function gz(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e);v.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var yz="DismissableLayer",d0="dismissableLayer.update",vz="dismissableLayer.pointerDownOutside",xz="dismissableLayer.focusOutside",SN,AA=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cu=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...d}=e,h=v.useContext(AA),[f,p]=v.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=v.useState({}),j=et(t,M=>p(M)),_=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),S=_.indexOf(w),x=f?_.indexOf(f):-1,N=h.layersWithOutsidePointerEventsDisabled.size>0,P=x>=S,E=wz(M=>{const z=M.target,D=[...h.branches].some(F=>F.contains(z));!P||D||(s==null||s(M),l==null||l(M),M.defaultPrevented||c==null||c())},g),k=_z(M=>{const z=M.target;[...h.branches].some(F=>F.contains(z))||(i==null||i(M),l==null||l(M),M.defaultPrevented||c==null||c())},g);return gz(M=>{x===h.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&c&&(M.preventDefault(),c()))},g),v.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(SN=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),NN(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=SN)}},[f,g,n,h]),v.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),NN())},[f,h]),v.useEffect(()=>{const M=()=>b({});return document.addEventListener(d0,M),()=>document.removeEventListener(d0,M)},[]),o.jsx(Ae.div,{...d,ref:j,style:{pointerEvents:N?P?"auto":"none":void 0,...e.style},onFocusCapture:me(e.onFocusCapture,k.onFocusCapture),onBlurCapture:me(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:me(e.onPointerDownCapture,E.onPointerDownCapture)})});Cu.displayName=yz;var bz="DismissableLayerBranch",IA=v.forwardRef((e,t)=>{const n=v.useContext(AA),r=v.useRef(null),s=et(t,r);return v.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Ae.div,{...e,ref:s})});IA.displayName=bz;function wz(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e),r=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let d=function(){MA(vz,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function _z(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e),r=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!r.current&&MA(xz,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NN(){const e=new CustomEvent(d0);document.dispatchEvent(e)}function MA(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?_w(s,i):s.dispatchEvent(i)}var Sz=Cu,Nz=IA,on=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Cz="Portal",af=v.forwardRef((e,t)=>{var c;const{container:n,...r}=e,[s,i]=v.useState(!1);on(()=>i(!0),[]);const l=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?KU.createPortal(o.jsx(Ae.div,{...r,ref:t}),l):null});af.displayName=Cz;function jz(e,t){return v.useReducer((n,r)=>t[n][r]??n,e)}var Un=e=>{const{present:t,children:n}=e,r=Pz(t),s=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),i=et(r.ref,Tz(s));return typeof n=="function"||r.isPresent?v.cloneElement(s,{ref:i}):null};Un.displayName="Presence";function Pz(e){const[t,n]=v.useState(),r=v.useRef(null),s=v.useRef(e),i=v.useRef("none"),l=e?"mounted":"unmounted",[c,d]=jz(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const h=sp(r.current);i.current=c==="mounted"?h:"none"},[c]),on(()=>{const h=r.current,f=s.current;if(f!==e){const g=i.current,b=sp(h);e?d("MOUNT"):b==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(f&&g!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),on(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,p=b=>{const _=sp(r.current).includes(CSS.escape(b.animationName));if(b.target===t&&_&&(d("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},g=b=>{b.target===t&&(i.current=sp(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:v.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function sp(e){return(e==null?void 0:e.animationName)||"none"}function Tz(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var kz=Nb[" useInsertionEffect ".trim().toString()]||on;function Ni({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,l]=Ez({defaultProp:t,onChange:n}),c=e!==void 0,d=c?e:s;{const f=v.useRef(e!==void 0);v.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,r])}const h=v.useCallback(f=>{var p;if(c){const g=Az(f)?f(e):f;g!==e&&((p=l.current)==null||p.call(l,g))}else i(f)},[c,e,i,l]);return[d,h]}function Ez({defaultProp:e,onChange:t}){const[n,r]=v.useState(e),s=v.useRef(n),i=v.useRef(t);return kz(()=>{i.current=t},[t]),v.useEffect(()=>{var l;s.current!==n&&((l=i.current)==null||l.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Az(e){return typeof e=="function"}var RA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Iz="VisuallyHidden",Dg=v.forwardRef((e,t)=>o.jsx(Ae.span,{...e,ref:t,style:{...RA,...e.style}}));Dg.displayName=Iz;var Mz=Dg,Sw="ToastProvider",[Nw,Rz,Lz]=Og("Toast"),[LA,rte]=Yn("Toast",[Lz]),[Fz,Ug]=LA(Sw),FA=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=e,[c,d]=v.useState(null),[h,f]=v.useState(0),p=v.useRef(!1),g=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Sw}\`. Expected non-empty \`string\`.`),o.jsx(Nw.Provider,{scope:t,children:o.jsx(Fz,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:c,onViewportChange:d,onToastAdd:v.useCallback(()=>f(b=>b+1),[]),onToastRemove:v.useCallback(()=>f(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:l})})};FA.displayName=Sw;var OA="ToastViewport",Oz=["F8"],h0="toast.viewportPause",f0="toast.viewportResume",DA=v.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Oz,label:s="Notifications ({hotkey})",...i}=e,l=Ug(OA,n),c=Rz(n),d=v.useRef(null),h=v.useRef(null),f=v.useRef(null),p=v.useRef(null),g=et(t,p,l.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=l.toastCount>0;v.useEffect(()=>{const w=S=>{var N;r.length!==0&&r.every(P=>S[P]||S.code===P)&&((N=p.current)==null||N.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),v.useEffect(()=>{const w=d.current,S=p.current;if(j&&w&&S){const x=()=>{if(!l.isClosePausedRef.current){const k=new CustomEvent(h0);S.dispatchEvent(k),l.isClosePausedRef.current=!0}},N=()=>{if(l.isClosePausedRef.current){const k=new CustomEvent(f0);S.dispatchEvent(k),l.isClosePausedRef.current=!1}},P=k=>{!w.contains(k.relatedTarget)&&N()},E=()=>{w.contains(document.activeElement)||N()};return w.addEventListener("focusin",x),w.addEventListener("focusout",P),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",E),window.addEventListener("blur",x),window.addEventListener("focus",N),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",P),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",E),window.removeEventListener("blur",x),window.removeEventListener("focus",N)}}},[j,l.isClosePausedRef]);const _=v.useCallback(({tabbingDirection:w})=>{const x=c().map(N=>{const P=N.ref.current,E=[P,...Qz(P)];return w==="forwards"?E:E.reverse()});return(w==="forwards"?x.reverse():x).flat()},[c]);return v.useEffect(()=>{const w=p.current;if(w){const S=x=>{var E,k,M;const N=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!N){const z=document.activeElement,D=x.shiftKey;if(x.target===w&&D){(E=h.current)==null||E.focus();return}const H=_({tabbingDirection:D?"backwards":"forwards"}),Y=H.findIndex(Z=>Z===z);xv(H.slice(Y+1))?x.preventDefault():D?(k=h.current)==null||k.focus():(M=f.current)==null||M.focus()}};return w.addEventListener("keydown",S),()=>w.removeEventListener("keydown",S)}},[c,_]),o.jsxs(Nz,{ref:d,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&o.jsx(p0,{ref:h,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"forwards"});xv(w)}}),o.jsx(Nw.Slot,{scope:n,children:o.jsx(Ae.ol,{tabIndex:-1,...i,ref:g})}),j&&o.jsx(p0,{ref:f,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"backwards"});xv(w)}})]})});DA.displayName=OA;var UA="ToastFocusProxy",p0=v.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=Ug(UA,n);return o.jsx(Dg,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:l=>{var h;const c=l.relatedTarget;!((h=i.viewport)!=null&&h.contains(c))&&r()}})});p0.displayName=UA;var lf="Toast",Dz="toast.swipeStart",Uz="toast.swipeMove",Bz="toast.swipeCancel",zz="toast.swipeEnd",BA=v.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...l}=e,[c,d]=Ni({prop:r,defaultProp:s??!0,onChange:i,caller:lf});return o.jsx(Un,{present:n||c,children:o.jsx(Hz,{open:c,...l,ref:t,onClose:()=>d(!1),onPause:Kt(e.onPause),onResume:Kt(e.onResume),onSwipeStart:me(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(e.onSwipeMove,h=>{const{x:f,y:p}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:me(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(e.onSwipeEnd,h=>{const{x:f,y:p}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),d(!1)})})})});BA.displayName=lf;var[$z,Vz]=LA(lf,{onClose(){}}),Hz=v.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:c,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:b,...j}=e,_=Ug(lf,n),[w,S]=v.useState(null),x=et(t,Z=>S(Z)),N=v.useRef(null),P=v.useRef(null),E=s||_.duration,k=v.useRef(0),M=v.useRef(E),z=v.useRef(0),{onToastAdd:D,onToastRemove:F}=_,J=Kt(()=>{var U;(w==null?void 0:w.contains(document.activeElement))&&((U=_.viewport)==null||U.focus()),l()}),H=v.useCallback(Z=>{!Z||Z===1/0||(window.clearTimeout(z.current),k.current=new Date().getTime(),z.current=window.setTimeout(J,Z))},[J]);v.useEffect(()=>{const Z=_.viewport;if(Z){const U=()=>{H(M.current),h==null||h()},V=()=>{const K=new Date().getTime()-k.current;M.current=M.current-K,window.clearTimeout(z.current),d==null||d()};return Z.addEventListener(h0,V),Z.addEventListener(f0,U),()=>{Z.removeEventListener(h0,V),Z.removeEventListener(f0,U)}}},[_.viewport,E,d,h,H]),v.useEffect(()=>{i&&!_.isClosePausedRef.current&&H(E)},[i,E,_.isClosePausedRef,H]),v.useEffect(()=>(D(),()=>F()),[D,F]);const Y=v.useMemo(()=>w?ZA(w):null,[w]);return _.viewport?o.jsxs(o.Fragment,{children:[Y&&o.jsx(Wz,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:Y}),o.jsx($z,{scope:n,onClose:J,children:Pl.createPortal(o.jsx(Nw.ItemSlot,{scope:n,children:o.jsx(Sz,{asChild:!0,onEscapeKeyDown:me(c,()=>{_.isFocusedToastEscapeKeyDownRef.current||J(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Ae.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":_.swipeDirection,...j,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:me(e.onKeyDown,Z=>{Z.key==="Escape"&&(c==null||c(Z.nativeEvent),Z.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,J()))}),onPointerDown:me(e.onPointerDown,Z=>{Z.button===0&&(N.current={x:Z.clientX,y:Z.clientY})}),onPointerMove:me(e.onPointerMove,Z=>{if(!N.current)return;const U=Z.clientX-N.current.x,V=Z.clientY-N.current.y,K=!!P.current,O=["left","right"].includes(_.swipeDirection),G=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,X=O?G(0,U):0,ce=O?0:G(0,V),Te=Z.pointerType==="touch"?10:2,Ve={x:X,y:ce},Ie={originalEvent:Z,delta:Ve};K?(P.current=Ve,ip(Uz,p,Ie,{discrete:!1})):CN(Ve,_.swipeDirection,Te)?(P.current=Ve,ip(Dz,f,Ie,{discrete:!1}),Z.target.setPointerCapture(Z.pointerId)):(Math.abs(U)>Te||Math.abs(V)>Te)&&(N.current=null)}),onPointerUp:me(e.onPointerUp,Z=>{const U=P.current,V=Z.target;if(V.hasPointerCapture(Z.pointerId)&&V.releasePointerCapture(Z.pointerId),P.current=null,N.current=null,U){const K=Z.currentTarget,O={originalEvent:Z,delta:U};CN(U,_.swipeDirection,_.swipeThreshold)?ip(zz,b,O,{discrete:!0}):ip(Bz,g,O,{discrete:!0}),K.addEventListener("click",G=>G.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),Wz=e=>{const{__scopeToast:t,children:n,...r}=e,s=Ug(lf,t),[i,l]=v.useState(!1),[c,d]=v.useState(!1);return Gz(()=>l(!0)),v.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:o.jsx(af,{asChild:!0,children:o.jsx(Dg,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},qz="ToastTitle",zA=v.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(Ae.div,{...r,ref:t})});zA.displayName=qz;var Zz="ToastDescription",$A=v.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(Ae.div,{...r,ref:t})});$A.displayName=Zz;var VA="ToastAction",HA=v.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(qA,{altText:n,asChild:!0,children:o.jsx(Cw,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${VA}\`. Expected non-empty \`string\`.`),null)});HA.displayName=VA;var WA="ToastClose",Cw=v.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=Vz(WA,n);return o.jsx(qA,{asChild:!0,children:o.jsx(Ae.button,{type:"button",...r,ref:t,onClick:me(e.onClick,s.onClose)})})});Cw.displayName=WA;var qA=v.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function ZA(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Kz(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...ZA(r))}}),t}function ip(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?_w(s,i):s.dispatchEvent(i)}var CN=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function Gz(e=()=>{}){const t=Kt(e);on(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Kz(e){return e.nodeType===e.ELEMENT_NODE}function Qz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xv(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Yz=FA,GA=DA,KA=BA,QA=zA,YA=$A,XA=HA,JA=Cw;function e5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=e5(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function t5(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=e5(e))&&(r&&(r+=" "),r+=t);return r}const jN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,PN=t5,Bg=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return PN(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,l=Object.keys(s).map(h=>{const f=n==null?void 0:n[h],p=i==null?void 0:i[h];if(f===null)return null;const g=jN(f)||jN(p);return s[h][g]}),c=n&&Object.entries(n).reduce((h,f)=>{let[p,g]=f;return g===void 0||(h[p]=g),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:p,className:g,...b}=f;return Object.entries(b).every(j=>{let[_,w]=j;return Array.isArray(w)?w.includes({...i,...c}[_]):{...i,...c}[_]===w})?[...h,p,g]:h},[]);return PN(e,l,d,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n5=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:l,...c},d)=>v.createElement("svg",{ref:d,...Jz,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:n5("lucide",s),...c},[...l.map(([h,f])=>v.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(e,t)=>{const n=v.forwardRef(({className:r,...s},i)=>v.createElement(e9,{ref:i,iconNode:t,className:n5(`lucide-${Xz(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=_e("Ambulance",[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=_e("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=_e("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=_e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=_e("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=_e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=_e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=_e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=_e("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=_e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=_e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=_e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=_e("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=_e("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=_e("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=_e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=_e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=_e("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=_e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=_e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=_e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=_e("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=_e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=_e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=_e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=_e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=_e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=_e("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=_e("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=_e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=_e("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=_e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=_e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=_e("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=_e("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=_e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=_e("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=_e("Siren",[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=_e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=_e("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=_e("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=_e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=_e("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=_e("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=_e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=_e("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=_e("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=_e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ow="-",T9=e=>{const t=E9(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:l=>{const c=l.split(Ow);return c[0]===""&&c.length!==1&&c.shift(),h5(c,t)||k9(l)},getConflictingClassGroupIds:(l,c)=>{const d=n[l]||[];return c&&r[l]?[...d,...r[l]]:d}}},h5=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?h5(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Ow);return(l=t.validators.find(({validator:c})=>c(i)))==null?void 0:l.classGroupId},RN=/^\[(.+)\]$/,k9=e=>{if(RN.test(e)){const t=RN.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},E9=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return I9(Object.entries(e.classGroups),n).forEach(([i,l])=>{x0(l,r,i,t)}),r},x0=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:LN(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(A9(s)){x0(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,l])=>{x0(l,LN(t,i),n,r)})})},LN=(e,t)=>{let n=e;return t.split(Ow).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},A9=e=>e.isThemeGetter,I9=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,c])=>[t+l,c])):i);return[n,s]}):e,M9=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,l)=>{n.set(i,l),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return s(i,l),l},set(i,l){n.has(i)?n.set(i,l):s(i,l)}}},f5="!",R9=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,l=c=>{const d=[];let h=0,f=0,p;for(let w=0;w<c.length;w++){let S=c[w];if(h===0){if(S===s&&(r||c.slice(w,w+i)===t)){d.push(c.slice(f,w)),f=w+i;continue}if(S==="/"){p=w;continue}}S==="["?h++:S==="]"&&h--}const g=d.length===0?c:c.substring(f),b=g.startsWith(f5),j=b?g.substring(1):g,_=p&&p>f?p-f:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:_}};return n?c=>n({className:c,parseClassName:l}):l},L9=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},F9=e=>({cache:M9(e.cacheSize),parseClassName:R9(e),...T9(e)}),O9=/\s+/,D9=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],l=e.trim().split(O9);let c="";for(let d=l.length-1;d>=0;d-=1){const h=l[d],{modifiers:f,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:b}=n(h);let j=!!b,_=r(j?g.substring(0,b):g);if(!_){if(!j){c=h+(c.length>0?" "+c:c);continue}if(_=r(g),!_){c=h+(c.length>0?" "+c:c);continue}j=!1}const w=L9(f).join(":"),S=p?w+f5:w,x=S+_;if(i.includes(x))continue;i.push(x);const N=s(_,j);for(let P=0;P<N.length;++P){const E=N[P];i.push(S+E)}c=h+(c.length>0?" "+c:c)}return c};function U9(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=p5(t))&&(r&&(r+=" "),r+=n);return r}const p5=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=p5(e[r]))&&(n&&(n+=" "),n+=t);return n};function B9(e,...t){let n,r,s,i=l;function l(d){const h=t.reduce((f,p)=>p(f),e());return n=F9(h),r=n.cache.get,s=n.cache.set,i=c,c(d)}function c(d){const h=r(d);if(h)return h;const f=D9(d,n);return s(d,f),f}return function(){return i(U9.apply(null,arguments))}}const Ft=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},m5=/^\[(?:([a-z-]+):)?(.+)\]$/i,z9=/^\d+\/\d+$/,$9=new Set(["px","full","screen"]),V9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,H9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,q9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Z9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Di=e=>pc(e)||$9.has(e)||z9.test(e),bo=e=>ju(e,"length",t7),pc=e=>!!e&&!Number.isNaN(Number(e)),_v=e=>ju(e,"number",pc),ed=e=>!!e&&Number.isInteger(Number(e)),G9=e=>e.endsWith("%")&&pc(e.slice(0,-1)),ot=e=>m5.test(e),wo=e=>V9.test(e),K9=new Set(["length","size","percentage"]),Q9=e=>ju(e,K9,g5),Y9=e=>ju(e,"position",g5),X9=new Set(["image","url"]),J9=e=>ju(e,X9,r7),e7=e=>ju(e,"",n7),td=()=>!0,ju=(e,t,n)=>{const r=m5.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},t7=e=>H9.test(e)&&!W9.test(e),g5=()=>!1,n7=e=>q9.test(e),r7=e=>Z9.test(e),s7=()=>{const e=Ft("colors"),t=Ft("spacing"),n=Ft("blur"),r=Ft("brightness"),s=Ft("borderColor"),i=Ft("borderRadius"),l=Ft("borderSpacing"),c=Ft("borderWidth"),d=Ft("contrast"),h=Ft("grayscale"),f=Ft("hueRotate"),p=Ft("invert"),g=Ft("gap"),b=Ft("gradientColorStops"),j=Ft("gradientColorStopPositions"),_=Ft("inset"),w=Ft("margin"),S=Ft("opacity"),x=Ft("padding"),N=Ft("saturate"),P=Ft("scale"),E=Ft("sepia"),k=Ft("skew"),M=Ft("space"),z=Ft("translate"),D=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],J=()=>["auto",ot,t],H=()=>[ot,t],Y=()=>["",Di,bo],Z=()=>["auto",pc,ot],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",ot],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[pc,ot];return{cacheSize:500,separator:":",theme:{colors:[td],spacing:[Di,bo],blur:["none","",wo,ot],brightness:ce(),borderColor:[e],borderRadius:["none","","full",wo,ot],borderSpacing:H(),borderWidth:Y(),contrast:ce(),grayscale:G(),hueRotate:ce(),invert:G(),gap:H(),gradientColorStops:[e],gradientColorStopPositions:[G9,bo],inset:J(),margin:J(),opacity:ce(),padding:H(),saturate:ce(),scale:ce(),sepia:G(),skew:ce(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[wo]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),ot]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ed,ot]}],basis:[{basis:J()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",ed,ot]}],"grid-cols":[{"grid-cols":[td]}],"col-start-end":[{col:["auto",{span:["full",ed,ot]},ot]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[td]}],"row-start-end":[{row:["auto",{span:[ed,ot]},ot]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,t]}],"min-w":[{"min-w":[ot,t,"min","max","fit"]}],"max-w":[{"max-w":[ot,t,"none","full","min","max","fit","prose",{screen:[wo]},wo]}],h:[{h:[ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",wo,bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_v]}],"font-family":[{font:[td]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",pc,_v]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Di,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Di,bo]}],"underline-offset":[{"underline-offset":["auto",Di,ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),Y9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Q9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},J9]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Di,ot]}],"outline-w":[{outline:[Di,bo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Di,bo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",wo,e7]}],"shadow-color":[{shadow:[td]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",wo,ot]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[N]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[ed,ot]}],"translate-x":[{"translate-x":[z]}],"translate-y":[{"translate-y":[z]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Di,bo,_v]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},i7=B9(s7);function Ce(...e){return i7(t5(e))}const o7=Yz,y5=v.forwardRef(({className:e,...t},n)=>o.jsx(GA,{ref:n,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));y5.displayName=GA.displayName;const a7=Bg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),v5=v.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(KA,{ref:r,className:Ce(a7({variant:t}),e),...n}));v5.displayName=KA.displayName;const l7=v.forwardRef(({className:e,...t},n)=>o.jsx(XA,{ref:n,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));l7.displayName=XA.displayName;const x5=v.forwardRef(({className:e,...t},n)=>o.jsx(JA,{ref:n,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(oa,{className:"h-4 w-4"})}));x5.displayName=JA.displayName;const b5=v.forwardRef(({className:e,...t},n)=>o.jsx(QA,{ref:n,className:Ce("text-sm font-semibold",e),...t}));b5.displayName=QA.displayName;const w5=v.forwardRef(({className:e,...t},n)=>o.jsx(YA,{ref:n,className:Ce("text-sm opacity-90",e),...t}));w5.displayName=YA.displayName;function c7(){const{toasts:e}=Pn();return o.jsxs(o7,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return o.jsxs(v5,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(b5,{children:n}),r&&o.jsx(w5,{children:r})]}),s,o.jsx(x5,{})]},t)}),o.jsx(y5,{})]})}var u7=Nb[" useId ".trim().toString()]||(()=>{}),d7=0;function bi(e){const[t,n]=v.useState(u7());return on(()=>{n(r=>r??String(d7++))},[e]),t?`radix-${t}`:""}const h7=["top","right","bottom","left"],aa=Math.min,Fr=Math.max,Cm=Math.round,op=Math.floor,wi=e=>({x:e,y:e}),f7={left:"right",right:"left",bottom:"top",top:"bottom"},p7={start:"end",end:"start"};function b0(e,t,n){return Fr(e,aa(t,n))}function uo(e,t){return typeof e=="function"?e(t):e}function ho(e){return e.split("-")[0]}function Pu(e){return e.split("-")[1]}function Dw(e){return e==="x"?"y":"x"}function Uw(e){return e==="y"?"height":"width"}const m7=new Set(["top","bottom"]);function pi(e){return m7.has(ho(e))?"y":"x"}function Bw(e){return Dw(pi(e))}function g7(e,t,n){n===void 0&&(n=!1);const r=Pu(e),s=Bw(e),i=Uw(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=jm(l)),[l,jm(l)]}function y7(e){const t=jm(e);return[w0(e),t,w0(t)]}function w0(e){return e.replace(/start|end/g,t=>p7[t])}const FN=["left","right"],ON=["right","left"],v7=["top","bottom"],x7=["bottom","top"];function b7(e,t,n){switch(e){case"top":case"bottom":return n?t?ON:FN:t?FN:ON;case"left":case"right":return t?v7:x7;default:return[]}}function w7(e,t,n,r){const s=Pu(e);let i=b7(ho(e),n==="start",r);return s&&(i=i.map(l=>l+"-"+s),t&&(i=i.concat(i.map(w0)))),i}function jm(e){return e.replace(/left|right|bottom|top/g,t=>f7[t])}function _7(e){return{top:0,right:0,bottom:0,left:0,...e}}function _5(e){return typeof e!="number"?_7(e):{top:e,right:e,bottom:e,left:e}}function Pm(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function DN(e,t,n){let{reference:r,floating:s}=e;const i=pi(t),l=Bw(t),c=Uw(l),d=ho(t),h=i==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[c]/2-s[c]/2;let b;switch(d){case"top":b={x:f,y:r.y-s.height};break;case"bottom":b={x:f,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:p};break;case"left":b={x:r.x-s.width,y:p};break;default:b={x:r.x,y:r.y}}switch(Pu(t)){case"start":b[l]-=g*(n&&h?-1:1);break;case"end":b[l]+=g*(n&&h?-1:1);break}return b}const S7=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:l}=n,c=i.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let h=await l.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:p}=DN(h,r,d),g=r,b={},j=0;for(let _=0;_<c.length;_++){const{name:w,fn:S}=c[_],{x,y:N,data:P,reset:E}=await S({x:f,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:b,rects:h,platform:l,elements:{reference:e,floating:t}});f=x??f,p=N??p,b={...b,[w]:{...b[w],...P}},E&&j<=50&&(j++,typeof E=="object"&&(E.placement&&(g=E.placement),E.rects&&(h=E.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:s}):E.rects),{x:f,y:p}=DN(h,g,d)),_=-1)}return{x:f,y:p,placement:g,strategy:s,middlewareData:b}};async function ih(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:l,elements:c,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:b=0}=uo(t,e),j=_5(b),w=c[g?p==="floating"?"reference":"floating":p],S=Pm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:d})),x=p==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),P=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},E=Pm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:x,offsetParent:N,strategy:d}):x);return{top:(S.top-E.top+j.top)/P.y,bottom:(E.bottom-S.bottom+j.bottom)/P.y,left:(S.left-E.left+j.left)/P.x,right:(E.right-S.right+j.right)/P.x}}const N7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:l,elements:c,middlewareData:d}=t,{element:h,padding:f=0}=uo(e,t)||{};if(h==null)return{};const p=_5(f),g={x:n,y:r},b=Bw(s),j=Uw(b),_=await l.getDimensions(h),w=b==="y",S=w?"top":"left",x=w?"bottom":"right",N=w?"clientHeight":"clientWidth",P=i.reference[j]+i.reference[b]-g[b]-i.floating[j],E=g[b]-i.reference[b],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let M=k?k[N]:0;(!M||!await(l.isElement==null?void 0:l.isElement(k)))&&(M=c.floating[N]||i.floating[j]);const z=P/2-E/2,D=M/2-_[j]/2-1,F=aa(p[S],D),J=aa(p[x],D),H=F,Y=M-_[j]-J,Z=M/2-_[j]/2+z,U=b0(H,Z,Y),V=!d.arrow&&Pu(s)!=null&&Z!==U&&i.reference[j]/2-(Z<H?F:J)-_[j]/2<0,K=V?Z<H?Z-H:Z-Y:0;return{[b]:g[b]+K,data:{[b]:U,centerOffset:Z-U-K,...V&&{alignmentOffset:K}},reset:V}}}),C7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:l,initialPlacement:c,platform:d,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:_=!0,...w}=uo(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=ho(s),x=pi(c),N=ho(c)===c,P=await(d.isRTL==null?void 0:d.isRTL(h.floating)),E=g||(N||!_?[jm(c)]:y7(c)),k=j!=="none";!g&&k&&E.push(...w7(c,_,j,P));const M=[c,...E],z=await ih(t,w),D=[];let F=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&D.push(z[S]),p){const Z=g7(s,l,P);D.push(z[Z[0]],z[Z[1]])}if(F=[...F,{placement:s,overflows:D}],!D.every(Z=>Z<=0)){var J,H;const Z=(((J=i.flip)==null?void 0:J.index)||0)+1,U=M[Z];if(U&&(!(p==="alignment"?x!==pi(U):!1)||F.every(O=>pi(O.placement)===x?O.overflows[0]>0:!0)))return{data:{index:Z,overflows:F},reset:{placement:U}};let V=(H=F.filter(K=>K.overflows[0]<=0).sort((K,O)=>K.overflows[1]-O.overflows[1])[0])==null?void 0:H.placement;if(!V)switch(b){case"bestFit":{var Y;const K=(Y=F.filter(O=>{if(k){const G=pi(O.placement);return G===x||G==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(G=>G>0).reduce((G,X)=>G+X,0)]).sort((O,G)=>O[1]-G[1])[0])==null?void 0:Y[0];K&&(V=K);break}case"initialPlacement":V=c;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function UN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function BN(e){return h7.some(t=>e[t]>=0)}const j7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=uo(e,t);switch(r){case"referenceHidden":{const i=await ih(t,{...s,elementContext:"reference"}),l=UN(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:BN(l)}}}case"escaped":{const i=await ih(t,{...s,altBoundary:!0}),l=UN(i,n.floating);return{data:{escapedOffsets:l,escaped:BN(l)}}}default:return{}}}}},S5=new Set(["left","top"]);async function P7(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ho(n),c=Pu(n),d=pi(n)==="y",h=S5.has(l)?-1:1,f=i&&d?-1:1,p=uo(t,e);let{mainAxis:g,crossAxis:b,alignmentAxis:j}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof j=="number"&&(b=c==="end"?j*-1:j),d?{x:b*f,y:g*h}:{x:g*h,y:b*f}}const T7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:l,middlewareData:c}=t,d=await P7(t,e);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:l}}}}},k7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:w=>{let{x:S,y:x}=w;return{x:S,y:x}}},...d}=uo(e,t),h={x:n,y:r},f=await ih(t,d),p=pi(ho(s)),g=Dw(p);let b=h[g],j=h[p];if(i){const w=g==="y"?"top":"left",S=g==="y"?"bottom":"right",x=b+f[w],N=b-f[S];b=b0(x,b,N)}if(l){const w=p==="y"?"top":"left",S=p==="y"?"bottom":"right",x=j+f[w],N=j-f[S];j=b0(x,j,N)}const _=c.fn({...t,[g]:b,[p]:j});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[g]:i,[p]:l}}}}}},E7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:l}=t,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=uo(e,t),f={x:n,y:r},p=pi(s),g=Dw(p);let b=f[g],j=f[p];const _=uo(c,t),w=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(d){const N=g==="y"?"height":"width",P=i.reference[g]-i.floating[N]+w.mainAxis,E=i.reference[g]+i.reference[N]-w.mainAxis;b<P?b=P:b>E&&(b=E)}if(h){var S,x;const N=g==="y"?"width":"height",P=S5.has(ho(s)),E=i.reference[p]-i.floating[N]+(P&&((S=l.offset)==null?void 0:S[p])||0)+(P?0:w.crossAxis),k=i.reference[p]+i.reference[N]+(P?0:((x=l.offset)==null?void 0:x[p])||0)-(P?w.crossAxis:0);j<E?j=E:j>k&&(j=k)}return{[g]:b,[p]:j}}}},A7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:l,elements:c}=t,{apply:d=()=>{},...h}=uo(e,t),f=await ih(t,h),p=ho(s),g=Pu(s),b=pi(s)==="y",{width:j,height:_}=i.floating;let w,S;p==="top"||p==="bottom"?(w=p,S=g===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(S=p,w=g==="end"?"top":"bottom");const x=_-f.top-f.bottom,N=j-f.left-f.right,P=aa(_-f[w],x),E=aa(j-f[S],N),k=!t.middlewareData.shift;let M=P,z=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(z=N),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(M=x),k&&!g){const F=Fr(f.left,0),J=Fr(f.right,0),H=Fr(f.top,0),Y=Fr(f.bottom,0);b?z=j-2*(F!==0||J!==0?F+J:Fr(f.left,f.right)):M=_-2*(H!==0||Y!==0?H+Y:Fr(f.top,f.bottom))}await d({...t,availableWidth:z,availableHeight:M});const D=await l.getDimensions(c.floating);return j!==D.width||_!==D.height?{reset:{rects:!0}}:{}}}};function zg(){return typeof window<"u"}function Tu(e){return N5(e)?(e.nodeName||"").toLowerCase():"#document"}function Ur(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ai(e){var t;return(t=(N5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function N5(e){return zg()?e instanceof Node||e instanceof Ur(e).Node:!1}function zs(e){return zg()?e instanceof Element||e instanceof Ur(e).Element:!1}function ji(e){return zg()?e instanceof HTMLElement||e instanceof Ur(e).HTMLElement:!1}function zN(e){return!zg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ur(e).ShadowRoot}const I7=new Set(["inline","contents"]);function uf(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=$s(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!I7.has(s)}const M7=new Set(["table","td","th"]);function R7(e){return M7.has(Tu(e))}const L7=[":popover-open",":modal"];function $g(e){return L7.some(t=>{try{return e.matches(t)}catch{return!1}})}const F7=["transform","translate","scale","rotate","perspective"],O7=["transform","translate","scale","rotate","perspective","filter"],D7=["paint","layout","strict","content"];function zw(e){const t=$w(),n=zs(e)?$s(e):e;return F7.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||O7.some(r=>(n.willChange||"").includes(r))||D7.some(r=>(n.contain||"").includes(r))}function U7(e){let t=la(e);for(;ji(t)&&!du(t);){if(zw(t))return t;if($g(t))return null;t=la(t)}return null}function $w(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const B7=new Set(["html","body","#document"]);function du(e){return B7.has(Tu(e))}function $s(e){return Ur(e).getComputedStyle(e)}function Vg(e){return zs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function la(e){if(Tu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||zN(e)&&e.host||Ai(e);return zN(t)?t.host:t}function C5(e){const t=la(e);return du(t)?e.ownerDocument?e.ownerDocument.body:e.body:ji(t)&&uf(t)?t:C5(t)}function oh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=C5(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),l=Ur(s);if(i){const c=_0(l);return t.concat(l,l.visualViewport||[],uf(s)?s:[],c&&n?oh(c):[])}return t.concat(s,oh(s,[],n))}function _0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function j5(e){const t=$s(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ji(e),i=s?e.offsetWidth:n,l=s?e.offsetHeight:r,c=Cm(n)!==i||Cm(r)!==l;return c&&(n=i,r=l),{width:n,height:r,$:c}}function Vw(e){return zs(e)?e:e.contextElement}function mc(e){const t=Vw(e);if(!ji(t))return wi(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=j5(t);let l=(i?Cm(n.width):n.width)/r,c=(i?Cm(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const z7=wi(0);function P5(e){const t=Ur(e);return!$w()||!t.visualViewport?z7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $7(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ur(e)?!1:t}function ml(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=Vw(e);let l=wi(1);t&&(r?zs(r)&&(l=mc(r)):l=mc(e));const c=$7(i,n,r)?P5(i):wi(0);let d=(s.left+c.x)/l.x,h=(s.top+c.y)/l.y,f=s.width/l.x,p=s.height/l.y;if(i){const g=Ur(i),b=r&&zs(r)?Ur(r):r;let j=g,_=_0(j);for(;_&&r&&b!==j;){const w=mc(_),S=_.getBoundingClientRect(),x=$s(_),N=S.left+(_.clientLeft+parseFloat(x.paddingLeft))*w.x,P=S.top+(_.clientTop+parseFloat(x.paddingTop))*w.y;d*=w.x,h*=w.y,f*=w.x,p*=w.y,d+=N,h+=P,j=Ur(_),_=_0(j)}}return Pm({width:f,height:p,x:d,y:h})}function Hg(e,t){const n=Vg(e).scrollLeft;return t?t.left+n:ml(Ai(e)).left+n}function T5(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Hg(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function V7(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",l=Ai(r),c=t?$g(t.floating):!1;if(r===l||c&&i)return n;let d={scrollLeft:0,scrollTop:0},h=wi(1);const f=wi(0),p=ji(r);if((p||!p&&!i)&&((Tu(r)!=="body"||uf(l))&&(d=Vg(r)),ji(r))){const b=ml(r);h=mc(r),f.x=b.x+r.clientLeft,f.y=b.y+r.clientTop}const g=l&&!p&&!i?T5(l,d):wi(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+f.x+g.x,y:n.y*h.y-d.scrollTop*h.y+f.y+g.y}}function H7(e){return Array.from(e.getClientRects())}function W7(e){const t=Ai(e),n=Vg(e),r=e.ownerDocument.body,s=Fr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Fr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Hg(e);const c=-n.scrollTop;return $s(r).direction==="rtl"&&(l+=Fr(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:l,y:c}}const $N=25;function q7(e,t){const n=Ur(e),r=Ai(e),s=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,c=0,d=0;if(s){i=s.width,l=s.height;const f=$w();(!f||f&&t==="fixed")&&(c=s.offsetLeft,d=s.offsetTop)}const h=Hg(r);if(h<=0){const f=r.ownerDocument,p=f.body,g=getComputedStyle(p),b=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,j=Math.abs(r.clientWidth-p.clientWidth-b);j<=$N&&(i-=j)}else h<=$N&&(i+=h);return{width:i,height:l,x:c,y:d}}const Z7=new Set(["absolute","fixed"]);function G7(e,t){const n=ml(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=ji(e)?mc(e):wi(1),l=e.clientWidth*i.x,c=e.clientHeight*i.y,d=s*i.x,h=r*i.y;return{width:l,height:c,x:d,y:h}}function VN(e,t,n){let r;if(t==="viewport")r=q7(e,n);else if(t==="document")r=W7(Ai(e));else if(zs(t))r=G7(t,n);else{const s=P5(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Pm(r)}function k5(e,t){const n=la(e);return n===t||!zs(n)||du(n)?!1:$s(n).position==="fixed"||k5(n,t)}function K7(e,t){const n=t.get(e);if(n)return n;let r=oh(e,[],!1).filter(c=>zs(c)&&Tu(c)!=="body"),s=null;const i=$s(e).position==="fixed";let l=i?la(e):e;for(;zs(l)&&!du(l);){const c=$s(l),d=zw(l);!d&&c.position==="fixed"&&(s=null),(i?!d&&!s:!d&&c.position==="static"&&!!s&&Z7.has(s.position)||uf(l)&&!d&&k5(e,l))?r=r.filter(f=>f!==l):s=c,l=la(l)}return t.set(e,r),r}function Q7(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const l=[...n==="clippingAncestors"?$g(t)?[]:K7(t,this._c):[].concat(n),r],c=l[0],d=l.reduce((h,f)=>{const p=VN(t,f,s);return h.top=Fr(p.top,h.top),h.right=aa(p.right,h.right),h.bottom=aa(p.bottom,h.bottom),h.left=Fr(p.left,h.left),h},VN(t,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Y7(e){const{width:t,height:n}=j5(e);return{width:t,height:n}}function X7(e,t,n){const r=ji(t),s=Ai(t),i=n==="fixed",l=ml(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const d=wi(0);function h(){d.x=Hg(s)}if(r||!r&&!i)if((Tu(t)!=="body"||uf(s))&&(c=Vg(t)),r){const b=ml(t,!0,i,t);d.x=b.x+t.clientLeft,d.y=b.y+t.clientTop}else s&&h();i&&!r&&s&&h();const f=s&&!r&&!i?T5(s,c):wi(0),p=l.left+c.scrollLeft-d.x-f.x,g=l.top+c.scrollTop-d.y-f.y;return{x:p,y:g,width:l.width,height:l.height}}function Sv(e){return $s(e).position==="static"}function HN(e,t){if(!ji(e)||$s(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ai(e)===n&&(n=n.ownerDocument.body),n}function E5(e,t){const n=Ur(e);if($g(e))return n;if(!ji(e)){let s=la(e);for(;s&&!du(s);){if(zs(s)&&!Sv(s))return s;s=la(s)}return n}let r=HN(e,t);for(;r&&R7(r)&&Sv(r);)r=HN(r,t);return r&&du(r)&&Sv(r)&&!zw(r)?n:r||U7(e)||n}const J7=async function(e){const t=this.getOffsetParent||E5,n=this.getDimensions,r=await n(e.floating);return{reference:X7(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function e$(e){return $s(e).direction==="rtl"}const t$={convertOffsetParentRelativeRectToViewportRelativeRect:V7,getDocumentElement:Ai,getClippingRect:Q7,getOffsetParent:E5,getElementRects:J7,getClientRects:H7,getDimensions:Y7,getScale:mc,isElement:zs,isRTL:e$};function A5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function n$(e,t){let n=null,r;const s=Ai(e);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const h=e.getBoundingClientRect(),{left:f,top:p,width:g,height:b}=h;if(c||t(),!g||!b)return;const j=op(p),_=op(s.clientWidth-(f+g)),w=op(s.clientHeight-(p+b)),S=op(f),N={rootMargin:-j+"px "+-_+"px "+-w+"px "+-S+"px",threshold:Fr(0,aa(1,d))||1};let P=!0;function E(k){const M=k[0].intersectionRatio;if(M!==d){if(!P)return l();M?l(!1,M):r=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!A5(h,e.getBoundingClientRect())&&l(),P=!1}try{n=new IntersectionObserver(E,{...N,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,N)}n.observe(e)}return l(!0),i}function r$(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=Vw(e),f=s||i?[...h?oh(h):[],...oh(t)]:[];f.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const p=h&&c?n$(h,n):null;let g=-1,b=null;l&&(b=new ResizeObserver(S=>{let[x]=S;x&&x.target===h&&b&&(b.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(t)})),n()}),h&&!d&&b.observe(h),b.observe(t));let j,_=d?ml(e):null;d&&w();function w(){const S=ml(e);_&&!A5(_,S)&&n(),_=S,j=requestAnimationFrame(w)}return n(),()=>{var S;f.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),p==null||p(),(S=b)==null||S.disconnect(),b=null,d&&cancelAnimationFrame(j)}}const s$=T7,i$=k7,o$=C7,a$=A7,l$=j7,WN=N7,c$=E7,u$=(e,t,n)=>{const r=new Map,s={platform:t$,...n},i={...s.platform,_c:r};return S7(e,t,{...s,platform:i})};var d$=typeof document<"u",h$=function(){},Op=d$?v.useLayoutEffect:h$;function Tm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Tm(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Tm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function I5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qN(e,t){const n=I5(e);return Math.round(t*n)/n}function Nv(e){const t=v.useRef(e);return Op(()=>{t.current=e}),t}function f$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:l}={},transform:c=!0,whileElementsMounted:d,open:h}=e,[f,p]=v.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,b]=v.useState(r);Tm(g,r)||b(r);const[j,_]=v.useState(null),[w,S]=v.useState(null),x=v.useCallback(O=>{O!==k.current&&(k.current=O,_(O))},[]),N=v.useCallback(O=>{O!==M.current&&(M.current=O,S(O))},[]),P=i||j,E=l||w,k=v.useRef(null),M=v.useRef(null),z=v.useRef(f),D=d!=null,F=Nv(d),J=Nv(s),H=Nv(h),Y=v.useCallback(()=>{if(!k.current||!M.current)return;const O={placement:t,strategy:n,middleware:g};J.current&&(O.platform=J.current),u$(k.current,M.current,O).then(G=>{const X={...G,isPositioned:H.current!==!1};Z.current&&!Tm(z.current,X)&&(z.current=X,Pl.flushSync(()=>{p(X)}))})},[g,t,n,J,H]);Op(()=>{h===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,p(O=>({...O,isPositioned:!1})))},[h]);const Z=v.useRef(!1);Op(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Op(()=>{if(P&&(k.current=P),E&&(M.current=E),P&&E){if(F.current)return F.current(P,E,Y);Y()}},[P,E,Y,F,D]);const U=v.useMemo(()=>({reference:k,floating:M,setReference:x,setFloating:N}),[x,N]),V=v.useMemo(()=>({reference:P,floating:E}),[P,E]),K=v.useMemo(()=>{const O={position:n,left:0,top:0};if(!V.floating)return O;const G=qN(V.floating,f.x),X=qN(V.floating,f.y);return c?{...O,transform:"translate("+G+"px, "+X+"px)",...I5(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:X}},[n,c,V.floating,f.x,f.y]);return v.useMemo(()=>({...f,update:Y,refs:U,elements:V,floatingStyles:K}),[f,Y,U,V,K])}const p$=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?WN({element:r.current,padding:s}).fn(n):{}:r?WN({element:r,padding:s}).fn(n):{}}}},m$=(e,t)=>({...s$(e),options:[e,t]}),g$=(e,t)=>({...i$(e),options:[e,t]}),y$=(e,t)=>({...c$(e),options:[e,t]}),v$=(e,t)=>({...o$(e),options:[e,t]}),x$=(e,t)=>({...a$(e),options:[e,t]}),b$=(e,t)=>({...l$(e),options:[e,t]}),w$=(e,t)=>({...p$(e),options:[e,t]});var _$="Arrow",M5=v.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return o.jsx(Ae.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});M5.displayName=_$;var S$=M5;function Wg(e){const[t,n]=v.useState(void 0);return on(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,c;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,c=h.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Hw="Popper",[R5,ku]=Yn(Hw),[N$,L5]=R5(Hw),F5=e=>{const{__scopePopper:t,children:n}=e,[r,s]=v.useState(null);return o.jsx(N$,{scope:t,anchor:r,onAnchorChange:s,children:n})};F5.displayName=Hw;var O5="PopperAnchor",D5=v.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=L5(O5,n),l=v.useRef(null),c=et(t,l),d=v.useRef(null);return v.useEffect(()=>{const h=d.current;d.current=(r==null?void 0:r.current)||l.current,h!==d.current&&i.onAnchorChange(d.current)}),r?null:o.jsx(Ae.div,{...s,ref:c})});D5.displayName=O5;var Ww="PopperContent",[C$,j$]=R5(Ww),U5=v.forwardRef((e,t)=>{var fe,Oe,Ye,He,Xe,tt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:b="optimized",onPlaced:j,..._}=e,w=L5(Ww,n),[S,x]=v.useState(null),N=et(t,Lt=>x(Lt)),[P,E]=v.useState(null),k=Wg(P),M=(k==null?void 0:k.width)??0,z=(k==null?void 0:k.height)??0,D=r+(i!=="center"?"-"+i:""),F=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},J=Array.isArray(h)?h:[h],H=J.length>0,Y={padding:F,boundary:J.filter(T$),altBoundary:H},{refs:Z,floatingStyles:U,placement:V,isPositioned:K,middlewareData:O}=f$({strategy:"fixed",placement:D,whileElementsMounted:(...Lt)=>r$(...Lt,{animationFrame:b==="always"}),elements:{reference:w.anchor},middleware:[m$({mainAxis:s+z,alignmentAxis:l}),d&&g$({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?y$():void 0,...Y}),d&&v$({...Y}),x$({...Y,apply:({elements:Lt,rects:Yt,availableWidth:En,availableHeight:Pr})=>{const{width:fr,height:Zs}=Yt.reference,Zr=Lt.floating.style;Zr.setProperty("--radix-popper-available-width",`${En}px`),Zr.setProperty("--radix-popper-available-height",`${Pr}px`),Zr.setProperty("--radix-popper-anchor-width",`${fr}px`),Zr.setProperty("--radix-popper-anchor-height",`${Zs}px`)}}),P&&w$({element:P,padding:c}),k$({arrowWidth:M,arrowHeight:z}),g&&b$({strategy:"referenceHidden",...Y})]}),[G,X]=$5(V),ce=Kt(j);on(()=>{K&&(ce==null||ce())},[K,ce]);const Te=(fe=O.arrow)==null?void 0:fe.x,Ve=(Oe=O.arrow)==null?void 0:Oe.y,Ie=((Ye=O.arrow)==null?void 0:Ye.centerOffset)!==0,[ye,ue]=v.useState();return on(()=>{S&&ue(window.getComputedStyle(S).zIndex)},[S]),o.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:K?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[(He=O.transformOrigin)==null?void 0:He.x,(Xe=O.transformOrigin)==null?void 0:Xe.y].join(" "),...((tt=O.hide)==null?void 0:tt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(C$,{scope:n,placedSide:G,onArrowChange:E,arrowX:Te,arrowY:Ve,shouldHideArrow:Ie,children:o.jsx(Ae.div,{"data-side":G,"data-align":X,..._,ref:N,style:{..._.style,animation:K?void 0:"none"}})})})});U5.displayName=Ww;var B5="PopperArrow",P$={top:"bottom",right:"left",bottom:"top",left:"right"},z5=v.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=j$(B5,r),l=P$[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(S$,{...s,ref:n,style:{...s.style,display:"block"}})})});z5.displayName=B5;function T$(e){return e!==null}var k$=e=>({name:"transformOrigin",options:e,fn(t){var w,S,x;const{placement:n,rects:r,middlewareData:s}=t,l=((w=s.arrow)==null?void 0:w.centerOffset)!==0,c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[h,f]=$5(n),p={start:"0%",center:"50%",end:"100%"}[f],g=(((S=s.arrow)==null?void 0:S.x)??0)+c/2,b=(((x=s.arrow)==null?void 0:x.y)??0)+d/2;let j="",_="";return h==="bottom"?(j=l?p:`${g}px`,_=`${-d}px`):h==="top"?(j=l?p:`${g}px`,_=`${r.floating.height+d}px`):h==="right"?(j=`${-d}px`,_=l?p:`${b}px`):h==="left"&&(j=`${r.floating.width+d}px`,_=l?p:`${b}px`),{data:{x:j,y:_}}}});function $5(e){const[t,n="center"]=e.split("-");return[t,n]}var V5=F5,qw=D5,Zw=U5,Gw=z5,[qg,ste]=Yn("Tooltip",[ku]),Kw=ku(),H5="TooltipProvider",E$=700,ZN="tooltip.open",[A$,W5]=qg(H5),q5=e=>{const{__scopeTooltip:t,delayDuration:n=E$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,l=v.useRef(!0),c=v.useRef(!1),d=v.useRef(0);return v.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),o.jsx(A$,{scope:t,isOpenDelayedRef:l,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:v.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};q5.displayName=H5;var Z5="Tooltip",[ite,Zg]=qg(Z5),S0="TooltipTrigger",I$=v.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Zg(S0,n),i=W5(S0,n),l=Kw(n),c=v.useRef(null),d=et(t,c,s.onTriggerChange),h=v.useRef(!1),f=v.useRef(!1),p=v.useCallback(()=>h.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),o.jsx(qw,{asChild:!0,...l,children:o.jsx(Ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:d,onPointerMove:me(e.onPointerMove,g=>{g.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:me(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:me(e.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:me(e.onFocus,()=>{h.current||s.onOpen()}),onBlur:me(e.onBlur,s.onClose),onClick:me(e.onClick,s.onClose)})})});I$.displayName=S0;var M$="TooltipPortal",[ote,R$]=qg(M$,{forceMount:void 0}),hu="TooltipContent",G5=v.forwardRef((e,t)=>{const n=R$(hu,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,l=Zg(hu,e.__scopeTooltip);return o.jsx(Un,{present:r||l.open,children:l.disableHoverableContent?o.jsx(K5,{side:s,...i,ref:t}):o.jsx(L$,{side:s,...i,ref:t})})}),L$=v.forwardRef((e,t)=>{const n=Zg(hu,e.__scopeTooltip),r=W5(hu,e.__scopeTooltip),s=v.useRef(null),i=et(t,s),[l,c]=v.useState(null),{trigger:d,onClose:h}=n,f=s.current,{onPointerInTransitChange:p}=r,g=v.useCallback(()=>{c(null),p(!1)},[p]),b=v.useCallback((j,_)=>{const w=j.currentTarget,S={x:j.clientX,y:j.clientY},x=B$(S,w.getBoundingClientRect()),N=z$(S,x),P=$$(_.getBoundingClientRect()),E=H$([...N,...P]);c(E),p(!0)},[p]);return v.useEffect(()=>()=>g(),[g]),v.useEffect(()=>{if(d&&f){const j=w=>b(w,f),_=w=>b(w,d);return d.addEventListener("pointerleave",j),f.addEventListener("pointerleave",_),()=>{d.removeEventListener("pointerleave",j),f.removeEventListener("pointerleave",_)}}},[d,f,b,g]),v.useEffect(()=>{if(l){const j=_=>{const w=_.target,S={x:_.clientX,y:_.clientY},x=(d==null?void 0:d.contains(w))||(f==null?void 0:f.contains(w)),N=!V$(S,l);x?g():N&&(g(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,f,l,h,g]),o.jsx(K5,{...e,ref:i})}),[F$,O$]=qg(Z5,{isInside:!1}),D$=dz("TooltipContent"),K5=v.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:l,...c}=e,d=Zg(hu,n),h=Kw(n),{onClose:f}=d;return v.useEffect(()=>(document.addEventListener(ZN,f),()=>document.removeEventListener(ZN,f)),[f]),v.useEffect(()=>{if(d.trigger){const p=g=>{const b=g.target;b!=null&&b.contains(d.trigger)&&f()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[d.trigger,f]),o.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:f,children:o.jsxs(Zw,{"data-state":d.stateAttribute,...h,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(D$,{children:r}),o.jsx(F$,{scope:n,isInside:!0,children:o.jsx(Mz,{id:d.contentId,role:"tooltip",children:s||r})})]})})});G5.displayName=hu;var Q5="TooltipArrow",U$=v.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Kw(n);return O$(Q5,n).isInside?null:o.jsx(Gw,{...s,...r,ref:t})});U$.displayName=Q5;function B$(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function z$(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function $$(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function V$(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const c=t[i],d=t[l],h=c.x,f=c.y,p=d.x,g=d.y;f>r!=g>r&&n<(p-h)*(r-f)/(g-f)+h&&(s=!s)}return s}function H$(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),W$(t)}function W$(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var q$=q5,Y5=G5;const Z$=q$,G$=v.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(Y5,{ref:r,sideOffset:t,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));G$.displayName=Y5.displayName;function Bn(){const{toast:e}=Pn(),{data:t,error:n,isLoading:r}=Dt({queryKey:["/api/auth/user"],queryFn:async()=>{const c=await fetch("/api/auth/user",{credentials:"include"});if(c.status===401)return null;if(!c.ok)throw new Error(`${c.status}: ${c.statusText}`);return await c.json()},retry:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}),s=Fn({mutationFn:async c=>await(await On("POST","/api/login",c)).json(),onSuccess:c=>{ss.setQueryData(["/api/auth/user"],c),ss.invalidateQueries({queryKey:["/api/unified"]}),e({title:"Signed in successfully",description:"Loading latest safety data..."})},onError:c=>{e({title:"Login failed",description:c.message,variant:"destructive"})}}),i=Fn({mutationFn:async c=>await(await On("POST","/api/register",c)).json(),onSuccess:c=>{ss.setQueryData(["/api/auth/user"],c),ss.invalidateQueries({queryKey:["/api/unified"]}),e({title:"Account created!",description:"Loading latest safety data..."})},onError:c=>{e({title:"Registration failed",description:c.message,variant:"destructive"})}}),l=Fn({mutationFn:async()=>{await On("POST","/api/logout")},onSuccess:()=>{ss.setQueryData(["/api/auth/user"],null),e({title:"Signed out",description:"You have been successfully signed out."})}});return{user:t??null,isLoading:r,error:n,isAuthenticated:!!t,loginMutation:s,logoutMutation:l,registerMutation:i}}var N0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(cd,function(n){var r="1.9.4";function s(a){var u,m,y,C;for(m=1,y=arguments.length;m<y;m++){C=arguments[m];for(u in C)a[u]=C[u]}return a}var i=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function l(a,u){var m=Array.prototype.slice;if(a.bind)return a.bind.apply(a,m.call(arguments,1));var y=m.call(arguments,2);return function(){return a.apply(u,y.length?y.concat(m.call(arguments)):arguments)}}var c=0;function d(a){return"_leaflet_id"in a||(a._leaflet_id=++c),a._leaflet_id}function h(a,u,m){var y,C,A,B;return B=function(){y=!1,C&&(A.apply(m,C),C=!1)},A=function(){y?C=arguments:(a.apply(m,arguments),setTimeout(B,u),y=!0)},A}function f(a,u,m){var y=u[1],C=u[0],A=y-C;return a===y&&m?a:((a-C)%A+A)%A+C}function p(){return!1}function g(a,u){if(u===!1)return a;var m=Math.pow(10,u===void 0?6:u);return Math.round(a*m)/m}function b(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function j(a){return b(a).split(/\s+/)}function _(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var m in u)a.options[m]=u[m];return a.options}function w(a,u,m){var y=[];for(var C in a)y.push(encodeURIComponent(m?C.toUpperCase():C)+"="+encodeURIComponent(a[C]));return(!u||u.indexOf("?")===-1?"?":"&")+y.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function x(a,u){return a.replace(S,function(m,y){var C=u[y];if(C===void 0)throw new Error("No value provided for variable "+m);return typeof C=="function"&&(C=C(u)),C})}var N=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function P(a,u){for(var m=0;m<a.length;m++)if(a[m]===u)return m;return-1}var E="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function k(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var M=0;function z(a){var u=+new Date,m=Math.max(0,16-(u-M));return M=u+m,window.setTimeout(a,m)}var D=window.requestAnimationFrame||k("RequestAnimationFrame")||z,F=window.cancelAnimationFrame||k("CancelAnimationFrame")||k("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function J(a,u,m){if(m&&D===z)a.call(u);else return D.call(window,l(a,u))}function H(a){a&&F.call(window,a)}var Y={__proto__:null,extend:s,create:i,bind:l,get lastId(){return c},stamp:d,throttle:h,wrapNum:f,falseFn:p,formatNum:g,trim:b,splitWords:j,setOptions:_,getParamString:w,template:x,isArray:N,indexOf:P,emptyImageUrl:E,requestFn:D,cancelFn:F,requestAnimFrame:J,cancelAnimFrame:H};function Z(){}Z.extend=function(a){var u=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=u.__super__=this.prototype,y=i(m);y.constructor=u,u.prototype=y;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(u[C]=this[C]);return a.statics&&s(u,a.statics),a.includes&&(U(a.includes),s.apply(null,[y].concat(a.includes))),s(y,a),delete y.statics,delete y.includes,y.options&&(y.options=m.options?i(m.options):{},s(y.options,a.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var A=0,B=y._initHooks.length;A<B;A++)y._initHooks[A].call(this)}},u},Z.include=function(a){var u=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},Z.mergeOptions=function(a){return s(this.prototype.options,a),this},Z.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),m=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function U(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=N(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(a,u,m){if(typeof a=="object")for(var y in a)this._on(y,a[y],u);else{a=j(a);for(var C=0,A=a.length;C<A;C++)this._on(a[C],u,m)}return this},off:function(a,u,m){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var y in a)this._off(y,a[y],u);else{a=j(a);for(var C=arguments.length===1,A=0,B=a.length;A<B;A++)C?this._off(a[A]):this._off(a[A],u,m)}return this},_on:function(a,u,m,y){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,m)===!1){m===this&&(m=void 0);var C={fn:u,ctx:m};y&&(C.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(C)}},_off:function(a,u,m){var y,C,A;if(this._events&&(y=this._events[a],!!y)){if(arguments.length===1){if(this._firingCount)for(C=0,A=y.length;C<A;C++)y[C].fn=p;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var B=this._listens(a,u,m);if(B!==!1){var q=y[B];this._firingCount&&(q.fn=p,this._events[a]=y=y.slice()),y.splice(B,1)}}},fire:function(a,u,m){if(!this.listens(a,m))return this;var y=s({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var C=this._events[a];if(C){this._firingCount=this._firingCount+1||1;for(var A=0,B=C.length;A<B;A++){var q=C[A],ee=q.fn;q.once&&this.off(a,ee,q.ctx),ee.call(q.ctx||this,y)}this._firingCount--}}return m&&this._propagateEvent(y),this},listens:function(a,u,m,y){typeof a!="string"&&console.warn('"string" type argument expected');var C=u;typeof u!="function"&&(y=!!u,C=void 0,m=void 0);var A=this._events&&this._events[a];if(A&&A.length&&this._listens(a,C,m)!==!1)return!0;if(y){for(var B in this._eventParents)if(this._eventParents[B].listens(a,u,m,y))return!0}return!1},_listens:function(a,u,m){if(!this._events)return!1;var y=this._events[a]||[];if(!u)return!!y.length;m===this&&(m=void 0);for(var C=0,A=y.length;C<A;C++)if(y[C].fn===u&&y[C].ctx===m)return C;return!1},once:function(a,u,m){if(typeof a=="object")for(var y in a)this._on(y,a[y],u,!0);else{a=j(a);for(var C=0,A=a.length;C<A;C++)this._on(a[C],u,m,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[d(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[d(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var K=Z.extend(V);function O(a,u,m){this.x=m?Math.round(a):a,this.y=m?Math.round(u):u}var G=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(a){return this.clone()._add(X(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(X(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new O(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new O(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(a){a=X(a);var u=a.x-this.x,m=a.y-this.y;return Math.sqrt(u*u+m*m)},equals:function(a){return a=X(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=X(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function X(a,u,m){return a instanceof O?a:N(a)?new O(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new O(a.x,a.y):new O(a,u,m)}function ce(a,u){if(a)for(var m=u?[a,u]:a,y=0,C=m.length;y<C;y++)this.extend(m[y])}ce.prototype={extend:function(a){var u,m;if(!a)return this;if(a instanceof O||typeof a[0]=="number"||"x"in a)u=m=X(a);else if(a=Te(a),u=a.min,m=a.max,!u||!m)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=m.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(a){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,m;return typeof a[0]=="number"||a instanceof O?a=X(a):a=Te(a),a instanceof ce?(u=a.min,m=a.max):u=m=a,u.x>=this.min.x&&m.x<=this.max.x&&u.y>=this.min.y&&m.y<=this.max.y},intersects:function(a){a=Te(a);var u=this.min,m=this.max,y=a.min,C=a.max,A=C.x>=u.x&&y.x<=m.x,B=C.y>=u.y&&y.y<=m.y;return A&&B},overlaps:function(a){a=Te(a);var u=this.min,m=this.max,y=a.min,C=a.max,A=C.x>u.x&&y.x<m.x,B=C.y>u.y&&y.y<m.y;return A&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,m=this.max,y=Math.abs(u.x-m.x)*a,C=Math.abs(u.y-m.y)*a;return Te(X(u.x-y,u.y-C),X(m.x+y,m.y+C))},equals:function(a){return a?(a=Te(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Te(a,u){return!a||a instanceof ce?a:new ce(a,u)}function Ve(a,u){if(a)for(var m=u?[a,u]:a,y=0,C=m.length;y<C;y++)this.extend(m[y])}Ve.prototype={extend:function(a){var u=this._southWest,m=this._northEast,y,C;if(a instanceof ye)y=a,C=a;else if(a instanceof Ve){if(y=a._southWest,C=a._northEast,!y||!C)return this}else return a?this.extend(ue(a)||Ie(a)):this;return!u&&!m?(this._southWest=new ye(y.lat,y.lng),this._northEast=new ye(C.lat,C.lng)):(u.lat=Math.min(y.lat,u.lat),u.lng=Math.min(y.lng,u.lng),m.lat=Math.max(C.lat,m.lat),m.lng=Math.max(C.lng,m.lng)),this},pad:function(a){var u=this._southWest,m=this._northEast,y=Math.abs(u.lat-m.lat)*a,C=Math.abs(u.lng-m.lng)*a;return new Ve(new ye(u.lat-y,u.lng-C),new ye(m.lat+y,m.lng+C))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ye||"lat"in a?a=ue(a):a=Ie(a);var u=this._southWest,m=this._northEast,y,C;return a instanceof Ve?(y=a.getSouthWest(),C=a.getNorthEast()):y=C=a,y.lat>=u.lat&&C.lat<=m.lat&&y.lng>=u.lng&&C.lng<=m.lng},intersects:function(a){a=Ie(a);var u=this._southWest,m=this._northEast,y=a.getSouthWest(),C=a.getNorthEast(),A=C.lat>=u.lat&&y.lat<=m.lat,B=C.lng>=u.lng&&y.lng<=m.lng;return A&&B},overlaps:function(a){a=Ie(a);var u=this._southWest,m=this._northEast,y=a.getSouthWest(),C=a.getNorthEast(),A=C.lat>u.lat&&y.lat<m.lat,B=C.lng>u.lng&&y.lng<m.lng;return A&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=Ie(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ie(a,u){return a instanceof Ve?a:new Ve(a,u)}function ye(a,u,m){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,m!==void 0&&(this.alt=+m)}ye.prototype={equals:function(a,u){if(!a)return!1;a=ue(a);var m=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return m<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+g(this.lat,a)+", "+g(this.lng,a)+")"},distanceTo:function(a){return Oe.distance(this,ue(a))},wrap:function(){return Oe.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,m=u/Math.cos(Math.PI/180*this.lat);return Ie([this.lat-u,this.lng-m],[this.lat+u,this.lng+m])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function ue(a,u,m){return a instanceof ye?a:N(a)&&typeof a[0]!="object"?a.length===3?new ye(a[0],a[1],a[2]):a.length===2?new ye(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ye(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new ye(a,u,m)}var fe={latLngToPoint:function(a,u){var m=this.projection.project(a),y=this.scale(u);return this.transformation._transform(m,y)},pointToLatLng:function(a,u){var m=this.scale(u),y=this.transformation.untransform(a,m);return this.projection.unproject(y)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,m=this.scale(a),y=this.transformation.transform(u.min,m),C=this.transformation.transform(u.max,m);return new ce(y,C)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?f(a.lng,this.wrapLng,!0):a.lng,m=this.wrapLat?f(a.lat,this.wrapLat,!0):a.lat,y=a.alt;return new ye(m,u,y)},wrapLatLngBounds:function(a){var u=a.getCenter(),m=this.wrapLatLng(u),y=u.lat-m.lat,C=u.lng-m.lng;if(y===0&&C===0)return a;var A=a.getSouthWest(),B=a.getNorthEast(),q=new ye(A.lat-y,A.lng-C),ee=new ye(B.lat-y,B.lng-C);return new Ve(q,ee)}},Oe=s({},fe,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var m=Math.PI/180,y=a.lat*m,C=u.lat*m,A=Math.sin((u.lat-a.lat)*m/2),B=Math.sin((u.lng-a.lng)*m/2),q=A*A+Math.cos(y)*Math.cos(C)*B*B,ee=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*ee}}),Ye=6378137,He={R:Ye,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,m=this.MAX_LATITUDE,y=Math.max(Math.min(m,a.lat),-m),C=Math.sin(y*u);return new O(this.R*a.lng*u,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(a){var u=180/Math.PI;return new ye((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=Ye*Math.PI;return new ce([-a,-a],[a,a])}()};function Xe(a,u,m,y){if(N(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=m,this._d=y}Xe.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new O((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function tt(a,u,m,y){return new Xe(a,u,m,y)}var Lt=s({},Oe,{code:"EPSG:3857",projection:He,transformation:function(){var a=.5/(Math.PI*He.R);return tt(a,.5,-a,.5)}()}),Yt=s({},Lt,{code:"EPSG:900913"});function En(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Pr(a,u){var m="",y,C,A,B,q,ee;for(y=0,A=a.length;y<A;y++){for(q=a[y],C=0,B=q.length;C<B;C++)ee=q[C],m+=(C?"L":"M")+ee.x+" "+ee.y;m+=u?Be.svg?"z":"x":""}return m||"M0 0"}var fr=document.documentElement.style,Zs="ActiveXObject"in window,Zr=Zs&&!document.addEventListener,$="msLaunchUri"in navigator&&!("documentMode"in document),Q=Qs("webkit"),se=Qs("android"),Se=Qs("android 2")||Qs("android 3"),ve=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pe=se&&Qs("Google")&&ve<537&&!("AudioNode"in window),Me=!!window.opera,ft=!$&&Qs("chrome"),W=Qs("gecko")&&!Q&&!Me&&!Zs,xe=!ft&&Qs("safari"),ge=Qs("phantom"),Ee="OTransition"in fr,Ue=navigator.platform.indexOf("Win")===0,ct=Zs&&"transition"in fr,$e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Se,Tt="MozPerspective"in fr,ht=!window.L_DISABLE_3D&&(ct||$e||Tt)&&!Ee&&!ge,kt=typeof orientation<"u"||Qs("mobile"),An=kt&&Q,Gs=kt&&$e,ps=!window.PointerEvent&&window.MSPointerEvent,vt=!!(window.PointerEvent||ps),pn="ontouchstart"in window||!!window.TouchEvent,Tr=!window.L_NO_TOUCH&&(pn||vt),pr=kt&&Me,Ks=kt&&W,_a=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zn=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",p,u),window.removeEventListener("testPassiveEventSupport",p,u)}catch{}return a}(),mr=function(){return!!document.createElement("canvas").getContext}(),bf=!!(document.createElementNS&&En("svg").createSVGRect),hD=!!bf&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fD=!bf&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),pD=navigator.platform.indexOf("Mac")===0,mD=navigator.platform.indexOf("Linux")===0;function Qs(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Be={ie:Zs,ielt9:Zr,edge:$,webkit:Q,android:se,android23:Se,androidStock:pe,opera:Me,chrome:ft,gecko:W,safari:xe,phantom:ge,opera12:Ee,win:Ue,ie3d:ct,webkit3d:$e,gecko3d:Tt,any3d:ht,mobile:kt,mobileWebkit:An,mobileWebkit3d:Gs,msPointer:ps,pointer:vt,touch:Tr,touchNative:pn,mobileOpera:pr,mobileGecko:Ks,retina:_a,passiveEvents:zn,canvas:mr,svg:bf,vml:fD,inlineSvg:hD,mac:pD,linux:mD},t1=Be.msPointer?"MSPointerDown":"pointerdown",n1=Be.msPointer?"MSPointerMove":"pointermove",r1=Be.msPointer?"MSPointerUp":"pointerup",s1=Be.msPointer?"MSPointerCancel":"pointercancel",yy={touchstart:t1,touchmove:n1,touchend:r1,touchcancel:s1},i1={touchstart:wD,touchmove:wf,touchend:wf,touchcancel:wf},El={},o1=!1;function gD(a,u,m){return u==="touchstart"&&bD(),i1[u]?(m=i1[u].bind(this,m),a.addEventListener(yy[u],m,!1),m):(console.warn("wrong event specified:",u),p)}function yD(a,u,m){if(!yy[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(yy[u],m,!1)}function vD(a){El[a.pointerId]=a}function xD(a){El[a.pointerId]&&(El[a.pointerId]=a)}function a1(a){delete El[a.pointerId]}function bD(){o1||(document.addEventListener(t1,vD,!0),document.addEventListener(n1,xD,!0),document.addEventListener(r1,a1,!0),document.addEventListener(s1,a1,!0),o1=!0)}function wf(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var m in El)u.touches.push(El[m]);u.changedTouches=[u],a(u)}}function wD(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&In(u),wf(a,u)}function _D(a){var u={},m,y;for(y in a)m=a[y],u[y]=m&&m.bind?m.bind(a):m;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var SD=200;function ND(a,u){a.addEventListener("dblclick",u);var m=0,y;function C(A){if(A.detail!==1){y=A.detail;return}if(!(A.pointerType==="mouse"||A.sourceCapabilities&&!A.sourceCapabilities.firesTouchEvents)){var B=h1(A);if(!(B.some(function(ee){return ee instanceof HTMLLabelElement&&ee.attributes.for})&&!B.some(function(ee){return ee instanceof HTMLInputElement||ee instanceof HTMLSelectElement}))){var q=Date.now();q-m<=SD?(y++,y===2&&u(_D(A))):y=1,m=q}}}return a.addEventListener("click",C),{dblclick:u,simDblclick:C}}function CD(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var vy=Nf(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ru=Nf(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),l1=Ru==="webkitTransition"||Ru==="OTransition"?Ru+"End":"transitionend";function c1(a){return typeof a=="string"?document.getElementById(a):a}function Lu(a,u){var m=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!m||m==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(a,null);m=y?y[u]:null}return m==="auto"?null:m}function bt(a,u,m){var y=document.createElement(a);return y.className=u||"",m&&m.appendChild(y),y}function zt(a){var u=a.parentNode;u&&u.removeChild(a)}function _f(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Al(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function Il(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function xy(a,u){if(a.classList!==void 0)return a.classList.contains(u);var m=Sf(a);return m.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(m)}function at(a,u){if(a.classList!==void 0)for(var m=j(u),y=0,C=m.length;y<C;y++)a.classList.add(m[y]);else if(!xy(a,u)){var A=Sf(a);by(a,(A?A+" ":"")+u)}}function Xt(a,u){a.classList!==void 0?a.classList.remove(u):by(a,b((" "+Sf(a)+" ").replace(" "+u+" "," ")))}function by(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function Sf(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Gr(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&jD(a,u)}function jD(a,u){var m=!1,y="DXImageTransform.Microsoft.Alpha";try{m=a.filters.item(y)}catch{if(u===1)return}u=Math.round(u*100),m?(m.Enabled=u!==100,m.Opacity=u):a.style.filter+=" progid:"+y+"(opacity="+u+")"}function Nf(a){for(var u=document.documentElement.style,m=0;m<a.length;m++)if(a[m]in u)return a[m];return!1}function Sa(a,u,m){var y=u||new O(0,0);a.style[vy]=(Be.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(m?" scale("+m+")":"")}function an(a,u){a._leaflet_pos=u,Be.any3d?Sa(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function Na(a){return a._leaflet_pos||new O(0,0)}var Fu,Ou,wy;if("onselectstart"in document)Fu=function(){nt(window,"selectstart",In)},Ou=function(){Et(window,"selectstart",In)};else{var Du=Nf(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Fu=function(){if(Du){var a=document.documentElement.style;wy=a[Du],a[Du]="none"}},Ou=function(){Du&&(document.documentElement.style[Du]=wy,wy=void 0)}}function _y(){nt(window,"dragstart",In)}function Sy(){Et(window,"dragstart",In)}var Cf,Ny;function Cy(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(jf(),Cf=a,Ny=a.style.outlineStyle,a.style.outlineStyle="none",nt(window,"keydown",jf))}function jf(){Cf&&(Cf.style.outlineStyle=Ny,Cf=void 0,Ny=void 0,Et(window,"keydown",jf))}function u1(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function jy(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var PD={__proto__:null,TRANSFORM:vy,TRANSITION:Ru,TRANSITION_END:l1,get:c1,getStyle:Lu,create:bt,remove:zt,empty:_f,toFront:Al,toBack:Il,hasClass:xy,addClass:at,removeClass:Xt,setClass:by,getClass:Sf,setOpacity:Gr,testProp:Nf,setTransform:Sa,setPosition:an,getPosition:Na,get disableTextSelection(){return Fu},get enableTextSelection(){return Ou},disableImageDrag:_y,enableImageDrag:Sy,preventOutline:Cy,restoreOutline:jf,getSizedParentNode:u1,getScale:jy};function nt(a,u,m,y){if(u&&typeof u=="object")for(var C in u)Ty(a,C,u[C],m);else{u=j(u);for(var A=0,B=u.length;A<B;A++)Ty(a,u[A],m,y)}return this}var Ys="_leaflet_events";function Et(a,u,m,y){if(arguments.length===1)d1(a),delete a[Ys];else if(u&&typeof u=="object")for(var C in u)ky(a,C,u[C],m);else if(u=j(u),arguments.length===2)d1(a,function(q){return P(u,q)!==-1});else for(var A=0,B=u.length;A<B;A++)ky(a,u[A],m,y);return this}function d1(a,u){for(var m in a[Ys]){var y=m.split(/\d/)[0];(!u||u(y))&&ky(a,y,null,null,m)}}var Py={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ty(a,u,m,y){var C=u+d(m)+(y?"_"+d(y):"");if(a[Ys]&&a[Ys][C])return this;var A=function(q){return m.call(y||a,q||window.event)},B=A;!Be.touchNative&&Be.pointer&&u.indexOf("touch")===0?A=gD(a,u,A):Be.touch&&u==="dblclick"?A=ND(a,A):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Py[u]||u,A,Be.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(A=function(q){q=q||window.event,Ay(a,q)&&B(q)},a.addEventListener(Py[u],A,!1)):a.addEventListener(u,B,!1):a.attachEvent("on"+u,A),a[Ys]=a[Ys]||{},a[Ys][C]=A}function ky(a,u,m,y,C){C=C||u+d(m)+(y?"_"+d(y):"");var A=a[Ys]&&a[Ys][C];if(!A)return this;!Be.touchNative&&Be.pointer&&u.indexOf("touch")===0?yD(a,u,A):Be.touch&&u==="dblclick"?CD(a,A):"removeEventListener"in a?a.removeEventListener(Py[u]||u,A,!1):a.detachEvent("on"+u,A),a[Ys][C]=null}function Ca(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Ey(a){return Ty(a,"wheel",Ca),this}function Uu(a){return nt(a,"mousedown touchstart dblclick contextmenu",Ca),a._leaflet_disable_click=!0,this}function In(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function ja(a){return In(a),Ca(a),this}function h1(a){if(a.composedPath)return a.composedPath();for(var u=[],m=a.target;m;)u.push(m),m=m.parentNode;return u}function f1(a,u){if(!u)return new O(a.clientX,a.clientY);var m=jy(u),y=m.boundingClientRect;return new O((a.clientX-y.left)/m.x-u.clientLeft,(a.clientY-y.top)/m.y-u.clientTop)}var TD=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function p1(a){return Be.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/TD:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ay(a,u){var m=u.relatedTarget;if(!m)return!0;try{for(;m&&m!==a;)m=m.parentNode}catch{return!1}return m!==a}var kD={__proto__:null,on:nt,off:Et,stopPropagation:Ca,disableScrollPropagation:Ey,disableClickPropagation:Uu,preventDefault:In,stop:ja,getPropagationPath:h1,getMousePosition:f1,getWheelDelta:p1,isExternalTarget:Ay,addListener:nt,removeListener:Et},m1=K.extend({run:function(a,u,m,y){this.stop(),this._el=a,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=Na(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=J(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,m=this._duration*1e3;u<m?this._runFrame(this._easeOut(u/m),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var m=this._startPos.add(this._offset.multiplyBy(a));u&&m._round(),an(this._el,m),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),mt=K.extend({options:{crs:Lt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=_(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(ue(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ru&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nt(this._proxy,l1,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,m){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(ue(a),u,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=s({animate:m.animate},m.zoom),m.pan=s({animate:m.animate,duration:m.duration},m.pan));var y=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,m.zoom):this._tryAnimatedPan(a,m.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,m.pan&&m.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,m){var y=this.getZoomScale(u),C=this.getSize().divideBy(2),A=a instanceof O?a:this.latLngToContainerPoint(a),B=A.subtract(C).multiplyBy(1-1/y),q=this.containerPointToLatLng(C.add(B));return this.setView(q,u,{zoom:m})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():Ie(a);var m=X(u.paddingTopLeft||u.padding||[0,0]),y=X(u.paddingBottomRight||u.padding||[0,0]),C=this.getBoundsZoom(a,!1,m.add(y));if(C=typeof u.maxZoom=="number"?Math.min(u.maxZoom,C):C,C===1/0)return{center:a.getCenter(),zoom:C};var A=y.subtract(m).divideBy(2),B=this.project(a.getSouthWest(),C),q=this.project(a.getNorthEast(),C),ee=this.unproject(B.add(q).divideBy(2).add(A),C);return{center:ee,zoom:C}},fitBounds:function(a,u){if(a=Ie(a),!a.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(a,u);return this.setView(m.center,m.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=X(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new m1,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){at(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,m,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,m){if(m=m||{},m.animate===!1||!Be.any3d)return this.setView(a,u,m);this._stop();var y=this.project(this.getCenter()),C=this.project(a),A=this.getSize(),B=this._zoom;a=ue(a),u=u===void 0?B:u;var q=Math.max(A.x,A.y),ee=q*this.getZoomScale(B,u),ae=C.distanceTo(y)||1,je=1.42,qe=je*je;function ut(ln){var Df=ln?-1:1,y6=ln?ee:q,v6=ee*ee-q*q+Df*qe*qe*ae*ae,x6=2*y6*qe*ae,$y=v6/x6,K1=Math.sqrt($y*$y+1)-$y,b6=K1<1e-9?-18:Math.log(K1);return b6}function Xn(ln){return(Math.exp(ln)-Math.exp(-ln))/2}function wn(ln){return(Math.exp(ln)+Math.exp(-ln))/2}function Qr(ln){return Xn(ln)/wn(ln)}var gr=ut(0);function Dl(ln){return q*(wn(gr)/wn(gr+je*ln))}function f6(ln){return q*(wn(gr)*Qr(gr+je*ln)-Xn(gr))/qe}function p6(ln){return 1-Math.pow(1-ln,1.5)}var m6=Date.now(),Z1=(ut(1)-gr)/je,g6=m.duration?1e3*m.duration:1e3*Z1*.8;function G1(){var ln=(Date.now()-m6)/g6,Df=p6(ln)*Z1;ln<=1?(this._flyToFrame=J(G1,this),this._move(this.unproject(y.add(C.subtract(y).multiplyBy(f6(Df)/ae)),B),this.getScaleZoom(q/Dl(Df),B),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),G1.call(this),this},flyToBounds:function(a,u){var m=this._getBoundsCenterZoom(a,u);return this.flyTo(m.center,m.zoom,u)},setMaxBounds:function(a){return a=Ie(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var m=this.getCenter(),y=this._limitCenter(m,this._zoom,Ie(a));return m.equals(y)||this.panTo(y,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var m=X(u.paddingTopLeft||u.padding||[0,0]),y=X(u.paddingBottomRight||u.padding||[0,0]),C=this.project(this.getCenter()),A=this.project(a),B=this.getPixelBounds(),q=Te([B.min.add(m),B.max.subtract(y)]),ee=q.getSize();if(!q.contains(A)){this._enforcingBounds=!0;var ae=A.subtract(q.getCenter()),je=q.extend(A).getSize().subtract(ee);C.x+=ae.x<0?-je.x:je.x,C.y+=ae.y<0?-je.y:je.y,this.panTo(this.unproject(C),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),y=u.divideBy(2).round(),C=m.divideBy(2).round(),A=y.subtract(C);return!A.x&&!A.y?this:(a.animate&&a.pan?this.panBy(A):(a.pan&&this._rawPanBy(A),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=l(this._handleGeolocationResponse,this),m=l(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,m,a):navigator.geolocation.getCurrentPosition(u,m,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,m=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,m=a.coords.longitude,y=new ye(u,m),C=y.toBounds(a.coords.accuracy*2),A=this._locateOptions;if(A.setView){var B=this.getBoundsZoom(C);this.setView(y,A.maxZoom?Math.min(B,A.maxZoom):B)}var q={latlng:y,bounds:C,timestamp:a.timestamp};for(var ee in a.coords)typeof a.coords[ee]=="number"&&(q[ee]=a.coords[ee]);this.fire("locationfound",q)}},addHandler:function(a,u){if(!u)return this;var m=this[a]=new u(this);return this._handlers.push(m),this.options[a]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)zt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var m="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),y=bt("div",m,u||this._mapPane);return a&&(this._panes[a]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),m=this.unproject(a.getTopRight());return new Ve(u,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,m){a=Ie(a),m=X(m||[0,0]);var y=this.getZoom()||0,C=this.getMinZoom(),A=this.getMaxZoom(),B=a.getNorthWest(),q=a.getSouthEast(),ee=this.getSize().subtract(m),ae=Te(this.project(q,y),this.project(B,y)).getSize(),je=Be.any3d?this.options.zoomSnap:1,qe=ee.x/ae.x,ut=ee.y/ae.y,Xn=u?Math.max(qe,ut):Math.min(qe,ut);return y=this.getScaleZoom(Xn,y),je&&(y=Math.round(y/(je/100))*(je/100),y=u?Math.ceil(y/je)*je:Math.floor(y/je)*je),Math.max(C,Math.min(A,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var m=this._getTopLeftPoint(a,u);return new ce(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var m=this.options.crs;return u=u===void 0?this._zoom:u,m.scale(a)/m.scale(u)},getScaleZoom:function(a,u){var m=this.options.crs;u=u===void 0?this._zoom:u;var y=m.zoom(a*m.scale(u));return isNaN(y)?1/0:y},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(ue(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(X(a),u)},layerPointToLatLng:function(a){var u=X(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(ue(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ue(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Ie(a))},distance:function(a,u){return this.options.crs.distance(ue(a),ue(u))},containerPointToLayerPoint:function(a){return X(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return X(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(X(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(a)))},mouseEventToContainerPoint:function(a){return f1(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=c1(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nt(u,"scroll",this._onScroll,this),this._containerId=d(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,at(a,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Lu(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),an(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(at(a.markerPane,"leaflet-zoom-hide"),at(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,m){an(this._mapPane,new O(0,0));var y=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var C=this._zoom!==u;this._moveStart(C,m)._move(a,u)._moveEnd(C),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,m,y){u===void 0&&(u=this._zoom);var C=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),y?m&&m.pinch&&this.fire("zoom",m):((C||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){an(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[d(this._container)]=this;var u=a?Et:nt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=J(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var m=[],y,C=u==="mouseout"||u==="mouseover",A=a.target||a.srcElement,B=!1;A;){if(y=this._targets[d(A)],y&&(u==="click"||u==="preclick")&&this._draggableMoved(y)){B=!0;break}if(y&&y.listens(u,!0)&&(C&&!Ay(A,a)||(m.push(y),C))||A===this._container)break;A=A.parentNode}return!m.length&&!B&&!C&&this.listens(u,!0)&&(m=[this]),m},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var m=a.type;m==="mousedown"&&Cy(u),this._fireDOMEvent(a,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,m){if(a.type==="click"){var y=s({},a);y.type="preclick",this._fireDOMEvent(y,y.type,m)}var C=this._findEventTargets(a,u);if(m){for(var A=[],B=0;B<m.length;B++)m[B].listens(u,!0)&&A.push(m[B]);C=A.concat(C)}if(C.length){u==="contextmenu"&&In(a);var q=C[0],ee={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ae=q.getLatLng&&(!q._radius||q._radius<=10);ee.containerPoint=ae?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(a),ee.layerPoint=this.containerPointToLayerPoint(ee.containerPoint),ee.latlng=ae?q.getLatLng():this.layerPointToLatLng(ee.layerPoint)}for(B=0;B<C.length;B++)if(C[B].fire(u,ee,!0),ee.originalEvent._stopped||C[B].options.bubblingMouseEvents===!1&&P(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return Na(this._mapPane)||new O(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var m=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var m=this.getSize()._divideBy(2);return this.project(a,u)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,m){var y=this._getNewPixelOrigin(m,u);return this.project(a,u)._subtract(y)},_latLngBoundsToNewLayerBounds:function(a,u,m){var y=this._getNewPixelOrigin(m,u);return Te([this.project(a.getSouthWest(),u)._subtract(y),this.project(a.getNorthWest(),u)._subtract(y),this.project(a.getSouthEast(),u)._subtract(y),this.project(a.getNorthEast(),u)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,m){if(!m)return a;var y=this.project(a,u),C=this.getSize().divideBy(2),A=new ce(y.subtract(C),y.add(C)),B=this._getBoundsOffset(A,m,u);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?a:this.unproject(y.add(B),u)},_limitOffset:function(a,u){if(!u)return a;var m=this.getPixelBounds(),y=new ce(m.min.add(a),m.max.add(a));return a.add(this._getBoundsOffset(y,u))},_getBoundsOffset:function(a,u,m){var y=Te(this.project(u.getNorthEast(),m),this.project(u.getSouthWest(),m)),C=y.min.subtract(a.min),A=y.max.subtract(a.max),B=this._rebound(C.x,-A.x),q=this._rebound(C.y,-A.y);return new O(B,q)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),m=this.getMaxZoom(),y=Be.any3d?this.options.zoomSnap:1;return y&&(a=Math.round(a/y)*y),Math.max(u,Math.min(m,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var m=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,u),!0)},_createAnimProxy:function(){var a=this._proxy=bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var m=vy,y=this._proxy.style[m];Sa(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),y===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();Sa(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(u),C=this._getCenterOffset(a)._divideBy(1-1/y);return m.animate!==!0&&!this.getSize().contains(C)?!1:(J(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,m,y){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,at(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ED(a,u){return new mt(a,u)}var ms=Z.extend({options:{position:"topright"},initialize:function(a){_(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),m=this.getPosition(),y=a._controlCorners[m];return at(u,"leaflet-control"),m.indexOf("bottom")!==-1?y.insertBefore(u,y.firstChild):y.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Bu=function(a){return new ms(a)};mt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",m=this._controlContainer=bt("div",u+"control-container",this._container);function y(C,A){var B=u+C+" "+u+A;a[C+A]=bt("div",B,m)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)zt(this._controlCorners[a]);zt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var g1=ms.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,m,y){return m<y?-1:y<m?1:0}},initialize:function(a,u,m){_(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in a)this._addLayer(a[y],y);for(y in u)this._addLayer(u[y],y,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ms.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(d(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){at(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(at(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=bt("div",a),m=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Uu(u),Ey(u);var y=this._section=bt("section",a+"-list");m&&(this._map.on("click",this.collapse,this),nt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=bt("a",a+"-toggle",u);C.href="#",C.title="Layers",C.setAttribute("role","button"),nt(C,{keydown:function(A){A.keyCode===13&&this._expandSafely()},click:function(A){In(A),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=bt("div",a+"-base",y),this._separator=bt("div",a+"-separator",y),this._overlaysList=bt("div",a+"-overlays",y),u.appendChild(y)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&d(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,m){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:m}),this.options.sortLayers&&this._layers.sort(l(function(y,C){return this.options.sortFunction(y.layer,C.layer,y.name,C.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;_f(this._baseLayersList),_f(this._overlaysList),this._layerControlInputs=[];var a,u,m,y,C=0;for(m=0;m<this._layers.length;m++)y=this._layers[m],this._addItem(y),u=u||y.overlay,a=a||!y.overlay,C+=y.overlay?0:1;return this.options.hideSingleBase&&(a=a&&C>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(d(a.target)),m=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;m&&this._map.fire(m,u)},_createRadioElement:function(a,u){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=m,y.firstChild},_addItem:function(a){var u=document.createElement("label"),m=this._map.hasLayer(a.layer),y;a.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=m):y=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(y),y.layerId=d(a.layer),nt(y,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+a.name;var A=document.createElement("span");u.appendChild(A),A.appendChild(y),A.appendChild(C);var B=a.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,m,y=[],C=[];this._handlingClick=!0;for(var A=a.length-1;A>=0;A--)u=a[A],m=this._getLayer(u.layerId).layer,u.checked?y.push(m):u.checked||C.push(m);for(A=0;A<C.length;A++)this._map.hasLayer(C[A])&&this._map.removeLayer(C[A]);for(A=0;A<y.length;A++)this._map.hasLayer(y[A])||this._map.addLayer(y[A]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,m,y=this._map.getZoom(),C=a.length-1;C>=0;C--)u=a[C],m=this._getLayer(u.layerId).layer,u.disabled=m.options.minZoom!==void 0&&y<m.options.minZoom||m.options.maxZoom!==void 0&&y>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,nt(a,"click",In),this.expand();var u=this;setTimeout(function(){Et(a,"click",In),u._preventClick=!1})}}),AD=function(a,u,m){return new g1(a,u,m)},Iy=ms.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",m=bt("div",u+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,u+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,u+"-out",m,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,m,y,C){var A=bt("a",m,y);return A.innerHTML=a,A.href="#",A.title=u,A.setAttribute("role","button"),A.setAttribute("aria-label",u),Uu(A),nt(A,"click",ja),nt(A,"click",C,this),nt(A,"click",this._refocusOnMap,this),A},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";Xt(this._zoomInButton,u),Xt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(at(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(at(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});mt.mergeOptions({zoomControl:!0}),mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Iy,this.addControl(this.zoomControl))});var ID=function(a){return new Iy(a)},y1=ms.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",m=bt("div",u),y=this.options;return this._addScales(y,u+"-line",m),a.on(y.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),m},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,m){a.metric&&(this._mScale=bt("div",u,m)),a.imperial&&(this._iScale=bt("div",u,m))},_update:function(){var a=this._map,u=a.getSize().y/2,m=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(m)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),m=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,m,u/a)},_updateImperial:function(a){var u=a*3.2808399,m,y,C;u>5280?(m=u/5280,y=this._getRoundNum(m),this._updateScale(this._iScale,y+" mi",y/m)):(C=this._getRoundNum(u),this._updateScale(this._iScale,C+" ft",C/u))},_updateScale:function(a,u,m){a.style.width=Math.round(this.options.maxWidth*m)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),m=a/u;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,u*m}}),MD=function(a){return new y1(a)},RD='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',My=ms.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?RD+" ":"")+"Leaflet</a>"},initialize:function(a){_(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=bt("div","leaflet-control-attribution"),Uu(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var m=[];this.options.prefix&&m.push(this.options.prefix),a.length&&m.push(a.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});mt.mergeOptions({attributionControl:!0}),mt.addInitHook(function(){this.options.attributionControl&&new My().addTo(this)});var LD=function(a){return new My(a)};ms.Layers=g1,ms.Zoom=Iy,ms.Scale=y1,ms.Attribution=My,Bu.layers=AD,Bu.zoom=ID,Bu.scale=MD,Bu.attribution=LD;var Xs=Z.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xs.addTo=function(a,u){return a.addHandler(u,this),this};var FD={Events:V},v1=Be.touch?"touchstart mousedown":"mousedown",go=K.extend({options:{clickTolerance:3},initialize:function(a,u,m,y){_(this,y),this._element=a,this._dragStartTarget=u||a,this._preventOutline=m},enable:function(){this._enabled||(nt(this._dragStartTarget,v1,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(go._dragging===this&&this.finishDrag(!0),Et(this._dragStartTarget,v1,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!xy(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){go._dragging===this&&this.finishDrag();return}if(!(go._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(go._dragging=this,this._preventOutline&&Cy(this._element),_y(),Fu(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,m=u1(this._element);this._startPoint=new O(u.clientX,u.clientY),this._startPos=Na(this._element),this._parentScale=jy(m);var y=a.type==="mousedown";nt(document,y?"mousemove":"touchmove",this._onMove,this),nt(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,m=new O(u.clientX,u.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,In(a),this._moved||(this.fire("dragstart"),this._moved=!0,at(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),at(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),an(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Et(document,"mousemove touchmove",this._onMove,this),Et(document,"mouseup touchend touchcancel",this._onUp,this),Sy(),Ou();var u=this._moved&&this._moving;this._moving=!1,go._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function x1(a,u,m){var y,C=[1,4,2,8],A,B,q,ee,ae,je,qe,ut;for(A=0,je=a.length;A<je;A++)a[A]._code=Pa(a[A],u);for(q=0;q<4;q++){for(qe=C[q],y=[],A=0,je=a.length,B=je-1;A<je;B=A++)ee=a[A],ae=a[B],ee._code&qe?ae._code&qe||(ut=Pf(ae,ee,qe,u,m),ut._code=Pa(ut,u),y.push(ut)):(ae._code&qe&&(ut=Pf(ae,ee,qe,u,m),ut._code=Pa(ut,u),y.push(ut)),y.push(ee));a=y}return a}function b1(a,u){var m,y,C,A,B,q,ee,ae,je;if(!a||a.length===0)throw new Error("latlngs not passed");Kr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var qe=ue([0,0]),ut=Ie(a),Xn=ut.getNorthWest().distanceTo(ut.getSouthWest())*ut.getNorthEast().distanceTo(ut.getNorthWest());Xn<1700&&(qe=Ry(a));var wn=a.length,Qr=[];for(m=0;m<wn;m++){var gr=ue(a[m]);Qr.push(u.project(ue([gr.lat-qe.lat,gr.lng-qe.lng])))}for(q=ee=ae=0,m=0,y=wn-1;m<wn;y=m++)C=Qr[m],A=Qr[y],B=C.y*A.x-A.y*C.x,ee+=(C.x+A.x)*B,ae+=(C.y+A.y)*B,q+=B*3;q===0?je=Qr[0]:je=[ee/q,ae/q];var Dl=u.unproject(X(je));return ue([Dl.lat+qe.lat,Dl.lng+qe.lng])}function Ry(a){for(var u=0,m=0,y=0,C=0;C<a.length;C++){var A=ue(a[C]);u+=A.lat,m+=A.lng,y++}return ue([u/y,m/y])}var OD={__proto__:null,clipPolygon:x1,polygonCenter:b1,centroid:Ry};function w1(a,u){if(!u||!a.length)return a.slice();var m=u*u;return a=BD(a,m),a=UD(a,m),a}function _1(a,u,m){return Math.sqrt(zu(a,u,m,!0))}function DD(a,u,m){return zu(a,u,m)}function UD(a,u){var m=a.length,y=typeof Uint8Array<"u"?Uint8Array:Array,C=new y(m);C[0]=C[m-1]=1,Ly(a,C,u,0,m-1);var A,B=[];for(A=0;A<m;A++)C[A]&&B.push(a[A]);return B}function Ly(a,u,m,y,C){var A=0,B,q,ee;for(q=y+1;q<=C-1;q++)ee=zu(a[q],a[y],a[C],!0),ee>A&&(B=q,A=ee);A>m&&(u[B]=1,Ly(a,u,m,y,B),Ly(a,u,m,B,C))}function BD(a,u){for(var m=[a[0]],y=1,C=0,A=a.length;y<A;y++)zD(a[y],a[C])>u&&(m.push(a[y]),C=y);return C<A-1&&m.push(a[A-1]),m}var S1;function N1(a,u,m,y,C){var A=y?S1:Pa(a,m),B=Pa(u,m),q,ee,ae;for(S1=B;;){if(!(A|B))return[a,u];if(A&B)return!1;q=A||B,ee=Pf(a,u,q,m,C),ae=Pa(ee,m),q===A?(a=ee,A=ae):(u=ee,B=ae)}}function Pf(a,u,m,y,C){var A=u.x-a.x,B=u.y-a.y,q=y.min,ee=y.max,ae,je;return m&8?(ae=a.x+A*(ee.y-a.y)/B,je=ee.y):m&4?(ae=a.x+A*(q.y-a.y)/B,je=q.y):m&2?(ae=ee.x,je=a.y+B*(ee.x-a.x)/A):m&1&&(ae=q.x,je=a.y+B*(q.x-a.x)/A),new O(ae,je,C)}function Pa(a,u){var m=0;return a.x<u.min.x?m|=1:a.x>u.max.x&&(m|=2),a.y<u.min.y?m|=4:a.y>u.max.y&&(m|=8),m}function zD(a,u){var m=u.x-a.x,y=u.y-a.y;return m*m+y*y}function zu(a,u,m,y){var C=u.x,A=u.y,B=m.x-C,q=m.y-A,ee=B*B+q*q,ae;return ee>0&&(ae=((a.x-C)*B+(a.y-A)*q)/ee,ae>1?(C=m.x,A=m.y):ae>0&&(C+=B*ae,A+=q*ae)),B=a.x-C,q=a.y-A,y?B*B+q*q:new O(C,A)}function Kr(a){return!N(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function C1(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kr(a)}function j1(a,u){var m,y,C,A,B,q,ee,ae;if(!a||a.length===0)throw new Error("latlngs not passed");Kr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var je=ue([0,0]),qe=Ie(a),ut=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());ut<1700&&(je=Ry(a));var Xn=a.length,wn=[];for(m=0;m<Xn;m++){var Qr=ue(a[m]);wn.push(u.project(ue([Qr.lat-je.lat,Qr.lng-je.lng])))}for(m=0,y=0;m<Xn-1;m++)y+=wn[m].distanceTo(wn[m+1])/2;if(y===0)ae=wn[0];else for(m=0,A=0;m<Xn-1;m++)if(B=wn[m],q=wn[m+1],C=B.distanceTo(q),A+=C,A>y){ee=(A-y)/C,ae=[q.x-ee*(q.x-B.x),q.y-ee*(q.y-B.y)];break}var gr=u.unproject(X(ae));return ue([gr.lat+je.lat,gr.lng+je.lng])}var $D={__proto__:null,simplify:w1,pointToSegmentDistance:_1,closestPointOnSegment:DD,clipSegment:N1,_getEdgeIntersection:Pf,_getBitCode:Pa,_sqClosestPointOnSegment:zu,isFlat:Kr,_flat:C1,polylineCenter:j1},Fy={project:function(a){return new O(a.lng,a.lat)},unproject:function(a){return new ye(a.y,a.x)},bounds:new ce([-180,-90],[180,90])},Oy={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,m=this.R,y=a.lat*u,C=this.R_MINOR/m,A=Math.sqrt(1-C*C),B=A*Math.sin(y),q=Math.tan(Math.PI/4-y/2)/Math.pow((1-B)/(1+B),A/2);return y=-m*Math.log(Math.max(q,1e-10)),new O(a.lng*u*m,y)},unproject:function(a){for(var u=180/Math.PI,m=this.R,y=this.R_MINOR/m,C=Math.sqrt(1-y*y),A=Math.exp(-a.y/m),B=Math.PI/2-2*Math.atan(A),q=0,ee=.1,ae;q<15&&Math.abs(ee)>1e-7;q++)ae=C*Math.sin(B),ae=Math.pow((1-ae)/(1+ae),C/2),ee=Math.PI/2-2*Math.atan(A*ae)-B,B+=ee;return new ye(B*u,a.x*u/m)}},VD={__proto__:null,LonLat:Fy,Mercator:Oy,SphericalMercator:He},HD=s({},Oe,{code:"EPSG:3395",projection:Oy,transformation:function(){var a=.5/(Math.PI*Oy.R);return tt(a,.5,-a,.5)}()}),P1=s({},Oe,{code:"EPSG:4326",projection:Fy,transformation:tt(1/180,1,-1/180,.5)}),WD=s({},fe,{projection:Fy,transformation:tt(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var m=u.lng-a.lng,y=u.lat-a.lat;return Math.sqrt(m*m+y*y)},infinite:!0});fe.Earth=Oe,fe.EPSG3395=HD,fe.EPSG3857=Lt,fe.EPSG900913=Yt,fe.EPSG4326=P1,fe.Simple=WD;var gs=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[d(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[d(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var m=this.getEvents();u.on(m,this),this.once("remove",function(){u.off(m,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});mt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=d(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=d(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return d(a)in this._layers},eachLayer:function(a,u){for(var m in this._layers)a.call(u,this._layers[m]);return this},_addLayers:function(a){a=a?N(a)?a:[a]:[];for(var u=0,m=a.length;u<m;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[d(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=d(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,m=this._getZoomSpan();for(var y in this._zoomBoundLayers){var C=this._zoomBoundLayers[y].options;a=C.minZoom===void 0?a:Math.min(a,C.minZoom),u=C.maxZoom===void 0?u:Math.max(u,C.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ml=gs.extend({initialize:function(a,u){_(this,u),this._layers={};var m,y;if(a)for(m=0,y=a.length;m<y;m++)this.addLayer(a[m])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),m,y;for(m in this._layers)y=this._layers[m],y[a]&&y[a].apply(y,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var m in this._layers)a.call(u,this._layers[m]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return d(a)}}),qD=function(a,u){return new Ml(a,u)},Ri=Ml.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Ml.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Ml.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Ve;for(var u in this._layers){var m=this._layers[u];a.extend(m.getBounds?m.getBounds():m.getLatLng())}return a}}),ZD=function(a,u){return new Ri(a,u)},Rl=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){_(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var m=this._getIconUrl(a);if(!m){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(m,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(y,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(a,u){var m=this.options,y=m[u+"Size"];typeof y=="number"&&(y=[y,y]);var C=X(y),A=X(u==="shadow"&&m.shadowAnchor||m.iconAnchor||C&&C.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(m.className||""),A&&(a.style.marginLeft=-A.x+"px",a.style.marginTop=-A.y+"px"),C&&(a.style.width=C.x+"px",a.style.height=C.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return Be.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function GD(a){return new Rl(a)}var $u=Rl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof $u.imagePath!="string"&&($u.imagePath=this._detectIconPath()),(this.options.imagePath||$u.imagePath)+Rl.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(m,y,C){var A=y.exec(m);return A&&A[C]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=bt("div","leaflet-default-icon-path",document.body),u=Lu(a,"background-image")||Lu(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),T1=Xs.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new go(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),at(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,m=u._map,y=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,A=Na(u._icon),B=m.getPixelBounds(),q=m.getPixelOrigin(),ee=Te(B.min._subtract(q).add(C),B.max._subtract(q).subtract(C));if(!ee.contains(A)){var ae=X((Math.max(ee.max.x,A.x)-ee.max.x)/(B.max.x-ee.max.x)-(Math.min(ee.min.x,A.x)-ee.min.x)/(B.min.x-ee.min.x),(Math.max(ee.max.y,A.y)-ee.max.y)/(B.max.y-ee.max.y)-(Math.min(ee.min.y,A.y)-ee.min.y)/(B.min.y-ee.min.y)).multiplyBy(y);m.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),an(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=J(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=J(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,m=u._shadow,y=Na(u._icon),C=u._map.layerPointToLatLng(y);m&&an(m,y),u._latlng=C,a.latlng=C,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Tf=gs.extend({options:{icon:new $u,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){_(this,u),this._latlng=ue(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=ue(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=a.icon.createIcon(this._icon),y=!1;m!==this._icon&&(this._icon&&this._removeIcon(),y=!0,a.title&&(m.title=a.title),m.tagName==="IMG"&&(m.alt=a.alt||"")),at(m,u),a.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(m,"focus",this._panOnFocus,this);var C=a.icon.createShadow(this._shadow),A=!1;C!==this._shadow&&(this._removeShadow(),A=!0),C&&(at(C,u),C.alt=""),this._shadow=C,a.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&A&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Et(this._icon,"focus",this._panOnFocus,this),zt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&an(this._icon,a),this._shadow&&an(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(at(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),T1)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new T1(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Gr(this._icon,a),this._shadow&&Gr(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,m=u.iconSize?X(u.iconSize):X(0,0),y=u.iconAnchor?X(u.iconAnchor):X(0,0);a.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:m.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function KD(a,u){return new Tf(a,u)}var yo=gs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return _(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),kf=yo.extend({options:{fill:!0,radius:10},initialize:function(a,u){_(this,u),this._latlng=ue(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=ue(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return yo.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,m=this._clickTolerance(),y=[a+m,u+m];this._pxBounds=new ce(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function QD(a,u){return new kf(a,u)}var Dy=kf.extend({initialize:function(a,u,m){if(typeof u=="number"&&(u=s({},m,{radius:u})),_(this,u),this._latlng=ue(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Ve(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:yo.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,m=this._map,y=m.options.crs;if(y.distance===Oe.distance){var C=Math.PI/180,A=this._mRadius/Oe.R/C,B=m.project([u+A,a]),q=m.project([u-A,a]),ee=B.add(q).divideBy(2),ae=m.unproject(ee).lat,je=Math.acos((Math.cos(A*C)-Math.sin(u*C)*Math.sin(ae*C))/(Math.cos(u*C)*Math.cos(ae*C)))/C;(isNaN(je)||je===0)&&(je=A/Math.cos(Math.PI/180*u)),this._point=ee.subtract(m.getPixelOrigin()),this._radius=isNaN(je)?0:ee.x-m.project([ae,a-je]).x,this._radiusY=ee.y-B.y}else{var qe=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(qe).x}this._updateBounds()}});function YD(a,u,m){return new Dy(a,u,m)}var Li=yo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){_(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,m=null,y=zu,C,A,B=0,q=this._parts.length;B<q;B++)for(var ee=this._parts[B],ae=1,je=ee.length;ae<je;ae++){C=ee[ae-1],A=ee[ae];var qe=y(a,C,A,!0);qe<u&&(u=qe,m=y(a,C,A))}return m&&(m.distance=Math.sqrt(u)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return j1(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=ue(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Ve,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Kr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],m=Kr(a),y=0,C=a.length;y<C;y++)m?(u[y]=ue(a[y]),this._bounds.extend(u[y])):u[y]=this._convertLatLngs(a[y]);return u},_project:function(){var a=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new O(a,a);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,m){var y=a[0]instanceof ye,C=a.length,A,B;if(y){for(B=[],A=0;A<C;A++)B[A]=this._map.latLngToLayerPoint(a[A]),m.extend(B[A]);u.push(B)}else for(A=0;A<C;A++)this._projectLatlngs(a[A],u,m)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,m,y,C,A,B,q,ee;for(m=0,C=0,A=this._rings.length;m<A;m++)for(ee=this._rings[m],y=0,B=ee.length;y<B-1;y++)q=N1(ee[y],ee[y+1],a,y,!0),q&&(u[C]=u[C]||[],u[C].push(q[0]),(q[1]!==ee[y+1]||y===B-2)&&(u[C].push(q[1]),C++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,m=0,y=a.length;m<y;m++)a[m]=w1(a[m],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var m,y,C,A,B,q,ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(m=0,A=this._parts.length;m<A;m++)for(q=this._parts[m],y=0,B=q.length,C=B-1;y<B;C=y++)if(!(!u&&y===0)&&_1(a,q[C],q[y])<=ee)return!0;return!1}});function XD(a,u){return new Li(a,u)}Li._flat=C1;var Ll=Li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return b1(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Li.prototype._convertLatLngs.call(this,a),m=u.length;return m>=2&&u[0]instanceof ye&&u[0].equals(u[m-1])&&u.pop(),u},_setLatLngs:function(a){Li.prototype._setLatLngs.call(this,a),Kr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,m=new O(u,u);if(a=new ce(a.min.subtract(m),a.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,C=this._rings.length,A;y<C;y++)A=x1(this._rings[y],a,!0),A.length&&this._parts.push(A)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,m,y,C,A,B,q,ee,ae;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(A=0,ee=this._parts.length;A<ee;A++)for(m=this._parts[A],B=0,ae=m.length,q=ae-1;B<ae;q=B++)y=m[B],C=m[q],y.y>a.y!=C.y>a.y&&a.x<(C.x-y.x)*(a.y-y.y)/(C.y-y.y)+y.x&&(u=!u);return u||Li.prototype._containsPoint.call(this,a,!0)}});function JD(a,u){return new Ll(a,u)}var Fi=Ri.extend({initialize:function(a,u){_(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=N(a)?a:a.features,m,y,C;if(u){for(m=0,y=u.length;m<y;m++)C=u[m],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var A=this.options;if(A.filter&&!A.filter(a))return this;var B=Ef(a,A);return B?(B.feature=Mf(a),B.defaultOptions=B.options,this.resetStyle(B),A.onEachFeature&&A.onEachFeature(a,B),this.addLayer(B)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Ef(a,u){var m=a.type==="Feature"?a.geometry:a,y=m?m.coordinates:null,C=[],A=u&&u.pointToLayer,B=u&&u.coordsToLatLng||Uy,q,ee,ae,je;if(!y&&!m)return null;switch(m.type){case"Point":return q=B(y),k1(A,a,q,u);case"MultiPoint":for(ae=0,je=y.length;ae<je;ae++)q=B(y[ae]),C.push(k1(A,a,q,u));return new Ri(C);case"LineString":case"MultiLineString":return ee=Af(y,m.type==="LineString"?0:1,B),new Li(ee,u);case"Polygon":case"MultiPolygon":return ee=Af(y,m.type==="Polygon"?1:2,B),new Ll(ee,u);case"GeometryCollection":for(ae=0,je=m.geometries.length;ae<je;ae++){var qe=Ef({geometry:m.geometries[ae],type:"Feature",properties:a.properties},u);qe&&C.push(qe)}return new Ri(C);case"FeatureCollection":for(ae=0,je=m.features.length;ae<je;ae++){var ut=Ef(m.features[ae],u);ut&&C.push(ut)}return new Ri(C);default:throw new Error("Invalid GeoJSON object.")}}function k1(a,u,m,y){return a?a(u,m):new Tf(m,y&&y.markersInheritOptions&&y)}function Uy(a){return new ye(a[1],a[0],a[2])}function Af(a,u,m){for(var y=[],C=0,A=a.length,B;C<A;C++)B=u?Af(a[C],u-1,m):(m||Uy)(a[C]),y.push(B);return y}function By(a,u){return a=ue(a),a.alt!==void 0?[g(a.lng,u),g(a.lat,u),g(a.alt,u)]:[g(a.lng,u),g(a.lat,u)]}function If(a,u,m,y){for(var C=[],A=0,B=a.length;A<B;A++)C.push(u?If(a[A],Kr(a[A])?0:u-1,m,y):By(a[A],y));return!u&&m&&C.length>0&&C.push(C[0].slice()),C}function Fl(a,u){return a.feature?s({},a.feature,{geometry:u}):Mf(u)}function Mf(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var zy={toGeoJSON:function(a){return Fl(this,{type:"Point",coordinates:By(this.getLatLng(),a)})}};Tf.include(zy),Dy.include(zy),kf.include(zy),Li.include({toGeoJSON:function(a){var u=!Kr(this._latlngs),m=If(this._latlngs,u?1:0,!1,a);return Fl(this,{type:(u?"Multi":"")+"LineString",coordinates:m})}}),Ll.include({toGeoJSON:function(a){var u=!Kr(this._latlngs),m=u&&!Kr(this._latlngs[0]),y=If(this._latlngs,m?2:u?1:0,!0,a);return u||(y=[y]),Fl(this,{type:(m?"Multi":"")+"Polygon",coordinates:y})}}),Ml.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(m){u.push(m.toGeoJSON(a).geometry.coordinates)}),Fl(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var m=u==="GeometryCollection",y=[];return this.eachLayer(function(C){if(C.toGeoJSON){var A=C.toGeoJSON(a);if(m)y.push(A.geometry);else{var B=Mf(A);B.type==="FeatureCollection"?y.push.apply(y,B.features):y.push(B)}}}),m?Fl(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function E1(a,u){return new Fi(a,u)}var e6=E1,Rf=gs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,m){this._url=a,this._bounds=Ie(u),_(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(at(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Al(this._image),this},bringToBack:function(){return this._map&&Il(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Ie(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:bt("img");if(at(u,"leaflet-image-layer"),this._zoomAnimated&&at(u,"leaflet-zoom-animated"),this.options.className&&at(u,this.options.className),u.onselectstart=p,u.onmousemove=p,u.onload=l(this.fire,this,"load"),u.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Sa(this._image,m,u)},_reset:function(){var a=this._image,u=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=u.getSize();an(a,u.min),a.style.width=m.x+"px",a.style.height=m.y+"px"},_updateOpacity:function(){Gr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),t6=function(a,u,m){return new Rf(a,u,m)},A1=Rf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:bt("video");if(at(u,"leaflet-image-layer"),this._zoomAnimated&&at(u,"leaflet-zoom-animated"),this.options.className&&at(u,this.options.className),u.onselectstart=p,u.onmousemove=p,u.onloadeddata=l(this.fire,this,"load"),a){for(var m=u.getElementsByTagName("source"),y=[],C=0;C<m.length;C++)y.push(m[C].src);this._url=m.length>0?y:[u.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var A=0;A<this._url.length;A++){var B=bt("source");B.src=this._url[A],u.appendChild(B)}}});function n6(a,u,m){return new A1(a,u,m)}var I1=Rf.extend({_initImage:function(){var a=this._image=this._url;at(a,"leaflet-image-layer"),this._zoomAnimated&&at(a,"leaflet-zoom-animated"),this.options.className&&at(a,this.options.className),a.onselectstart=p,a.onmousemove=p}});function r6(a,u,m){return new I1(a,u,m)}var Js=gs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof ye||N(a))?(this._latlng=ue(a),_(this,u)):(_(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Gr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Gr(this._container,1),this.bringToFront(),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Gr(this._container,0),this._removeTimeout=setTimeout(l(zt,void 0,this._container),200)):zt(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ue(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Al(this._container),this},bringToBack:function(){return this._map&&Il(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof Ri){u=null;var m=this._source._layers;for(var y in m)if(m[y]._map){u=m[y];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=X(this.options.offset),m=this._getAnchor();this._zoomAnimated?an(this._container,a.add(m)):u=u.add(a).add(m);var y=this._containerBottom=-u.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=y+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});mt.include({_initOverlay:function(a,u,m,y){var C=u;return C instanceof a||(C=new a(y).setContent(u)),m&&C.setLatLng(m),C}}),gs.include({_initOverlay:function(a,u,m,y){var C=m;return C instanceof a?(_(C,y),C._source=this):(C=u&&!y?u:new a(y,this),C.setContent(m)),C}});var Lf=Js.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Js.prototype.openOn.call(this,a)},onAdd:function(a){Js.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof yo||this._source.on("preclick",Ca))},onRemove:function(a){Js.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof yo||this._source.off("preclick",Ca))},getEvents:function(){var a=Js.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=bt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=bt("div",a+"-content-wrapper",u);if(this._contentNode=bt("div",a+"-content",m),Uu(u),Ey(this._contentNode),nt(u,"contextmenu",Ca),this._tipContainer=bt("div",a+"-tip-container",u),this._tip=bt("div",a+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=bt("a",a+"-close-button",u);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',nt(y,"click",function(C){In(C),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var m=a.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),u.width=m+1+"px",u.whiteSpace="",u.height="";var y=a.offsetHeight,C=this.options.maxHeight,A="leaflet-popup-scrolled";C&&y>C?(u.height=C+"px",at(a,A)):Xt(a,A),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),m=this._getAnchor();an(this._container,u.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(Lu(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+u,y=this._containerWidth,C=new O(this._containerLeft,-m-this._containerBottom);C._add(Na(this._container));var A=a.layerPointToContainerPoint(C),B=X(this.options.autoPanPadding),q=X(this.options.autoPanPaddingTopLeft||B),ee=X(this.options.autoPanPaddingBottomRight||B),ae=a.getSize(),je=0,qe=0;A.x+y+ee.x>ae.x&&(je=A.x+y-ae.x+ee.x),A.x-je-q.x<0&&(je=A.x-q.x),A.y+m+ee.y>ae.y&&(qe=A.y+m-ae.y+ee.y),A.y-qe-q.y<0&&(qe=A.y-q.y),(je||qe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([je,qe]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),s6=function(a,u){return new Lf(a,u)};mt.mergeOptions({closePopupOnClick:!0}),mt.include({openPopup:function(a,u,m){return this._initOverlay(Lf,a,u,m).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),gs.include({bindPopup:function(a,u){return this._popup=this._initOverlay(Lf,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ri||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){ja(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof yo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Ff=Js.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Js.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Js.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Js.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=bt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,m,y=this._map,C=this._container,A=y.latLngToContainerPoint(y.getCenter()),B=y.layerPointToContainerPoint(a),q=this.options.direction,ee=C.offsetWidth,ae=C.offsetHeight,je=X(this.options.offset),qe=this._getAnchor();q==="top"?(u=ee/2,m=ae):q==="bottom"?(u=ee/2,m=0):q==="center"?(u=ee/2,m=ae/2):q==="right"?(u=0,m=ae/2):q==="left"?(u=ee,m=ae/2):B.x<A.x?(q="right",u=0,m=ae/2):(q="left",u=ee+(je.x+qe.x)*2,m=ae/2),a=a.subtract(X(u,m,!0)).add(je).add(qe),Xt(C,"leaflet-tooltip-right"),Xt(C,"leaflet-tooltip-left"),Xt(C,"leaflet-tooltip-top"),Xt(C,"leaflet-tooltip-bottom"),at(C,"leaflet-tooltip-"+q),an(C,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Gr(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),i6=function(a,u){return new Ff(a,u)};mt.include({openTooltip:function(a,u,m){return this._initOverlay(Ff,a,u,m).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),gs.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ff,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[u](m),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ri||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(nt(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),nt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,m,y;this._tooltip.options.sticky&&a.originalEvent&&(m=this._map.mouseEventToContainerPoint(a.originalEvent),y=this._map.containerPointToLayerPoint(m),u=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(u)}});var M1=Rl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),m=this.options;if(m.html instanceof Element?(_f(u),u.appendChild(m.html)):u.innerHTML=m.html!==!1?m.html:"",m.bgPos){var y=X(m.bgPos);u.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function o6(a){return new M1(a)}Rl.Default=$u;var Vu=gs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){_(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),zt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Al(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Il(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof O?a:new O(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,m=-a(-1/0,1/0),y=0,C=u.length,A;y<C;y++)A=u[y].style.zIndex,u[y]!==this._container&&A&&(m=a(m,+A));isFinite(m)&&(this.options.zIndex=m+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){Gr(this._container,this.options.opacity);var a=+new Date,u=!1,m=!1;for(var y in this._tiles){var C=this._tiles[y];if(!(!C.current||!C.loaded)){var A=Math.min(1,(a-C.loaded)/200);Gr(C.el,A),A<1?u=!0:(C.active?m=!0:this._onOpaqueTile(C),C.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),u&&(H(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===a?(this._levels[m].el.style.zIndex=u-Math.abs(a-m),this._onUpdateLevel(m)):(zt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var y=this._levels[a],C=this._map;return y||(y=this._levels[a]={},y.el=bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=u,y.origin=C.project(C.unproject(C.getPixelOrigin()),a).round(),y.zoom=a,this._setZoomTransform(y,C.getCenter(),C.getZoom()),p(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var a,u,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var y=u.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)zt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,m,y){var C=Math.floor(a/2),A=Math.floor(u/2),B=m-1,q=new O(+C,+A);q.z=+B;var ee=this._tileCoordsToKey(q),ae=this._tiles[ee];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),B>y?this._retainParent(C,A,B,y):!1)},_retainChildren:function(a,u,m,y){for(var C=2*a;C<2*a+2;C++)for(var A=2*u;A<2*u+2;A++){var B=new O(C,A);B.z=m+1;var q=this._tileCoordsToKey(B),ee=this._tiles[q];if(ee&&ee.active){ee.retain=!0;continue}else ee&&ee.loaded&&(ee.retain=!0);m+1<y&&this._retainChildren(C,A,m+1,y)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,m,y){var C=Math.round(u);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var A=this.options.updateWhenZooming&&C!==this._tileZoom;(!y||A)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(a),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var m in this._levels)this._setZoomTransform(this._levels[m],a,u)},_setZoomTransform:function(a,u,m){var y=this._map.getZoomScale(m,a.zoom),C=a.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(u,m)).round();Be.any3d?Sa(a.el,C,y):an(a.el,C)},_resetGrid:function(){var a=this._map,u=a.options.crs,m=this._tileSize=this.getTileSize(),y=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],y).x/m.x),Math.ceil(a.project([0,u.wrapLng[1]],y).x/m.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],y).y/m.x),Math.ceil(a.project([u.wrapLat[1],0],y).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,m=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),y=u.getZoomScale(m,this._tileZoom),C=u.project(a,this._tileZoom).floor(),A=u.getSize().divideBy(y*2);return new ce(C.subtract(A),C.add(A))},_update:function(a){var u=this._map;if(u){var m=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(a),C=this._pxBoundsToTileRange(y),A=C.getCenter(),B=[],q=this.options.keepBuffer,ee=new ce(C.getBottomLeft().subtract([q,-q]),C.getTopRight().add([q,-q]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var je=this._tiles[ae].coords;(je.z!==this._tileZoom||!ee.contains(new O(je.x,je.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(a,m);return}for(var qe=C.min.y;qe<=C.max.y;qe++)for(var ut=C.min.x;ut<=C.max.x;ut++){var Xn=new O(ut,qe);if(Xn.z=this._tileZoom,!!this._isValidTile(Xn)){var wn=this._tiles[this._tileCoordsToKey(Xn)];wn?wn.current=!0:B.push(Xn)}}if(B.sort(function(gr,Dl){return gr.distanceTo(A)-Dl.distanceTo(A)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qr=document.createDocumentFragment();for(ut=0;ut<B.length;ut++)this._addTile(B[ut],Qr);this._level.el.appendChild(Qr)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var m=this._globalTileRange;if(!u.wrapLng&&(a.x<m.min.x||a.x>m.max.x)||!u.wrapLat&&(a.y<m.min.y||a.y>m.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(a);return Ie(this.options.bounds).overlaps(y)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,m=this.getTileSize(),y=a.scaleBy(m),C=y.add(m),A=u.unproject(y,a.z),B=u.unproject(C,a.z);return[A,B]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),m=new Ve(u[0],u[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),m=new O(+u[0],+u[1]);return m.z=+u[2],m},_removeTile:function(a){var u=this._tiles[a];u&&(zt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){at(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=p,a.onmousemove=p,Be.ielt9&&this.options.opacity<1&&Gr(a,this.options.opacity)},_addTile:function(a,u){var m=this._getTilePos(a),y=this._tileCoordsToKey(a),C=this.createTile(this._wrapCoords(a),l(this._tileReady,this,a));this._initTile(C),this.createTile.length<2&&J(l(this._tileReady,this,a,null,C)),an(C,m),this._tiles[y]={el:C,coords:a,current:!0},u.appendChild(C),this.fire("tileloadstart",{tile:C,coords:a})},_tileReady:function(a,u,m){u&&this.fire("tileerror",{error:u,tile:m,coords:a});var y=this._tileCoordsToKey(a);m=this._tiles[y],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Gr(m.el,0),H(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),u||(at(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?J(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new O(this._wrapX?f(a.x,this._wrapX):a.x,this._wrapY?f(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new ce(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function a6(a){return new Vu(a)}var Ol=Vu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=_(this,u),u.detectRetina&&Be.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var m=document.createElement("img");return nt(m,"load",l(this._tileOnLoad,this,u,m)),nt(m,"error",l(this._tileOnError,this,u,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(a),m},getTileUrl:function(a){var u={r:Be.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=m),u["-y"]=m}return x(this._url,s(u,this.options))},_tileOnLoad:function(a,u){Be.ielt9?setTimeout(l(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,m){var y=this.options.errorTileUrl;y&&u.getAttribute("src")!==y&&(u.src=y),a(m,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,m=this.options.zoomReverse,y=this.options.zoomOffset;return m&&(a=u-a),a+y},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=p,u.onerror=p,!u.complete)){u.src=E;var m=this._tiles[a].coords;zt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:m})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",E),Vu.prototype._removeTile.call(this,a)},_tileReady:function(a,u,m){if(!(!this._map||m&&m.getAttribute("src")===E))return Vu.prototype._tileReady.call(this,a,u,m)}});function R1(a,u){return new Ol(a,u)}var L1=Ol.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var m=s({},this.defaultWmsParams);for(var y in u)y in this.options||(m[y]=u[y]);u=_(this,u);var C=u.detectRetina&&Be.retina?2:1,A=this.getTileSize();m.width=A.x*C,m.height=A.y*C,this.wmsParams=m},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Ol.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),m=this._crs,y=Te(m.project(u[0]),m.project(u[1])),C=y.min,A=y.max,B=(this._wmsVersion>=1.3&&this._crs===P1?[C.y,C.x,A.y,A.x]:[C.x,C.y,A.x,A.y]).join(","),q=Ol.prototype.getTileUrl.call(this,a);return q+w(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(a,u){return s(this.wmsParams,a),u||this.redraw(),this}});function l6(a,u){return new L1(a,u)}Ol.WMS=L1,R1.wms=l6;var Oi=gs.extend({options:{padding:.1},initialize:function(a){_(this,a),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),at(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var m=this._map.getZoomScale(u,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,u),A=y.multiplyBy(-m).add(C).subtract(this._map._getNewPixelOrigin(a,u));Be.any3d?Sa(this._container,A,m):an(this._container,A)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),m=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new ce(m,m.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),F1=Oi.extend({options:{tolerance:0},getEvents:function(){var a=Oi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");nt(a,"mousemove",this._onMouseMove,this),nt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,zt(this._container),Et(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,u=this._container,m=a.getSize(),y=Be.retina?2:1;an(u,a.min),u.width=y*m.x,u.height=y*m.y,u.style.width=m.x+"px",u.style.height=m.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[d(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,m=u.next,y=u.prev;m?m.prev=y:this._drawLast=y,y?y.next=m:this._drawFirst=m,delete a._order,delete this._layers[d(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),m=[],y,C;for(C=0;C<u.length;C++){if(y=Number(u[C]),isNaN(y))return;m.push(y)}a.options._dashArray=m}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||J(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var m=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)a=y.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var m,y,C,A,B=a._parts,q=B.length,ee=this._ctx;if(q){for(ee.beginPath(),m=0;m<q;m++){for(y=0,C=B[m].length;y<C;y++)A=B[m][y],ee[y?"lineTo":"moveTo"](A.x,A.y);u&&ee.closePath()}this._fillStroke(ee,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,m=this._ctx,y=Math.max(Math.round(a._radius),1),C=(Math.max(Math.round(a._radiusY),1)||y)/y;C!==1&&(m.save(),m.scale(1,C)),m.beginPath(),m.arc(u.x,u.y/C,y,0,Math.PI*2,!1),C!==1&&m.restore(),this._fillStroke(m,a)}},_fillStroke:function(a,u){var m=u.options;m.fill&&(a.globalAlpha=m.fillOpacity,a.fillStyle=m.fillColor||m.color,a.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=m.opacity,a.lineWidth=m.weight,a.strokeStyle=m.color,a.lineCap=m.lineCap,a.lineJoin=m.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),m,y,C=this._drawFirst;C;C=C.next)m=C.layer,m.options.interactive&&m._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(m))&&(y=m);this._fireEvent(y?[y]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var m,y,C=this._drawFirst;C;C=C.next)m=C.layer,m.options.interactive&&m._containsPoint(u)&&(y=m);y!==this._hoveredLayer&&(this._handleMouseOut(a),y&&(at(this._container,"leaflet-interactive"),this._fireEvent([y],a,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,m){this._map._fireDOMEvent(u,m||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var m=u.next,y=u.prev;if(m)m.prev=y;else return;y?y.next=m:m&&(this._drawFirst=m),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var m=u.next,y=u.prev;if(y)y.next=m;else return;m?m.prev=y:y&&(this._drawLast=y),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function O1(a){return Be.canvas?new F1(a):null}var Hu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),c6={_initContainer:function(){this._container=bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=Hu("shape");at(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=Hu("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[d(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;zt(u),a.removeInteractiveTarget(u),delete this._layers[d(a)]},_updateStyle:function(a){var u=a._stroke,m=a._fill,y=a.options,C=a._container;C.stroked=!!y.stroke,C.filled=!!y.fill,y.stroke?(u||(u=a._stroke=Hu("stroke")),C.appendChild(u),u.weight=y.weight+"px",u.color=y.color,u.opacity=y.opacity,y.dashArray?u.dashStyle=N(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=y.lineCap.replace("butt","flat"),u.joinstyle=y.lineJoin):u&&(C.removeChild(u),a._stroke=null),y.fill?(m||(m=a._fill=Hu("fill")),C.appendChild(m),m.color=y.fillColor||y.color,m.opacity=y.fillOpacity):m&&(C.removeChild(m),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),m=Math.round(a._radius),y=Math.round(a._radiusY||m);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+m+","+y+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Al(a._container)},_bringToBack:function(a){Il(a._container)}},Of=Be.vml?Hu:En,Wu=Oi.extend({_initContainer:function(){this._container=Of("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Of("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zt(this._container),Et(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,u=a.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,m.setAttribute("width",u.x),m.setAttribute("height",u.y)),an(m,a.min),m.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=Of("path");a.options.className&&at(u,a.options.className),a.options.interactive&&at(u,"leaflet-interactive"),this._updateStyle(a),this._layers[d(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){zt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[d(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,m=a.options;u&&(m.stroke?(u.setAttribute("stroke",m.color),u.setAttribute("stroke-opacity",m.opacity),u.setAttribute("stroke-width",m.weight),u.setAttribute("stroke-linecap",m.lineCap),u.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?u.setAttribute("stroke-dasharray",m.dashArray):u.removeAttribute("stroke-dasharray"),m.dashOffset?u.setAttribute("stroke-dashoffset",m.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),m.fill?(u.setAttribute("fill",m.fillColor||m.color),u.setAttribute("fill-opacity",m.fillOpacity),u.setAttribute("fill-rule",m.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,Pr(a._parts,u))},_updateCircle:function(a){var u=a._point,m=Math.max(Math.round(a._radius),1),y=Math.max(Math.round(a._radiusY),1)||m,C="a"+m+","+y+" 0 1,0 ",A=a._empty()?"M0 0":"M"+(u.x-m)+","+u.y+C+m*2+",0 "+C+-m*2+",0 ";this._setPath(a,A)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Al(a._path)},_bringToBack:function(a){Il(a._path)}});Be.vml&&Wu.include(c6);function D1(a){return Be.svg||Be.vml?new Wu(a):null}mt.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&O1(a)||D1(a)}});var U1=Ll.extend({initialize:function(a,u){Ll.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Ie(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function u6(a,u){return new U1(a,u)}Wu.create=Of,Wu.pointsToPath=Pr,Fi.geometryToLayer=Ef,Fi.coordsToLatLng=Uy,Fi.coordsToLatLngs=Af,Fi.latLngToCoords=By,Fi.latLngsToCoords=If,Fi.getFeature=Fl,Fi.asFeature=Mf,mt.mergeOptions({boxZoom:!0});var B1=Xs.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Et(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Fu(),_y(),this._startPoint=this._map.mouseEventToContainerPoint(a),nt(document,{contextmenu:ja,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=bt("div","leaflet-zoom-box",this._container),at(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new ce(this._point,this._startPoint),m=u.getSize();an(this._box,u.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(zt(this._box),Xt(this._container,"leaflet-crosshair")),Ou(),Sy(),Et(document,{contextmenu:ja,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var u=new Ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});mt.addInitHook("addHandler","boxZoom",B1),mt.mergeOptions({doubleClickZoom:!0});var z1=Xs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,m=u.getZoom(),y=u.options.zoomDelta,C=a.originalEvent.shiftKey?m-y:m+y;u.options.doubleClickZoom==="center"?u.setZoom(C):u.setZoomAround(a.containerPoint,C)}});mt.addInitHook("addHandler","doubleClickZoom",z1),mt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $1=Xs.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new go(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}at(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Ie(this._map.options.maxBounds);this._offsetLimit=Te(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),m=this._initialWorldOffset,y=this._draggable._newPos.x,C=(y-u+m)%a+u-m,A=(y+u+m)%a-u-m,B=Math.abs(C+m)<Math.abs(A+m)?C:A;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(a){var u=this._map,m=u.options,y=!m.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),y)u.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),A=(this._lastTime-this._times[0])/1e3,B=m.easeLinearity,q=C.multiplyBy(B/A),ee=q.distanceTo([0,0]),ae=Math.min(m.inertiaMaxSpeed,ee),je=q.multiplyBy(ae/ee),qe=ae/(m.inertiaDeceleration*B),ut=je.multiplyBy(-qe/2).round();!ut.x&&!ut.y?u.fire("moveend"):(ut=u._limitOffset(ut,u.options.maxBounds),J(function(){u.panBy(ut,{duration:qe,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});mt.addInitHook("addHandler","dragging",$1),mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var V1=Xs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),nt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Et(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,m=a.scrollTop||u.scrollTop,y=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(y,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},m=this.keyCodes,y,C;for(y=0,C=m.left.length;y<C;y++)u[m.left[y]]=[-1*a,0];for(y=0,C=m.right.length;y<C;y++)u[m.right[y]]=[a,0];for(y=0,C=m.down.length;y<C;y++)u[m.down[y]]=[0,a];for(y=0,C=m.up.length;y<C;y++)u[m.up[y]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},m=this.keyCodes,y,C;for(y=0,C=m.zoomIn.length;y<C;y++)u[m.zoomIn[y]]=a;for(y=0,C=m.zoomOut.length;y<C;y++)u[m.zoomOut[y]]=-a},_addHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Et(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,m=this._map,y;if(u in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(y=this._panKeys[u],a.shiftKey&&(y=X(y).multiplyBy(3)),m.options.maxBounds&&(y=m._limitOffset(X(y),m.options.maxBounds)),m.options.worldCopyJump){var C=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(y)));m.panTo(C)}else m.panBy(y)}else if(u in this._zoomKeys)m.setZoom(m.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;ja(a)}}});mt.addInitHook("addHandler","keyboard",V1),mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var H1=Xs.extend({addHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Et(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=p1(a),m=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var y=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),y),ja(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),m=this._map.options.zoomSnap||0;a._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,A=m?Math.ceil(C/m)*m:C,B=a._limitZoom(u+(this._delta>0?A:-A))-u;this._delta=0,this._startTime=null,B&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+B):a.setZoomAround(this._lastMousePos,u+B))}});mt.addInitHook("addHandler","scrollWheelZoom",H1);var d6=600;mt.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var W1=Xs.extend({addHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Et(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new O(u.clientX,u.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(nt(document,"touchend",In),nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),d6),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Et(document,"touchend",In),Et(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Et(document,"touchend touchcancel contextmenu",this._cancel,this),Et(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new O(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var m=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});m._simulated=!0,u.target.dispatchEvent(m)}});mt.addInitHook("addHandler","tapHold",W1),mt.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var q1=Xs.extend({addHooks:function(){at(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),Et(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var m=u.mouseEventToContainerPoint(a.touches[0]),y=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(m.add(y)._divideBy(2))),this._startDist=m.distanceTo(y),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),In(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,m=u.mouseEventToContainerPoint(a.touches[0]),y=u.mouseEventToContainerPoint(a.touches[1]),C=m.distanceTo(y)/this._startDist;if(this._zoom=u.getScaleZoom(C,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&C<1||this._zoom>u.getMaxZoom()&&C>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var A=m._add(y)._divideBy(2)._subtract(this._centerPoint);if(C===1&&A.x===0&&A.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(A),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var B=l(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=J(B,this,!0),In(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),Et(document,"touchmove",this._onTouchMove,this),Et(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});mt.addInitHook("addHandler","touchZoom",q1),mt.BoxZoom=B1,mt.DoubleClickZoom=z1,mt.Drag=$1,mt.Keyboard=V1,mt.ScrollWheelZoom=H1,mt.TapHold=W1,mt.TouchZoom=q1,n.Bounds=ce,n.Browser=Be,n.CRS=fe,n.Canvas=F1,n.Circle=Dy,n.CircleMarker=kf,n.Class=Z,n.Control=ms,n.DivIcon=M1,n.DivOverlay=Js,n.DomEvent=kD,n.DomUtil=PD,n.Draggable=go,n.Evented=K,n.FeatureGroup=Ri,n.GeoJSON=Fi,n.GridLayer=Vu,n.Handler=Xs,n.Icon=Rl,n.ImageOverlay=Rf,n.LatLng=ye,n.LatLngBounds=Ve,n.Layer=gs,n.LayerGroup=Ml,n.LineUtil=$D,n.Map=mt,n.Marker=Tf,n.Mixin=FD,n.Path=yo,n.Point=O,n.PolyUtil=OD,n.Polygon=Ll,n.Polyline=Li,n.Popup=Lf,n.PosAnimation=m1,n.Projection=VD,n.Rectangle=U1,n.Renderer=Oi,n.SVG=Wu,n.SVGOverlay=I1,n.TileLayer=Ol,n.Tooltip=Ff,n.Transformation=Xe,n.Util=Y,n.VideoOverlay=A1,n.bind=l,n.bounds=Te,n.canvas=O1,n.circle=YD,n.circleMarker=QD,n.control=Bu,n.divIcon=o6,n.extend=s,n.featureGroup=ZD,n.geoJSON=E1,n.geoJson=e6,n.gridLayer=a6,n.icon=GD,n.imageOverlay=t6,n.latLng=ue,n.latLngBounds=Ie,n.layerGroup=qD,n.map=ED,n.marker=KD,n.point=X,n.polygon=JD,n.polyline=XD,n.popup=s6,n.rectangle=u6,n.setOptions=_,n.stamp=d,n.svg=D1,n.svgOverlay=r6,n.tileLayer=R1,n.tooltip=i6,n.transformation=tt,n.version=r,n.videoOverlay=n6;var h6=window.L;n.noConflict=function(){return window.L=h6,this},window.L=n})})(N0,N0.exports);var K$=N0.exports;const Po=Ei(K$),Cv=e=>{var s,i,l,c,d,h;const t=((i=(s=e.properties)==null?void 0:s.incidentType)==null?void 0:i.toLowerCase())||"",n=((c=(l=e.properties)==null?void 0:l.GroupedType)==null?void 0:c.toLowerCase())||"",r=((h=(d=e.properties)==null?void 0:d.description)==null?void 0:h.toLowerCase())||"";return t.includes("fire")||t.includes("smoke")||t.includes("chemical")||t.includes("hazmat")||n.includes("fire")||n.includes("smoke")||n.includes("chemical")||n.includes("hazmat")||r.includes("fire")||r.includes("smoke")};function Qw(e){const{data:t}=Dt({queryKey:["/api/unified"],queryFn:async()=>{const U=new AbortController,V=setTimeout(()=>U.abort(),12e4);try{const K=await fetch("/api/unified",{credentials:"include",signal:U.signal});if(clearTimeout(V),!K.ok)throw new Error("Failed to fetch unified incidents");return K.json()}catch(K){throw clearTimeout(V),K}},select:U=>{var V,K,O;return console.log(" UNIFIED PIPELINE: Events:",((K=(V=U==null?void 0:U.features)==null?void 0:V.filter(G=>{var X;return((X=G.properties)==null?void 0:X.source)==="tmr"}))==null?void 0:K.length)||0,"Incidents:",((O=U==null?void 0:U.features)==null?void 0:O.length)||0),U||{type:"FeatureCollection",features:[]}},refetchInterval:e.autoRefresh?3e4:6e4}),n=(t==null?void 0:t.features)||[],r=n.filter(U=>{var K;return((K=U.properties)==null?void 0:K.source)==="tmr"}),s=n.filter(U=>{var K;const V=(K=U.properties)==null?void 0:K.source;return V==="emergency"||V==="user"}),l=typeof e.radius=="number"?e.radius:50;console.log(" HOME LOCATION:",e.homeLocation,"COORDINATES:",e.homeCoordinates,"RADIUS:",l+"km");const c=U=>{var Oe,Ye,He,Xe,tt,Lt,Yt,En;if(!e.homeCoordinates)return!1;((Oe=U.properties)==null?void 0:Oe.source)==="user"&&console.log(" USER INCIDENT:",{id:U.id,title:(Ye=U.properties)==null?void 0:Ye.title,location:(He=U.properties)==null?void 0:He.location,hasCoordinates:!!((Xe=U.geometry)!=null&&Xe.coordinates)});let K,O;if((tt=U.properties)!=null&&tt.centroidLng&&((Lt=U.properties)!=null&&Lt.centroidLat))K=U.properties.centroidLng,O=U.properties.centroidLat;else if((Yt=U.geometry)!=null&&Yt.coordinates)if(U.geometry.type==="Point")[K,O]=U.geometry.coordinates;else if(U.geometry.type==="MultiPoint"&&U.geometry.coordinates[0])[K,O]=U.geometry.coordinates[0];else if(U.geometry.type==="MultiLineString"&&((En=U.geometry.coordinates[0])!=null&&En[0]))[K,O]=U.geometry.coordinates[0][0];else if(U.geometry.type==="LineString"&&U.geometry.coordinates[0])[K,O]=U.geometry.coordinates[0];else return console.log(" INVALID GEOMETRY:",U.id,"type:",U.geometry.type),!1;else return console.log(" NO COORDINATES:",U.id,"missing geometry"),!1;if(typeof K!="number"||typeof O!="number"||isNaN(K)||isNaN(O))return console.log(" INVALID COORDINATES:",U.id,"lng:",K,"lat:",O),!1;const G=e.homeCoordinates.lon,X=e.homeCoordinates.lat,ce=6371,Te=(O-X)*Math.PI/180,Ve=(K-G)*Math.PI/180,Ie=Math.sin(Te/2)*Math.sin(Te/2)+Math.cos(X*Math.PI/180)*Math.cos(O*Math.PI/180)*Math.sin(Ve/2)*Math.sin(Ve/2),ye=2*Math.atan2(Math.sqrt(Ie),Math.sqrt(1-Ie)),ue=ce*ye;return ue<=l?(console.log(" PROXIMITY MATCH:",U.id,"distance:",ue.toFixed(1)+"km"),!0):(console.log(" PROXIMITY REJECT:",U.id,"distance:",ue.toFixed(1)+"km"),!1)},d=e.homeCoordinates?r.filter(c):[],h=e.homeCoordinates?s.filter(c):[],f=Array.isArray(r)?r:[],p=Array.isArray(s)?s:[],g=Array.isArray(d)?d:[],b=Array.isArray(h)?h:[],j=b.filter(U=>{var V;return!((V=U.properties)!=null&&V.userReported)}),_=j.filter(Cv),w=j.filter(U=>!Cv(U)),S=g.length,x=w.length,N=_.length,P=b.filter(U=>{var V,K;return((V=U.properties)==null?void 0:V.userReported)&&((K=U.properties)==null?void 0:K.categoryId)==="792759f4-1b98-4665-b14c-44a54e9969e9"}).length,E=b.filter(U=>{var V,K;return((V=U.properties)==null?void 0:V.userReported)&&((K=U.properties)==null?void 0:K.categoryId)==="d03f47a9-10fb-4656-ae73-92e959d7566a"}).length,k=b.filter(U=>{var V,K;return((V=U.properties)==null?void 0:V.userReported)&&((K=U.properties)==null?void 0:K.categoryId)==="deaca906-3561-4f80-b79f-ed99561c3b04"}).length,M=b.filter(U=>{var V,K;return((V=U.properties)==null?void 0:V.userReported)&&((K=U.properties)==null?void 0:K.categoryId)==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"}).length,z=b.filter(U=>{var V,K;return((V=U.properties)==null?void 0:V.userReported)&&((K=U.properties)==null?void 0:K.categoryId)==="d1dfcd4e-48e9-4e58-9476-4782a2a132f3"}).length,D=b.filter(U=>{var V,K;return((V=U.properties)==null?void 0:V.userReported)&&((K=U.properties)==null?void 0:K.categoryId)==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"}).length,F={total:S+x+N+P+E+k+M+z+D,trafficEvents:S,emergencyIncidents:x,qfesIncidents:N,userSafetyCrime:P,userWildlife:E,userCommunity:k,userTraffic:M,userLostFound:z,userPets:D},J=e.showTrafficEvents?f:[],H=p.filter(U=>{var K,O;if((K=U.properties)==null?void 0:K.userReported){const G=(O=U.properties)==null?void 0:O.categoryId;return G==="792759f4-1b98-4665-b14c-44a54e9969e9"?e.showUserSafetyCrime===!0:G==="d03f47a9-10fb-4656-ae73-92e959d7566a"?e.showUserWildlife===!0:G==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"?e.showUserTraffic===!0:G==="deaca906-3561-4f80-b79f-ed99561c3b04"?e.showUserCommunity===!0:G==="d1dfcd4e-48e9-4e58-9476-4782a2a132f3"?e.showUserLostFound===!0:G==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"?e.showUserPets===!0:e.showUserCommunity===!0}else return Cv(U)?e.showQFES===!0:e.showIncidents===!0}),Y=f,Z=p;return console.log(" UNIFIED PIPELINE: Events:",Y.length,"Incidents:",Z.length),console.log(" REGIONAL: Events:",g.length,"Incidents:",b.length),{events:Y,incidents:Z,regionalEvents:g,regionalIncidents:b,counts:F,filteredEvents:J,filteredIncidents:H}}const Q$={standard:12,major:12};function Y$(e){var r,s,i,l;const t=(r=e.status)==null?void 0:r.toLowerCase(),n=(s=e.severity)==null?void 0:s.toLowerCase();return(e.source==="emergency"||e.source==="qfes")&&t==="active"||((i=e.properties)==null?void 0:i.VehiclesOnScene)>=3||((l=e.properties)==null?void 0:l.impact_type)==="major"||n==="high"||n==="critical"?"major":"standard"}function GN(e,t){const n=(t==null?void 0:t.agingSensitivity)||"normal",r=(t==null?void 0:t.showExpiredIncidents)||!1;if(n==="disabled")return{agePercentage:0,isVisible:!0,timeRemaining:1/0,shouldAutoHide:!1};const s=Y$(e),i=Q$[s];let l=1;n==="extended"&&(l=1.5);const d=i*l*60*60*1e3,h=e.incidentTime||e.lastUpdated,f=Date.now()-new Date(h).getTime(),p=Math.max(0,Math.min(f/d,1)),g=Math.max(0,d-f),b=Math.floor(g/(60*1e3)),j=p>=1&&!r;return{agePercentage:p,isVisible:!j,timeRemaining:b,shouldAutoHide:j}}function KN(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function X$(e,t,n){const r=s=>{const i=Math.round(s).toString(16);return i.length===1?"0"+i:i};return`#${r(e)}${r(t)}${r(n)}`}function J$(e,t,n){const r=KN(e),s=KN(t);if(!r||!s)return e;const i=Math.max(0,Math.min(1,n)),l=r.r+(s.r-r.r)*i,c=r.g+(s.g-r.g)*i,d=r.b+(s.b-r.b)*i;return X$(l,c,d)}function QN(e,t){const n="#e5e7eb",r=Math.pow(t,1.5);return J$(e,n,r)}const eV=(e,t,n="")=>e&&e[t]!==void 0?e[t]:e&&e.originalProperties&&e.originalProperties[t]!==void 0?e.originalProperties[t]:n,gc=(e,t,n="")=>{const r=eV(e,t,n);return typeof r=="string"?r.toLowerCase():n},nd=e=>{const t=e.properties||{},n=gc(t,"incidentType"),r=gc(t,"GroupedType"),s=gc(t,"description");return n.includes("fire")||r.includes("fire")||s.includes("fire")||s.includes("qfes")||s.includes("ambulance")||s.includes("rescue")};delete Po.Icon.Default.prototype._getIconUrl;Po.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function tV({filters:e,onEventSelect:t}){const n=v.useRef(null),r=v.useRef(null),s=v.useRef([]),[i,l]=v.useState(!0),{filteredEvents:c,filteredIncidents:d}=Qw(e),h={features:c||[]},f={features:d||[]};console.log(" MAP: Rendering",(c==null?void 0:c.length)||0,"events,",(d==null?void 0:d.length)||0,"incidents");const p=!1;v.useEffect(()=>{if(!n.current||r.current)return;const j=localStorage.getItem("qldSafetyMap_position");let _=[-27.4698,153.0251],w=11;if(j)try{const{lat:P,lng:E,zoom:k}=JSON.parse(j);_=[P,E],w=k}catch{console.log("Failed to parse saved map state, using defaults")}else e.homeCoordinates&&(_=[e.homeCoordinates.lat,e.homeCoordinates.lon],w=14);const S=Po.latLngBounds([-29.5,137],[-9,154]),x=Po.map(n.current,{minZoom:10,maxZoom:16,maxBounds:S,maxBoundsViscosity:1,tapTolerance:15,touchZoom:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,zoomControl:!0,boxZoom:!1,keyboard:!1}).setView(_,w);x.tap=!1,Po.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:" OpenStreetMap contributors,  CARTO",minZoom:10,maxZoom:16}).addTo(x),r.current=x;const N=()=>{if(r.current){const P=r.current.getCenter(),E=r.current.getZoom(),k={lat:P.lat,lng:P.lng,zoom:E};localStorage.setItem("qldSafetyMap_position",JSON.stringify(k))}};return x.on("moveend",N),x.on("zoomend",N),()=>{r.current&&(r.current.remove(),r.current=null)}},[e.homeCoordinates]),v.useEffect(()=>{l(p)},[p]),v.useEffect(()=>{if(!r.current)return;s.current.forEach(x=>{var N;(N=r.current)==null||N.removeLayer(x)}),s.current=[];const j=[];let _=h,w=f;const S=x=>{var P,E,k,M,z,D,F,J,H,Y,Z,U,V,K,O,G;const N=[x==null?void 0:x.incidentTime,x==null?void 0:x.lastUpdated,x==null?void 0:x.publishedAt,(P=x==null?void 0:x.properties)==null?void 0:P.incidentTime,(E=x==null?void 0:x.properties)==null?void 0:E.updatedAt,(k=x==null?void 0:x.properties)==null?void 0:k.lastUpdated,(M=x==null?void 0:x.properties)==null?void 0:M.LastUpdate,(z=x==null?void 0:x.properties)==null?void 0:z.publishedAt,(D=x==null?void 0:x.properties)==null?void 0:D.firstSeenAt,(F=x==null?void 0:x.properties)==null?void 0:F.datetime,(J=x==null?void 0:x.properties)==null?void 0:J.occurredAt,(H=x==null?void 0:x.properties)==null?void 0:H.Response_Date,(Z=(Y=x==null?void 0:x.properties)==null?void 0:Y.duration)==null?void 0:Z.start,(U=x==null?void 0:x.properties)==null?void 0:U.published,(V=x==null?void 0:x.properties)==null?void 0:V.last_updated,(K=x==null?void 0:x.properties)==null?void 0:K.updated_at,(O=x==null?void 0:x.properties)==null?void 0:O.createdAt,(G=x==null?void 0:x.properties)==null?void 0:G.created_at];for(const X of N)if(X){const ce=new Date(X).getTime();if(!isNaN(ce))return ce}return new Date("1970-01-01T00:00:00Z").getTime()};_!=null&&_.features&&[..._.features].sort((N,P)=>S(N)-S(P)).forEach(N=>{var M,z,D,F,J,H,Y,Z,U,V,K,O,G,X,ce,Te,Ve,Ie;const P=gc(N.properties,"event_type"),E=N.incidentTime||N.lastUpdated||N.publishedAt||((M=N.properties)==null?void 0:M.incidentTime)||((z=N.properties)==null?void 0:z.lastUpdated)||((D=N.properties)==null?void 0:D.publishedAt)||((J=(F=N.properties)==null?void 0:F.duration)==null?void 0:J.start)||((H=N.properties)==null?void 0:H.published)||((Y=N.properties)==null?void 0:Y.last_updated)||((Z=N.properties)==null?void 0:Z.firstSeenAt);let k={agePercentage:0,isVisible:!0};if(E){if(k=GN({source:"traffic",severity:((U=N.properties)==null?void 0:U.priority)||((V=N.properties)==null?void 0:V.impact_type)||"medium",status:((K=N.properties)==null?void 0:K.status)||"active",lastUpdated:((O=N.properties)==null?void 0:O.last_updated)||((G=N.properties)==null?void 0:G.published)||E,incidentTime:E,properties:N.properties},{agingSensitivity:e.agingSensitivity,showExpiredIncidents:e.showExpiredIncidents}),!k.isVisible)return}else console.warn("Traffic event missing timestamp data, showing with default styling:",(X=N.properties)==null?void 0:X.id);if(N.geometry){let ye=null;if(N.geometry.type==="Point"&&N.geometry.coordinates)ye=[N.geometry.coordinates[1],N.geometry.coordinates[0]];else if(N.geometry.type==="MultiPoint"&&((ce=N.geometry.coordinates)!=null&&ce[0])){const ue=N.geometry.coordinates[0];ye=[ue[1],ue[0]]}else if(N.geometry.type==="GeometryCollection"&&((Te=N.geometry.geometries)!=null&&Te[0])){const ue=N.geometry.geometries.find(fe=>fe.type==="Point");ue!=null&&ue.coordinates&&(ye=[ue.coordinates[1],ue.coordinates[0]])}else if((Ie=(Ve=N.geometry.geometries)==null?void 0:Ve[0])!=null&&Ie.coordinates){const ue=N.geometry.geometries[0];if(ue.type==="Point")ye=[ue.coordinates[1],ue.coordinates[0]];else if(ue.type==="MultiLineString"||ue.type==="LineString"){const fe=ue.type==="MultiLineString"?ue.coordinates[0]:ue.coordinates;fe&&fe[0]&&(ye=[fe[0][1],fe[0][0]])}}if(ye){const ue=g(P,N.properties),fe=QN(ue,k.agePercentage),Oe=S(N),Ye=Math.floor(Oe/1e3),He=Po.marker(ye,{icon:b(P,fe,1),zIndexOffset:Ye});He.on("click",()=>{t(N)}),He.addTo(r.current),j.push(He)}}}),w!=null&&w.features&&[...w.features].sort((N,P)=>S(N)-S(P)).forEach(N=>{var P,E,k,M;if((P=N.geometry)!=null&&P.coordinates){let z=null,D="incident";const F=N.properties,J=N.source||(F==null?void 0:F.source);if(J==="user"){const Z=F==null?void 0:F.incidentType,U=(F==null?void 0:F.categoryId)||(F==null?void 0:F.categoryUuid),V=(E=F==null?void 0:F.category)==null?void 0:E.toLowerCase();Z==="traffic"?D="traffic":Z==="crime"||Z==="suspicious_activity"?D="crime":Z==="emergency"?D="emergency":Z==="wildlife"?D="wildlife":V==="pets"||Z==="pets"?D="pets":U?U==="792759f4-1b98-4665-b14c-44a54e9969e9"?D="crime":U==="d03f47a9-10fb-4656-ae73-92e959d7566a"?D="wildlife":U==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"?D="traffic":U==="54d31da5-fc10-4ad2-8eca-04bac680e668"?D="emergency":U==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"?D="pets":D="community":V?V==="792759f4-1b98-4665-b14c-44a54e9969e9"||V==="safety & crime"?D="crime":V==="d03f47a9-10fb-4656-ae73-92e959d7566a"||V==="wildlife & nature"?D="wildlife":V==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"||V==="infrastructure & hazards"?D="traffic":V==="54d31da5-fc10-4ad2-8eca-04bac680e668"||V==="emergency situations"?D="emergency":V==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"||V==="pets"?D="pets":D="community":D="community"}else if(J==="tmr")D="traffic";else if(J==="emergency"){const Z=N.GroupedType||(F==null?void 0:F.GroupedType);let U=!1;if(Z){const V=String(Z).toLowerCase();(V.includes("rescue")||V.includes("crash"))&&(D="rescue",U=!0)}if(!U)switch(N.subcategory||(F==null?void 0:F.subcategory)||""){case"Fire & Smoke":D="fire";break;case"Rescue Operation":D="rescue";break;case"Medical Emergencies":D="medical";break;case"Chemical/Hazmat":D="hazmat";break;case"Power/Gas Emergency":D="power";break;case"Storm/SES":D="storm";break;case"Public Safety":D="emergency";break;default:D="siren"}}else if(F==null?void 0:F.userReported){const U=F==null?void 0:F.incidentType,V=(F==null?void 0:F.categoryId)||(F==null?void 0:F.categoryUuid),K=(k=F==null?void 0:F.category)==null?void 0:k.toLowerCase();U==="traffic"?D="traffic":U==="crime"||U==="suspicious_activity"?D="crime":U==="emergency"?D="emergency":U==="wildlife"?D="wildlife":K==="pets"||U==="pets"?D="pets":V?V==="792759f4-1b98-4665-b14c-44a54e9969e9"?D="crime":V==="d03f47a9-10fb-4656-ae73-92e959d7566a"?D="wildlife":V==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"?D="traffic":V==="54d31da5-fc10-4ad2-8eca-04bac680e668"?D="emergency":V==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"?D="pets":D="community":K?K==="792759f4-1b98-4665-b14c-44a54e9969e9"||K==="safety & crime"?D="crime":K==="d03f47a9-10fb-4656-ae73-92e959d7566a"||K==="wildlife & nature"?D="wildlife":K==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"||K==="infrastructure & hazards"?D="traffic":K==="54d31da5-fc10-4ad2-8eca-04bac680e668"||K==="emergency situations"?D="emergency":K==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"||K==="pets"?D="pets":D="community":D="community"}else nd(N)?D="qfes":D="emergency";const H=N.incidentTime||N.lastUpdated||N.publishedAt||(F==null?void 0:F.incidentTime)||(F==null?void 0:F.lastUpdated)||(F==null?void 0:F.updatedAt)||(F==null?void 0:F.createdAt)||(F==null?void 0:F.datetime)||(F==null?void 0:F.occurredAt)||(F==null?void 0:F.Response_Date)||(F==null?void 0:F.created_at)||(F==null?void 0:F.LastUpdate)||(F==null?void 0:F.updated_at)||(F==null?void 0:F.firstSeenAt);let Y;if(!H)console.warn("Incident missing timestamp data, showing with default styling:",F==null?void 0:F.id),Y={agePercentage:0,isVisible:!0,timeRemaining:1/0,shouldAutoHide:!1};else{J==="user"?F!=null&&F.categoryId||(F==null||F.categoryUuid):J==="tmr"||(J==="emergency"?nd(N):(F==null?void 0:F.userReported)?F!=null&&F.categoryId||(F==null||F.categoryUuid):nd(N));let Z="emergency";J==="user"?Z="user":J==="tmr"?Z="tmr":J==="emergency"?Z=nd(N)?"qfes":"emergency":Z=(F==null?void 0:F.userReported)?"user":nd(N)?"qfes":"emergency",Y=GN({source:Z,severity:(F==null?void 0:F.severity)||(F==null?void 0:F.priority)||"medium",status:(F==null?void 0:F.status)||(F==null?void 0:F.CurrentStatus)||"active",lastUpdated:(F==null?void 0:F.lastUpdated)||(F==null?void 0:F.LastUpdate)||(F==null?void 0:F.updated_at)||H,incidentTime:H,properties:F},{agingSensitivity:e.agingSensitivity,showExpiredIncidents:e.showExpiredIncidents})}if(!Y.isVisible)return;if(N.geometry.type==="Point")z=[N.geometry.coordinates[1],N.geometry.coordinates[0]];else if(N.geometry.type==="MultiPoint"&&((M=N.geometry.coordinates)!=null&&M[0])){const Z=N.geometry.coordinates[0];z=[Z[1],Z[0]]}if(z){const Z=g(D,N.properties),U=QN(Z,Y.agePercentage),V=S(N),K=Math.floor(V/1e3),O=Po.marker(z,{icon:b(D,U,1),zIndexOffset:K});O.on("click",()=>{t(N)}),O.addTo(r.current),j.push(O)}}}),s.current=j},[h,f,e]);const g=(j,_)=>{if(_){const w=gc(_,"status")||gc(_,"CurrentStatus");if(w==="completed"||w==="closed"||w==="resolved"||w==="cleared"||w==="patrolled")return"#9ca3af"}switch(j.toLowerCase()){case"crash":case"hazard":case"restriction":case"incident":case"traffic":case"roadworks":case"special event":case"congestion":return"#f97316";case"crime":case"suspicious":return"#9333ea";case"pets":return"#e11d48";case"emergency":return"#4f46e5";case"fire":return"#dc2626";case"rescue":case"ambulance":return"#f97316";case"medical":return"#16a34a";case"hazmat":return"#eab308";case"power":case"gas":return"#a855f7";case"storm":case"ses":return"#3b82f6";case"siren":return"#dc2626";case"qfes":return"#dc2626";case"wildlife":return"#16a34a";case"community":return"#0d9488";default:return"#6b7280"}},b=(j,_,w=1)=>{const S=x=>{switch(x.toLowerCase()){case"congestion":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>`;case"crash":case"hazard":case"restriction":case"incident":case"roadworks":case"special_event":case"special event":case"traffic":case"multi-vehicle":case"road damage":case"recurring":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9L18.7 10H15l2.9-1.9c.5-.3.8-.8.8-1.4 0-.8-.7-1.4-1.5-1.4H12c-.8 0-1.5.6-1.5 1.4 0 .6.3 1.1.8 1.4L14.3 10H10.7L8.9 8.1c.5-.3.8-.8.8-1.4 0-.8-.7-1.4-1.5-1.4H3.8c-.8 0-1.5.6-1.5 1.4 0 .6.3 1.1.8 1.4L5 10.3C4.2 11 3.5 12 3.5 13v3c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/></svg>`;case"crime":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>`;case"suspicious":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>`;case"pets":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>`;case"emergency":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`;case"qfes":case"fire":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>`;case"rescue":case"ambulance":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="${_}">
            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
            <path d="M6.2 8.8l-1.3-2.5 2.5 1.3 1.3-2.5 1.3 2.5 2.5-1.3-1.3 2.5 2.5 1.3-2.5 1.3 1.3 2.5-2.5-1.3-1.3 2.5-1.3-2.5-2.5 1.3 1.3-2.5z"/>
          </svg>`;case"medical":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>`;case"hazmat":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>`;case"power":case"gas":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`;case"storm":case"ses":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"/><path d="m13 12-3 5h4l-3 5"/></svg>`;case"siren":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 12a5 5 0 0 1 5-5"/><path d="M17 12a5 5 0 0 0-5-5"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M7.5 19.5 9 21"/><path d="m15 21 1.5-1.5"/><path d="M9 3 7.5 4.5"/><path d="m15 4.5L16.5 3"/><circle cx="12" cy="12" r="3"/></svg>`;case"wildlife":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="${_}" stroke="none">
            <ellipse cx="12" cy="16" rx="3.5" ry="4"/>
            <ellipse cx="7" cy="11" rx="2" ry="2.5"/>
            <ellipse cx="10.5" cy="8" rx="2" ry="2.5"/>
            <ellipse cx="13.5" cy="8" rx="2" ry="2.5"/>
            <ellipse cx="17" cy="11" rx="2" ry="2.5"/>
          </svg>`;case"community":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="m22 21-3-3m0 0-3-3m3 3 3 3m-3-3-3 3"/></svg>`;default:return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${_}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"/><path d="M12 8v8"/><path d="m8 12 4 4 4-4"/></svg>`}};return Po.divIcon({className:"custom-marker",html:`<div style="background-color: rgba(255, 255, 255, ${w}); width: 24px; height: 24px; border-radius: 50%; border: 2px solid ${_}; box-shadow: 0 2px 4px rgba(0,0,0,${.2*w}); display: flex; align-items: center; justify-content: center; opacity: ${w};">${S(j)}</div>`,iconSize:[28,28],iconAnchor:[14,14]})};return v.useEffect(()=>{window.likeIncident=(j,_,w)=>{var P,E,k;const S=w.target,x=S.querySelector("svg")||((P=S.closest("button"))==null?void 0:P.querySelector("svg")),N=(E=S.closest("button"))==null?void 0:E.querySelector(".like-count");if(x){if(x.classList.contains("text-gray-500")||(k=x.parentElement)!=null&&k.classList.contains("text-gray-500")){if(x.setAttribute("fill","currentColor"),x.classList.remove("text-gray-500","text-gray-600"),x.classList.add("text-blue-500"),x.parentElement&&(x.parentElement.classList.remove("text-gray-500","text-gray-600","hover:text-blue-500"),x.parentElement.classList.add("text-blue-500")),N){const M=parseInt(N.textContent||"0");N.textContent=(M+1).toString()}}else if(x.setAttribute("fill","none"),x.classList.remove("text-blue-500"),x.classList.add("text-gray-500","hover:text-blue-500"),x.parentElement&&(x.parentElement.classList.remove("text-blue-500"),x.parentElement.classList.add("text-gray-500","hover:text-blue-500")),N){const M=parseInt(N.textContent||"0");N.textContent=Math.max(0,M-1).toString()}}},window.shareIncident=(j,_)=>{const w=window.location.href;navigator.share?navigator.share({title:"QLD Safety Monitor - Incident Alert",text:`Check out this ${_} incident on QLD Safety Monitor`,url:w}):navigator.clipboard.writeText(w).then(()=>{alert("Incident link copied to clipboard!")})},window.showIncidentDetails=(j,_)=>{var S,x;let w=null;if(_==="traffic"){const N=(S=h==null?void 0:h.features)==null?void 0:S.find(P=>{var E;return((E=P.properties.id)==null?void 0:E.toString())===j});N&&(w={...N,type:"traffic"})}else if(_==="user-reported"||_==="emergency"){const N=(x=f==null?void 0:f.features)==null?void 0:x.find(P=>{var E,k;return((E=P.properties.id)==null?void 0:E.toString())===j||((k=P.properties.Master_Incident_Number)==null?void 0:k.toString())===j});N&&(w={...N,type:_})}w&&t(w)}},[t,h,f]),o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("div",{ref:n,className:"w-full h-full z-10","data-testid":"map-container"}),i&&o.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-30",children:o.jsxs("div",{className:"bg-card p-6 rounded-lg shadow-lg flex items-center space-x-3",children:[o.jsx("div",{className:"w-5 h-5 border-2 border-muted border-t-primary rounded-full animate-spin"}),o.jsx("span",{className:"text-foreground",children:"Loading safety data..."})]})})]})}const nV=Bg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),le=v.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const l=r?kA:"button";return o.jsx(l,{className:Ce(nV({variant:t,size:n,className:e})),ref:i,...s})});le.displayName="Button";function Gg(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Kg="Checkbox",[rV,ate]=Yn(Kg),[sV,Yw]=rV(Kg);function iV(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:i,form:l,name:c,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:p}=e,[g,b]=Ni({prop:n,defaultProp:s??!1,onChange:d,caller:Kg}),[j,_]=v.useState(null),[w,S]=v.useState(null),x=v.useRef(!1),N=j?!!l||!!j.closest("form"):!0,P={checked:g,disabled:i,setChecked:b,control:j,setControl:_,name:c,form:l,value:f,hasConsumerStoppedPropagationRef:x,required:h,defaultChecked:na(s)?!1:s,isFormControl:N,bubbleInput:w,setBubbleInput:S};return o.jsx(sV,{scope:t,...P,children:oV(p)?p(P):r})}var X5="CheckboxTrigger",J5=v.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:i,value:l,disabled:c,checked:d,required:h,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:j}=Yw(X5,e),_=et(s,f),w=v.useRef(d);return v.useEffect(()=>{const S=i==null?void 0:i.form;if(S){const x=()=>p(w.current);return S.addEventListener("reset",x),()=>S.removeEventListener("reset",x)}},[i,p]),o.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":na(d)?"mixed":d,"aria-required":h,"data-state":sI(d),"data-disabled":c?"":void 0,disabled:c,value:l,...r,ref:_,onKeyDown:me(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:me(n,S=>{p(x=>na(x)?!0:!x),j&&b&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})})});J5.displayName=X5;var Xw=v.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:l,disabled:c,value:d,onCheckedChange:h,form:f,...p}=e;return o.jsx(iV,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:c,required:l,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:g})=>o.jsxs(o.Fragment,{children:[o.jsx(J5,{...p,ref:t,__scopeCheckbox:n}),g&&o.jsx(rI,{__scopeCheckbox:n})]})})});Xw.displayName=Kg;var eI="CheckboxIndicator",tI=v.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=Yw(eI,n);return o.jsx(Un,{present:r||na(i.checked)||i.checked===!0,children:o.jsx(Ae.span,{"data-state":sI(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});tI.displayName=eI;var nI="CheckboxBubbleInput",rI=v.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:l,required:c,disabled:d,name:h,value:f,form:p,bubbleInput:g,setBubbleInput:b}=Yw(nI,e),j=et(n,b),_=Gg(i),w=Wg(r);v.useEffect(()=>{const x=g;if(!x)return;const N=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(N,"checked").set,k=!s.current;if(_!==i&&E){const M=new Event("click",{bubbles:k});x.indeterminate=na(i),E.call(x,na(i)?!1:i),x.dispatchEvent(M)}},[g,_,i,s]);const S=v.useRef(na(i)?!1:i);return o.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??S.current,required:c,disabled:d,name:h,value:f,form:p,...t,tabIndex:-1,ref:j,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rI.displayName=nI;function oV(e){return typeof e=="function"}function na(e){return e==="indeterminate"}function sI(e){return na(e)?"indeterminate":e?"checked":"unchecked"}const kr=v.forwardRef(({className:e,...t},n)=>o.jsx(Xw,{ref:n,className:Ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:o.jsx(tI,{className:Ce("flex items-center justify-center text-current"),children:o.jsx(jw,{className:"h-4 w-4"})})}));kr.displayName=Xw.displayName;var aV="Label",iI=v.forwardRef((e,t)=>o.jsx(Ae.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));iI.displayName=aV;var oI=iI;const lV=Bg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),be=v.forwardRef(({className:e,...t},n)=>o.jsx(oI,{ref:n,className:Ce(lV(),e),...t}));be.displayName=oI.displayName;const jv=768;function Qg(){const[e,t]=v.useState(void 0);return v.useEffect(()=>{const n=window.matchMedia(`(max-width: ${jv-1}px)`),r=()=>{t(window.innerWidth<jv)};return n.addEventListener("change",r),t(window.innerWidth<jv),()=>n.removeEventListener("change",r)},[]),!!e}const rt=v.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));rt.displayName="Input";function Pi({value:e,onChange:t,onClear:n,placeholder:r="Enter suburb or street name (no house numbers)...",disabled:s=!1}){const[i,l]=v.useState([]),[c,d]=v.useState(!1),[h,f]=v.useState(!1),[p,g]=v.useState(e);v.useEffect(()=>{g(e)},[e]);const{toast:b}=Pn(),j=v.useRef(null);v.useEffect(()=>{const P=setTimeout(()=>{p.trim().length>2?_(p):(l([]),f(!1))},300);return()=>clearTimeout(P)},[p]);const _=async P=>{d(!0);try{const E=await fetch(`/api/location/search?q=${encodeURIComponent(P)}`);if(!E.ok)throw new Error("Geocoding request failed");const M=await E.json();l(M),f(!0)}catch(E){console.error("Location search failed:",E),b({title:"Location search failed",description:"Unable to search for locations. Please try again.",variant:"destructive"})}finally{d(!1)}},w=P=>P.replace(/^\d+[A-Za-z]?\s+/,"").replace(/^Unit\s+\d+[A-Za-z]?\s+/,"").replace(/^Apt\s+\d+[A-Za-z]?\s+/,"").replace(/^Shop\s+\d+[A-Za-z]?\s+/,"").replace(/^Level\s+\d+[A-Za-z]?\s+/,"").replace(/^\d+\/\d+\s+/,"").replace(/^\d+\/\s+/,"").trim(),S=P=>{let k=P.display_name.split(",").map(H=>H.trim())[0];const M=P.address.suburb||P.address.city,z=P.address.postcode,D=P.address.state||"QLD";k&&(k=w(k));let F="";k&&M&&k!==M&&k.length>2?(F=k,F+=`, ${M}`):F=M||"Unknown location",z&&(F+=` ${z}`),F+=`, ${D}`,g(F.trim()),f(!1);const J=P.boundingbox?[parseFloat(P.boundingbox[0]),parseFloat(P.boundingbox[1]),parseFloat(P.boundingbox[2]),parseFloat(P.boundingbox[3])]:void 0;t(F,{lat:P.lat,lon:P.lon},J)},x=()=>{g(""),l([]),f(!1),n==null||n()},N=P=>{g(P.target.value)};return v.useEffect(()=>{const P=E=>{j.current&&!j.current.contains(E.target)&&f(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]),o.jsxs("div",{className:"relative",ref:j,children:[o.jsxs("div",{className:"relative",children:[o.jsx(Iw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(rt,{type:"text",value:p,onChange:N,placeholder:r,disabled:s,className:"pl-10 pr-10","data-testid":"input-location-search"}),p&&o.jsx(le,{variant:"ghost",size:"sm",onClick:x,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0 hover:bg-muted","data-testid":"button-clear-location",children:o.jsx(oa,{className:"h-3 w-3"})}),c&&o.jsx("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2",children:o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"})})]}),h&&i.length>0&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:i.map((P,E)=>o.jsx("button",{onClick:()=>S(P),className:"w-full px-4 py-3 text-left hover:bg-muted/50 focus:bg-muted/50 focus:outline-none transition-colors border-b border-border last:border-b-0","data-testid":`button-suggestion-${E}`,children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(_r,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("div",{className:"font-medium text-foreground text-sm",children:(()=>{const k=P.display_name.split(",").map(D=>D.trim()),M=P.address.suburb||P.address.city;let z=k[0];return P.address.postcode,z&&(z=w(z)),M&&z&&z!==M&&z.length>2?`${z}, ${M}`:M||"Street location"})()}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:P.address.postcode?`${P.address.postcode}, QLD`:"QLD"})]})]})},E))}),h&&i.length===0&&!c&&p.trim().length>2&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg p-4 text-center text-sm text-muted-foreground",children:"No locations found. Try a different search term."})]})}function cV({isOpen:e,filters:t,onFilterChange:n,onClose:r}){const s=Qg(),{toast:i}=Pn(),[l,c]=v.useState({"Agency Data":!0,"User Reports":!0}),d=f=>{c(p=>({...p,[f]:!p[f]}))};Qw(t);const h=async()=>{try{window.location.reload()}catch{i({title:"Update failed",description:"Failed to refresh data. Please try again.",variant:"destructive"})}};return e?o.jsxs(o.Fragment,{children:[s&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:r}),o.jsxs("div",{className:`
        ${s?"fixed top-0 left-0 w-80 h-full z-50":"w-80 h-full"}
        bg-background border-r border-border shadow-lg flex flex-col
      `,children:[o.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-muted/50",children:[o.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Safety Filters"}),o.jsx(le,{onClick:h,className:"text-muted-foreground hover:text-foreground",children:"Refresh"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{onClick:()=>d("Agency Data"),className:"flex items-center justify-between w-full p-2 text-left hover:bg-muted/50 rounded-md transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Id,{className:"w-4 h-4 text-blue-500"}),o.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Agency Data"})]}),l["Agency Data"]?o.jsx(_m,{className:"w-4 h-4"}):o.jsx(g0,{className:"w-4 h-4"})]}),l["Agency Data"]&&o.jsxs("div",{className:"mt-3 ml-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-tmr",checked:t.showTrafficEvents===!0,onCheckedChange:f=>n("showTrafficEvents",!!f),"data-testid":"checkbox-filter-tmr"}),o.jsx(Id,{className:"w-4 h-4 text-orange-500"}),o.jsx(be,{htmlFor:"filter-tmr",className:"text-sm text-foreground flex-1",children:"TMR Traffic Events"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-esq",checked:t.showIncidents===!0,onCheckedChange:f=>n("showIncidents",!!f),"data-testid":"checkbox-filter-esq"}),o.jsx(Fw,{className:"w-4 h-4 text-blue-500"}),o.jsx(be,{htmlFor:"filter-esq",className:"text-sm text-foreground flex-1",children:"ESQ Emergency Data"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-qfes",checked:t.showQFES===!0,onCheckedChange:f=>n("showQFES",!!f),"data-testid":"checkbox-filter-qfes"}),o.jsx(kw,{className:"w-4 h-4 text-red-500"}),o.jsx(be,{htmlFor:"filter-qfes",className:"text-sm text-foreground flex-1",children:"QFES Fire & Emergency"})]})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{onClick:()=>d("User Reports"),className:"flex items-center justify-between w-full p-2 text-left hover:bg-muted/50 rounded-md transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(co,{className:"w-4 h-4 text-green-500"}),o.jsx("h3",{className:"text-sm font-medium text-foreground",children:"User Reports"})]}),l["User Reports"]?o.jsx(_m,{className:"w-4 h-4"}):o.jsx(g0,{className:"w-4 h-4"})]}),l["User Reports"]&&o.jsxs("div",{className:"mt-3 ml-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-user-safety",checked:t.showUserSafetyCrime===!0,onCheckedChange:f=>n("showUserSafetyCrime",!!f),"data-testid":"checkbox-filter-user-safety"}),o.jsx(Ci,{className:"w-4 h-4 text-purple-500"}),o.jsx(be,{htmlFor:"filter-user-safety",className:"text-sm text-foreground flex-1",children:"Safety & Crime"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-user-wildlife",checked:t.showUserWildlife===!0,onCheckedChange:f=>n("showUserWildlife",!!f),"data-testid":"checkbox-filter-user-wildlife"}),o.jsx(Rw,{className:"w-4 h-4 text-green-600"}),o.jsx(be,{htmlFor:"filter-user-wildlife",className:"text-sm text-foreground flex-1",children:"Wildlife & Nature"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-user-community",checked:t.showUserCommunity===!0,onCheckedChange:f=>n("showUserCommunity",!!f),"data-testid":"checkbox-filter-user-community"}),o.jsx(co,{className:"w-4 h-4 text-teal-600"}),o.jsx(be,{htmlFor:"filter-user-community",className:"text-sm text-foreground flex-1",children:"Community Issues"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-user-traffic",checked:t.showUserTraffic===!0,onCheckedChange:f=>n("showUserTraffic",!!f),"data-testid":"checkbox-filter-user-traffic"}),o.jsx(Id,{className:"w-4 h-4 text-orange-500"}),o.jsx(be,{htmlFor:"filter-user-traffic",className:"text-sm text-foreground flex-1",children:"Road & Traffic"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-user-lost-found",checked:t.showUserLostFound===!0,onCheckedChange:f=>n("showUserLostFound",!!f),"data-testid":"checkbox-filter-user-lost-found"}),o.jsx(j9,{className:"w-4 h-4 text-amber-500"}),o.jsx(be,{htmlFor:"filter-user-lost-found",className:"text-sm text-foreground flex-1",children:"Lost & Found"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-user-pets",checked:t.showUserPets===!0,onCheckedChange:f=>n("showUserPets",!!f),"data-testid":"checkbox-filter-user-pets"}),o.jsx(cf,{className:"w-4 h-4 text-pink-500"}),o.jsx(be,{htmlFor:"filter-user-pets",className:"text-sm text-foreground flex-1",children:"Pets"})]})]})]}),o.jsxs("div",{className:"pt-4 border-t border-border",children:[o.jsxs("h2",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[o.jsx(Pw,{className:"w-5 h-5 text-amber-500"}),"Aging Options"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kr,{id:"filter-show-expired",checked:t.showExpiredIncidents===!0,onCheckedChange:f=>n("showExpiredIncidents",!!f),"data-testid":"checkbox-filter-show-expired"}),o.jsx(Tw,{className:"w-4 h-4 text-gray-500"}),o.jsx(be,{htmlFor:"filter-show-expired",className:"text-sm text-foreground flex-1",children:"Show Expired Incidents"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{className:"text-xs text-muted-foreground",children:"Aging Sensitivity:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",id:"aging-normal",name:"agingSensitivity",value:"normal",checked:t.agingSensitivity==="normal",onChange:()=>n("agingSensitivity","normal"),className:"text-blue-500","data-testid":"radio-aging-normal"}),o.jsx(be,{htmlFor:"aging-normal",className:"text-sm text-foreground",children:"Normal (standard timing)"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",id:"aging-extended",name:"agingSensitivity",value:"extended",checked:t.agingSensitivity==="extended",onChange:()=>n("agingSensitivity","extended"),className:"text-blue-500","data-testid":"radio-aging-extended"}),o.jsx(be,{htmlFor:"aging-extended",className:"text-sm text-foreground",children:"Extended (50% longer visibility)"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",id:"aging-disabled",name:"agingSensitivity",value:"disabled",checked:t.agingSensitivity==="disabled",onChange:()=>n("agingSensitivity","disabled"),className:"text-blue-500","data-testid":"radio-aging-disabled"}),o.jsx(be,{htmlFor:"aging-disabled",className:"text-sm text-foreground",children:"Disabled (no aging)"})]})]})]}),o.jsx("div",{className:"bg-muted/50 p-3 rounded-md",children:o.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.jsx("strong",{children:"Aging System:"})," Critical incidents (fire, medical, rescue) remain visible longer than routine reports. Incidents gradually fade as they age."]})})]})]}),o.jsxs("div",{className:"pt-4 border-t border-border",children:[o.jsxs("h2",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[o.jsx(_r,{className:"w-5 h-5 text-blue-500"}),"Your Location"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{className:"text-xs text-muted-foreground",children:"Set your home suburb:"}),o.jsx(Pi,{value:t.homeLocation||"",onChange:(f,p,g)=>{n("homeLocation",f),p&&n("homeCoordinates",p),g&&n("homeBoundingBox",g)},onClear:()=>{n("homeLocation",""),n("homeCoordinates",void 0),n("homeBoundingBox",void 0)},placeholder:"Enter your suburb...",disabled:!1})]}),t.homeCoordinates&&o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{className:"text-xs text-muted-foreground",children:"Search Radius:"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,5,10,25,50,100,200].map(f=>o.jsxs(le,{variant:t.radius===f?"default":"outline",size:"sm",onClick:()=>n("radius",f),className:"text-xs","data-testid":`button-radius-${f}`,children:[f,"km"]},f))}),o.jsx("div",{className:"text-center",children:o.jsxs("span",{className:"text-xs font-medium text-foreground",children:["Current: ",t.radius||50,"km radius"]})})]})}),t.homeLocation&&o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-sm text-foreground",children:o.jsx("strong",{children:"Home Location:"})}),o.jsx("div",{className:"text-xs text-muted-foreground",children:t.homeLocation}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Showing events within ",t.radius||50,"km radius"]})]})]})]})]})]})]}):null}function uV(){return oA.useSyncExternalStore(dV,()=>!0,()=>!1)}function dV(){return()=>{}}var Jw="Avatar",[hV,lte]=Yn(Jw),[fV,aI]=hV(Jw),lI=v.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,i]=v.useState("idle");return o.jsx(fV,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(Ae.span,{...r,ref:t})})});lI.displayName=Jw;var cI="AvatarImage",uI=v.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=e,l=aI(cI,n),c=pV(r,i),d=Kt(h=>{s(h),l.onImageLoadingStatusChange(h)});return on(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?o.jsx(Ae.img,{...i,ref:t,src:r}):null});uI.displayName=cI;var dI="AvatarFallback",hI=v.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,i=aI(dI,n),[l,c]=v.useState(r===void 0);return v.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&i.imageLoadingStatus!=="loaded"?o.jsx(Ae.span,{...s,ref:t}):null});hI.displayName=dI;function YN(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function pV(e,{referrerPolicy:t,crossOrigin:n}){const r=uV(),s=v.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[l,c]=v.useState(()=>YN(i,e));return on(()=>{c(YN(i,e))},[i,e]),on(()=>{const d=p=>()=>{c(p)};if(!i)return;const h=d("loaded"),f=d("error");return i.addEventListener("load",h),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,n,t]),l}var fI=lI,pI=uI,mI=hI;const Zn=v.forwardRef(({className:e,...t},n)=>o.jsx(fI,{ref:n,className:Ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Zn.displayName=fI.displayName;const ca=v.forwardRef(({className:e,...t},n)=>o.jsx(pI,{ref:n,className:Ce("aspect-square h-full w-full",e),...t}));ca.displayName=pI.displayName;const Gn=v.forwardRef(({className:e,...t},n)=>o.jsx(mI,{ref:n,className:Ce("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Gn.displayName=mI.displayName;const mV=Bg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rn({className:e,variant:t,...n}){return o.jsx("div",{className:Ce(mV({variant:t}),e),...n})}var Pv="focusScope.autoFocusOnMount",Tv="focusScope.autoFocusOnUnmount",XN={bubbles:!1,cancelable:!0},gV="FocusScope",Yg=v.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=e,[c,d]=v.useState(null),h=Kt(s),f=Kt(i),p=v.useRef(null),g=et(t,_=>d(_)),b=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let _=function(N){if(b.paused||!c)return;const P=N.target;c.contains(P)?p.current=P:So(p.current,{select:!0})},w=function(N){if(b.paused||!c)return;const P=N.relatedTarget;P!==null&&(c.contains(P)||So(p.current,{select:!0}))},S=function(N){if(document.activeElement===document.body)for(const E of N)E.removedNodes.length>0&&So(c)};document.addEventListener("focusin",_),document.addEventListener("focusout",w);const x=new MutationObserver(S);return c&&x.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",w),x.disconnect()}}},[r,c,b.paused]),v.useEffect(()=>{if(c){eC.add(b);const _=document.activeElement;if(!c.contains(_)){const S=new CustomEvent(Pv,XN);c.addEventListener(Pv,h),c.dispatchEvent(S),S.defaultPrevented||(yV(_V(gI(c)),{select:!0}),document.activeElement===_&&So(c))}return()=>{c.removeEventListener(Pv,h),setTimeout(()=>{const S=new CustomEvent(Tv,XN);c.addEventListener(Tv,f),c.dispatchEvent(S),S.defaultPrevented||So(_??document.body,{select:!0}),c.removeEventListener(Tv,f),eC.remove(b)},0)}}},[c,h,f,b]);const j=v.useCallback(_=>{if(!n&&!r||b.paused)return;const w=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,S=document.activeElement;if(w&&S){const x=_.currentTarget,[N,P]=vV(x);N&&P?!_.shiftKey&&S===P?(_.preventDefault(),n&&So(N,{select:!0})):_.shiftKey&&S===N&&(_.preventDefault(),n&&So(P,{select:!0})):S===x&&_.preventDefault()}},[n,r,b.paused]);return o.jsx(Ae.div,{tabIndex:-1,...l,ref:g,onKeyDown:j})});Yg.displayName=gV;function yV(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(So(r,{select:t}),document.activeElement!==n)return}function vV(e){const t=gI(e),n=JN(t,e),r=JN(t.reverse(),e);return[n,r]}function gI(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function JN(e,t){for(const n of e)if(!xV(n,{upTo:t}))return n}function xV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function bV(e){return e instanceof HTMLInputElement&&"select"in e}function So(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&bV(e)&&t&&e.select()}}var eC=wV();function wV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=tC(e,t),e.unshift(t)},remove(t){var n;e=tC(e,t),(n=e[0])==null||n.resume()}}}function tC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function _V(e){return e.filter(t=>t.tagName!=="A")}var kv=0;function e_(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??nC()),document.body.insertAdjacentElement("beforeend",e[1]??nC()),kv++,()=>{kv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),kv--}},[])}function nC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fi=function(){return fi=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fi.apply(this,arguments)};function yI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function SV(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Dp="right-scroll-bar-position",Up="width-before-scroll-bar",NV="with-scroll-bars-hidden",CV="--removed-body-scroll-bar-size";function Ev(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jV(e,t){var n=v.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var PV=typeof window<"u"?v.useLayoutEffect:v.useEffect,rC=new WeakMap;function TV(e,t){var n=jV(null,function(r){return e.forEach(function(s){return Ev(s,r)})});return PV(function(){var r=rC.get(n);if(r){var s=new Set(r),i=new Set(e),l=n.current;s.forEach(function(c){i.has(c)||Ev(c,null)}),i.forEach(function(c){s.has(c)||Ev(c,l)})}rC.set(n,e)},[e]),n}function kV(e){return e}function EV(e,t){t===void 0&&(t=kV);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,r);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(i),l=n}var d=function(){var f=l;l=[],f.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(f){l.push(f),h()},filter:function(f){return l=l.filter(f),n}}}};return s}function AV(e){e===void 0&&(e={});var t=EV(null);return t.options=fi({async:!0,ssr:!1},e),t}var vI=function(e){var t=e.sideCar,n=yI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,fi({},n))};vI.isSideCarExport=!0;function IV(e,t){return e.useMedium(t),vI}var xI=AV(),Av=function(){},Xg=v.forwardRef(function(e,t){var n=v.useRef(null),r=v.useState({onScrollCapture:Av,onWheelCapture:Av,onTouchMoveCapture:Av}),s=r[0],i=r[1],l=e.forwardProps,c=e.children,d=e.className,h=e.removeScrollBar,f=e.enabled,p=e.shards,g=e.sideCar,b=e.noRelative,j=e.noIsolation,_=e.inert,w=e.allowPinchZoom,S=e.as,x=S===void 0?"div":S,N=e.gapMode,P=yI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=g,k=TV([n,t]),M=fi(fi({},P),s);return v.createElement(v.Fragment,null,f&&v.createElement(E,{sideCar:xI,removeScrollBar:h,shards:p,noRelative:b,noIsolation:j,inert:_,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:N}),l?v.cloneElement(v.Children.only(c),fi(fi({},M),{ref:k})):v.createElement(x,fi({},M,{className:d,ref:k}),c))});Xg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xg.classNames={fullWidth:Up,zeroRight:Dp};var MV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=MV();return t&&e.setAttribute("nonce",t),e}function LV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function FV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var OV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=RV())&&(LV(t,n),FV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},DV=function(){var e=OV();return function(t,n){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},bI=function(){var e=DV(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},UV={left:0,top:0,right:0,gap:0},Iv=function(e){return parseInt(e||"",10)||0},BV=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Iv(n),Iv(r),Iv(s)]},zV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return UV;var t=BV(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$V=bI(),yc="data-scroll-locked",VV=function(e,t,n,r){var s=e.left,i=e.top,l=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(NV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(yc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dp,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Up,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Dp," .").concat(Dp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Up," .").concat(Up,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yc,`] {
    `).concat(CV,": ").concat(c,`px;
  }
`)},sC=function(){var e=parseInt(document.body.getAttribute(yc)||"0",10);return isFinite(e)?e:0},HV=function(){v.useEffect(function(){return document.body.setAttribute(yc,(sC()+1).toString()),function(){var e=sC()-1;e<=0?document.body.removeAttribute(yc):document.body.setAttribute(yc,e.toString())}},[])},WV=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;HV();var i=v.useMemo(function(){return zV(s)},[s]);return v.createElement($V,{styles:VV(i,!t,s,n?"":"!important")})},C0=!1;if(typeof window<"u")try{var ap=Object.defineProperty({},"passive",{get:function(){return C0=!0,!0}});window.addEventListener("test",ap,ap),window.removeEventListener("test",ap,ap)}catch{C0=!1}var Bl=C0?{passive:!1}:!1,qV=function(e){return e.tagName==="TEXTAREA"},wI=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!qV(e)&&n[t]==="visible")},ZV=function(e){return wI(e,"overflowY")},GV=function(e){return wI(e,"overflowX")},iC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=_I(e,r);if(s){var i=SI(e,r),l=i[1],c=i[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},KV=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},QV=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_I=function(e,t){return e==="v"?ZV(t):GV(t)},SI=function(e,t){return e==="v"?KV(t):QV(t)},YV=function(e,t){return e==="h"&&t==="rtl"?-1:1},XV=function(e,t,n,r,s){var i=YV(e,window.getComputedStyle(t).direction),l=i*r,c=n.target,d=t.contains(c),h=!1,f=l>0,p=0,g=0;do{if(!c)break;var b=SI(e,c),j=b[0],_=b[1],w=b[2],S=_-w-i*j;(j||S)&&_I(e,c)&&(p+=S,g+=j);var x=c.parentNode;c=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(f&&Math.abs(p)<1||!f&&Math.abs(g)<1)&&(h=!0),h},lp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},oC=function(e){return[e.deltaX,e.deltaY]},aC=function(e){return e&&"current"in e?e.current:e},JV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tH=0,zl=[];function nH(e){var t=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),s=v.useState(tH++)[0],i=v.useState(bI)[0],l=v.useRef(e);v.useEffect(function(){l.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var _=SV([e.lockRef.current],(e.shards||[]).map(aC),!0).filter(Boolean);return _.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=v.useCallback(function(_,w){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!l.current.allowPinchZoom;var S=lp(_),x=n.current,N="deltaX"in _?_.deltaX:x[0]-S[0],P="deltaY"in _?_.deltaY:x[1]-S[1],E,k=_.target,M=Math.abs(N)>Math.abs(P)?"h":"v";if("touches"in _&&M==="h"&&k.type==="range")return!1;var z=iC(M,k);if(!z)return!0;if(z?E=M:(E=M==="v"?"h":"v",z=iC(M,k)),!z)return!1;if(!r.current&&"changedTouches"in _&&(N||P)&&(r.current=E),!E)return!0;var D=r.current||E;return XV(D,w,_,D==="h"?N:P)},[]),d=v.useCallback(function(_){var w=_;if(!(!zl.length||zl[zl.length-1]!==i)){var S="deltaY"in w?oC(w):lp(w),x=t.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&JV(E.delta,S)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var N=(l.current.shards||[]).map(aC).filter(Boolean).filter(function(E){return E.contains(w.target)}),P=N.length>0?c(w,N[0]):!l.current.noIsolation;P&&w.cancelable&&w.preventDefault()}}},[]),h=v.useCallback(function(_,w,S,x){var N={name:_,delta:w,target:S,should:x,shadowParent:rH(S)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(P){return P!==N})},1)},[]),f=v.useCallback(function(_){n.current=lp(_),r.current=void 0},[]),p=v.useCallback(function(_){h(_.type,oC(_),_.target,c(_,e.lockRef.current))},[]),g=v.useCallback(function(_){h(_.type,lp(_),_.target,c(_,e.lockRef.current))},[]);v.useEffect(function(){return zl.push(i),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",d,Bl),document.addEventListener("touchmove",d,Bl),document.addEventListener("touchstart",f,Bl),function(){zl=zl.filter(function(_){return _!==i}),document.removeEventListener("wheel",d,Bl),document.removeEventListener("touchmove",d,Bl),document.removeEventListener("touchstart",f,Bl)}},[]);var b=e.removeScrollBar,j=e.inert;return v.createElement(v.Fragment,null,j?v.createElement(i,{styles:eH(s)}):null,b?v.createElement(WV,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function rH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sH=IV(xI,nH);var Jg=v.forwardRef(function(e,t){return v.createElement(Xg,fi({},e,{ref:t,sideCar:sH}))});Jg.classNames=Xg.classNames;var iH=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},$l=new WeakMap,cp=new WeakMap,up={},Mv=0,NI=function(e){return e&&(e.host||NI(e.parentNode))},oH=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=NI(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},aH=function(e,t,n,r){var s=oH(t,Array.isArray(e)?e:[e]);up[n]||(up[n]=new WeakMap);var i=up[n],l=[],c=new Set,d=new Set(s),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};s.forEach(h);var f=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(g){if(c.has(g))f(g);else try{var b=g.getAttribute(r),j=b!==null&&b!=="false",_=($l.get(g)||0)+1,w=(i.get(g)||0)+1;$l.set(g,_),i.set(g,w),l.push(g),_===1&&j&&cp.set(g,!0),w===1&&g.setAttribute(n,"true"),j||g.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",g,S)}})};return f(t),c.clear(),Mv++,function(){l.forEach(function(p){var g=$l.get(p)-1,b=i.get(p)-1;$l.set(p,g),i.set(p,b),g||(cp.has(p)||p.removeAttribute(r),cp.delete(p)),b||p.removeAttribute(n)}),Mv--,Mv||($l=new WeakMap,$l=new WeakMap,cp=new WeakMap,up={})}},t_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=iH(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),aH(r,s,n,"aria-hidden")):function(){return null}},ey="Dialog",[CI,cte]=Yn(ey),[lH,qs]=CI(ey),jI=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:l=!0}=e,c=v.useRef(null),d=v.useRef(null),[h,f]=Ni({prop:r,defaultProp:s??!1,onChange:i,caller:ey});return o.jsx(lH,{scope:t,triggerRef:c,contentRef:d,contentId:bi(),titleId:bi(),descriptionId:bi(),open:h,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(p=>!p),[f]),modal:l,children:n})};jI.displayName=ey;var PI="DialogTrigger",TI=v.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=qs(PI,n),i=et(t,s.triggerRef);return o.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":s_(s.open),...r,ref:i,onClick:me(e.onClick,s.onOpenToggle)})});TI.displayName=PI;var n_="DialogPortal",[cH,kI]=CI(n_,{forceMount:void 0}),EI=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=qs(n_,t);return o.jsx(cH,{scope:t,forceMount:n,children:v.Children.map(r,l=>o.jsx(Un,{present:n||i.open,children:o.jsx(af,{asChild:!0,container:s,children:l})}))})};EI.displayName=n_;var km="DialogOverlay",AI=v.forwardRef((e,t)=>{const n=kI(km,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=qs(km,e.__scopeDialog);return i.modal?o.jsx(Un,{present:r||i.open,children:o.jsx(dH,{...s,ref:t})}):null});AI.displayName=km;var uH=pl("DialogOverlay.RemoveScroll"),dH=v.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=qs(km,n);return o.jsx(Jg,{as:uH,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Ae.div,{"data-state":s_(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),gl="DialogContent",II=v.forwardRef((e,t)=>{const n=kI(gl,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=qs(gl,e.__scopeDialog);return o.jsx(Un,{present:r||i.open,children:i.modal?o.jsx(hH,{...s,ref:t}):o.jsx(fH,{...s,ref:t})})});II.displayName=gl;var hH=v.forwardRef((e,t)=>{const n=qs(gl,e.__scopeDialog),r=v.useRef(null),s=et(t,n.contentRef,r);return v.useEffect(()=>{const i=r.current;if(i)return t_(i)},[]),o.jsx(MI,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:me(e.onFocusOutside,i=>i.preventDefault())})}),fH=v.forwardRef((e,t)=>{const n=qs(gl,e.__scopeDialog),r=v.useRef(!1),s=v.useRef(!1);return o.jsx(MI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,c;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var d,h;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),MI=v.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...l}=e,c=qs(gl,n),d=v.useRef(null),h=et(t,d);return e_(),o.jsxs(o.Fragment,{children:[o.jsx(Yg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Cu,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":s_(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(pH,{titleId:c.titleId}),o.jsx(gH,{contentRef:d,descriptionId:c.descriptionId})]})]})}),r_="DialogTitle",RI=v.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=qs(r_,n);return o.jsx(Ae.h2,{id:s.titleId,...r,ref:t})});RI.displayName=r_;var LI="DialogDescription",FI=v.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=qs(LI,n);return o.jsx(Ae.p,{id:s.descriptionId,...r,ref:t})});FI.displayName=LI;var OI="DialogClose",DI=v.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=qs(OI,n);return o.jsx(Ae.button,{type:"button",...r,ref:t,onClick:me(e.onClick,()=>s.onOpenChange(!1))})});DI.displayName=OI;function s_(e){return e?"open":"closed"}var UI="DialogTitleWarning",[ute,BI]=lz(UI,{contentName:gl,titleName:r_,docsSlug:"dialog"}),pH=({titleId:e})=>{const t=BI(UI),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},mH="DialogDescriptionWarning",gH=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BI(mH).contentName}}.`;return v.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},yH=jI,vH=TI,xH=EI,zI=AI,$I=II,VI=RI,HI=FI,bH=DI;const il=yH,wH=vH,_H=xH,WI=v.forwardRef(({className:e,...t},n)=>o.jsx(zI,{ref:n,className:Ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));WI.displayName=zI.displayName;const ra=v.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(_H,{children:[o.jsx(WI,{className:"ios-modal-fix"}),o.jsxs($I,{ref:r,className:Ce("fixed inset-0 z-50 bg-background duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","sm:inset-auto sm:left-[50%] sm:top-[50%] sm:grid sm:w-full sm:max-w-2xl sm:translate-x-[-50%] sm:translate-y-[-50%] sm:gap-4 sm:border sm:shadow-lg sm:rounded-lg sm:data-[state=closed]:zoom-out-95 sm:data-[state=open]:zoom-in-95 sm:data-[state=closed]:slide-out-to-left-1/2 sm:data-[state=closed]:slide-out-to-top-[48%] sm:data-[state=open]:slide-in-from-left-1/2 sm:data-[state=open]:slide-in-from-top-[48%]","max-h-screen sm:max-h-[90vh]","ios-modal-content",e),...n,children:[o.jsx("div",{className:"flex flex-col h-full overflow-hidden",children:t}),o.jsxs(bH,{className:"absolute right-3 top-3 z-10 rounded-full bg-background/80 p-2 opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground sm:right-4 sm:top-4 sm:p-1 sm:rounded-sm sm:bg-transparent",children:[o.jsx(oa,{className:"h-5 w-5 sm:h-4 sm:w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ra.displayName=$I.displayName;const yl=({className:e,...t})=>o.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});yl.displayName="DialogHeader";const qI=({className:e,...t})=>o.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qI.displayName="DialogFooter";const vl=v.forwardRef(({className:e,...t},n)=>o.jsx(VI,{ref:n,className:Ce("text-lg font-semibold leading-none tracking-tight",e),...t}));vl.displayName=VI.displayName;const ZI=v.forwardRef(({className:e,...t},n)=>o.jsx(HI,{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));ZI.displayName=HI.displayName;var SH=v.createContext(void 0);function Eu(e){const t=v.useContext(SH);return e||t||"ltr"}var Rv="rovingFocusGroup.onEntryFocus",NH={bubbles:!1,cancelable:!0},df="RovingFocusGroup",[j0,GI,CH]=Og(df),[jH,Au]=Yn(df,[CH]),[PH,TH]=jH(df),KI=v.forwardRef((e,t)=>o.jsx(j0.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(j0.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(kH,{...e,ref:t})})}));KI.displayName=df;var kH=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=e,g=v.useRef(null),b=et(t,g),j=Eu(i),[_,w]=Ni({prop:l,defaultProp:c??null,onChange:d,caller:df}),[S,x]=v.useState(!1),N=Kt(h),P=GI(n),E=v.useRef(!1),[k,M]=v.useState(0);return v.useEffect(()=>{const z=g.current;if(z)return z.addEventListener(Rv,N),()=>z.removeEventListener(Rv,N)},[N]),o.jsx(PH,{scope:n,orientation:r,dir:j,loop:s,currentTabStopId:_,onItemFocus:v.useCallback(z=>w(z),[w]),onItemShiftTab:v.useCallback(()=>x(!0),[]),onFocusableItemAdd:v.useCallback(()=>M(z=>z+1),[]),onFocusableItemRemove:v.useCallback(()=>M(z=>z-1),[]),children:o.jsx(Ae.div,{tabIndex:S||k===0?-1:0,"data-orientation":r,...p,ref:b,style:{outline:"none",...e.style},onMouseDown:me(e.onMouseDown,()=>{E.current=!0}),onFocus:me(e.onFocus,z=>{const D=!E.current;if(z.target===z.currentTarget&&D&&!S){const F=new CustomEvent(Rv,NH);if(z.currentTarget.dispatchEvent(F),!F.defaultPrevented){const J=P().filter(V=>V.focusable),H=J.find(V=>V.active),Y=J.find(V=>V.id===_),U=[H,Y,...J].filter(Boolean).map(V=>V.ref.current);XI(U,f)}}E.current=!1}),onBlur:me(e.onBlur,()=>x(!1))})})}),QI="RovingFocusGroupItem",YI=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:l,...c}=e,d=bi(),h=i||d,f=TH(QI,n),p=f.currentTabStopId===h,g=GI(n),{onFocusableItemAdd:b,onFocusableItemRemove:j,currentTabStopId:_}=f;return v.useEffect(()=>{if(r)return b(),()=>j()},[r,b,j]),o.jsx(j0.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:o.jsx(Ae.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:t,onMouseDown:me(e.onMouseDown,w=>{r?f.onItemFocus(h):w.preventDefault()}),onFocus:me(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:me(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){f.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const S=IH(w,f.orientation,f.dir);if(S!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let N=g().filter(P=>P.focusable).map(P=>P.ref.current);if(S==="last")N.reverse();else if(S==="prev"||S==="next"){S==="prev"&&N.reverse();const P=N.indexOf(w.currentTarget);N=f.loop?MH(N,P+1):N.slice(P+1)}setTimeout(()=>XI(N))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:_!=null}):l})})});YI.displayName=QI;var EH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function IH(e,t,n){const r=AH(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return EH[r]}function XI(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function MH(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var i_=KI,o_=YI,P0=["Enter"," "],RH=["ArrowDown","PageUp","Home"],JI=["ArrowUp","PageDown","End"],LH=[...RH,...JI],FH={ltr:[...P0,"ArrowRight"],rtl:[...P0,"ArrowLeft"]},OH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hf="Menu",[ah,DH,UH]=Og(hf),[Tl,eM]=Yn(hf,[UH,ku,Au]),ty=ku(),tM=Au(),[BH,kl]=Tl(hf),[zH,ff]=Tl(hf),nM=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:l=!0}=e,c=ty(t),[d,h]=v.useState(null),f=v.useRef(!1),p=Kt(i),g=Eu(s);return v.useEffect(()=>{const b=()=>{f.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>f.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),o.jsx(V5,{...c,children:o.jsx(BH,{scope:t,open:n,onOpenChange:p,content:d,onContentChange:h,children:o.jsx(zH,{scope:t,onClose:v.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:g,modal:l,children:r})})})};nM.displayName=hf;var $H="MenuAnchor",a_=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ty(n);return o.jsx(qw,{...s,...r,ref:t})});a_.displayName=$H;var l_="MenuPortal",[VH,rM]=Tl(l_,{forceMount:void 0}),sM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=kl(l_,t);return o.jsx(VH,{scope:t,forceMount:n,children:o.jsx(Un,{present:n||i.open,children:o.jsx(af,{asChild:!0,container:s,children:r})})})};sM.displayName=l_;var as="MenuContent",[HH,c_]=Tl(as),iM=v.forwardRef((e,t)=>{const n=rM(as,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=kl(as,e.__scopeMenu),l=ff(as,e.__scopeMenu);return o.jsx(ah.Provider,{scope:e.__scopeMenu,children:o.jsx(Un,{present:r||i.open,children:o.jsx(ah.Slot,{scope:e.__scopeMenu,children:l.modal?o.jsx(WH,{...s,ref:t}):o.jsx(qH,{...s,ref:t})})})})}),WH=v.forwardRef((e,t)=>{const n=kl(as,e.__scopeMenu),r=v.useRef(null),s=et(t,r);return v.useEffect(()=>{const i=r.current;if(i)return t_(i)},[]),o.jsx(u_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:me(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),qH=v.forwardRef((e,t)=>{const n=kl(as,e.__scopeMenu);return o.jsx(u_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ZH=pl("MenuContent.ScrollLock"),u_=v.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:g,onDismiss:b,disableOutsideScroll:j,..._}=e,w=kl(as,n),S=ff(as,n),x=ty(n),N=tM(n),P=DH(n),[E,k]=v.useState(null),M=v.useRef(null),z=et(t,M,w.onContentChange),D=v.useRef(0),F=v.useRef(""),J=v.useRef(0),H=v.useRef(null),Y=v.useRef("right"),Z=v.useRef(0),U=j?Jg:v.Fragment,V=j?{as:ZH,allowPinchZoom:!0}:void 0,K=G=>{var fe,Oe;const X=F.current+G,ce=P().filter(Ye=>!Ye.disabled),Te=document.activeElement,Ve=(fe=ce.find(Ye=>Ye.ref.current===Te))==null?void 0:fe.textValue,Ie=ce.map(Ye=>Ye.textValue),ye=iW(Ie,X,Ve),ue=(Oe=ce.find(Ye=>Ye.textValue===ye))==null?void 0:Oe.ref.current;(function Ye(He){F.current=He,window.clearTimeout(D.current),He!==""&&(D.current=window.setTimeout(()=>Ye(""),1e3))})(X),ue&&setTimeout(()=>ue.focus())};v.useEffect(()=>()=>window.clearTimeout(D.current),[]),e_();const O=v.useCallback(G=>{var ce,Te;return Y.current===((ce=H.current)==null?void 0:ce.side)&&aW(G,(Te=H.current)==null?void 0:Te.area)},[]);return o.jsx(HH,{scope:n,searchRef:F,onItemEnter:v.useCallback(G=>{O(G)&&G.preventDefault()},[O]),onItemLeave:v.useCallback(G=>{var X;O(G)||((X=M.current)==null||X.focus(),k(null))},[O]),onTriggerLeave:v.useCallback(G=>{O(G)&&G.preventDefault()},[O]),pointerGraceTimerRef:J,onPointerGraceIntentChange:v.useCallback(G=>{H.current=G},[]),children:o.jsx(U,{...V,children:o.jsx(Yg,{asChild:!0,trapped:s,onMountAutoFocus:me(i,G=>{var X;G.preventDefault(),(X=M.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:o.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:g,onDismiss:b,children:o.jsx(i_,{asChild:!0,...N,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:k,onEntryFocus:me(d,G=>{S.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Zw,{role:"menu","aria-orientation":"vertical","data-state":wM(w.open),"data-radix-menu-content":"",dir:S.dir,...x,..._,ref:z,style:{outline:"none",..._.style},onKeyDown:me(_.onKeyDown,G=>{const ce=G.target.closest("[data-radix-menu-content]")===G.currentTarget,Te=G.ctrlKey||G.altKey||G.metaKey,Ve=G.key.length===1;ce&&(G.key==="Tab"&&G.preventDefault(),!Te&&Ve&&K(G.key));const Ie=M.current;if(G.target!==Ie||!LH.includes(G.key))return;G.preventDefault();const ue=P().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);JI.includes(G.key)&&ue.reverse(),rW(ue)}),onBlur:me(e.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(D.current),F.current="")}),onPointerMove:me(e.onPointerMove,lh(G=>{const X=G.target,ce=Z.current!==G.clientX;if(G.currentTarget.contains(X)&&ce){const Te=G.clientX>Z.current?"right":"left";Y.current=Te,Z.current=G.clientX}}))})})})})})})});iM.displayName=as;var GH="MenuGroup",d_=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Ae.div,{role:"group",...r,ref:t})});d_.displayName=GH;var KH="MenuLabel",oM=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Ae.div,{...r,ref:t})});oM.displayName=KH;var Em="MenuItem",lC="menu.itemSelect",ny=v.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=v.useRef(null),l=ff(Em,e.__scopeMenu),c=c_(Em,e.__scopeMenu),d=et(t,i),h=v.useRef(!1),f=()=>{const p=i.current;if(!n&&p){const g=new CustomEvent(lC,{bubbles:!0,cancelable:!0});p.addEventListener(lC,b=>r==null?void 0:r(b),{once:!0}),_w(p,g),g.defaultPrevented?h.current=!1:l.onClose()}};return o.jsx(aM,{...s,ref:d,disabled:n,onClick:me(e.onClick,f),onPointerDown:p=>{var g;(g=e.onPointerDown)==null||g.call(e,p),h.current=!0},onPointerUp:me(e.onPointerUp,p=>{var g;h.current||(g=p.currentTarget)==null||g.click()}),onKeyDown:me(e.onKeyDown,p=>{const g=c.searchRef.current!=="";n||g&&p.key===" "||P0.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});ny.displayName=Em;var aM=v.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,l=c_(Em,n),c=tM(n),d=v.useRef(null),h=et(t,d),[f,p]=v.useState(!1),[g,b]=v.useState("");return v.useEffect(()=>{const j=d.current;j&&b((j.textContent??"").trim())},[i.children]),o.jsx(ah.ItemSlot,{scope:n,disabled:r,textValue:s??g,children:o.jsx(o_,{asChild:!0,...c,focusable:!r,children:o.jsx(Ae.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:me(e.onPointerMove,lh(j=>{r?l.onItemLeave(j):(l.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(e.onPointerLeave,lh(j=>l.onItemLeave(j))),onFocus:me(e.onFocus,()=>p(!0)),onBlur:me(e.onBlur,()=>p(!1))})})})}),QH="MenuCheckboxItem",lM=v.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return o.jsx(fM,{scope:e.__scopeMenu,checked:n,children:o.jsx(ny,{role:"menuitemcheckbox","aria-checked":Am(n)?"mixed":n,...s,ref:t,"data-state":f_(n),onSelect:me(s.onSelect,()=>r==null?void 0:r(Am(n)?!0:!n),{checkForDefaultPrevented:!1})})})});lM.displayName=QH;var cM="MenuRadioGroup",[YH,XH]=Tl(cM,{value:void 0,onValueChange:()=>{}}),uM=v.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Kt(r);return o.jsx(YH,{scope:e.__scopeMenu,value:n,onValueChange:i,children:o.jsx(d_,{...s,ref:t})})});uM.displayName=cM;var dM="MenuRadioItem",hM=v.forwardRef((e,t)=>{const{value:n,...r}=e,s=XH(dM,e.__scopeMenu),i=n===s.value;return o.jsx(fM,{scope:e.__scopeMenu,checked:i,children:o.jsx(ny,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":f_(i),onSelect:me(r.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});hM.displayName=dM;var h_="MenuItemIndicator",[fM,JH]=Tl(h_,{checked:!1}),pM=v.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=JH(h_,n);return o.jsx(Un,{present:r||Am(i.checked)||i.checked===!0,children:o.jsx(Ae.span,{...s,ref:t,"data-state":f_(i.checked)})})});pM.displayName=h_;var eW="MenuSeparator",mM=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});mM.displayName=eW;var tW="MenuArrow",gM=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ty(n);return o.jsx(Gw,{...s,...r,ref:t})});gM.displayName=tW;var nW="MenuSub",[dte,yM]=Tl(nW),md="MenuSubTrigger",vM=v.forwardRef((e,t)=>{const n=kl(md,e.__scopeMenu),r=ff(md,e.__scopeMenu),s=yM(md,e.__scopeMenu),i=c_(md,e.__scopeMenu),l=v.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=i,h={__scopeMenu:e.__scopeMenu},f=v.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return v.useEffect(()=>f,[f]),v.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),d(null)}},[c,d]),o.jsx(a_,{asChild:!0,...h,children:o.jsx(aM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":wM(n.open),...e,ref:Fg(t,s.onTriggerChange),onClick:p=>{var g;(g=e.onClick)==null||g.call(e,p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:me(e.onPointerMove,lh(p=>{i.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:me(e.onPointerLeave,lh(p=>{var b,j;f();const g=(b=n.content)==null?void 0:b.getBoundingClientRect();if(g){const _=(j=n.content)==null?void 0:j.dataset.side,w=_==="right",S=w?-5:5,x=g[w?"left":"right"],N=g[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+S,y:p.clientY},{x,y:g.top},{x:N,y:g.top},{x:N,y:g.bottom},{x,y:g.bottom}],side:_}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:me(e.onKeyDown,p=>{var b;const g=i.searchRef.current!=="";e.disabled||g&&p.key===" "||FH[r.dir].includes(p.key)&&(n.onOpenChange(!0),(b=n.content)==null||b.focus(),p.preventDefault())})})})});vM.displayName=md;var xM="MenuSubContent",bM=v.forwardRef((e,t)=>{const n=rM(as,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=kl(as,e.__scopeMenu),l=ff(as,e.__scopeMenu),c=yM(xM,e.__scopeMenu),d=v.useRef(null),h=et(t,d);return o.jsx(ah.Provider,{scope:e.__scopeMenu,children:o.jsx(Un,{present:r||i.open,children:o.jsx(ah.Slot,{scope:e.__scopeMenu,children:o.jsx(u_,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;l.isUsingKeyboardRef.current&&((p=d.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:me(e.onFocusOutside,f=>{f.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:me(e.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:me(e.onKeyDown,f=>{var b;const p=f.currentTarget.contains(f.target),g=OH[l.dir].includes(f.key);p&&g&&(i.onOpenChange(!1),(b=c.trigger)==null||b.focus(),f.preventDefault())})})})})})});bM.displayName=xM;function wM(e){return e?"open":"closed"}function Am(e){return e==="indeterminate"}function f_(e){return Am(e)?"indeterminate":e?"checked":"unchecked"}function rW(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function sW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function iW(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=sW(e,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==n));const d=l.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function oW(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const c=t[i],d=t[l],h=c.x,f=c.y,p=d.x,g=d.y;f>r!=g>r&&n<(p-h)*(r-f)/(g-f)+h&&(s=!s)}return s}function aW(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return oW(n,t)}function lh(e){return t=>t.pointerType==="mouse"?e(t):void 0}var lW=nM,cW=a_,uW=sM,dW=iM,hW=d_,fW=oM,pW=ny,mW=lM,gW=uM,yW=hM,vW=pM,xW=mM,bW=gM,wW=vM,_W=bM,ry="DropdownMenu",[SW,hte]=Yn(ry,[eM]),hr=eM(),[NW,_M]=SW(ry),SM=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,d=hr(t),h=v.useRef(null),[f,p]=Ni({prop:s,defaultProp:i??!1,onChange:l,caller:ry});return o.jsx(NW,{scope:t,triggerId:bi(),triggerRef:h,contentId:bi(),open:f,onOpenChange:p,onOpenToggle:v.useCallback(()=>p(g=>!g),[p]),modal:c,children:o.jsx(lW,{...d,open:f,onOpenChange:p,dir:r,modal:c,children:n})})};SM.displayName=ry;var NM="DropdownMenuTrigger",CM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=_M(NM,n),l=hr(n);return o.jsx(cW,{asChild:!0,...l,children:o.jsx(Ae.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Fg(t,i.triggerRef),onPointerDown:me(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:me(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});CM.displayName=NM;var CW="DropdownMenuPortal",jM=e=>{const{__scopeDropdownMenu:t,...n}=e,r=hr(t);return o.jsx(uW,{...r,...n})};jM.displayName=CW;var PM="DropdownMenuContent",TM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=_M(PM,n),i=hr(n),l=v.useRef(!1);return o.jsx(dW,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:me(e.onCloseAutoFocus,c=>{var d;l.current||(d=s.triggerRef.current)==null||d.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:me(e.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!s.modal||f)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TM.displayName=PM;var jW="DropdownMenuGroup",PW=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(hW,{...s,...r,ref:t})});PW.displayName=jW;var TW="DropdownMenuLabel",kM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(fW,{...s,...r,ref:t})});kM.displayName=TW;var kW="DropdownMenuItem",EM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(pW,{...s,...r,ref:t})});EM.displayName=kW;var EW="DropdownMenuCheckboxItem",AM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(mW,{...s,...r,ref:t})});AM.displayName=EW;var AW="DropdownMenuRadioGroup",IW=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(gW,{...s,...r,ref:t})});IW.displayName=AW;var MW="DropdownMenuRadioItem",IM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(yW,{...s,...r,ref:t})});IM.displayName=MW;var RW="DropdownMenuItemIndicator",MM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(vW,{...s,...r,ref:t})});MM.displayName=RW;var LW="DropdownMenuSeparator",RM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(xW,{...s,...r,ref:t})});RM.displayName=LW;var FW="DropdownMenuArrow",OW=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(bW,{...s,...r,ref:t})});OW.displayName=FW;var DW="DropdownMenuSubTrigger",LM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(wW,{...s,...r,ref:t})});LM.displayName=DW;var UW="DropdownMenuSubContent",FM=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=hr(n);return o.jsx(_W,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FM.displayName=UW;var BW=SM,zW=CM,$W=jM,OM=TM,DM=kM,UM=EM,BM=AM,zM=IM,$M=MM,VM=RM,HM=LM,WM=FM;const Lv=BW,Fv=zW,VW=v.forwardRef(({className:e,inset:t,children:n,...r},s)=>o.jsxs(HM,{ref:s,className:Ce("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,o.jsx(g0,{className:"ml-auto"})]}));VW.displayName=HM.displayName;const HW=v.forwardRef(({className:e,...t},n)=>o.jsx(WM,{ref:n,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));HW.displayName=WM.displayName;const Bp=v.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx($W,{children:o.jsx(OM,{ref:r,sideOffset:t,className:Ce("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Bp.displayName=OM.displayName;const vs=v.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(UM,{ref:r,className:Ce("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));vs.displayName=UM.displayName;const WW=v.forwardRef(({className:e,children:t,checked:n,...r},s)=>o.jsxs(BM,{ref:s,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx($M,{children:o.jsx(jw,{className:"h-4 w-4"})})}),t]}));WW.displayName=BM.displayName;const qW=v.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(zM,{ref:r,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx($M,{children:o.jsx(s5,{className:"h-2 w-2 fill-current"})})}),t]}));qW.displayName=zM.displayName;const ZW=v.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(DM,{ref:r,className:Ce("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));ZW.displayName=DM.displayName;const T0=v.forwardRef(({className:e,...t},n)=>o.jsx(VM,{ref:n,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));T0.displayName=VM.displayName;var pf=e=>e.type==="checkbox",Fa=e=>e instanceof Date,ir=e=>e==null;const qM=e=>typeof e=="object";var sn=e=>!ir(e)&&!Array.isArray(e)&&qM(e)&&!Fa(e),ZM=e=>sn(e)&&e.target?pf(e.target)?e.target.checked:e.target.value:e,GW=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,GM=(e,t)=>e.has(GW(t)),KW=e=>{const t=e.constructor&&e.constructor.prototype;return sn(t)&&t.hasOwnProperty("isPrototypeOf")},p_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function mn(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(p_&&(e instanceof Blob||r))&&(n||sn(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!KW(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=mn(e[s]));else return e;return t}var sy=e=>/^\w*$/.test(e),en=e=>e===void 0,m_=e=>Array.isArray(e)?e.filter(Boolean):[],g_=e=>m_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),we=(e,t,n)=>{if(!t||!sn(e))return n;const r=(sy(t)?[t]:g_(t)).reduce((s,i)=>ir(s)?s:s[i],e);return en(r)||r===e?en(e[t])?n:e[t]:r},Ar=e=>typeof e=="boolean",Ct=(e,t,n)=>{let r=-1;const s=sy(t)?[t]:g_(t),i=s.length,l=i-1;for(;++r<i;){const c=s[r];let d=n;if(r!==l){const h=e[c];d=sn(h)||Array.isArray(h)?h:isNaN(+s[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=d,e=e[c]}};const Im={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ms={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ui={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},y_=Je.createContext(null);y_.displayName="HookFormContext";const iy=()=>Je.useContext(y_),QW=e=>{const{children:t,...n}=e;return Je.createElement(y_.Provider,{value:n},t)};var KM=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Ms.all&&(t._proxyFormState[l]=!r||Ms.all),n&&(n[l]=!0),e[l]}});return s};const v_=typeof window<"u"?Je.useLayoutEffect:Je.useEffect;function YW(e){const t=iy(),{control:n=t.control,disabled:r,name:s,exact:i}=e||{},[l,c]=Je.useState(n._formState),d=Je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return v_(()=>n._subscribe({name:s,formState:d.current,exact:i,callback:h=>{!r&&c({...n._formState,...h})}}),[s,r,i]),Je.useEffect(()=>{d.current.isValid&&n._setValid(!0)},[n]),Je.useMemo(()=>KM(l,n,d.current,!1),[l,n])}var mi=e=>typeof e=="string",QM=(e,t,n,r,s)=>mi(e)?(r&&t.watch.add(e),we(n,e,s)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),we(n,i))):(r&&(t.watchAll=!0),n),k0=e=>ir(e)||!qM(e);function Ji(e,t,n=new WeakSet){if(k0(e)||k0(t))return e===t;if(Fa(e)&&Fa(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const c=t[i];if(Fa(l)&&Fa(c)||sn(l)&&sn(c)||Array.isArray(l)&&Array.isArray(c)?!Ji(l,c,n):l!==c)return!1}}return!0}function XW(e){const t=iy(),{control:n=t.control,name:r,defaultValue:s,disabled:i,exact:l,compute:c}=e||{},d=Je.useRef(s),h=Je.useRef(c),f=Je.useRef(void 0);h.current=c;const p=Je.useMemo(()=>n._getWatch(r,d.current),[n,r]),[g,b]=Je.useState(h.current?h.current(p):p);return v_(()=>n._subscribe({name:r,formState:{values:!0},exact:l,callback:j=>{if(!i){const _=QM(r,n._names,j.values||n._formValues,!1,d.current);if(h.current){const w=h.current(_);Ji(w,f.current)||(b(w),f.current=w)}else b(_)}}}),[n,i,r,l]),Je.useEffect(()=>n._removeUnmounted()),g}function JW(e){const t=iy(),{name:n,disabled:r,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,c=GM(s._names.array,n),d=Je.useMemo(()=>we(s._formValues,n,we(s._defaultValues,n,l)),[s,n,l]),h=XW({control:s,name:n,defaultValue:d,exact:!0}),f=YW({control:s,name:n,exact:!0}),p=Je.useRef(e),g=Je.useRef(s.register(n,{...e.rules,value:h,...Ar(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const b=Je.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!we(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!we(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!we(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!we(f.validatingFields,n)},error:{enumerable:!0,get:()=>we(f.errors,n)}}),[f,n]),j=Je.useCallback(x=>g.current.onChange({target:{value:ZM(x),name:n},type:Im.CHANGE}),[n]),_=Je.useCallback(()=>g.current.onBlur({target:{value:we(s._formValues,n),name:n},type:Im.BLUR}),[n,s._formValues]),w=Je.useCallback(x=>{const N=we(s._fields,n);N&&x&&(N._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:P=>x.setCustomValidity(P),reportValidity:()=>x.reportValidity()})},[s._fields,n]),S=Je.useMemo(()=>({name:n,value:h,...Ar(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:j,onBlur:_,ref:w}),[n,r,f.disabled,j,_,w,h]);return Je.useEffect(()=>{const x=s._options.shouldUnregister||i;s.register(n,{...p.current.rules,...Ar(p.current.disabled)?{disabled:p.current.disabled}:{}});const N=(P,E)=>{const k=we(s._fields,P);k&&k._f&&(k._f.mount=E)};if(N(n,!0),x){const P=mn(we(s._options.defaultValues,n));Ct(s._defaultValues,n,P),en(we(s._formValues,n))&&Ct(s._formValues,n,P)}return!c&&s.register(n),()=>{(c?x&&!s._state.action:x)?s.unregister(n):N(n,!1)}},[n,s,c,i]),Je.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),Je.useMemo(()=>({field:S,formState:f,fieldState:b}),[S,f,b])}const eq=e=>e.render(JW(e));var YM=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Md=e=>Array.isArray(e)?e:[e],cC=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},xr=e=>sn(e)&&!Object.keys(e).length,x_=e=>e.type==="file",Rs=e=>typeof e=="function",Mm=e=>{if(!p_)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},XM=e=>e.type==="select-multiple",b_=e=>e.type==="radio",tq=e=>b_(e)||pf(e),Ov=e=>Mm(e)&&e.isConnected;function nq(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=en(e)?r++:e[t[r++]];return e}function rq(e){for(const t in e)if(e.hasOwnProperty(t)&&!en(e[t]))return!1;return!0}function cn(e,t){const n=Array.isArray(t)?t:sy(t)?[t]:g_(t),r=n.length===1?e:nq(e,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(sn(r)&&xr(r)||Array.isArray(r)&&rq(r))&&cn(e,n.slice(0,-1)),e}var JM=e=>{for(const t in e)if(Rs(e[t]))return!0;return!1};function Rm(e,t={}){const n=Array.isArray(e);if(sn(e)||n)for(const r in e)Array.isArray(e[r])||sn(e[r])&&!JM(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Rm(e[r],t[r])):ir(e[r])||(t[r]=!0);return t}function eR(e,t,n){const r=Array.isArray(e);if(sn(e)||r)for(const s in e)Array.isArray(e[s])||sn(e[s])&&!JM(e[s])?en(t)||k0(n[s])?n[s]=Array.isArray(e[s])?Rm(e[s],[]):{...Rm(e[s])}:eR(e[s],ir(t)?{}:t[s],n[s]):n[s]=!Ji(e[s],t[s]);return n}var rd=(e,t)=>eR(e,t,Rm(t));const uC={value:!1,isValid:!1},dC={value:!0,isValid:!0};var tR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!en(e[0].attributes.value)?en(e[0].value)||e[0].value===""?dC:{value:e[0].value,isValid:!0}:dC:uC}return uC},nR=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>en(e)?e:t?e===""?NaN:e&&+e:n&&mi(e)?new Date(e):r?r(e):e;const hC={isValid:!1,value:null};var rR=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,hC):hC;function fC(e){const t=e.ref;return x_(t)?t.files:b_(t)?rR(e.refs).value:XM(t)?[...t.selectedOptions].map(({value:n})=>n):pf(t)?tR(e.refs).value:nR(en(t.value)?e.ref.value:t.value,e)}var sq=(e,t,n,r)=>{const s={};for(const i of e){const l=we(t,i);l&&Ct(s,i,l._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},Lm=e=>e instanceof RegExp,sd=e=>en(e)?e:Lm(e)?e.source:sn(e)?Lm(e.value)?e.value.source:e.value:e,pC=e=>({isOnSubmit:!e||e===Ms.onSubmit,isOnBlur:e===Ms.onBlur,isOnChange:e===Ms.onChange,isOnAll:e===Ms.all,isOnTouch:e===Ms.onTouched});const mC="AsyncFunction";var iq=e=>!!e&&!!e.validate&&!!(Rs(e.validate)&&e.validate.constructor.name===mC||sn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===mC)),oq=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),gC=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Rd=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const i=we(e,s);if(i){const{_f:l,...c}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!r)return!0;if(l.ref&&t(l.ref,l.name)&&!r)return!0;if(Rd(c,t))break}else if(sn(c)&&Rd(c,t))break}}};function yC(e,t,n){const r=we(e,n);if(r||sy(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),l=we(t,i),c=we(e,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};s.pop()}return{name:n}}var aq=(e,t,n,r)=>{n(e);const{name:s,...i}=e;return xr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!r||Ms.all))},lq=(e,t,n)=>!e||!t||e===t||Md(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),cq=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,uq=(e,t)=>!m_(we(e,t)).length&&cn(e,t),dq=(e,t,n)=>{const r=Md(we(e,n));return Ct(r,"root",t[n]),Ct(e,n,r),e},zp=e=>mi(e);function vC(e,t,n="validate"){if(zp(e)||Array.isArray(e)&&e.every(zp)||Ar(e)&&!e)return{type:n,message:zp(e)?e:"",ref:t}}var Vl=e=>sn(e)&&!Lm(e)?e:{value:e,message:""},xC=async(e,t,n,r,s,i)=>{const{ref:l,refs:c,required:d,maxLength:h,minLength:f,min:p,max:g,pattern:b,validate:j,name:_,valueAsNumber:w,mount:S}=e._f,x=we(n,_);if(!S||t.has(_))return{};const N=c?c[0]:l,P=H=>{s&&N.reportValidity&&(N.setCustomValidity(Ar(H)?"":H||""),N.reportValidity())},E={},k=b_(l),M=pf(l),z=k||M,D=(w||x_(l))&&en(l.value)&&en(x)||Mm(l)&&l.value===""||x===""||Array.isArray(x)&&!x.length,F=YM.bind(null,_,r,E),J=(H,Y,Z,U=Ui.maxLength,V=Ui.minLength)=>{const K=H?Y:Z;E[_]={type:H?U:V,message:K,ref:l,...F(H?U:V,K)}};if(i?!Array.isArray(x)||!x.length:d&&(!z&&(D||ir(x))||Ar(x)&&!x||M&&!tR(c).isValid||k&&!rR(c).isValid)){const{value:H,message:Y}=zp(d)?{value:!!d,message:d}:Vl(d);if(H&&(E[_]={type:Ui.required,message:Y,ref:N,...F(Ui.required,Y)},!r))return P(Y),E}if(!D&&(!ir(p)||!ir(g))){let H,Y;const Z=Vl(g),U=Vl(p);if(!ir(x)&&!isNaN(x)){const V=l.valueAsNumber||x&&+x;ir(Z.value)||(H=V>Z.value),ir(U.value)||(Y=V<U.value)}else{const V=l.valueAsDate||new Date(x),K=X=>new Date(new Date().toDateString()+" "+X),O=l.type=="time",G=l.type=="week";mi(Z.value)&&x&&(H=O?K(x)>K(Z.value):G?x>Z.value:V>new Date(Z.value)),mi(U.value)&&x&&(Y=O?K(x)<K(U.value):G?x<U.value:V<new Date(U.value))}if((H||Y)&&(J(!!H,Z.message,U.message,Ui.max,Ui.min),!r))return P(E[_].message),E}if((h||f)&&!D&&(mi(x)||i&&Array.isArray(x))){const H=Vl(h),Y=Vl(f),Z=!ir(H.value)&&x.length>+H.value,U=!ir(Y.value)&&x.length<+Y.value;if((Z||U)&&(J(Z,H.message,Y.message),!r))return P(E[_].message),E}if(b&&!D&&mi(x)){const{value:H,message:Y}=Vl(b);if(Lm(H)&&!x.match(H)&&(E[_]={type:Ui.pattern,message:Y,ref:l,...F(Ui.pattern,Y)},!r))return P(Y),E}if(j){if(Rs(j)){const H=await j(x,n),Y=vC(H,N);if(Y&&(E[_]={...Y,...F(Ui.validate,Y.message)},!r))return P(Y.message),E}else if(sn(j)){let H={};for(const Y in j){if(!xr(H)&&!r)break;const Z=vC(await j[Y](x,n),N,Y);Z&&(H={...Z,...F(Y,Z.message)},P(Z.message),r&&(E[_]=H))}if(!xr(H)&&(E[_]={ref:N,...H},!r))return E}}return P(!0),E};const hq={mode:Ms.onSubmit,reValidateMode:Ms.onChange,shouldFocusError:!0};function fq(e={}){let t={...hq,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Rs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=sn(t.defaultValues)||sn(t.values)?mn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:mn(s),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const g={array:cC(),state:cC()},b=t.criteriaMode===Ms.all,j=$=>Q=>{clearTimeout(h),h=setTimeout($,Q)},_=async $=>{if(!t.disabled&&(f.isValid||p.isValid||$)){const Q=t.resolver?xr((await M()).errors):await D(r,!0);Q!==n.isValid&&g.state.next({isValid:Q})}},w=($,Q)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&(($||Array.from(c.mount)).forEach(se=>{se&&(Q?Ct(n.validatingFields,se,Q):cn(n.validatingFields,se))}),g.state.next({validatingFields:n.validatingFields,isValidating:!xr(n.validatingFields)}))},S=($,Q=[],se,Se,ve=!0,pe=!0)=>{if(Se&&se&&!t.disabled){if(l.action=!0,pe&&Array.isArray(we(r,$))){const Me=se(we(r,$),Se.argA,Se.argB);ve&&Ct(r,$,Me)}if(pe&&Array.isArray(we(n.errors,$))){const Me=se(we(n.errors,$),Se.argA,Se.argB);ve&&Ct(n.errors,$,Me),uq(n.errors,$)}if((f.touchedFields||p.touchedFields)&&pe&&Array.isArray(we(n.touchedFields,$))){const Me=se(we(n.touchedFields,$),Se.argA,Se.argB);ve&&Ct(n.touchedFields,$,Me)}(f.dirtyFields||p.dirtyFields)&&(n.dirtyFields=rd(s,i)),g.state.next({name:$,isDirty:J($,Q),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ct(i,$,Q)},x=($,Q)=>{Ct(n.errors,$,Q),g.state.next({errors:n.errors})},N=$=>{n.errors=$,g.state.next({errors:n.errors,isValid:!1})},P=($,Q,se,Se)=>{const ve=we(r,$);if(ve){const pe=we(i,$,en(se)?we(s,$):se);en(pe)||Se&&Se.defaultChecked||Q?Ct(i,$,Q?pe:fC(ve._f)):Z($,pe),l.mount&&_()}},E=($,Q,se,Se,ve)=>{let pe=!1,Me=!1;const ft={name:$};if(!t.disabled){if(!se||Se){(f.isDirty||p.isDirty)&&(Me=n.isDirty,n.isDirty=ft.isDirty=J(),pe=Me!==ft.isDirty);const W=Ji(we(s,$),Q);Me=!!we(n.dirtyFields,$),W?cn(n.dirtyFields,$):Ct(n.dirtyFields,$,!0),ft.dirtyFields=n.dirtyFields,pe=pe||(f.dirtyFields||p.dirtyFields)&&Me!==!W}if(se){const W=we(n.touchedFields,$);W||(Ct(n.touchedFields,$,se),ft.touchedFields=n.touchedFields,pe=pe||(f.touchedFields||p.touchedFields)&&W!==se)}pe&&ve&&g.state.next(ft)}return pe?ft:{}},k=($,Q,se,Se)=>{const ve=we(n.errors,$),pe=(f.isValid||p.isValid)&&Ar(Q)&&n.isValid!==Q;if(t.delayError&&se?(d=j(()=>x($,se)),d(t.delayError)):(clearTimeout(h),d=null,se?Ct(n.errors,$,se):cn(n.errors,$)),(se?!Ji(ve,se):ve)||!xr(Se)||pe){const Me={...Se,...pe&&Ar(Q)?{isValid:Q}:{},errors:n.errors,name:$};n={...n,...Me},g.state.next(Me)}},M=async $=>{w($,!0);const Q=await t.resolver(i,t.context,sq($||c.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return w($),Q},z=async $=>{const{errors:Q}=await M($);if($)for(const se of $){const Se=we(Q,se);Se?Ct(n.errors,se,Se):cn(n.errors,se)}else n.errors=Q;return Q},D=async($,Q,se={valid:!0})=>{for(const Se in $){const ve=$[Se];if(ve){const{_f:pe,...Me}=ve;if(pe){const ft=c.array.has(pe.name),W=ve._f&&iq(ve._f);W&&f.validatingFields&&w([Se],!0);const xe=await xC(ve,c.disabled,i,b,t.shouldUseNativeValidation&&!Q,ft);if(W&&f.validatingFields&&w([Se]),xe[pe.name]&&(se.valid=!1,Q))break;!Q&&(we(xe,pe.name)?ft?dq(n.errors,xe,pe.name):Ct(n.errors,pe.name,xe[pe.name]):cn(n.errors,pe.name))}!xr(Me)&&await D(Me,Q,se)}}return se.valid},F=()=>{for(const $ of c.unMount){const Q=we(r,$);Q&&(Q._f.refs?Q._f.refs.every(se=>!Ov(se)):!Ov(Q._f.ref))&&fe($)}c.unMount=new Set},J=($,Q)=>!t.disabled&&($&&Q&&Ct(i,$,Q),!Ji(X(),s)),H=($,Q,se)=>QM($,c,{...l.mount?i:en(Q)?s:mi($)?{[$]:Q}:Q},se,Q),Y=$=>m_(we(l.mount?i:s,$,t.shouldUnregister?we(s,$,[]):[])),Z=($,Q,se={})=>{const Se=we(r,$);let ve=Q;if(Se){const pe=Se._f;pe&&(!pe.disabled&&Ct(i,$,nR(Q,pe)),ve=Mm(pe.ref)&&ir(Q)?"":Q,XM(pe.ref)?[...pe.ref.options].forEach(Me=>Me.selected=ve.includes(Me.value)):pe.refs?pf(pe.ref)?pe.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(ve)?Me.checked=!!ve.find(ft=>ft===Me.value):Me.checked=ve===Me.value||!!ve)}):pe.refs.forEach(Me=>Me.checked=Me.value===ve):x_(pe.ref)?pe.ref.value="":(pe.ref.value=ve,pe.ref.type||g.state.next({name:$,values:mn(i)})))}(se.shouldDirty||se.shouldTouch)&&E($,ve,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&G($)},U=($,Q,se)=>{for(const Se in Q){if(!Q.hasOwnProperty(Se))return;const ve=Q[Se],pe=$+"."+Se,Me=we(r,pe);(c.array.has($)||sn(ve)||Me&&!Me._f)&&!Fa(ve)?U(pe,ve,se):Z(pe,ve,se)}},V=($,Q,se={})=>{const Se=we(r,$),ve=c.array.has($),pe=mn(Q);Ct(i,$,pe),ve?(g.array.next({name:$,values:mn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&se.shouldDirty&&g.state.next({name:$,dirtyFields:rd(s,i),isDirty:J($,pe)})):Se&&!Se._f&&!ir(pe)?U($,pe,se):Z($,pe,se),gC($,c)&&g.state.next({...n,name:$}),g.state.next({name:l.mount?$:void 0,values:mn(i)})},K=async $=>{l.mount=!0;const Q=$.target;let se=Q.name,Se=!0;const ve=we(r,se),pe=W=>{Se=Number.isNaN(W)||Fa(W)&&isNaN(W.getTime())||Ji(W,we(i,se,W))},Me=pC(t.mode),ft=pC(t.reValidateMode);if(ve){let W,xe;const ge=Q.type?fC(ve._f):ZM($),Ee=$.type===Im.BLUR||$.type===Im.FOCUS_OUT,Ue=!oq(ve._f)&&!t.resolver&&!we(n.errors,se)&&!ve._f.deps||cq(Ee,we(n.touchedFields,se),n.isSubmitted,ft,Me),ct=gC(se,c,Ee);Ct(i,se,ge),Ee?(!Q||!Q.readOnly)&&(ve._f.onBlur&&ve._f.onBlur($),d&&d(0)):ve._f.onChange&&ve._f.onChange($);const $e=E(se,ge,Ee),Tt=!xr($e)||ct;if(!Ee&&g.state.next({name:se,type:$.type,values:mn(i)}),Ue)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Ee&&_():Ee||_()),Tt&&g.state.next({name:se,...ct?{}:$e});if(!Ee&&ct&&g.state.next({...n}),t.resolver){const{errors:ht}=await M([se]);if(pe(ge),Se){const kt=yC(n.errors,r,se),An=yC(ht,r,kt.name||se);W=An.error,se=An.name,xe=xr(ht)}}else w([se],!0),W=(await xC(ve,c.disabled,i,b,t.shouldUseNativeValidation))[se],w([se]),pe(ge),Se&&(W?xe=!1:(f.isValid||p.isValid)&&(xe=await D(r,!0)));Se&&(ve._f.deps&&G(ve._f.deps),k(se,xe,W,$e))}},O=($,Q)=>{if(we(n.errors,Q)&&$.focus)return $.focus(),1},G=async($,Q={})=>{let se,Se;const ve=Md($);if(t.resolver){const pe=await z(en($)?$:ve);se=xr(pe),Se=$?!ve.some(Me=>we(pe,Me)):se}else $?(Se=(await Promise.all(ve.map(async pe=>{const Me=we(r,pe);return await D(Me&&Me._f?{[pe]:Me}:Me)}))).every(Boolean),!(!Se&&!n.isValid)&&_()):Se=se=await D(r);return g.state.next({...!mi($)||(f.isValid||p.isValid)&&se!==n.isValid?{}:{name:$},...t.resolver||!$?{isValid:se}:{},errors:n.errors}),Q.shouldFocus&&!Se&&Rd(r,O,$?ve:c.mount),Se},X=$=>{const Q={...l.mount?i:s};return en($)?Q:mi($)?we(Q,$):$.map(se=>we(Q,se))},ce=($,Q)=>({invalid:!!we((Q||n).errors,$),isDirty:!!we((Q||n).dirtyFields,$),error:we((Q||n).errors,$),isValidating:!!we(n.validatingFields,$),isTouched:!!we((Q||n).touchedFields,$)}),Te=$=>{$&&Md($).forEach(Q=>cn(n.errors,Q)),g.state.next({errors:$?n.errors:{}})},Ve=($,Q,se)=>{const Se=(we(r,$,{_f:{}})._f||{}).ref,ve=we(n.errors,$)||{},{ref:pe,message:Me,type:ft,...W}=ve;Ct(n.errors,$,{...W,...Q,ref:Se}),g.state.next({name:$,errors:n.errors,isValid:!1}),se&&se.shouldFocus&&Se&&Se.focus&&Se.focus()},Ie=($,Q)=>Rs($)?g.state.subscribe({next:se=>"values"in se&&$(H(void 0,Q),se)}):H($,Q,!0),ye=$=>g.state.subscribe({next:Q=>{lq($.name,Q.name,$.exact)&&aq(Q,$.formState||f,fr,$.reRenderRoot)&&$.callback({values:{...i},...n,...Q,defaultValues:s})}}).unsubscribe,ue=$=>(l.mount=!0,p={...p,...$.formState},ye({...$,formState:p})),fe=($,Q={})=>{for(const se of $?Md($):c.mount)c.mount.delete(se),c.array.delete(se),Q.keepValue||(cn(r,se),cn(i,se)),!Q.keepError&&cn(n.errors,se),!Q.keepDirty&&cn(n.dirtyFields,se),!Q.keepTouched&&cn(n.touchedFields,se),!Q.keepIsValidating&&cn(n.validatingFields,se),!t.shouldUnregister&&!Q.keepDefaultValue&&cn(s,se);g.state.next({values:mn(i)}),g.state.next({...n,...Q.keepDirty?{isDirty:J()}:{}}),!Q.keepIsValid&&_()},Oe=({disabled:$,name:Q})=>{(Ar($)&&l.mount||$||c.disabled.has(Q))&&($?c.disabled.add(Q):c.disabled.delete(Q))},Ye=($,Q={})=>{let se=we(r,$);const Se=Ar(Q.disabled)||Ar(t.disabled);return Ct(r,$,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:$}},name:$,mount:!0,...Q}}),c.mount.add($),se?Oe({disabled:Ar(Q.disabled)?Q.disabled:t.disabled,name:$}):P($,!0,Q.value),{...Se?{disabled:Q.disabled||t.disabled}:{},...t.progressive?{required:!!Q.required,min:sd(Q.min),max:sd(Q.max),minLength:sd(Q.minLength),maxLength:sd(Q.maxLength),pattern:sd(Q.pattern)}:{},name:$,onChange:K,onBlur:K,ref:ve=>{if(ve){Ye($,Q),se=we(r,$);const pe=en(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,Me=tq(pe),ft=se._f.refs||[];if(Me?ft.find(W=>W===pe):pe===se._f.ref)return;Ct(r,$,{_f:{...se._f,...Me?{refs:[...ft.filter(Ov),pe,...Array.isArray(we(s,$))?[{}]:[]],ref:{type:pe.type,name:$}}:{ref:pe}}}),P($,!1,void 0,pe)}else se=we(r,$,{}),se._f&&(se._f.mount=!1),(t.shouldUnregister||Q.shouldUnregister)&&!(GM(c.array,$)&&l.action)&&c.unMount.add($)}}},He=()=>t.shouldFocusError&&Rd(r,O,c.mount),Xe=$=>{Ar($)&&(g.state.next({disabled:$}),Rd(r,(Q,se)=>{const Se=we(r,se);Se&&(Q.disabled=Se._f.disabled||$,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(ve=>{ve.disabled=Se._f.disabled||$}))},0,!1))},tt=($,Q)=>async se=>{let Se;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let ve=mn(i);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:pe,values:Me}=await M();n.errors=pe,ve=mn(Me)}else await D(r);if(c.disabled.size)for(const pe of c.disabled)cn(ve,pe);if(cn(n.errors,"root"),xr(n.errors)){g.state.next({errors:{}});try{await $(ve,se)}catch(pe){Se=pe}}else Q&&await Q({...n.errors},se),He(),setTimeout(He);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xr(n.errors)&&!Se,submitCount:n.submitCount+1,errors:n.errors}),Se)throw Se},Lt=($,Q={})=>{we(r,$)&&(en(Q.defaultValue)?V($,mn(we(s,$))):(V($,Q.defaultValue),Ct(s,$,mn(Q.defaultValue))),Q.keepTouched||cn(n.touchedFields,$),Q.keepDirty||(cn(n.dirtyFields,$),n.isDirty=Q.defaultValue?J($,mn(we(s,$))):J()),Q.keepError||(cn(n.errors,$),f.isValid&&_()),g.state.next({...n}))},Yt=($,Q={})=>{const se=$?mn($):s,Se=mn(se),ve=xr($),pe=ve?s:Se;if(Q.keepDefaultValues||(s=se),!Q.keepValues){if(Q.keepDirtyValues){const Me=new Set([...c.mount,...Object.keys(rd(s,i))]);for(const ft of Array.from(Me))we(n.dirtyFields,ft)?Ct(pe,ft,we(i,ft)):V(ft,we(pe,ft))}else{if(p_&&en($))for(const Me of c.mount){const ft=we(r,Me);if(ft&&ft._f){const W=Array.isArray(ft._f.refs)?ft._f.refs[0]:ft._f.ref;if(Mm(W)){const xe=W.closest("form");if(xe){xe.reset();break}}}}if(Q.keepFieldsRef)for(const Me of c.mount)V(Me,we(pe,Me));else r={}}i=t.shouldUnregister?Q.keepDefaultValues?mn(s):{}:mn(pe),g.array.next({values:{...pe}}),g.state.next({values:{...pe}})}c={mount:Q.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues,l.watch=!!t.shouldUnregister,g.state.next({submitCount:Q.keepSubmitCount?n.submitCount:0,isDirty:ve?!1:Q.keepDirty?n.isDirty:!!(Q.keepDefaultValues&&!Ji($,s)),isSubmitted:Q.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ve?{}:Q.keepDirtyValues?Q.keepDefaultValues&&i?rd(s,i):n.dirtyFields:Q.keepDefaultValues&&$?rd(s,$):Q.keepDirty?n.dirtyFields:{},touchedFields:Q.keepTouched?n.touchedFields:{},errors:Q.keepErrors?n.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},En=($,Q)=>Yt(Rs($)?$(i):$,Q),Pr=($,Q={})=>{const se=we(r,$),Se=se&&se._f;if(Se){const ve=Se.refs?Se.refs[0]:Se.ref;ve.focus&&(ve.focus(),Q.shouldSelect&&Rs(ve.select)&&ve.select())}},fr=$=>{n={...n,...$}},Zr={control:{register:Ye,unregister:fe,getFieldState:ce,handleSubmit:tt,setError:Ve,_subscribe:ye,_runSchema:M,_focusError:He,_getWatch:H,_getDirty:J,_setValid:_,_setFieldArray:S,_setDisabledField:Oe,_setErrors:N,_getFieldArray:Y,_reset:Yt,_resetDefaultValues:()=>Rs(t.defaultValues)&&t.defaultValues().then($=>{En($,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:Xe,_subjects:g,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state($){l=$},get _defaultValues(){return s},get _names(){return c},set _names($){c=$},get _formState(){return n},get _options(){return t},set _options($){t={...t,...$}}},subscribe:ue,trigger:G,register:Ye,handleSubmit:tt,watch:Ie,setValue:V,getValues:X,reset:En,resetField:Lt,clearErrors:Te,unregister:fe,setError:Ve,setFocus:Pr,getFieldState:ce};return{...Zr,formControl:Zr}}function Fm(e={}){const t=Je.useRef(void 0),n=Je.useRef(void 0),[r,s]=Je.useState({isDirty:!1,isValidating:!1,isLoading:Rs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Rs(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Rs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...c}=fq(e);t.current={...c,formState:r}}const i=t.current.control;return i._options=e,v_(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(c=>({...c,isReady:!0})),i._formState.isReady=!0,l},[i]),Je.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Je.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Je.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Je.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Je.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),Je.useEffect(()=>{e.values&&!Ji(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),Je.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=KM(r,i),t.current}const bC=(e,t,n)=>{if(e&&"reportValidity"in e){const r=we(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},sR=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?bC(r.ref,n,e):r.refs&&r.refs.forEach(s=>bC(s,n,e))}},pq=(e,t)=>{t.shouldUseNativeValidation&&sR(e,t);const n={};for(const r in e){const s=we(t.fields,r),i=Object.assign(e[r]||{},{ref:s&&s.ref});if(mq(t.names||Object.keys(e),r)){const l=Object.assign({},we(n,r));Ct(l,"root",i),Ct(n,r,l)}else Ct(n,r,i)}return n},mq=(e,t)=>e.some(n=>n.startsWith(t+"."));var gq=function(e,t){for(var n={};e.length;){var r=e[0],s=r.code,i=r.message,l=r.path.join(".");if(!n[l])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[l]={message:c.message,type:c.code}}else n[l]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return e.push(p)})}),t){var d=n[l].types,h=d&&d[r.code];n[l]=YM(l,t,n,s,h?[].concat(h,r.message):r.message)}e.shift()}return n},Om=function(e,t,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(l,c){try{var d=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(h){return i.shouldUseNativeValidation&&sR({},i),{errors:{},values:n.raw?r:h}})}catch(h){return c(h)}return d&&d.then?d.then(void 0,c):d}(0,function(l){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(l))return{values:{},errors:pq(gq(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},gt;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const l of s)i[l]=l;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),l={};for(const c of i)l[c]=s[c];return e.objectValues(l)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&i.push(l);return i},e.find=(s,i)=>{for(const l of s)if(i(l))return l},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(gt||(gt={}));var E0;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(E0||(E0={}));const Pe=gt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Hi=e=>{switch(typeof e){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return Number.isNaN(e)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(e)?Pe.array:e===null?Pe.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Pe.promise:typeof Map<"u"&&e instanceof Map?Pe.map:typeof Set<"u"&&e instanceof Set?Pe.set:typeof Date<"u"&&e instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},de=gt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yq=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Br extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let c=r,d=0;for(;d<l.path.length;){const h=l.path[d];d===l.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(n(l))):c[h]=c[h]||{_errors:[]},c=c[h],d++}}};return s(this),r}static assert(t){if(!(t instanceof Br))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,gt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Br.create=e=>new Br(e);const fu=(e,t)=>{let n;switch(e.code){case de.invalid_type:e.received===Pe.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,gt.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${gt.joinValues(e.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${gt.joinValues(e.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${gt.joinValues(e.options)}, received '${e.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:gt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case de.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case de.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=t.defaultError,gt.assertNever(e)}return{message:n}};let iR=fu;function vq(e){iR=e}function Dm(){return iR}const Um=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],l={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let c="";const d=r.filter(h=>!!h).slice().reverse();for(const h of d)c=h(l,{data:t,defaultError:c}).message;return{...s,path:i,message:c}},xq=[];function Ne(e,t){const n=Dm(),r=Um({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===fu?void 0:fu].filter(s=>!!s)});e.common.issues.push(r)}class Qn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return We;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,l=await s.value;r.push({key:i,value:l})}return Qn.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:l}=s;if(i.status==="aborted"||l.status==="aborted")return We;i.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(r[i.value]=l.value)}return{status:t.value,value:r}}}const We=Object.freeze({status:"aborted"}),ic=e=>({status:"dirty",value:e}),cr=e=>({status:"valid",value:e}),A0=e=>e.status==="aborted",I0=e=>e.status==="dirty",xl=e=>e.status==="valid",ch=e=>typeof Promise<"u"&&e instanceof Promise;var Fe;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Fe||(Fe={}));class Ti{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wC=(e,t)=>{if(xl(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Br(e.common.issues);return this._error=n,this._error}}};function st(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(l,c)=>{const{message:d}=e;return l.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:d??r??c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:d??n??c.defaultError}},description:s}}class lt{get description(){return this._def.description}_getType(t){return Hi(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Hi(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Qn,ctx:{common:t.parent.common,data:t.data,parsedType:Hi(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(ch(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hi(t)},s=this._parseSync({data:t,path:r.path,parent:r});return wC(r,s)}"~validate"(t){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hi(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return xl(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>xl(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hi(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(ch(s)?s:Promise.resolve(s));return wC(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const l=t(s),c=()=>i.addIssue({code:de.custom,...r(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new Vs({schema:this,typeName:Ke.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return _i.create(this,this._def)}nullable(){return fa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Us.create(this)}promise(){return mu.create(this,this._def)}or(t){return fh.create([this,t],this._def)}and(t){return ph.create(this,t,this._def)}transform(t){return new Vs({...st(this._def),schema:this,typeName:Ke.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new xh({...st(this._def),innerType:this,defaultValue:n,typeName:Ke.ZodDefault})}brand(){return new w_({typeName:Ke.ZodBranded,type:this,...st(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new bh({...st(this._def),innerType:this,catchValue:n,typeName:Ke.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return mf.create(this,t)}readonly(){return wh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bq=/^c[^\s-]{8,}$/i,wq=/^[0-9a-z]+$/,_q=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Sq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Nq=/^[a-z0-9_-]{21}$/i,Cq=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jq=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Pq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Tq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Dv;const kq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Eq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Aq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Iq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mq=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Rq=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,oR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Lq=new RegExp(`^${oR}$`);function aR(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function Fq(e){return new RegExp(`^${aR(e)}$`)}function lR(e){let t=`${oR}T${aR(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Oq(e,t){return!!((t==="v4"||!t)&&kq.test(e)||(t==="v6"||!t)&&Aq.test(e))}function Dq(e,t){if(!Cq.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function Uq(e,t){return!!((t==="v4"||!t)&&Eq.test(e)||(t==="v6"||!t)&&Iq.test(e))}class Fs extends lt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Pe.string){const i=this._getOrReturnCtx(t);return Ne(i,{code:de.invalid_type,expected:Pe.string,received:i.parsedType}),We}const r=new Qn;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const l=t.data.length>i.value,c=t.data.length<i.value;(l||c)&&(s=this._getOrReturnCtx(t,s),l?Ne(s,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&Ne(s,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Pq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"email",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Dv||(Dv=new RegExp(Tq,"u")),Dv.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"emoji",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Sq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"uuid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Nq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"nanoid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")bq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"cuid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")wq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"cuid2",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")_q.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"ulid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Ne(s,{validation:"url",code:de.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"regex",code:de.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?lR(i).test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Lq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Fq(i).test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?jq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"duration",code:de.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Oq(t.data,i.version)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"ip",code:de.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Dq(t.data,i.alg)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"jwt",code:de.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Uq(t.data,i.version)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"cidr",code:de.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?Mq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"base64",code:de.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?Rq.test(t.data)||(s=this._getOrReturnCtx(t,s),Ne(s,{validation:"base64url",code:de.invalid_string,message:i.message}),r.dirty()):gt.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:de.invalid_string,...Fe.errToObj(r)})}_addCheck(t){return new Fs({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Fe.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Fe.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Fe.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Fe.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Fe.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Fe.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Fe.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Fe.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Fe.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Fe.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Fe.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Fe.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Fe.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Fe.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Fe.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Fe.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Fe.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Fe.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Fe.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Fe.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Fe.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Fe.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Fe.errToObj(n)})}nonempty(t){return this.min(1,Fe.errToObj(t))}trim(){return new Fs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Fs.create=e=>new Fs({checks:[],typeName:Ke.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...st(e)});function Bq(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),l=Number.parseInt(t.toFixed(s).replace(".",""));return i%l/10**s}class ua extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Pe.number){const i=this._getOrReturnCtx(t);return Ne(i,{code:de.invalid_type,expected:Pe.number,received:i.parsedType}),We}let r;const s=new Qn;for(const i of this._def.checks)i.kind==="int"?gt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Bq(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.not_finite,message:i.message}),s.dirty()):gt.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Fe.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Fe.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Fe.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Fe.toString(n))}setLimit(t,n,r,s){return new ua({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Fe.toString(s)}]})}_addCheck(t){return new ua({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Fe.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fe.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Fe.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Fe.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Fe.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Fe.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&gt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ua.create=e=>new ua({checks:[],typeName:Ke.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...st(e)});class da extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Pe.bigint)return this._getInvalidInput(t);let r;const s=new Qn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ne(r,{code:de.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):gt.assertNever(i);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ne(n,{code:de.invalid_type,expected:Pe.bigint,received:n.parsedType}),We}gte(t,n){return this.setLimit("min",t,!0,Fe.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Fe.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Fe.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Fe.toString(n))}setLimit(t,n,r,s){return new da({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Fe.toString(s)}]})}_addCheck(t){return new da({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Fe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Fe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Fe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Fe.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Fe.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}da.create=e=>new da({checks:[],typeName:Ke.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...st(e)});class uh extends lt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Pe.boolean){const r=this._getOrReturnCtx(t);return Ne(r,{code:de.invalid_type,expected:Pe.boolean,received:r.parsedType}),We}return cr(t.data)}}uh.create=e=>new uh({typeName:Ke.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...st(e)});class bl extends lt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Pe.date){const i=this._getOrReturnCtx(t);return Ne(i,{code:de.invalid_type,expected:Pe.date,received:i.parsedType}),We}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ne(i,{code:de.invalid_date}),We}const r=new Qn;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),Ne(s,{code:de.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):gt.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new bl({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Fe.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Fe.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}bl.create=e=>new bl({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ke.ZodDate,...st(e)});class Bm extends lt{_parse(t){if(this._getType(t)!==Pe.symbol){const r=this._getOrReturnCtx(t);return Ne(r,{code:de.invalid_type,expected:Pe.symbol,received:r.parsedType}),We}return cr(t.data)}}Bm.create=e=>new Bm({typeName:Ke.ZodSymbol,...st(e)});class dh extends lt{_parse(t){if(this._getType(t)!==Pe.undefined){const r=this._getOrReturnCtx(t);return Ne(r,{code:de.invalid_type,expected:Pe.undefined,received:r.parsedType}),We}return cr(t.data)}}dh.create=e=>new dh({typeName:Ke.ZodUndefined,...st(e)});class hh extends lt{_parse(t){if(this._getType(t)!==Pe.null){const r=this._getOrReturnCtx(t);return Ne(r,{code:de.invalid_type,expected:Pe.null,received:r.parsedType}),We}return cr(t.data)}}hh.create=e=>new hh({typeName:Ke.ZodNull,...st(e)});class pu extends lt{constructor(){super(...arguments),this._any=!0}_parse(t){return cr(t.data)}}pu.create=e=>new pu({typeName:Ke.ZodAny,...st(e)});class ol extends lt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return cr(t.data)}}ol.create=e=>new ol({typeName:Ke.ZodUnknown,...st(e)});class fo extends lt{_parse(t){const n=this._getOrReturnCtx(t);return Ne(n,{code:de.invalid_type,expected:Pe.never,received:n.parsedType}),We}}fo.create=e=>new fo({typeName:Ke.ZodNever,...st(e)});class zm extends lt{_parse(t){if(this._getType(t)!==Pe.undefined){const r=this._getOrReturnCtx(t);return Ne(r,{code:de.invalid_type,expected:Pe.void,received:r.parsedType}),We}return cr(t.data)}}zm.create=e=>new zm({typeName:Ke.ZodVoid,...st(e)});class Us extends lt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==Pe.array)return Ne(n,{code:de.invalid_type,expected:Pe.array,received:n.parsedType}),We;if(s.exactLength!==null){const l=n.data.length>s.exactLength.value,c=n.data.length<s.exactLength.value;(l||c)&&(Ne(n,{code:l?de.too_big:de.too_small,minimum:c?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ne(n,{code:de.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ne(n,{code:de.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,c)=>s.type._parseAsync(new Ti(n,l,n.path,c)))).then(l=>Qn.mergeArray(r,l));const i=[...n.data].map((l,c)=>s.type._parseSync(new Ti(n,l,n.path,c)));return Qn.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Us({...this._def,minLength:{value:t,message:Fe.toString(n)}})}max(t,n){return new Us({...this._def,maxLength:{value:t,message:Fe.toString(n)}})}length(t,n){return new Us({...this._def,exactLength:{value:t,message:Fe.toString(n)}})}nonempty(t){return this.min(1,t)}}Us.create=(e,t)=>new Us({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ke.ZodArray,...st(t)});function ql(e){if(e instanceof Vt){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=_i.create(ql(r))}return new Vt({...e._def,shape:()=>t})}else return e instanceof Us?new Us({...e._def,type:ql(e.element)}):e instanceof _i?_i.create(ql(e.unwrap())):e instanceof fa?fa.create(ql(e.unwrap())):e instanceof ki?ki.create(e.items.map(t=>ql(t))):e}class Vt extends lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=gt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Pe.object){const h=this._getOrReturnCtx(t);return Ne(h,{code:de.invalid_type,expected:Pe.object,received:h.parsedType}),We}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof fo&&this._def.unknownKeys==="strip"))for(const h in s.data)l.includes(h)||c.push(h);const d=[];for(const h of l){const f=i[h],p=s.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new Ti(s,p,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof fo){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of c)d.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(h==="strict")c.length>0&&(Ne(s,{code:de.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of c){const p=s.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new Ti(s,p,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of d){const p=await f.key,g=await f.value;h.push({key:p,value:g,alwaysSet:f.alwaysSet})}return h}).then(h=>Qn.mergeObjectSync(r,h)):Qn.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return Fe.errToObj,new Vt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,l;const s=((l=(i=this._def).errorMap)==null?void 0:l.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Fe.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new Vt({...this._def,unknownKeys:"strip"})}passthrough(){return new Vt({...this._def,unknownKeys:"passthrough"})}extend(t){return new Vt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Vt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ke.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Vt({...this._def,catchall:t})}pick(t){const n={};for(const r of gt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Vt({...this._def,shape:()=>n})}omit(t){const n={};for(const r of gt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Vt({...this._def,shape:()=>n})}deepPartial(){return ql(this)}partial(t){const n={};for(const r of gt.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new Vt({...this._def,shape:()=>n})}required(t){const n={};for(const r of gt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof _i;)i=i._def.innerType;n[r]=i}return new Vt({...this._def,shape:()=>n})}keyof(){return cR(gt.objectKeys(this.shape))}}Vt.create=(e,t)=>new Vt({shape:()=>e,unknownKeys:"strip",catchall:fo.create(),typeName:Ke.ZodObject,...st(t)});Vt.strictCreate=(e,t)=>new Vt({shape:()=>e,unknownKeys:"strict",catchall:fo.create(),typeName:Ke.ZodObject,...st(t)});Vt.lazycreate=(e,t)=>new Vt({shape:e,unknownKeys:"strip",catchall:fo.create(),typeName:Ke.ZodObject,...st(t)});class fh extends lt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const l=i.map(c=>new Br(c.ctx.common.issues));return Ne(n,{code:de.invalid_union,unionErrors:l}),We}if(n.common.async)return Promise.all(r.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(s);{let i;const l=[];for(const d of r){const h={...n,common:{...n.common,issues:[]},parent:null},f=d._parseSync({data:n.data,path:n.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:h}),h.common.issues.length&&l.push(h.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const c=l.map(d=>new Br(d));return Ne(n,{code:de.invalid_union,unionErrors:c}),We}}get options(){return this._def.options}}fh.create=(e,t)=>new fh({options:e,typeName:Ke.ZodUnion,...st(t)});const zi=e=>e instanceof gh?zi(e.schema):e instanceof Vs?zi(e.innerType()):e instanceof yh?[e.value]:e instanceof ha?e.options:e instanceof vh?gt.objectValues(e.enum):e instanceof xh?zi(e._def.innerType):e instanceof dh?[void 0]:e instanceof hh?[null]:e instanceof _i?[void 0,...zi(e.unwrap())]:e instanceof fa?[null,...zi(e.unwrap())]:e instanceof w_||e instanceof wh?zi(e.unwrap()):e instanceof bh?zi(e._def.innerType):[];class oy extends lt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.object)return Ne(n,{code:de.invalid_type,expected:Pe.object,received:n.parsedType}),We;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ne(n,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),We)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const i of n){const l=zi(i.shape[t]);if(!l.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const c of l){if(s.has(c))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(c)}`);s.set(c,i)}}return new oy({typeName:Ke.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...st(r)})}}function M0(e,t){const n=Hi(e),r=Hi(t);if(e===t)return{valid:!0,data:e};if(n===Pe.object&&r===Pe.object){const s=gt.objectKeys(t),i=gt.objectKeys(e).filter(c=>s.indexOf(c)!==-1),l={...e,...t};for(const c of i){const d=M0(e[c],t[c]);if(!d.valid)return{valid:!1};l[c]=d.data}return{valid:!0,data:l}}else if(n===Pe.array&&r===Pe.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const l=e[i],c=t[i],d=M0(l,c);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return n===Pe.date&&r===Pe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ph extends lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,l)=>{if(A0(i)||A0(l))return We;const c=M0(i.value,l.value);return c.valid?((I0(i)||I0(l))&&n.dirty(),{status:n.value,value:c.data}):(Ne(r,{code:de.invalid_intersection_types}),We)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,l])=>s(i,l)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ph.create=(e,t,n)=>new ph({left:e,right:t,typeName:Ke.ZodIntersection,...st(n)});class ki extends lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.array)return Ne(r,{code:de.invalid_type,expected:Pe.array,received:r.parsedType}),We;if(r.data.length<this._def.items.length)return Ne(r,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&r.data.length>this._def.items.length&&(Ne(r,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((l,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new Ti(r,l,r.path,c)):null}).filter(l=>!!l);return r.common.async?Promise.all(i).then(l=>Qn.mergeArray(n,l)):Qn.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new ki({...this._def,rest:t})}}ki.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ki({items:e,typeName:Ke.ZodTuple,rest:null,...st(t)})};class mh extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.object)return Ne(r,{code:de.invalid_type,expected:Pe.object,received:r.parsedType}),We;const s=[],i=this._def.keyType,l=this._def.valueType;for(const c in r.data)s.push({key:i._parse(new Ti(r,c,r.path,c)),value:l._parse(new Ti(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Qn.mergeObjectAsync(n,s):Qn.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof lt?new mh({keyType:t,valueType:n,typeName:Ke.ZodRecord,...st(r)}):new mh({keyType:Fs.create(),valueType:t,typeName:Ke.ZodRecord,...st(n)})}}class $m extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.map)return Ne(r,{code:de.invalid_type,expected:Pe.map,received:r.parsedType}),We;const s=this._def.keyType,i=this._def.valueType,l=[...r.data.entries()].map(([c,d],h)=>({key:s._parse(new Ti(r,c,r.path,[h,"key"])),value:i._parse(new Ti(r,d,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of l){const h=await d.key,f=await d.value;if(h.status==="aborted"||f.status==="aborted")return We;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(h.value,f.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const d of l){const h=d.key,f=d.value;if(h.status==="aborted"||f.status==="aborted")return We;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(h.value,f.value)}return{status:n.value,value:c}}}}$m.create=(e,t,n)=>new $m({valueType:t,keyType:e,typeName:Ke.ZodMap,...st(n)});class wl extends lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Pe.set)return Ne(r,{code:de.invalid_type,expected:Pe.set,received:r.parsedType}),We;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ne(r,{code:de.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ne(r,{code:de.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function l(d){const h=new Set;for(const f of d){if(f.status==="aborted")return We;f.status==="dirty"&&n.dirty(),h.add(f.value)}return{status:n.value,value:h}}const c=[...r.data.values()].map((d,h)=>i._parse(new Ti(r,d,r.path,h)));return r.common.async?Promise.all(c).then(d=>l(d)):l(c)}min(t,n){return new wl({...this._def,minSize:{value:t,message:Fe.toString(n)}})}max(t,n){return new wl({...this._def,maxSize:{value:t,message:Fe.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}wl.create=(e,t)=>new wl({valueType:e,minSize:null,maxSize:null,typeName:Ke.ZodSet,...st(t)});class vc extends lt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.function)return Ne(n,{code:de.invalid_type,expected:Pe.function,received:n.parsedType}),We;function r(c,d){return Um({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Dm(),fu].filter(h=>!!h),issueData:{code:de.invalid_arguments,argumentsError:d}})}function s(c,d){return Um({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Dm(),fu].filter(h=>!!h),issueData:{code:de.invalid_return_type,returnTypeError:d}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof mu){const c=this;return cr(async function(...d){const h=new Br([]),f=await c._def.args.parseAsync(d,i).catch(b=>{throw h.addIssue(r(d,b)),h}),p=await Reflect.apply(l,this,f);return await c._def.returns._def.type.parseAsync(p,i).catch(b=>{throw h.addIssue(s(p,b)),h})})}else{const c=this;return cr(function(...d){const h=c._def.args.safeParse(d,i);if(!h.success)throw new Br([r(d,h.error)]);const f=Reflect.apply(l,this,h.data),p=c._def.returns.safeParse(f,i);if(!p.success)throw new Br([s(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new vc({...this._def,args:ki.create(t).rest(ol.create())})}returns(t){return new vc({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new vc({args:t||ki.create([]).rest(ol.create()),returns:n||ol.create(),typeName:Ke.ZodFunction,...st(r)})}}class gh extends lt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}gh.create=(e,t)=>new gh({getter:e,typeName:Ke.ZodLazy,...st(t)});class yh extends lt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ne(n,{received:n.data,code:de.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:t.data}}get value(){return this._def.value}}yh.create=(e,t)=>new yh({value:e,typeName:Ke.ZodLiteral,...st(t)});function cR(e,t){return new ha({values:e,typeName:Ke.ZodEnum,...st(t)})}class ha extends lt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Ne(n,{expected:gt.joinValues(r),received:n.parsedType,code:de.invalid_type}),We}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Ne(n,{received:n.data,code:de.invalid_enum_value,options:r}),We}return cr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ha.create(t,{...this._def,...n})}exclude(t,n=this._def){return ha.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}ha.create=cR;class vh extends lt{_parse(t){const n=gt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Pe.string&&r.parsedType!==Pe.number){const s=gt.objectValues(n);return Ne(r,{expected:gt.joinValues(s),received:r.parsedType,code:de.invalid_type}),We}if(this._cache||(this._cache=new Set(gt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=gt.objectValues(n);return Ne(r,{received:r.data,code:de.invalid_enum_value,options:s}),We}return cr(t.data)}get enum(){return this._def.values}}vh.create=(e,t)=>new vh({values:e,typeName:Ke.ZodNativeEnum,...st(t)});class mu extends lt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Pe.promise&&n.common.async===!1)return Ne(n,{code:de.invalid_type,expected:Pe.promise,received:n.parsedType}),We;const r=n.parsedType===Pe.promise?n.data:Promise.resolve(n.data);return cr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}mu.create=(e,t)=>new mu({type:e,typeName:Ke.ZodPromise,...st(t)});class Vs extends lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:l=>{Ne(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const l=s.transform(r.data,i);if(r.common.async)return Promise.resolve(l).then(async c=>{if(n.value==="aborted")return We;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?We:d.status==="dirty"||n.value==="dirty"?ic(d.value):d});{if(n.value==="aborted")return We;const c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?We:c.status==="dirty"||n.value==="dirty"?ic(c.value):c}}if(s.type==="refinement"){const l=c=>{const d=s.refinement(c,i);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?We:(c.status==="dirty"&&n.dirty(),l(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?We:(c.status==="dirty"&&n.dirty(),l(c.value).then(()=>({status:n.value,value:c.value}))))}if(s.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!xl(l))return We;const c=s.transform(l.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>xl(l)?Promise.resolve(s.transform(l.value,i)).then(c=>({status:n.value,value:c})):We);gt.assertNever(s)}}Vs.create=(e,t,n)=>new Vs({schema:e,typeName:Ke.ZodEffects,effect:t,...st(n)});Vs.createWithPreprocess=(e,t,n)=>new Vs({schema:t,effect:{type:"preprocess",transform:e},typeName:Ke.ZodEffects,...st(n)});class _i extends lt{_parse(t){return this._getType(t)===Pe.undefined?cr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}_i.create=(e,t)=>new _i({innerType:e,typeName:Ke.ZodOptional,...st(t)});class fa extends lt{_parse(t){return this._getType(t)===Pe.null?cr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}fa.create=(e,t)=>new fa({innerType:e,typeName:Ke.ZodNullable,...st(t)});class xh extends lt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Pe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}xh.create=(e,t)=>new xh({innerType:e,typeName:Ke.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...st(t)});class bh extends lt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ch(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Br(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Br(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}bh.create=(e,t)=>new bh({innerType:e,typeName:Ke.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...st(t)});class Vm extends lt{_parse(t){if(this._getType(t)!==Pe.nan){const r=this._getOrReturnCtx(t);return Ne(r,{code:de.invalid_type,expected:Pe.nan,received:r.parsedType}),We}return{status:"valid",value:t.data}}}Vm.create=e=>new Vm({typeName:Ke.ZodNaN,...st(e)});const zq=Symbol("zod_brand");class w_ extends lt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class mf extends lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?We:i.status==="dirty"?(n.dirty(),ic(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?We:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new mf({in:t,out:n,typeName:Ke.ZodPipeline})}}class wh extends lt{_parse(t){const n=this._def.innerType._parse(t),r=s=>(xl(s)&&(s.value=Object.freeze(s.value)),s);return ch(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}wh.create=(e,t)=>new wh({innerType:e,typeName:Ke.ZodReadonly,...st(t)});function _C(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function __(e,t={},n){return e?pu.create().superRefine((r,s)=>{const i=e(r);if(i instanceof Promise)return i.then(l=>{if(!l){const c=_C(t,r),d=c.fatal??n??!0;s.addIssue({code:"custom",...c,fatal:d})}});if(!i){const l=_C(t,r),c=l.fatal??n??!0;s.addIssue({code:"custom",...l,fatal:c})}}):pu.create()}const $q={object:Vt.lazycreate};var Ke;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ke||(Ke={}));const Vq=(e,t={message:`Input not instance of ${e.name}`})=>__(n=>n instanceof e,t),_t=Fs.create,_h=ua.create,Hq=Vm.create,Wq=da.create,S_=uh.create,qq=bl.create,Zq=Bm.create,Gq=dh.create,uR=hh.create,Hm=pu.create,Kq=ol.create,Qq=fo.create,Yq=zm.create,ay=Us.create,gf=Vt.create,Xq=Vt.strictCreate,N_=fh.create,Jq=oy.create,eZ=ph.create,tZ=ki.create,dR=mh.create,nZ=$m.create,rZ=wl.create,sZ=vc.create,iZ=gh.create,oZ=yh.create,xc=ha.create,aZ=vh.create,lZ=mu.create,SC=Vs.create,cZ=_i.create,uZ=fa.create,dZ=Vs.createWithPreprocess,hZ=mf.create,fZ=()=>_t().optional(),pZ=()=>_h().optional(),mZ=()=>S_().optional(),gZ={string:e=>Fs.create({...e,coerce:!0}),number:e=>ua.create({...e,coerce:!0}),boolean:e=>uh.create({...e,coerce:!0}),bigint:e=>da.create({...e,coerce:!0}),date:e=>bl.create({...e,coerce:!0})},yZ=We,vZ=Object.freeze(Object.defineProperty({__proto__:null,BRAND:zq,DIRTY:ic,EMPTY_PATH:xq,INVALID:We,NEVER:yZ,OK:cr,ParseStatus:Qn,Schema:lt,ZodAny:pu,ZodArray:Us,ZodBigInt:da,ZodBoolean:uh,ZodBranded:w_,ZodCatch:bh,ZodDate:bl,ZodDefault:xh,ZodDiscriminatedUnion:oy,ZodEffects:Vs,ZodEnum:ha,ZodError:Br,get ZodFirstPartyTypeKind(){return Ke},ZodFunction:vc,ZodIntersection:ph,ZodIssueCode:de,ZodLazy:gh,ZodLiteral:yh,ZodMap:$m,ZodNaN:Vm,ZodNativeEnum:vh,ZodNever:fo,ZodNull:hh,ZodNullable:fa,ZodNumber:ua,ZodObject:Vt,ZodOptional:_i,ZodParsedType:Pe,ZodPipeline:mf,ZodPromise:mu,ZodReadonly:wh,ZodRecord:mh,ZodSchema:lt,ZodSet:wl,ZodString:Fs,ZodSymbol:Bm,ZodTransformer:Vs,ZodTuple:ki,ZodType:lt,ZodUndefined:dh,ZodUnion:fh,ZodUnknown:ol,ZodVoid:zm,addIssueToContext:Ne,any:Hm,array:ay,bigint:Wq,boolean:S_,coerce:gZ,custom:__,date:qq,datetimeRegex:lR,defaultErrorMap:fu,discriminatedUnion:Jq,effect:SC,enum:xc,function:sZ,getErrorMap:Dm,getParsedType:Hi,instanceof:Vq,intersection:eZ,isAborted:A0,isAsync:ch,isDirty:I0,isValid:xl,late:$q,lazy:iZ,literal:oZ,makeIssue:Um,map:nZ,nan:Hq,nativeEnum:aZ,never:Qq,null:uR,nullable:uZ,number:_h,object:gf,get objectUtil(){return E0},oboolean:mZ,onumber:pZ,optional:cZ,ostring:fZ,pipeline:hZ,preprocess:dZ,promise:lZ,quotelessJson:yq,record:dR,set:rZ,setErrorMap:vq,strictObject:Xq,string:_t,symbol:Zq,transformer:SC,tuple:tZ,undefined:Gq,union:N_,unknown:Kq,get util(){return gt},void:Yq},Symbol.toStringTag,{value:"Module"})),Ii=v.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ii.displayName="Textarea";function R0(e,[t,n]){return Math.min(n,Math.max(t,e))}var xZ=[" ","Enter","ArrowUp","ArrowDown"],bZ=[" ","Enter"],_l="Select",[ly,cy,wZ]=Og(_l),[Iu,fte]=Yn(_l,[wZ,ku]),uy=ku(),[_Z,ba]=Iu(_l),[SZ,NZ]=Iu(_l),hR=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:l,defaultValue:c,onValueChange:d,dir:h,name:f,autoComplete:p,disabled:g,required:b,form:j}=e,_=uy(t),[w,S]=v.useState(null),[x,N]=v.useState(null),[P,E]=v.useState(!1),k=Eu(h),[M,z]=Ni({prop:r,defaultProp:s??!1,onChange:i,caller:_l}),[D,F]=Ni({prop:l,defaultProp:c,onChange:d,caller:_l}),J=v.useRef(null),H=w?j||!!w.closest("form"):!0,[Y,Z]=v.useState(new Set),U=Array.from(Y).map(V=>V.props.value).join(";");return o.jsx(V5,{..._,children:o.jsxs(_Z,{required:b,scope:t,trigger:w,onTriggerChange:S,valueNode:x,onValueNodeChange:N,valueNodeHasChildren:P,onValueNodeHasChildrenChange:E,contentId:bi(),value:D,onValueChange:F,open:M,onOpenChange:z,dir:k,triggerPointerDownPosRef:J,disabled:g,children:[o.jsx(ly.Provider,{scope:t,children:o.jsx(SZ,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(V=>{Z(K=>new Set(K).add(V))},[]),onNativeOptionRemove:v.useCallback(V=>{Z(K=>{const O=new Set(K);return O.delete(V),O})},[]),children:n})}),H?o.jsxs(FR,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:p,value:D,onChange:V=>F(V.target.value),disabled:g,form:j,children:[D===void 0?o.jsx("option",{value:""}):null,Array.from(Y)]},U):null]})})};hR.displayName=_l;var fR="SelectTrigger",pR=v.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=uy(n),l=ba(fR,n),c=l.disabled||r,d=et(t,l.onTriggerChange),h=cy(n),f=v.useRef("touch"),[p,g,b]=DR(_=>{const w=h().filter(N=>!N.disabled),S=w.find(N=>N.value===l.value),x=UR(w,_,S);x!==void 0&&l.onValueChange(x.value)}),j=_=>{c||(l.onOpenChange(!0),b()),_&&(l.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return o.jsx(qw,{asChild:!0,...i,children:o.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":OR(l.value)?"":void 0,...s,ref:d,onClick:me(s.onClick,_=>{_.currentTarget.focus(),f.current!=="mouse"&&j(_)}),onPointerDown:me(s.onPointerDown,_=>{f.current=_.pointerType;const w=_.target;w.hasPointerCapture(_.pointerId)&&w.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(j(_),_.preventDefault())}),onKeyDown:me(s.onKeyDown,_=>{const w=p.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&g(_.key),!(w&&_.key===" ")&&xZ.includes(_.key)&&(j(),_.preventDefault())})})})});pR.displayName=fR;var mR="SelectValue",gR=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:l="",...c}=e,d=ba(mR,n),{onValueNodeHasChildrenChange:h}=d,f=i!==void 0,p=et(t,d.onValueNodeChange);return on(()=>{h(f)},[h,f]),o.jsx(Ae.span,{...c,ref:p,style:{pointerEvents:"none"},children:OR(d.value)?o.jsx(o.Fragment,{children:l}):i})});gR.displayName=mR;var CZ="SelectIcon",yR=v.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(Ae.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});yR.displayName=CZ;var jZ="SelectPortal",vR=e=>o.jsx(af,{asChild:!0,...e});vR.displayName=jZ;var Sl="SelectContent",xR=v.forwardRef((e,t)=>{const n=ba(Sl,e.__scopeSelect),[r,s]=v.useState();if(on(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Pl.createPortal(o.jsx(bR,{scope:e.__scopeSelect,children:o.jsx(ly.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(wR,{...e,ref:t})});xR.displayName=Sl;var xs=10,[bR,wa]=Iu(Sl),PZ="SelectContentImpl",TZ=pl("SelectContent.RemoveScroll"),wR=v.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:g,collisionPadding:b,sticky:j,hideWhenDetached:_,avoidCollisions:w,...S}=e,x=ba(Sl,n),[N,P]=v.useState(null),[E,k]=v.useState(null),M=et(t,fe=>P(fe)),[z,D]=v.useState(null),[F,J]=v.useState(null),H=cy(n),[Y,Z]=v.useState(!1),U=v.useRef(!1);v.useEffect(()=>{if(N)return t_(N)},[N]),e_();const V=v.useCallback(fe=>{const[Oe,...Ye]=H().map(tt=>tt.ref.current),[He]=Ye.slice(-1),Xe=document.activeElement;for(const tt of fe)if(tt===Xe||(tt==null||tt.scrollIntoView({block:"nearest"}),tt===Oe&&E&&(E.scrollTop=0),tt===He&&E&&(E.scrollTop=E.scrollHeight),tt==null||tt.focus(),document.activeElement!==Xe))return},[H,E]),K=v.useCallback(()=>V([z,N]),[V,z,N]);v.useEffect(()=>{Y&&K()},[Y,K]);const{onOpenChange:O,triggerPointerDownPosRef:G}=x;v.useEffect(()=>{if(N){let fe={x:0,y:0};const Oe=He=>{var Xe,tt;fe={x:Math.abs(Math.round(He.pageX)-(((Xe=G.current)==null?void 0:Xe.x)??0)),y:Math.abs(Math.round(He.pageY)-(((tt=G.current)==null?void 0:tt.y)??0))}},Ye=He=>{fe.x<=10&&fe.y<=10?He.preventDefault():N.contains(He.target)||O(!1),document.removeEventListener("pointermove",Oe),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",Oe),document.addEventListener("pointerup",Ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Oe),document.removeEventListener("pointerup",Ye,{capture:!0})}}},[N,O,G]),v.useEffect(()=>{const fe=()=>O(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[O]);const[X,ce]=DR(fe=>{const Oe=H().filter(Xe=>!Xe.disabled),Ye=Oe.find(Xe=>Xe.ref.current===document.activeElement),He=UR(Oe,fe,Ye);He&&setTimeout(()=>He.ref.current.focus())}),Te=v.useCallback((fe,Oe,Ye)=>{const He=!U.current&&!Ye;(x.value!==void 0&&x.value===Oe||He)&&(D(fe),He&&(U.current=!0))},[x.value]),Ve=v.useCallback(()=>N==null?void 0:N.focus(),[N]),Ie=v.useCallback((fe,Oe,Ye)=>{const He=!U.current&&!Ye;(x.value!==void 0&&x.value===Oe||He)&&J(fe)},[x.value]),ye=r==="popper"?L0:_R,ue=ye===L0?{side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:g,collisionPadding:b,sticky:j,hideWhenDetached:_,avoidCollisions:w}:{};return o.jsx(bR,{scope:n,content:N,viewport:E,onViewportChange:k,itemRefCallback:Te,selectedItem:z,onItemLeave:Ve,itemTextRefCallback:Ie,focusSelectedItem:K,selectedItemText:F,position:r,isPositioned:Y,searchRef:X,children:o.jsx(Jg,{as:TZ,allowPinchZoom:!0,children:o.jsx(Yg,{asChild:!0,trapped:x.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:me(s,fe=>{var Oe;(Oe=x.trigger)==null||Oe.focus({preventScroll:!0}),fe.preventDefault()}),children:o.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:o.jsx(ye,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:fe=>fe.preventDefault(),...S,...ue,onPlaced:()=>Z(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:me(S.onKeyDown,fe=>{const Oe=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!Oe&&fe.key.length===1&&ce(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let He=H().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(He=He.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const Xe=fe.target,tt=He.indexOf(Xe);He=He.slice(tt+1)}setTimeout(()=>V(He)),fe.preventDefault()}})})})})})})});wR.displayName=PZ;var kZ="SelectItemAlignedPosition",_R=v.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=ba(Sl,n),l=wa(Sl,n),[c,d]=v.useState(null),[h,f]=v.useState(null),p=et(t,M=>f(M)),g=cy(n),b=v.useRef(!1),j=v.useRef(!0),{viewport:_,selectedItem:w,selectedItemText:S,focusSelectedItem:x}=l,N=v.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&_&&w&&S){const M=i.trigger.getBoundingClientRect(),z=h.getBoundingClientRect(),D=i.valueNode.getBoundingClientRect(),F=S.getBoundingClientRect();if(i.dir!=="rtl"){const Xe=F.left-z.left,tt=D.left-Xe,Lt=M.left-tt,Yt=M.width+Lt,En=Math.max(Yt,z.width),Pr=window.innerWidth-xs,fr=R0(tt,[xs,Math.max(xs,Pr-En)]);c.style.minWidth=Yt+"px",c.style.left=fr+"px"}else{const Xe=z.right-F.right,tt=window.innerWidth-D.right-Xe,Lt=window.innerWidth-M.right-tt,Yt=M.width+Lt,En=Math.max(Yt,z.width),Pr=window.innerWidth-xs,fr=R0(tt,[xs,Math.max(xs,Pr-En)]);c.style.minWidth=Yt+"px",c.style.right=fr+"px"}const J=g(),H=window.innerHeight-xs*2,Y=_.scrollHeight,Z=window.getComputedStyle(h),U=parseInt(Z.borderTopWidth,10),V=parseInt(Z.paddingTop,10),K=parseInt(Z.borderBottomWidth,10),O=parseInt(Z.paddingBottom,10),G=U+V+Y+O+K,X=Math.min(w.offsetHeight*5,G),ce=window.getComputedStyle(_),Te=parseInt(ce.paddingTop,10),Ve=parseInt(ce.paddingBottom,10),Ie=M.top+M.height/2-xs,ye=H-Ie,ue=w.offsetHeight/2,fe=w.offsetTop+ue,Oe=U+V+fe,Ye=G-Oe;if(Oe<=Ie){const Xe=J.length>0&&w===J[J.length-1].ref.current;c.style.bottom="0px";const tt=h.clientHeight-_.offsetTop-_.offsetHeight,Lt=Math.max(ye,ue+(Xe?Ve:0)+tt+K),Yt=Oe+Lt;c.style.height=Yt+"px"}else{const Xe=J.length>0&&w===J[0].ref.current;c.style.top="0px";const Lt=Math.max(Ie,U+_.offsetTop+(Xe?Te:0)+ue)+Ye;c.style.height=Lt+"px",_.scrollTop=Oe-Ie+_.offsetTop}c.style.margin=`${xs}px 0`,c.style.minHeight=X+"px",c.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[g,i.trigger,i.valueNode,c,h,_,w,S,i.dir,r]);on(()=>N(),[N]);const[P,E]=v.useState();on(()=>{h&&E(window.getComputedStyle(h).zIndex)},[h]);const k=v.useCallback(M=>{M&&j.current===!0&&(N(),x==null||x(),j.current=!1)},[N,x]);return o.jsx(AZ,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:b,onScrollButtonChange:k,children:o.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:o.jsx(Ae.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_R.displayName=kZ;var EZ="SelectPopperPosition",L0=v.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=xs,...i}=e,l=uy(n);return o.jsx(Zw,{...l,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});L0.displayName=EZ;var[AZ,C_]=Iu(Sl,{}),F0="SelectViewport",SR=v.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=wa(F0,n),l=C_(F0,n),c=et(t,i.onViewportChange),d=v.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(ly.Slot,{scope:n,children:o.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=l;if(g!=null&&g.current&&p){const b=Math.abs(d.current-f.scrollTop);if(b>0){const j=window.innerHeight-xs*2,_=parseFloat(p.style.minHeight),w=parseFloat(p.style.height),S=Math.max(_,w);if(S<j){const x=S+b,N=Math.min(j,x),P=x-N;p.style.height=N+"px",p.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});SR.displayName=F0;var NR="SelectGroup",[IZ,MZ]=Iu(NR),RZ=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=bi();return o.jsx(IZ,{scope:n,id:s,children:o.jsx(Ae.div,{role:"group","aria-labelledby":s,...r,ref:t})})});RZ.displayName=NR;var CR="SelectLabel",jR=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=MZ(CR,n);return o.jsx(Ae.div,{id:s.id,...r,ref:t})});jR.displayName=CR;var Wm="SelectItem",[LZ,PR]=Iu(Wm),TR=v.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...l}=e,c=ba(Wm,n),d=wa(Wm,n),h=c.value===r,[f,p]=v.useState(i??""),[g,b]=v.useState(!1),j=et(t,x=>{var N;return(N=d.itemRefCallback)==null?void 0:N.call(d,x,r,s)}),_=bi(),w=v.useRef("touch"),S=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(LZ,{scope:n,value:r,disabled:s,textId:_,isSelected:h,onItemTextChange:v.useCallback(x=>{p(N=>N||((x==null?void 0:x.textContent)??"").trim())},[]),children:o.jsx(ly.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:o.jsx(Ae.div,{role:"option","aria-labelledby":_,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:j,onFocus:me(l.onFocus,()=>b(!0)),onBlur:me(l.onBlur,()=>b(!1)),onClick:me(l.onClick,()=>{w.current!=="mouse"&&S()}),onPointerUp:me(l.onPointerUp,()=>{w.current==="mouse"&&S()}),onPointerDown:me(l.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:me(l.onPointerMove,x=>{var N;w.current=x.pointerType,s?(N=d.onItemLeave)==null||N.call(d):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(l.onPointerLeave,x=>{var N;x.currentTarget===document.activeElement&&((N=d.onItemLeave)==null||N.call(d))}),onKeyDown:me(l.onKeyDown,x=>{var P;((P=d.searchRef)==null?void 0:P.current)!==""&&x.key===" "||(bZ.includes(x.key)&&S(),x.key===" "&&x.preventDefault())})})})})});TR.displayName=Wm;var gd="SelectItemText",kR=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,l=ba(gd,n),c=wa(gd,n),d=PR(gd,n),h=NZ(gd,n),[f,p]=v.useState(null),g=et(t,S=>p(S),d.onItemTextChange,S=>{var x;return(x=c.itemTextRefCallback)==null?void 0:x.call(c,S,d.value,d.disabled)}),b=f==null?void 0:f.textContent,j=v.useMemo(()=>o.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:_,onNativeOptionRemove:w}=h;return on(()=>(_(j),()=>w(j)),[_,w,j]),o.jsxs(o.Fragment,{children:[o.jsx(Ae.span,{id:d.textId,...i,ref:g}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Pl.createPortal(i.children,l.valueNode):null]})});kR.displayName=gd;var ER="SelectItemIndicator",AR=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return PR(ER,n).isSelected?o.jsx(Ae.span,{"aria-hidden":!0,...r,ref:t}):null});AR.displayName=ER;var O0="SelectScrollUpButton",IR=v.forwardRef((e,t)=>{const n=wa(O0,e.__scopeSelect),r=C_(O0,e.__scopeSelect),[s,i]=v.useState(!1),l=et(t,r.onScrollButtonChange);return on(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=d.scrollTop>0;i(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?o.jsx(RR,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});IR.displayName=O0;var D0="SelectScrollDownButton",MR=v.forwardRef((e,t)=>{const n=wa(D0,e.__scopeSelect),r=C_(D0,e.__scopeSelect),[s,i]=v.useState(!1),l=et(t,r.onScrollButtonChange);return on(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;i(f)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?o.jsx(RR,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});MR.displayName=D0;var RR=v.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=wa("SelectScrollButton",n),l=v.useRef(null),c=cy(n),d=v.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return v.useEffect(()=>()=>d(),[d]),on(()=>{var f;const h=c().find(p=>p.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),o.jsx(Ae.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{d()})})}),FZ="SelectSeparator",LR=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(Ae.div,{"aria-hidden":!0,...r,ref:t})});LR.displayName=FZ;var U0="SelectArrow",OZ=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=uy(n),i=ba(U0,n),l=wa(U0,n);return i.open&&l.position==="popper"?o.jsx(Gw,{...s,...r,ref:t}):null});OZ.displayName=U0;var DZ="SelectBubbleInput",FR=v.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=v.useRef(null),i=et(r,s),l=Gg(t);return v.useEffect(()=>{const c=s.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==t&&f){const p=new Event("change",{bubbles:!0});f.call(c,t),c.dispatchEvent(p)}},[l,t]),o.jsx(Ae.select,{...n,style:{...RA,...n.style},ref:i,defaultValue:t})});FR.displayName=DZ;function OR(e){return e===""||e===void 0}function DR(e){const t=Kt(e),n=v.useRef(""),r=v.useRef(0),s=v.useCallback(l=>{const c=n.current+l;t(c),function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),i=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function UR(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=UZ(e,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==n));const d=l.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function UZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var BZ=hR,BR=pR,zZ=gR,$Z=yR,VZ=vR,zR=xR,HZ=SR,$R=jR,VR=TR,WZ=kR,qZ=AR,HR=IR,WR=MR,qR=LR;const ls=BZ,cs=zZ,zr=v.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(BR,{ref:r,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx($Z,{asChild:!0,children:o.jsx(_m,{className:"h-4 w-4 opacity-50"})})]}));zr.displayName=BR.displayName;const ZR=v.forwardRef(({className:e,...t},n)=>o.jsx(HR,{ref:n,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(i9,{className:"h-4 w-4"})}));ZR.displayName=HR.displayName;const GR=v.forwardRef(({className:e,...t},n)=>o.jsx(WR,{ref:n,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(_m,{className:"h-4 w-4"})}));GR.displayName=WR.displayName;const $r=v.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(VZ,{children:o.jsxs(zR,{ref:s,className:Ce("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(ZR,{}),o.jsx(HZ,{className:Ce("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(GR,{})]})}));$r.displayName=zR.displayName;const ZZ=v.forwardRef(({className:e,...t},n)=>o.jsx($R,{ref:n,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ZZ.displayName=$R.displayName;const xn=v.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(VR,{ref:r,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(qZ,{children:o.jsx(jw,{className:"h-4 w-4"})})}),o.jsx(WZ,{children:t})]}));xn.displayName=VR.displayName;const GZ=v.forwardRef(({className:e,...t},n)=>o.jsx(qR,{ref:n,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));GZ.displayName=qR.displayName;const KR=QW,QR=v.createContext({}),ts=({...e})=>o.jsx(QR.Provider,{value:{name:e.name},children:o.jsx(eq,{...e})}),dy=()=>{const e=v.useContext(QR),t=v.useContext(YR),{getFieldState:n,formState:r}=iy(),s=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},YR=v.createContext({}),Ir=v.forwardRef(({className:e,...t},n)=>{const r=v.useId();return o.jsx(YR.Provider,{value:{id:r},children:o.jsx("div",{ref:n,className:Ce("space-y-2",e),...t})})});Ir.displayName="FormItem";const Mr=v.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:s}=dy();return o.jsx(be,{ref:n,className:Ce(r&&"text-destructive",e),htmlFor:s,...t})});Mr.displayName="FormLabel";const Rr=v.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=dy();return o.jsx(kA,{ref:t,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...e})});Rr.displayName="FormControl";const KZ=v.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=dy();return o.jsx("p",{ref:n,id:r,className:Ce("text-sm text-muted-foreground",e),...t})});KZ.displayName="FormDescription";const Lr=v.forwardRef(({className:e,children:t,...n},r)=>{const{error:s,formMessageId:i}=dy(),l=s?String((s==null?void 0:s.message)??""):t;return l?o.jsx("p",{ref:r,id:i,className:Ce("text-sm font-medium text-destructive",e),...n,children:l}):null});Lr.displayName="FormMessage";function B0(e){return/^401: .*Unauthorized/.test(e.message)}function XR(e,t){return Object.hasOwn(e,t)}const{AbortController:Uv}=globalThis,JR=(e="Aborted",t)=>{const n=new DOMException(e,"AbortError");return t!=null&&XR(t,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),n},QZ=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function YZ(e,t,n){const r=QZ.exec(e),s=t.mimeType??(r==null?void 0:r[1])??"plain/text";let i;if((r==null?void 0:r[2])!=null){const l=atob(decodeURIComponent(r[3])),c=new Uint8Array(l.length);for(let d=0;d<l.length;d++)c[d]=l.charCodeAt(d);i=[c]}else(r==null?void 0:r[3])!=null&&(i=[decodeURIComponent(r[3])]);return new Blob(i,{type:s})}class XZ extends Error{constructor(n,r){super(n);I(this,"isNetworkError");I(this,"cause");this.cause=r==null?void 0:r.cause,this.cause&&XR(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}function NC(e,t,n,r){return e===t?e:r===0?t:e+(t-e)*2**(-r/n)}const eL=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];class JZ extends Error{constructor(n,r=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");I(this,"cause");I(this,"isNetworkError");I(this,"request");this.cause=n,this.isNetworkError=!0,this.request=r}}function eG(...e){return fetch(...e).catch(t=>{throw t.name==="AbortError"?t:new JZ(t)})}function tG(e){const t=n=>"error"in n&&!!n.error;return e.filter(n=>!t(n))}function nG(e){return e.filter(t=>{var n;return!((n=t.progress)!=null&&n.uploadStarted)||!t.isRestored})}function tL(e){return typeof e!="object"||e===null||!("nodeType"in e)?!1:e.nodeType===Node.ELEMENT_NODE}function CC(e){if(typeof e=="string"){const t=document.querySelectorAll(e);return t.length===0?null:Array.from(t)}return typeof e=="object"&&tL(e)?[e]:null}function rG(e,t=document){return typeof e=="string"?t.querySelector(e):tL(e)?e:null}function nL(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}const jC={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function rL(e){var n;if(e.type)return e.type;const t=e.name?(n=nL(e.name).extension)==null?void 0:n.toLowerCase():null;return t&&t in jC?jC[t]:"application/octet-stream"}function sG(e){return e.charCodeAt(0).toString(32)}function PC(e){let t="";return e.replace(/[^A-Z0-9]/gi,n=>(t+=`-${sG(n)}`,"/"))+t}function iG(e,t){let n=t||"uppy";return typeof e.name=="string"&&(n+=`-${PC(e.name.toLowerCase())}`),e.type!==void 0&&(n+=`-${e.type}`),e.meta&&typeof e.meta.relativePath=="string"&&(n+=`-${PC(e.meta.relativePath.toLowerCase())}`),e.data.size!==void 0&&(n+=`-${e.data.size}`),e.data.lastModified!==void 0&&(n+=`-${e.data.lastModified}`),n}function oG(e){return!e.isRemote||!e.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}function aG(e,t){if(oG(e))return e.id;const n=rL(e);return iG({...e,type:n},t)}function TC(e,t){return e===!0?Object.keys(t):Array.isArray(e)?e:[]}const Ld=Array.from;function lG(e){const t=Ld(e.files);return Promise.resolve(t)}function sL(e,t,n,{onSuccess:r}){e.readEntries(s=>{const i=[...t,...s];s.length?queueMicrotask(()=>{sL(e,i,n,{onSuccess:r})}):r(i)},s=>{n(s),r(t)})}function iL(e,t){return e==null?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile(){return new Promise((n,r)=>e.file(n,r))},async*values(){const n=e.createReader();yield*await new Promise(s=>{sL(n,[],t,{onSuccess:i=>s(i.map(l=>iL(l,t)))})})},isSameEntry:void 0}}async function*oL(e,t,n=void 0){const r=()=>`${t}/${e.name}`;if(e.kind==="file"){const s=await e.getFile();s!=null?(s.relativePath=t?r():null,yield s):n!=null&&(yield n)}else if(e.kind==="directory")for await(const s of e.values())yield*oL(s,t?r():e.name);else n!=null&&(yield n)}async function*cG(e,t){const n=await Promise.all(Array.from(e.items,async r=>{let s;return s??(s=iL(typeof r.getAsEntry=="function"?r.getAsEntry():r.webkitGetAsEntry(),t)),{fileSystemHandle:s,lastResortFile:r.getAsFile()}}));for(const{lastResortFile:r,fileSystemHandle:s}of n)if(s!=null)try{yield*oL(s,"",r)}catch(i){r!=null?yield r:t(i)}else r!=null&&(yield r)}async function uG(e,t){const n=(t==null?void 0:t.logDropError)??Function.prototype;try{const r=[];for await(const s of cG(e,n))r.push(s);return r}catch{return lG(e)}}function dG(e){var s;const n=(s=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(e))==null?void 0:s[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${n}`}function hG(e){for(;e&&!e.dir;)e=e.parentNode;return e==null?void 0:e.dir}function Bv(e){return e<10?`0${e}`:e.toString()}function $p(){const e=new Date,t=Bv(e.getHours()),n=Bv(e.getMinutes()),r=Bv(e.getSeconds());return`${t}:${n}:${r}`}function fG(){const e=document.body;return!(!("draggable"in e)||!("ondragstart"in e&&"ondrop"in e)||!("FormData"in window)||!("FileReader"in window))}function kC(e){return e.startsWith("blob:")}function EC(e){return e?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e):!1}function pG(e){const t=Math.floor(e/3600)%24,n=Math.floor(e/60)%60,r=Math.floor(e%60);return{hours:t,minutes:n,seconds:r}}function mG(e){const t=pG(e),n=t.hours===0?"":`${t.hours}h`,r=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,s=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${r}${s}`}function gG(e){return new Error("Cancelled",{cause:e})}function AC(e){var t;if(e!=null){const n=()=>this.abort(e.reason);e.addEventListener("abort",n,{once:!0});const r=()=>{e.removeEventListener("abort",n)};(t=this.then)==null||t.call(this,r,r)}return this}var Gi,ai,Ki,Lc,li,Fc,qa,qn,z0,yd,aL,lL,cL,ig,Oc;class yG{constructor(t){te(this,qn);te(this,Gi,0);te(this,ai,[]);te(this,Ki,!1);te(this,Lc);te(this,li,1);te(this,Fc);te(this,qa);I(this,"limit");te(this,ig,()=>this.resume());te(this,Oc,()=>{if(T(this,Ki)){ne(this,qa,setTimeout(T(this,Oc),0));return}ne(this,li,this.limit),this.limit=Math.ceil((T(this,Fc)+T(this,li))/2);for(let t=T(this,li);t<=this.limit;t++)ie(this,qn,yd).call(this);T(this,Fc)-T(this,li)>3?ne(this,qa,setTimeout(T(this,Oc),2e3)):ne(this,li,Math.floor(T(this,li)/2))});typeof t!="number"||t===0?this.limit=1/0:this.limit=t}run(t,n){return!T(this,Ki)&&T(this,Gi)<this.limit?ie(this,qn,z0).call(this,t):ie(this,qn,lL).call(this,t,n)}wrapSyncFunction(t,n){return(...r)=>{const s=this.run(()=>(t(...r),queueMicrotask(()=>s.done()),()=>{}),n);return{abortOn:AC,abort(){s.abort()}}}}wrapPromiseFunction(t,n){return(...r)=>{let s;const i=new Promise((l,c)=>{s=this.run(()=>{let d,h;try{h=Promise.resolve(t(...r))}catch(f){h=Promise.reject(f)}return h.then(f=>{d?c(d):(s.done(),l(f))},f=>{d?c(d):(s.done(),c(f))}),f=>{d=gG(f)}},n)});return i.abort=l=>{s.abort(l)},i.abortOn=AC,i}}resume(){ne(this,Ki,!1),clearTimeout(T(this,Lc));for(let t=0;t<this.limit;t++)ie(this,qn,yd).call(this)}pause(t=null){ne(this,Ki,!0),clearTimeout(T(this,Lc)),t!=null&&ne(this,Lc,setTimeout(T(this,ig),t))}rateLimit(t){clearTimeout(T(this,qa)),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(ne(this,Fc,this.limit-1),this.limit=T(this,li),ne(this,qa,setTimeout(T(this,Oc),t)))}get isPaused(){return T(this,Ki)}}Gi=new WeakMap,ai=new WeakMap,Ki=new WeakMap,Lc=new WeakMap,li=new WeakMap,Fc=new WeakMap,qa=new WeakMap,qn=new WeakSet,z0=function(t){ne(this,Gi,T(this,Gi)+1);let n=!1,r;try{r=t()}catch(s){throw ne(this,Gi,T(this,Gi)-1),s}return{abort:s=>{n||(n=!0,ne(this,Gi,T(this,Gi)-1),r==null||r(s),ie(this,qn,yd).call(this))},done:()=>{n||(n=!0,ne(this,Gi,T(this,Gi)-1),ie(this,qn,yd).call(this))}}},yd=function(){queueMicrotask(()=>ie(this,qn,aL).call(this))},aL=function(){if(T(this,Ki)||T(this,Gi)>=this.limit||T(this,ai).length===0)return;const t=T(this,ai).shift();if(t==null)throw new Error("Invariant violation: next is null");const n=ie(this,qn,z0).call(this,t.fn);t.abort=n.abort,t.done=n.done},lL=function(t,n){const r={fn:t,priority:(n==null?void 0:n.priority)||0,abort:()=>{ie(this,qn,cL).call(this,r)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=T(this,ai).findIndex(i=>r.priority>i.priority);return s===-1?T(this,ai).push(r):T(this,ai).splice(s,0,r),r},cL=function(t){const n=T(this,ai).indexOf(t);n!==-1&&T(this,ai).splice(n,1)},ig=new WeakMap,Oc=new WeakMap;function vG(e,t,n){const r=[];return e.forEach(s=>typeof s!="string"?r.push(s):t[Symbol.split](s).forEach((i,l,c)=>{i!==""&&r.push(i),l<c.length-1&&r.push(n)})),r}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function IC(e,t){const n=/\$/g,r="$$$$";let s=[e];if(t==null)return s;for(const i of Object.keys(t))if(i!=="_"){let l=t[i];typeof l=="string"&&(l=n[Symbol.replace](l,r)),s=vG(s,new RegExp(`%\\{${i}\\}`,"g"),l)}return s}const xG=e=>{throw new Error(`missing string: ${e}`)};var Ih,Mh,$0;class uL{constructor(t,{onMissingKey:n=xG}={}){te(this,Mh);I(this,"locale");te(this,Ih);this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(t)?t.forEach(ie(this,Mh,$0),this):ie(this,Mh,$0).call(this,t),ne(this,Ih,n)}translate(t,n){return this.translateArray(t,n).join("")}translateArray(t,n){let r=this.locale.strings[t];if(r==null&&(T(this,Ih).call(this,t),r=t),typeof r=="object"){if(n&&typeof n.smart_count<"u"){const i=this.locale.pluralize(n.smart_count);return IC(r[i],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof r!="string")throw new Error("string was not a string");return IC(r,n)}}Ih=new WeakMap,Mh=new WeakSet,$0=function(t){if(!(t!=null&&t.strings))return;const n=this.locale;Object.assign(this.locale,{strings:{...n.strings,...t.strings},pluralize:t.pluralize||n.pluralize})};const zv="...";function dL(e,t){if(t===0)return"";if(e.length<=t)return e;if(t<=zv.length+1)return`${e.slice(0,t-1)}`;const n=t-zv.length,r=Math.ceil(n/2),s=Math.floor(n/2);return e.slice(0,r)+zv+e.slice(-s)}class bG extends Error{constructor(){super(...arguments);I(this,"name","UserFacingApiError")}}var yf,Pt,hL,Aa,MC,fL,pL,mL,j_,V0,H0,Sh={},gL=[],wG=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vf=Array.isArray;function gi(e,t){for(var n in t)e[n]=t[n];return e}function P_(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function T_(e,t,n){var r,s,i,l={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?yf.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return Fd(e,l,r,s,null)}function Fd(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++hL,__i:-1,__u:0};return s==null&&Pt.vnode!=null&&Pt.vnode(i),i}function _G(){return{current:null}}function no(e){return e.children}function Si(e,t){this.props=e,this.context=t}function gu(e,t){if(t==null)return e.__?gu(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?gu(e):null}function yL(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return yL(e)}}function RC(e){(!e.__d&&(e.__d=!0)&&Aa.push(e)&&!qm.__r++||MC!=Pt.debounceRendering)&&((MC=Pt.debounceRendering)||fL)(qm)}function qm(){for(var e,t,n,r,s,i,l,c=1;Aa.length;)Aa.length>c&&Aa.sort(pL),e=Aa.shift(),c=Aa.length,e.__d&&(n=void 0,s=(r=(t=e).__v).__e,i=[],l=[],t.__P&&((n=gi({},r)).__v=r.__v+1,Pt.vnode&&Pt.vnode(n),k_(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,s??gu(r),!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,bL(i,n,l),n.__e!=s&&yL(n)));qm.__r=0}function vL(e,t,n,r,s,i,l,c,d,h,f){var p,g,b,j,_,w,S,x=r&&r.__k||gL,N=t.length;for(d=SG(n,t,x,d,N),p=0;p<N;p++)(b=n.__k[p])!=null&&(g=b.__i==-1?Sh:x[b.__i]||Sh,b.__i=p,w=k_(e,b,g,s,i,l,c,d,h,f),j=b.__e,b.ref&&g.ref!=b.ref&&(g.ref&&E_(g.ref,null,b),f.push(b.ref,b.__c||j,b)),_==null&&j!=null&&(_=j),(S=!!(4&b.__u))||g.__k===b.__k?d=xL(b,d,e,S):typeof b.type=="function"&&w!==void 0?d=w:j&&(d=j.nextSibling),b.__u&=-7);return n.__e=_,d}function SG(e,t,n,r,s){var i,l,c,d,h,f=n.length,p=f,g=0;for(e.__k=new Array(s),i=0;i<s;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(d=i+g,(l=e.__k[i]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?Fd(null,l,null,null,null):vf(l)?Fd(no,{children:l},null,null,null):l.constructor==null&&l.__b>0?Fd(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,c=null,(h=l.__i=NG(l,n,d,p))!=-1&&(p--,(c=n[h])&&(c.__u|=2)),c==null||c.__v==null?(h==-1&&(s>f?g--:s<f&&g++),typeof l.type!="function"&&(l.__u|=4)):h!=d&&(h==d-1?g--:h==d+1?g++:(h>d?g--:g++,l.__u|=4))):e.__k[i]=null;if(p)for(i=0;i<f;i++)(c=n[i])!=null&&!(2&c.__u)&&(c.__e==r&&(r=gu(c)),_L(c,c));return r}function xL(e,t,n,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=xL(s[i],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=gu(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function To(e,t){return t=t||[],e==null||typeof e=="boolean"||(vf(e)?e.some(function(n){To(n,t)}):t.push(e)),t}function NG(e,t,n,r){var s,i,l,c=e.key,d=e.type,h=t[n],f=h!=null&&(2&h.__u)==0;if(h===null&&e.key==null||f&&c==h.key&&d==h.type)return n;if(r>(f?1:0)){for(s=n-1,i=n+1;s>=0||i<t.length;)if((h=t[l=s>=0?s--:i++])!=null&&!(2&h.__u)&&c==h.key&&d==h.type)return l}return-1}function LC(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||wG.test(t)?n:n+"px"}function dp(e,t,n,r,s){var i,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||LC(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||LC(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(mL,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=j_,e.addEventListener(t,i?H0:V0,i)):e.removeEventListener(t,i?H0:V0,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function FC(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=j_++;else if(t.t<n.u)return;return n(Pt.event?Pt.event(t):t)}}}function k_(e,t,n,r,s,i,l,c,d,h){var f,p,g,b,j,_,w,S,x,N,P,E,k,M,z,D,F,J=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),i=[c=t.__e=n.__e]),(f=Pt.__b)&&f(t);e:if(typeof J=="function")try{if(S=t.props,x="prototype"in J&&J.prototype.render,N=(f=J.contextType)&&r[f.__c],P=f?N?N.props.value:f.__:r,n.__c?w=(p=t.__c=n.__c).__=p.__E:(x?t.__c=p=new J(S,P):(t.__c=p=new Si(S,P),p.constructor=J,p.render=jG),N&&N.sub(p),p.props=S,p.state||(p.state={}),p.context=P,p.__n=r,g=p.__d=!0,p.__h=[],p._sb=[]),x&&p.__s==null&&(p.__s=p.state),x&&J.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=gi({},p.__s)),gi(p.__s,J.getDerivedStateFromProps(S,p.__s))),b=p.props,j=p.state,p.__v=t,g)x&&J.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),x&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(x&&J.getDerivedStateFromProps==null&&S!==b&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(S,P),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(S,p.__s,P)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(p.props=S,p.state=p.__s,p.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(H){H&&(H.__=t)}),E=0;E<p._sb.length;E++)p.__h.push(p._sb[E]);p._sb=[],p.__h.length&&l.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(S,p.__s,P),x&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(b,j,_)})}if(p.context=P,p.props=S,p.__P=e,p.__e=!1,k=Pt.__r,M=0,x){for(p.state=p.__s,p.__d=!1,k&&k(t),f=p.render(p.props,p.state,p.context),z=0;z<p._sb.length;z++)p.__h.push(p._sb[z]);p._sb=[]}else do p.__d=!1,k&&k(t),f=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++M<25);p.state=p.__s,p.getChildContext!=null&&(r=gi(gi({},r),p.getChildContext())),x&&!g&&p.getSnapshotBeforeUpdate!=null&&(_=p.getSnapshotBeforeUpdate(b,j)),D=f,f!=null&&f.type===no&&f.key==null&&(D=wL(f.props.children)),c=vL(e,vf(D)?D:[D],t,n,r,s,i,l,c,d,h),p.base=t.__e,t.__u&=-161,p.__h.length&&l.push(p),w&&(p.__E=p.__=null)}catch(H){if(t.__v=null,d||i!=null)if(H.then){for(t.__u|=d?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else{for(F=i.length;F--;)P_(i[F]);W0(t)}else t.__e=n.__e,t.__k=n.__k,H.then||W0(t);Pt.__e(H,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=CG(n.__e,t,n,r,s,i,l,d,h);return(f=Pt.diffed)&&f(t),128&t.__u?void 0:c}function W0(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(W0)}function bL(e,t,n){for(var r=0;r<n.length;r++)E_(n[r],n[++r],n[++r]);Pt.__c&&Pt.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){Pt.__e(i,s.__v)}})}function wL(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:vf(e)?e.map(wL):gi({},e)}function CG(e,t,n,r,s,i,l,c,d){var h,f,p,g,b,j,_,w=n.props,S=t.props,x=t.type;if(x=="svg"?s="http://www.w3.org/2000/svg":x=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(h=0;h<i.length;h++)if((b=i[h])&&"setAttribute"in b==!!x&&(x?b.localName==x:b.nodeType==3)){e=b,i[h]=null;break}}if(e==null){if(x==null)return document.createTextNode(S);e=document.createElementNS(s,x,S.is&&S),c&&(Pt.__m&&Pt.__m(t,i),c=!1),i=null}if(x==null)w===S||c&&e.data==S||(e.data=S);else{if(i=i&&yf.call(e.childNodes),w=n.props||Sh,!c&&i!=null)for(w={},h=0;h<e.attributes.length;h++)w[(b=e.attributes[h]).name]=b.value;for(h in w)if(b=w[h],h!="children"){if(h=="dangerouslySetInnerHTML")p=b;else if(!(h in S)){if(h=="value"&&"defaultValue"in S||h=="checked"&&"defaultChecked"in S)continue;dp(e,h,null,b,s)}}for(h in S)b=S[h],h=="children"?g=b:h=="dangerouslySetInnerHTML"?f=b:h=="value"?j=b:h=="checked"?_=b:c&&typeof b!="function"||w[h]===b||dp(e,h,b,w[h],s);if(f)c||p&&(f.__html==p.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(p&&(e.innerHTML=""),vL(t.type=="template"?e.content:e,vf(g)?g:[g],t,n,r,x=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,l,i?i[0]:n.__k&&gu(n,0),c,d),i!=null)for(h=i.length;h--;)P_(i[h]);c||(h="value",x=="progress"&&j==null?e.removeAttribute("value"):j!=null&&(j!==e[h]||x=="progress"&&!j||x=="option"&&j!=w[h])&&dp(e,h,j,w[h],s),h="checked",_!=null&&_!=e[h]&&dp(e,h,_,w[h],s))}return e}function E_(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){Pt.__e(s,n)}}function _L(e,t,n){var r,s;if(Pt.unmount&&Pt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||E_(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){Pt.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&_L(r[s],t,n||typeof e.type!="function");n||P_(e.__e),e.__c=e.__=e.__e=void 0}function jG(e,t,n){return this.constructor(e,n)}function OC(e,t,n){var r,s,i,l;t==document&&(t=document.documentElement),Pt.__&&Pt.__(e,t),s=(r=!1)?null:t.__k,i=[],l=[],k_(t,e=t.__k=T_(no,null,[e]),s||Sh,Sh,t.namespaceURI,s?null:t.firstChild?yf.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,l),bL(i,e,l)}function SL(e,t,n){var r,s,i,l,c=gi({},e.props);for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)i=="key"?r=t[i]:i=="ref"?s=t[i]:c[i]=t[i]===void 0&&l!=null?l[i]:t[i];return arguments.length>2&&(c.children=arguments.length>3?yf.call(arguments,2):n),Fd(e.type,c,r||e.key,s||e.ref,null)}yf=gL.slice,Pt={__e:function(e,t,n,r){for(var s,i,l;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),l=s.__d),l)return s.__E=s}catch(c){e=c}throw e}},hL=0,Si.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=gi({},this.state),typeof e=="function"&&(e=e(gi({},n),this.props)),e&&gi(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),RC(this))},Si.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),RC(this))},Si.prototype.render=no,Aa=[],fL=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pL=function(e,t){return e.__v.__b-t.__v.__b},qm.__r=0,mL=/(PointerCapture)$|Capture$/i,j_=0,V0=FC(!1),H0=FC(!0);var PG=0;function R(e,t,n,r,s,i){t||(t={});var l,c,d=t;if("ref"in d)for(c in d={},t)c=="ref"?l=t[c]:d[c]=t[c];var h={type:e,props:d,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--PG,__i:-1,__u:0,__source:s,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(c in l)d[c]===void 0&&(d[c]=l[c]);return Pt.vnode&&Pt.vnode(h),h}var Nh,tn,$v,DC,Ch=0,NL=[],dn=Pt,UC=dn.__b,BC=dn.__r,zC=dn.diffed,$C=dn.__c,VC=dn.unmount,HC=dn.__;function A_(e,t){dn.__h&&dn.__h(tn,e,Ch||t),Ch=0;var n=tn.__H||(tn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function yu(e){return Ch=1,TG(jL,e)}function TG(e,t,n){var r=A_(Nh++,2);if(r.t=e,!r.__c&&(r.__=[jL(void 0,t),function(c){var d=r.__N?r.__N[0]:r.__[0],h=r.t(d,c);d!==h&&(r.__N=[h,r.__[1]],r.__c.setState({}))}],r.__c=tn,!tn.__f)){var s=function(c,d,h){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!i||i.call(this,c,d,h);var p=r.__c.props!==c;return f.forEach(function(g){if(g.__N){var b=g.__[0];g.__=g.__N,g.__N=void 0,b!==g.__[0]&&(p=!0)}}),i&&i.call(this,c,d,h)||p};tn.__f=!0;var i=tn.shouldComponentUpdate,l=tn.componentWillUpdate;tn.componentWillUpdate=function(c,d,h){if(this.__e){var f=i;i=void 0,s(c,d,h),i=f}l&&l.call(this,c,d,h)},tn.shouldComponentUpdate=s}return r.__N||r.__}function Zm(e,t){var n=A_(Nh++,3);!dn.__s&&CL(n.__H,t)&&(n.__=e,n.u=t,tn.__H.__h.push(n))}function Od(e){return Ch=5,I_(function(){return{current:e}},[])}function I_(e,t){var n=A_(Nh++,7);return CL(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Gm(e,t){return Ch=8,I_(function(){return e},t)}function kG(){for(var e;e=NL.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Vp),e.__H.__h.forEach(q0),e.__H.__h=[]}catch(t){e.__H.__h=[],dn.__e(t,e.__v)}}dn.__b=function(e){tn=null,UC&&UC(e)},dn.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),HC&&HC(e,t)},dn.__r=function(e){BC&&BC(e),Nh=0;var t=(tn=e.__c).__H;t&&($v===tn?(t.__h=[],tn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Vp),t.__h.forEach(q0),t.__h=[],Nh=0)),$v=tn},dn.diffed=function(e){zC&&zC(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(NL.push(t)!==1&&DC===dn.requestAnimationFrame||((DC=dn.requestAnimationFrame)||EG)(kG)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),$v=tn=null},dn.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Vp),n.__h=n.__h.filter(function(r){return!r.__||q0(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],dn.__e(r,n.__v)}}),$C&&$C(e,t)},dn.unmount=function(e){VC&&VC(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Vp(r)}catch(s){t=s}}),n.__H=void 0,t&&dn.__e(t,n.__v))};var WC=typeof requestAnimationFrame=="function";function EG(e){var t,n=function(){clearTimeout(r),WC&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);WC&&(t=requestAnimationFrame(n))}function Vp(e){var t=tn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),tn=t}function q0(e){var t=tn;e.__c=e.__(),tn=t}function CL(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function jL(e,t){return typeof t=="function"?t(e):t}const AG={position:"relative",width:"100%",minHeight:"100%"},IG={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};function MG({data:e,rowHeight:t,renderRow:n,overscanCount:r=10,padding:s=4,...i}){const l=Od(null),[c,d]=yu(0),[h,f]=yu(0);Zm(()=>{function x(){l.current!=null&&h!==l.current.offsetHeight&&f(l.current.offsetHeight)}return x(),window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[h]);const p=Gm(()=>{l.current&&d(l.current.scrollTop)},[]);let g=Math.floor(c/t),b=Math.floor(h/t);r&&(g=Math.max(0,g-g%r),b+=r);const j=g+b+s,_=e.slice(g,j),w={...AG,height:e.length*t},S={...IG,top:g*t};return R("div",{onScroll:p,ref:l,...i,children:R("div",{role:"presentation",style:w,children:R("div",{role:"presentation",style:S,children:_.map(n)})})})}class PL{constructor(t,n){I(this,"uppy");I(this,"opts");I(this,"id");I(this,"defaultLocale");I(this,"i18n");I(this,"i18nArray");I(this,"type");I(this,"VERSION");this.uppy=t,this.opts=n??{}}getPluginState(){const{plugins:t}=this.uppy.getState();return(t==null?void 0:t[this.id])||{}}setPluginState(t){const{plugins:n}=this.uppy.getState();this.uppy.setState({plugins:{...n,[this.id]:{...n[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const t=new uL([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(t){}afterUpdate(){}}var ci,Rh;class RG{constructor(t){te(this,ci);te(this,Rh,[]);ne(this,ci,t)}on(t,n){return T(this,Rh).push([t,n]),T(this,ci).on(t,n)}remove(){for(const[t,n]of T(this,Rh).splice(0))T(this,ci).off(t,n)}onFilePause(t,n){this.on("upload-pause",(r,s)=>{t===(r==null?void 0:r.id)&&n(s)})}onFileRemove(t,n){this.on("file-removed",r=>{t===r.id&&n(r.id)})}onPause(t,n){this.on("upload-pause",(r,s)=>{t===(r==null?void 0:r.id)&&n(s)})}onRetry(t,n){this.on("upload-retry",r=>{t===(r==null?void 0:r.id)&&n()})}onRetryAll(t,n){this.on("retry-all",()=>{T(this,ci).getFile(t)&&n()})}onPauseAll(t,n){this.on("pause-all",()=>{T(this,ci).getFile(t)&&n()})}onCancelAll(t,n){this.on("cancel-all",(...r)=>{T(this,ci).getFile(t)&&n(...r)})}onResumeAll(t,n){this.on("resume-all",()=>{T(this,ci).getFile(t)&&n()})}}ci=new WeakMap,Rh=new WeakMap;const LG={debug:()=>{},warn:()=>{},error:(...e)=>console.error(`[Uppy] [${$p()}]`,...e)},FG={debug:(...e)=>console.debug(`[Uppy] [${$p()}]`,...e),warn:(...e)=>console.warn(`[Uppy] [${$p()}]`,...e),error:(...e)=>console.error(`[Uppy] [${$p()}]`,...e)};function OG(e){let t=null,n;return(...r)=>(n=r,t||(t=Promise.resolve().then(()=>(t=null,e(...n)))),t)}var Lh;const og=class og extends PL{constructor(){super(...arguments);te(this,Lh);I(this,"isTargetDOMEl");I(this,"el");I(this,"parent");I(this,"title")}getTargetPlugin(n){let r;if(typeof(n==null?void 0:n.addTarget)=="function")r=n,r instanceof og||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:r,UIPlugin:og}}));else if(typeof n=="function"){const s=n;this.uppy.iteratePlugins(i=>{i instanceof s&&(r=i)})}return r}mount(n,r){const s=r.id,i=rG(n);if(i){this.isTargetDOMEl=!0;const d=document.createElement("div");return d.classList.add("uppy-Root"),ne(this,Lh,OG(h=>{this.uppy.getPlugin(this.id)&&(OC(this.render(h,d),d),this.afterUpdate())})),this.uppy.log(`Installing ${s} to a DOM element '${n}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),OC(this.render(this.uppy.getState(),d),d),this.el=d,i.appendChild(d),d.dir=this.opts.direction||hG(d)||"ltr",this.onMount(),this.el}const l=this.getTargetPlugin(n);if(l)return this.uppy.log(`Installing ${s} to ${l.id}`),this.parent=l,this.el=l.addTarget(r),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let c=`Invalid target option given to ${s}.`;throw typeof n=="function"?c+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":c+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(c)}render(n,r){throw new Error("Extend the render method to add your plugin to a DOM element")}update(n){var r;this.el!=null&&((r=T(this,Lh))==null||r.call(this,n))}unmount(){var n;this.isTargetDOMEl&&((n=this.el)==null||n.remove()),this.onUnmount()}onMount(){}onUnmount(){}};Lh=new WeakMap;let Km=og;const DG="5.0.0",UG={version:DG};var Dc,ag,kL;class TL{constructor(){te(this,ag);I(this,"state",{});te(this,Dc,new Set)}getState(){return this.state}setState(t){const n={...this.state},r={...this.state,...t};this.state=r,ie(this,ag,kL).call(this,n,r,t)}subscribe(t){return T(this,Dc).add(t),()=>{T(this,Dc).delete(t)}}}Dc=new WeakMap,ag=new WeakSet,kL=function(...t){T(this,Dc).forEach(n=>{n(...t)})},I(TL,"VERSION",UG.version);function BG(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var M_=BG,zG=typeof cd=="object"&&cd&&cd.Object===Object&&cd,$G=zG,VG=$G,HG=typeof self=="object"&&self&&self.Object===Object&&self,WG=VG||HG||Function("return this")(),EL=WG,qG=EL,ZG=function(){return qG.Date.now()},GG=ZG,KG=/\s/;function QG(e){for(var t=e.length;t--&&KG.test(e.charAt(t)););return t}var YG=QG,XG=YG,JG=/^\s+/;function eK(e){return e&&e.slice(0,XG(e)+1).replace(JG,"")}var tK=eK,nK=EL,rK=nK.Symbol,AL=rK,qC=AL,IL=Object.prototype,sK=IL.hasOwnProperty,iK=IL.toString,id=qC?qC.toStringTag:void 0;function oK(e){var t=sK.call(e,id),n=e[id];try{e[id]=void 0;var r=!0}catch{}var s=iK.call(e);return r&&(t?e[id]=n:delete e[id]),s}var aK=oK,lK=Object.prototype,cK=lK.toString;function uK(e){return cK.call(e)}var dK=uK,ZC=AL,hK=aK,fK=dK,pK="[object Null]",mK="[object Undefined]",GC=ZC?ZC.toStringTag:void 0;function gK(e){return e==null?e===void 0?mK:pK:GC&&GC in Object(e)?hK(e):fK(e)}var yK=gK;function vK(e){return e!=null&&typeof e=="object"}var xK=vK,bK=yK,wK=xK,_K="[object Symbol]";function SK(e){return typeof e=="symbol"||wK(e)&&bK(e)==_K}var NK=SK,CK=tK,KC=M_,jK=NK,QC=NaN,PK=/^[-+]0x[0-9a-f]+$/i,TK=/^0b[01]+$/i,kK=/^0o[0-7]+$/i,EK=parseInt;function AK(e){if(typeof e=="number")return e;if(jK(e))return QC;if(KC(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=KC(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=CK(e);var n=TK.test(e);return n||kK.test(e)?EK(e.slice(2),n?2:8):PK.test(e)?QC:+e}var IK=AK,MK=M_,Vv=GG,YC=IK,RK="Expected a function",LK=Math.max,FK=Math.min;function OK(e,t,n){var r,s,i,l,c,d,h=0,f=!1,p=!1,g=!0;if(typeof e!="function")throw new TypeError(RK);t=YC(t)||0,MK(n)&&(f=!!n.leading,p="maxWait"in n,i=p?LK(YC(n.maxWait)||0,t):i,g="trailing"in n?!!n.trailing:g);function b(k){var M=r,z=s;return r=s=void 0,h=k,l=e.apply(z,M),l}function j(k){return h=k,c=setTimeout(S,t),f?b(k):l}function _(k){var M=k-d,z=k-h,D=t-M;return p?FK(D,i-z):D}function w(k){var M=k-d,z=k-h;return d===void 0||M>=t||M<0||p&&z>=i}function S(){var k=Vv();if(w(k))return x(k);c=setTimeout(S,_(k))}function x(k){return c=void 0,g&&r?b(k):(r=s=void 0,l)}function N(){c!==void 0&&clearTimeout(c),h=0,r=d=s=c=void 0}function P(){return c===void 0?l:x(Vv())}function E(){var k=Vv(),M=w(k);if(r=arguments,s=this,d=k,M){if(c===void 0)return j(d);if(p)return clearTimeout(c),c=setTimeout(S,t),b(d)}return c===void 0&&(c=setTimeout(S,t)),l}return E.cancel=N,E.flush=P,E}var ML=OK;const DK=Ei(ML);var UK=ML,BK=M_,zK="Expected a function";function $K(e,t,n){var r=!0,s=!0;if(typeof e!="function")throw new TypeError(zK);return BK(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),UK(e,t,{leading:r,maxWait:t,trailing:s})}var VK=$K;const HK=Ei(VK);var WK=function(){var t={},n=t._fns={};t.emit=function(l,c,d,h,f,p,g){var b=r(l);b.length&&s(l,b,[c,d,h,f,p,g])},t.on=function(l,c){n[l]||(n[l]=[]),n[l].push(c)},t.once=function(l,c){function d(){c.apply(this,arguments),t.off(l,d)}this.on(l,d)},t.off=function(l,c){var d=[];if(l&&c){var h=this._fns[l],f=0,p=h?h.length:0;for(f;f<p;f++)h[f]!==c&&d.push(h[f])}d.length?this._fns[l]=d:delete this._fns[l]};function r(i){var l=n[i]?n[i]:[],c=i.indexOf(":"),d=c===-1?[i]:[i.substring(0,c),i.substring(c+1)],h=Object.keys(n),f=0,p=h.length;for(f;f<p;f++){var g=h[f];if(g==="*"&&(l=l.concat(n[g])),d.length===2&&d[0]===g){l=l.concat(n[g]);break}}return l}function s(i,l,c){var d=0,h=l.length;for(d;d<h&&l[d];d++)l[d].event=i,l[d].apply(l[d],c)}return t};const qK=Ei(WK);let ZK="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",R_=(e=21)=>{let t="",n=e|0;for(;n--;)t+=ZK[Math.random()*64|0];return t};const GK="5.0.1",KK={version:GK};function QK(e,t){return t.name?t.name:e.split("/")[0]==="image"?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}const YK={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var XK=function(t){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected a number, got ${typeof t}`);const n=t<0;let r=Math.abs(t);if(n&&(r=-r),r===0)return"0 B";const s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.min(Math.floor(Math.log(r)/Math.log(1024)),s.length-1),l=Number(r/1024**i),c=s[i];return`${l>=10||l%1===0?Math.round(l):l.toFixed(1)} ${c}`};const Oa=Ei(XK);function RL(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}RL.prototype.match=function(e){var t=!0,n=this.parts,r,s=n.length,i;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(i=(e||"").split(this.separator),r=0;t&&r<s;r++)n[r]!=="*"&&(r<i.length?t=n[r]===i[r]:t=!1);t=t&&i}else if(typeof e.splice=="function")for(t=[],r=e.length;r--;)this.match(e[r])&&(t[t.length]=e[r]);else if(typeof e=="object"){t={};for(var l in e)this.match(l)&&(t[l]=e[l])}return t};var JK=function(e,t,n){var r=new RL(e,n||/[\/\.]/);return typeof t<"u"?r.match(t):r},eQ=JK,tQ=/[\/\+\.]/,nQ=function(e,t){function n(r){var s=eQ(r,e,tQ);return s&&s.length>=2}return t?n(t.split(";")[0]):n};const rQ=Ei(nQ),sQ={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Es extends Error{constructor(n,r){super(n);I(this,"isUserFacing");I(this,"file");I(this,"isRestriction",!0);this.isUserFacing=(r==null?void 0:r.isUserFacing)??!0,r!=null&&r.file&&(this.file=r.file)}}class iQ{constructor(t,n){I(this,"getI18n");I(this,"getOpts");this.getI18n=n,this.getOpts=()=>{var s;const r=t();if(((s=r.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(t,n){const{maxTotalFileSize:r,maxNumberOfFiles:s}=this.getOpts().restrictions;if(s&&t.filter(l=>!l.isGhost).length+n.length>s)throw new Es(`${this.getI18n()("youCanOnlyUploadX",{smart_count:s})}`);if(r){const i=[...t,...n].reduce((l,c)=>l+(c.size??0),0);if(i>r)throw new Es(this.getI18n()("aggregateExceedsSize",{sizeAllowed:Oa(r),size:Oa(i)}))}}validateSingleFile(t){const{maxFileSize:n,minFileSize:r,allowedFileTypes:s}=this.getOpts().restrictions;if(s&&!s.some(l=>l.includes("/")?t.type?rQ(t.type.replace(/;.*?$/,""),l):!1:l[0]==="."&&t.extension?t.extension.toLowerCase()===l.slice(1).toLowerCase():!1)){const l=s.join(", ");throw new Es(this.getI18n()("youCanOnlyUploadFileTypes",{types:l}),{file:t})}if(n&&t.size!=null&&t.size>n)throw new Es(this.getI18n()("exceedsSize",{size:Oa(n),file:t.name??this.getI18n()("unnamed")}),{file:t});if(r&&t.size!=null&&t.size<r)throw new Es(this.getI18n()("inferiorSize",{size:Oa(r)}),{file:t})}validate(t,n){n.forEach(r=>{this.validateSingleFile(r)}),this.validateAggregateRestrictions(t,n)}validateMinNumberOfFiles(t){const{minNumberOfFiles:n}=this.getOpts().restrictions;if(n&&Object.keys(t).length<n)throw new Es(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:n}))}getMissingRequiredMetaFields(t){const n=new Es(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:t.name??this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,s=[];for(const i of r)(!Object.hasOwn(t.meta,i)||t.meta[i]==="")&&s.push(i);return{missingFields:s,error:n}}}function oQ(e){if(e==null&&typeof navigator<"u"&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const r=t[1].split(".",2),s=parseInt(r[0],10),i=parseInt(r[1],10);return s<15||s===15&&i<15063||s>18||s===18&&i>=18218}const hp={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var Ss,Ns,Fh,Za,Uc,Bc,Ga,ze,Ea,G0,LL,K0,FL,Q0,Y0,X0,J0,lg,eb,Ka,OL,DL,$o,Oh,vd,UL,Hp,xd;const cg=class cg{constructor(t){te(this,ze);te(this,Ss,Object.create(null));te(this,Ns);te(this,Fh);te(this,Za,qK());te(this,Uc,new Set);te(this,Bc,new Set);te(this,Ga,new Set);I(this,"defaultLocale");I(this,"locale");I(this,"opts");I(this,"store");I(this,"i18n");I(this,"i18nArray");I(this,"scheduledAutoProceed",null);I(this,"wasOffline",!1);te(this,lg,(t,n)=>{const r=t?this.getFile(t.id):void 0;if(t==null||!r){this.log(`Not setting progress for a file that has been removed: ${t==null?void 0:t.id}`);return}if(r.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${t.id}`);return}const s={bytesTotal:n.bytesTotal,percentage:n.bytesTotal!=null&&Number.isFinite(n.bytesTotal)&&n.bytesTotal>0?Math.round(n.bytesUploaded/n.bytesTotal*100):void 0};r.progress.uploadStarted!=null?this.setFileState(t.id,{progress:{...r.progress,...s,bytesUploaded:n.bytesUploaded}}):this.setFileState(t.id,{progress:{...r.progress,...s}}),T(this,Ka).call(this)});te(this,Ka,HK(()=>ie(this,ze,eb).call(this),500,{leading:!0,trailing:!0}));te(this,$o,this.updateOnlineStatus.bind(this));te(this,Oh,new Map);this.defaultLocale=YK;const n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:sQ,meta:{},onBeforeFileAdded:(s,i)=>!Object.hasOwn(i,s.id),onBeforeUpload:s=>s,store:new TL,logger:LG,infoTimeout:5e3},r={...n,...t};this.opts={...r,restrictions:{...n.restrictions,...t==null?void 0:t.restrictions}},t!=null&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t!=null&&t.debug&&(this.opts.logger=FG),this.log(`Using Core v${cg.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...hp,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:oQ(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),ne(this,Ns,new iQ(()=>this.opts,()=>this.i18n)),ne(this,Fh,this.store.subscribe((s,i,l)=>{this.emit("state-update",s,i,l),this.updateAll(i)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),ie(this,ze,DL).call(this)}emit(t,...n){T(this,Za).emit(t,...n)}on(t,n){return T(this,Za).on(t,n),this}once(t,n){return T(this,Za).once(t,n),this}off(t,n){return T(this,Za).off(t,n),this}updateAll(t){this.iteratePlugins(n=>{n.update(t)})}setState(t){this.store.setState(t)}getState(){return this.store.getState()}patchFilesState(t){const n=this.getState().files;this.setState({files:{...n,...Object.fromEntries(Object.entries(t).map(([r,s])=>[r,{...n[r],...s}]))}})}setFileState(t,n){if(!this.getState().files[t])throw new Error(`Cant set state for ${t} (the file could have been removed)`);this.patchFilesState({[t]:n})}i18nInit(){const t=r=>this.log(`Missing i18n string: ${r}`,"error"),n=new uL([this.defaultLocale,this.opts.locale],{onMissingKey:t});this.i18n=n.translate.bind(n),this.i18nArray=n.translateArray.bind(n),this.locale=n.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t==null?void 0:t.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(n=>{n.setOptions(t)}),this.setState(void 0)}resetProgress(){const t={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},n={...this.getState().files},r=Object.create(null);Object.keys(n).forEach(s=>{r[s]={...n[s],progress:{...n[s].progress,...t},tus:void 0,transloadit:void 0}}),this.setState({files:r,...hp})}clear(){const{capabilities:t,currentUploads:n}=this.getState();if(Object.keys(n).length>0&&!t.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...hp,files:{}})}addPreProcessor(t){T(this,Uc).add(t)}removePreProcessor(t){return T(this,Uc).delete(t)}addPostProcessor(t){T(this,Ga).add(t)}removePostProcessor(t){return T(this,Ga).delete(t)}addUploader(t){T(this,Bc).add(t)}removeUploader(t){return T(this,Bc).delete(t)}setMeta(t){const n={...this.getState().meta,...t},r={...this.getState().files};Object.keys(r).forEach(s=>{r[s]={...r[s],meta:{...r[s].meta,...t}}}),this.log("Adding metadata:"),this.log(t),this.setState({meta:n,files:r})}setFileMeta(t,n){const r={...this.getState().files};if(!r[t]){this.log(`Was trying to set metadata for a file that has been removed: ${t}`);return}const s={...r[t].meta,...n};r[t]={...r[t],meta:s},this.setState({files:r})}getFile(t){return this.getState().files[t]}getFiles(){const{files:t}=this.getState();return Object.values(t)}getFilesByIds(t){return t.map(n=>this.getFile(n))}getObjectOfFilesPerState(){const{files:t,totalProgress:n,error:r}=this.getState(),s=Object.values(t),i=[],l=[],c=[],d=[],h=[],f=[],p=[],g=[],b=[];for(const j of s){const{progress:_}=j;!_.uploadComplete&&_.uploadStarted&&(i.push(j),j.isPaused||g.push(j)),_.uploadStarted||l.push(j),(_.uploadStarted||_.preprocess||_.postprocess)&&c.push(j),_.uploadStarted&&d.push(j),j.isPaused&&h.push(j),_.uploadComplete&&f.push(j),j.error&&p.push(j),(_.preprocess||_.postprocess)&&b.push(j)}return{newFiles:l,startedFiles:c,uploadStartedFiles:d,pausedFiles:h,completeFiles:f,erroredFiles:p,inProgressFiles:i,inProgressNotPausedFiles:g,processingFiles:b,isUploadStarted:d.length>0,isAllComplete:n===100&&f.length===s.length&&b.length===0,isAllErrored:!!r&&p.length===s.length,isAllPaused:i.length!==0&&h.length===i.length,isUploadInProgress:i.length>0,isSomeGhost:s.some(j=>j.isGhost)}}validateRestrictions(t,n=this.getFiles()){try{T(this,Ns).validate(n,[t])}catch(r){return r}return null}validateSingleFile(t){try{T(this,Ns).validateSingleFile(t)}catch(n){return n.message}return null}validateAggregateRestrictions(t){const n=this.getFiles();try{T(this,Ns).validateAggregateRestrictions(n,t)}catch(r){return r.message}return null}checkIfFileAlreadyExists(t){const{files:n}=this.getState();return!!(n[t]&&!n[t].isGhost)}addFile(t){ie(this,ze,K0).call(this,t);const{nextFilesState:n,validFilesToAdd:r,errors:s}=ie(this,ze,Y0).call(this,[t]),i=s.filter(c=>c.isRestriction);if(ie(this,ze,Ea).call(this,i),s.length>0)throw s[0];this.setState({files:n});const[l]=r;return this.emit("file-added",l),this.emit("files-added",r),this.log(`Added file: ${l.name}, ${l.id}, mime type: ${l.type}`),ie(this,ze,Q0).call(this),l.id}addFiles(t){ie(this,ze,K0).call(this);const{nextFilesState:n,validFilesToAdd:r,errors:s}=ie(this,ze,Y0).call(this,t),i=s.filter(c=>c.isRestriction);ie(this,ze,Ea).call(this,i);const l=s.filter(c=>!c.isRestriction);if(l.length>0){let c=`Multiple errors occurred while adding files:
`;if(l.forEach(d=>{c+=`
 * ${d.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:l.length}),details:c},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(l,c);{const d=new Error(c);throw d.errors=l,d}}this.setState({files:n}),r.forEach(c=>{this.emit("file-added",c)}),this.emit("files-added",r),r.length>5?this.log(`Added batch of ${r.length} files`):Object.values(r).forEach(c=>{this.log(`Added file: ${c.name}
 id: ${c.id}
 type: ${c.type}`)}),r.length>0&&ie(this,ze,Q0).call(this)}removeFiles(t){const{files:n,currentUploads:r}=this.getState(),s={...n},i={...r},l=Object.create(null);t.forEach(f=>{n[f]&&(l[f]=n[f],delete s[f])});function c(f){return l[f]===void 0}Object.keys(i).forEach(f=>{const p=r[f].fileIDs.filter(c);if(p.length===0){delete i[f];return}const{capabilities:g}=this.getState();if(p.length!==r[f].fileIDs.length&&!g.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");i[f]={...r[f],fileIDs:p}});const d={currentUploads:i,files:s};Object.keys(s).length===0&&(d.allowNewUpload=!0,d.error=null,d.recoveredState=null),this.setState(d),T(this,Ka).call(this);const h=Object.keys(l);h.forEach(f=>{this.emit("file-removed",l[f])}),h.length>5?this.log(`Removed ${h.length} files`):this.log(`Removed files: ${h.join(", ")}`)}removeFile(t){this.removeFiles([t])}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).progress.uploadComplete)return;const n=this.getFile(t),s=!(n.isPaused||!1);return this.setFileState(t,{isPaused:s}),this.emit("upload-pause",n,s),s}pauseAll(){const t={...this.getState().files};Object.keys(t).filter(r=>!t[r].progress.uploadComplete&&t[r].progress.uploadStarted).forEach(r=>{const s={...t[r],isPaused:!0};t[r]=s}),this.setState({files:t}),this.emit("pause-all")}resumeAll(){const t={...this.getState().files};Object.keys(t).filter(r=>!t[r].progress.uploadComplete&&t[r].progress.uploadStarted).forEach(r=>{const s={...t[r],isPaused:!1,error:null};t[r]=s}),this.setState({files:t}),this.emit("resume-all")}async retryAll(){const t=await ie(this,ze,J0).call(this);return this.emit("complete",t),t}cancelAll(){this.emit("cancel-all");const{files:t}=this.getState(),n=Object.keys(t);n.length&&this.removeFiles(n),this.setState(hp)}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(t));const n=ie(this,ze,vd).call(this,[t],{forceAllowNewUpload:!0});return ie(this,ze,xd).call(this,n)}logout(){this.iteratePlugins(t=>{var n,r;(r=(n=t.provider)==null?void 0:n.logout)==null||r.call(n)})}[Symbol.for("uppy test: updateTotalProgress")](){return ie(this,ze,eb).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t,...n){if(typeof t!="function"){const l=`Expected a plugin class, but got ${t===null?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}const r=new t(this,...n),s=r.id;if(!s)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");const i=this.getPlugin(s);if(i){const l=`Already found a plugin named '${i.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return t.VERSION&&this.log(`Using ${s} v${t.VERSION}`),r.type in T(this,Ss)?T(this,Ss)[r.type].push(r):T(this,Ss)[r.type]=[r],r.install(),this.emit("plugin-added",r),this}getPlugin(t){for(const n of Object.values(T(this,Ss))){const r=n.find(s=>s.id===t);if(r!=null)return r}}[Symbol.for("uppy test: getPlugins")](t){return T(this,Ss)[t]}iteratePlugins(t){Object.values(T(this,Ss)).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();const n=T(this,Ss)[t.type],r=n.findIndex(l=>l.id===t.id);r!==-1&&n.splice(r,1);const i={plugins:{...this.getState().plugins,[t.id]:void 0}};this.setState(i)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),T(this,Fh).call(this),this.iteratePlugins(t=>{this.removePlugin(t)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",T(this,$o)),window.removeEventListener("offline",T(this,$o)))}hideInfo(){const{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,n="info",r=3e3){const s=typeof t=="object";this.setState({info:[...this.getState().info,{type:n,message:s?t.message:t,details:s?t.details:null}]}),setTimeout(()=>this.hideInfo(),r),this.emit("info-visible")}log(t,n){const{logger:r}=this.opts;switch(n){case"error":r.error(t);break;case"warning":r.warn(t);break;default:r.debug(t);break}}registerRequestClient(t,n){T(this,Oh).set(t,n)}getRequestClientForFile(t){if(!t.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${t.id}`);const n=T(this,Oh).get(t.remote.requestClientId);if(n==null)throw new Error(`requestClientId "${t.remote.requestClientId}" not registered for file "${t.id}"`);return n}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?ie(this,ze,xd).call(this,t):(ie(this,ze,Hp).call(this,t),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...t){return ie(this,ze,vd).call(this,...t)}addResultData(t,n){if(!ie(this,ze,UL).call(this,t)){this.log(`Not setting result for an upload that has been removed: ${t}`);return}const{currentUploads:r}=this.getState(),s={...r[t],result:{...r[t].result,...n}};this.setState({currentUploads:{...r,[t]:s}})}async upload(){var s;(s=T(this,Ss).uploader)!=null&&s.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(ie(this,ze,X0).call(this).length>0){const i=await ie(this,ze,J0).call(this);if(!(this.getFiles().filter(c=>c.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:t}=this.getState())}const r=this.opts.onBeforeUpload(t);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(t=r,this.setState({files:t})),Promise.resolve().then(()=>T(this,Ns).validateMinNumberOfFiles(t)).catch(i=>{throw ie(this,ze,Ea).call(this,[i]),i}).then(()=>{if(!ie(this,ze,LL).call(this,t))throw new Es(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{const{currentUploads:i}=this.getState(),l=Object.values(i).flatMap(f=>f.fileIDs),c=[];Object.keys(t).forEach(f=>{const p=this.getFile(f);!p.progress.uploadStarted&&l.indexOf(f)===-1&&c.push(p.id)});const d=ie(this,ze,vd).call(this,c),h=await ie(this,ze,xd).call(this,d);return this.emit("complete",h),h}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}};Ss=new WeakMap,Ns=new WeakMap,Fh=new WeakMap,Za=new WeakMap,Uc=new WeakMap,Bc=new WeakMap,Ga=new WeakMap,ze=new WeakSet,Ea=function(t){for(const l of t)l.isRestriction?this.emit("restriction-failed",l.file,l):this.emit("error",l,l.file),this.log(l,"warning");const n=t.filter(l=>l.isUserFacing),r=4,s=n.slice(0,r),i=n.slice(r);s.forEach(({message:l,details:c=""})=>{this.info({message:l,details:c},"error",this.opts.infoTimeout)}),i.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:i.length})})},G0=function(t){const{missingFields:n,error:r}=T(this,Ns).getMissingRequiredMetaFields(t);return n.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:n,error:r.message}),this.log(r.message),this.emit("restriction-failed",t,r),!1):(n.length===0&&t.missingRequiredMetaFields&&this.setFileState(t.id,{missingRequiredMetaFields:[]}),!0)},LL=function(t){let n=!0;for(const r of Object.values(t))ie(this,ze,G0).call(this,r)||(n=!1);return n},K0=function(t){const{allowNewUpload:n}=this.getState();if(n===!1){const r=new Es(this.i18n("noMoreFilesAllowed"),{file:t});throw ie(this,ze,Ea).call(this,[r]),r}},FL=function(t){const n=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,r=rL(n),s=QK(r,n),i=nL(s).extension,l=aG(n,this.getID()),c=n.meta||{};c.name=s,c.type=r;const d=Number.isFinite(n.data.size)?n.data.size:null;return{source:n.source||"",id:l,name:s,extension:i||"",meta:{...this.getState().meta,...c},type:r,data:n.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:d,uploadComplete:!1,uploadStarted:null},size:d,isGhost:!1,isRemote:n.isRemote||!1,remote:n.remote,preview:n.preview}},Q0=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))},Y0=function(t){var l;let{files:n}=this.getState(),r={...n};const s=[],i=[];for(const c of t)try{let d=ie(this,ze,FL).call(this,c);const h=(l=n[d.id])==null?void 0:l.isGhost;h&&(d={...n[d.id],isGhost:!1,data:c.data},this.log(`Replaced the blob in the restored ghost file: ${d.name}, ${d.id}`));const f=this.opts.onBeforeFileAdded(d,r);if(n=this.getState().files,r={...n,...r},!f&&this.checkIfFileAlreadyExists(d.id))throw new Es(this.i18n("noDuplicates",{fileName:d.name??this.i18n("unnamed")}),{file:c});if(f===!1&&!h)throw new Es("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:c});typeof f=="object"&&f!==null&&(d=f),T(this,Ns).validateSingleFile(d),r[d.id]=d,s.push(d)}catch(d){i.push(d)}try{T(this,Ns).validateAggregateRestrictions(Object.values(n),s)}catch(c){return i.push(c),{nextFilesState:n,validFilesToAdd:[],errors:i}}return{nextFilesState:r,validFilesToAdd:s,errors:i}},X0=function(){const{files:t}=this.getState();return Object.keys(t).filter(n=>{const r=t[n];return r.error&&(!r.missingRequiredMetaFields||r.missingRequiredMetaFields.length===0)})},J0=async function(){const t=ie(this,ze,X0).call(this),n={...this.getState().files};if(t.forEach(s=>{n[s]={...n[s],isPaused:!1,error:null}}),this.setState({files:n,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};const r=ie(this,ze,vd).call(this,t,{forceAllowNewUpload:!0});return ie(this,ze,xd).call(this,r)},lg=new WeakMap,eb=function(){const t=ie(this,ze,OL).call(this);let n=null;t!=null&&(n=Math.round(t*100),n>100?n=100:n<0&&(n=0)),this.emit("progress",n??0),this.setState({totalProgress:n??0})},Ka=new WeakMap,OL=function(){const n=this.getFiles().filter(d=>d.progress.uploadStarted||d.progress.preprocess||d.progress.postprocess);if(n.length===0)return 0;if(n.every(d=>d.progress.uploadComplete))return 1;const r=d=>d.progress.bytesTotal!=null&&d.progress.bytesTotal!==0,s=n.filter(r),i=n.filter(d=>!r(d));if(s.every(d=>d.progress.uploadComplete)&&i.length>0&&!i.every(d=>d.progress.uploadComplete))return null;const l=s.reduce((d,h)=>d+(h.progress.bytesTotal??0),0),c=s.reduce((d,h)=>d+(h.progress.bytesUploaded||0),0);return l===0?0:c/l},DL=function(){const t=(s,i,l)=>{let c=s.message||"Unknown error";s.details&&(c+=` ${s.details}`),this.setState({error:c}),i!=null&&i.id in this.getState().files&&this.setFileState(i.id,{error:c,response:l})};this.on("error",t),this.on("upload-error",(s,i,l)=>{if(t(i,s,l),typeof i=="object"&&i.message){this.log(i.message,"error");const c=new Error(this.i18n("failedToUpload",{file:(s==null?void 0:s.name)??""}));c.isUserFacing=!0,c.details=i.message,i.details&&(c.details+=` ${i.details}`),ie(this,ze,Ea).call(this,[c])}else ie(this,ze,Ea).call(this,[i])});let n=null;this.on("upload-stalled",(s,i)=>{const{message:l}=s,c=i.map(d=>d.meta.name).join(", ");n||(this.info({message:l,details:c},"warning",this.opts.infoTimeout),n=setTimeout(()=>{n=null},this.opts.infoTimeout)),this.log(`${l} ${c}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const r=s=>{const i=s.filter(c=>{const d=c!=null&&this.getFile(c.id);return d||this.log(`Not setting progress for a file that has been removed: ${c==null?void 0:c.id}`),d}),l=Object.fromEntries(i.map(c=>[c.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:c.size}}]));this.patchFilesState(l)};this.on("upload-start",r),this.on("upload-progress",T(this,lg)),this.on("upload-success",(s,i)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const l=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...l,postprocess:T(this,Ga).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:l.bytesTotal},response:i,uploadURL:i.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:i.bytesUploaded||l.bytesTotal}),T(this,Ka).call(this)}),this.on("preprocess-progress",(s,i)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:i}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const i={...this.getState().files};i[s.id]={...i[s.id],progress:{...i[s.id].progress}},delete i[s.id].progress.preprocess,this.setState({files:i})}),this.on("postprocess-progress",(s,i)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:i}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const i={...this.getState().files};i[s.id]={...i[s.id],progress:{...i[s.id].progress}},delete i[s.id].progress.postprocess,this.setState({files:i})}),this.on("restored",()=>{T(this,Ka).call(this)}),this.on("dashboard:file-edit-complete",s=>{s&&ie(this,ze,G0).call(this,s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",T(this,$o)),window.addEventListener("offline",T(this,$o)),setTimeout(T(this,$o),3e3))},$o=new WeakMap,Oh=new WeakMap,vd=function(t,n={}){const{forceAllowNewUpload:r=!1}=n,{allowNewUpload:s,currentUploads:i}=this.getState();if(!s&&!r)throw new Error("Cannot create a new upload: already uploading.");const l=R_();return this.emit("upload",l,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...i,[l]:{fileIDs:t,step:0,result:{}}}}),l},UL=function(t){const{currentUploads:n}=this.getState();return n[t]},Hp=function(t){const n={...this.getState().currentUploads};delete n[t],this.setState({currentUploads:n})},xd=async function(t){const n=()=>{const{currentUploads:l}=this.getState();return l[t]};let r=n();const s=[...T(this,Uc),...T(this,Bc),...T(this,Ga)];try{for(let l=r.step||0;l<s.length&&r;l++){const c=s[l];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...r,step:l}}});const{fileIDs:d}=r;await c(d,t),r=n()}}catch(l){throw ie(this,ze,Hp).call(this,t),l}if(r){r.fileIDs.forEach(h=>{const f=this.getFile(h);f!=null&&f.progress.postprocess&&this.emit("postprocess-complete",f)});const l=r.fileIDs.map(h=>this.getFile(h)),c=l.filter(h=>!h.error),d=l.filter(h=>h.error);this.addResultData(t,{successful:c,failed:d,uploadID:t}),r=n()}let i;return r&&(i=r.result,ie(this,ze,Hp).call(this,t)),i==null&&(this.log(`Not setting result for an upload that has been removed: ${t}`),i={successful:[],failed:[],uploadID:t}),i},I(cg,"VERSION",KK.version);let Z0=cg;var BL={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(i=s(i,r(c)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var c in i)t.call(i,c)&&i[c]&&(l=s(l,c));return l}function s(i,l){return l?i?i+" "+l:i+l:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(BL);var aQ=BL.exports;const Hs=Ei(aQ);function lQ(){return R("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:R("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zL=typeof self<"u"?self:global;const jh=typeof navigator<"u",cQ=jh&&typeof HTMLImageElement>"u",XC=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),$L=zL.Buffer,VL=!!$L,uQ=e=>e!==void 0;function HL(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(uQ).length===0)}function jn(e){let t=new Error(e);throw delete t.stack,t}function JC(e){let t=function(n){let r=0;return n.ifd0.enabled&&(r+=1024),n.exif.enabled&&(r+=2048),n.makerNote&&(r+=2048),n.userComment&&(r+=1024),n.gps.enabled&&(r+=512),n.interop.enabled&&(r+=100),n.ifd1.enabled&&(r+=1024),r+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Hv=e=>String.fromCharCode.apply(null,e),e2=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Ls{static from(t,n){return t instanceof this&&t.le===n?t:new Ls(t,void 0,void 0,n)}constructor(t,n=0,r,s){if(typeof s=="boolean"&&(this.le=s),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){r===void 0&&(r=t.byteLength-n);let i=new DataView(t,n,r);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Ls){r===void 0&&(r=t.byteLength-n),(n+=t.byteOffset)+r>t.byteOffset+t.byteLength&&jn("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,n,r);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else jn("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,n,r=Ls){return t instanceof DataView||t instanceof Ls?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||jn("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new r(this,n,t.byteLength)}subarray(t,n){return n=n||this._lengthToEnd(t),new Ls(this,t,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,n){return new Uint8Array(this.buffer,this.byteOffset+t,n)}getString(t=0,n=this.byteLength){return s=this.getUint8Array(t,n),e2?e2.decode(s):VL?Buffer.from(s).toString("utf8"):decodeURIComponent(escape(Hv(s)));var s}getLatin1String(t=0,n=this.byteLength){let r=this.getUint8Array(t,n);return Hv(r)}getUnicodeString(t=0,n=this.byteLength){const r=[];for(let s=0;s<n&&t+s<this.byteLength;s+=2)r.push(this.getUint16(t+s));return Hv(r)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,n=this.le){return this.dataView.getInt16(t,n)}getInt32(t,n=this.le){return this.dataView.getInt32(t,n)}getUint16(t,n=this.le){return this.dataView.getUint16(t,n)}getUint32(t,n=this.le){return this.dataView.getUint32(t,n)}getFloat32(t,n=this.le){return this.dataView.getFloat32(t,n)}getFloat64(t,n=this.le){return this.dataView.getFloat64(t,n)}getFloat(t,n=this.le){return this.dataView.getFloat32(t,n)}getDouble(t,n=this.le){return this.dataView.getFloat64(t,n)}getUintBytes(t,n,r){switch(n){case 1:return this.getUint8(t,r);case 2:return this.getUint16(t,r);case 4:return this.getUint32(t,r);case 8:return this.getUint64&&this.getUint64(t,r)}}getUint(t,n,r){switch(n){case 8:return this.getUint8(t,r);case 16:return this.getUint16(t,r);case 32:return this.getUint32(t,r);case 64:return this.getUint64&&this.getUint64(t,r)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function tb(e,t){jn(`${e} '${t}' was not loaded, try using full build of exifr.`)}class L_ extends Map{constructor(t){super(),this.kind=t}get(t,n){return this.has(t)||tb(this.kind,t),n&&(t in n||function(r,s){jn(`Unknown ${r} '${s}'.`)}(this.kind,t),n[t].enabled||tb(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}}var WL=new L_("file parser"),As=new L_("segment parser"),F_=new L_("file reader");let dQ=zL.fetch;function t2(e,t){return(n=e).startsWith("data:")||n.length>1e4?rb(e,t,"base64"):XC&&e.includes("://")?nb(e,t,"url",n2):XC?rb(e,t,"fs"):jh?nb(e,t,"url",n2):void jn("Invalid input argument");var n}async function nb(e,t,n,r){return F_.has(n)?rb(e,t,n):r?async function(s,i){let l=await i(s);return new Ls(l)}(e,r):void jn(`Parser ${n} is not loaded`)}async function rb(e,t,n){let r=new(F_.get(n))(e,t);return await r.read(),r}const n2=e=>dQ(e).then(t=>t.arrayBuffer()),sb=e=>new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>t(r.result||new ArrayBuffer),r.onerror=n,r.readAsArrayBuffer(e)}),O_=new Map,hQ=new Map,fQ=new Map,fp=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],qL=["jfif","xmp","icc","iptc","ihdr"],ib=["tiff",...qL],_n=["ifd0","ifd1","exif","gps","interop"],pp=[...ib,..._n],mp=["makerNote","userComment"],ZL=["translateKeys","translateValues","reviveValues","multiSegment"],gp=[...ZL,"sanitize","mergeOutput","silentErrors"];class GL{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class od extends GL{get needed(){return this.enabled||this.deps.size>0}constructor(t,n,r,s){if(super(),St(this,"enabled",!1),St(this,"skip",new Set),St(this,"pick",new Set),St(this,"deps",new Set),St(this,"translateKeys",!1),St(this,"translateValues",!1),St(this,"reviveValues",!1),this.key=t,this.enabled=n,this.parse=this.enabled,this.applyInheritables(s),this.canBeFiltered=_n.includes(t),this.canBeFiltered&&(this.dict=O_.get(t)),r!==void 0)if(Array.isArray(r))this.parse=this.enabled=!0,this.canBeFiltered&&r.length>0&&this.translateTagSet(r,this.pick);else if(typeof r=="object"){if(this.enabled=!0,this.parse=r.parse!==!1,this.canBeFiltered){let{pick:i,skip:l}=r;i&&i.length>0&&this.translateTagSet(i,this.pick),l&&l.length>0&&this.translateTagSet(l,this.skip)}this.applyInheritables(r)}else r===!0||r===!1?this.parse=this.enabled=r:jn(`Invalid options argument: ${r}`)}applyInheritables(t){let n,r;for(n of ZL)r=t[n],r!==void 0&&(this[n]=r)}translateTagSet(t,n){if(this.dict){let r,s,{tagKeys:i,tagValues:l}=this.dict;for(r of t)typeof r=="string"?(s=l.indexOf(r),s===-1&&(s=i.indexOf(Number(r))),s!==-1&&n.add(Number(i[s]))):n.add(r)}else for(let r of t)n.add(r)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Qm(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Qm(this.pick,this.deps)}}var Jn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},r2=new Map;class D_ extends GL{static useCached(t){let n=r2.get(t);return n!==void 0||(n=new this(t),r2.set(t,n)),n}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):jn(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=jh?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of fp)this[t]=Jn[t];for(t of gp)this[t]=Jn[t];for(t of mp)this[t]=Jn[t];for(t of pp)this[t]=new od(t,Jn[t],void 0,this)}setupFromTrue(){let t;for(t of fp)this[t]=Jn[t];for(t of gp)this[t]=Jn[t];for(t of mp)this[t]=!0;for(t of pp)this[t]=new od(t,!0,void 0,this)}setupFromArray(t){let n;for(n of fp)this[n]=Jn[n];for(n of gp)this[n]=Jn[n];for(n of mp)this[n]=Jn[n];for(n of pp)this[n]=new od(n,!1,void 0,this);this.setupGlobalFilters(t,void 0,_n)}setupFromObject(t){let n;for(n of(_n.ifd0=_n.ifd0||_n.image,_n.ifd1=_n.ifd1||_n.thumbnail,Object.assign(this,t),fp))this[n]=Wv(t[n],Jn[n]);for(n of gp)this[n]=Wv(t[n],Jn[n]);for(n of mp)this[n]=Wv(t[n],Jn[n]);for(n of ib)this[n]=new od(n,Jn[n],t[n],this);for(n of _n)this[n]=new od(n,Jn[n],t[n],this.tiff);this.setupGlobalFilters(t.pick,t.skip,_n,pp),t.tiff===!0?this.batchEnableWithBool(_n,!0):t.tiff===!1?this.batchEnableWithUserValue(_n,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,_n):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,_n)}batchEnableWithBool(t,n){for(let r of t)this[r].enabled=n}batchEnableWithUserValue(t,n){for(let r of t){let s=n[r];this[r].enabled=s!==!1&&s!==void 0}}setupGlobalFilters(t,n,r,s=r){if(t&&t.length){for(let l of s)this[l].enabled=!1;let i=s2(t,r);for(let[l,c]of i)Qm(this[l].pick,c),this[l].enabled=!0}else if(n&&n.length){let i=s2(n,r);for(let[l,c]of i)Qm(this[l].skip,c)}}filterNestedSegmentTags(){let{ifd0:t,exif:n,xmp:r,iptc:s,icc:i}=this;this.makerNote?n.deps.add(37500):n.skip.add(37500),this.userComment?n.deps.add(37510):n.skip.add(37510),r.enabled||t.skip.add(700),s.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:n,gps:r,interop:s}=this;s.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),r.needed&&t.deps.add(34853),this.tiff.enabled=_n.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of _n)this[i].finalizeFilters()}get onlyTiff(){return!qL.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of ib)this[t].enabled&&!As.has(t)&&tb("segment parser",t)}}function s2(e,t){let n,r,s,i,l=[];for(s of t){for(i of(n=O_.get(s),r=[],n))(e.includes(i[0])||e.includes(i[1]))&&r.push(i[0]);r.length&&l.push([s,r])}return l}function Wv(e,t){return e!==void 0?e:t!==void 0?t:void 0}function Qm(e,t){for(let n of t)e.add(n)}St(D_,"default",Jn);class pQ{constructor(t){St(this,"parsers",{}),St(this,"output",{}),St(this,"errors",[]),St(this,"pushToErrors",n=>this.errors.push(n)),this.options=D_.useCached(t)}async read(t){this.file=await function(n,r){return typeof n=="string"?t2(n,r):jh&&!cQ&&n instanceof HTMLImageElement?t2(n.src,r):n instanceof Uint8Array||n instanceof ArrayBuffer||n instanceof DataView?new Ls(n):jh&&n instanceof Blob?nb(n,r,"blob",sb):void jn("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,n=t.getUint16(0);for(let[r,s]of WL)if(s.canHandle(t,n))return this.fileParser=new s(this.options,this.file,this.parsers),t[r]=!0;this.file.close&&this.file.close(),jn("Unknown file format")}async parse(){let{output:t,errors:n}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),n.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(t.errors=n),HL(r=t)?void 0:r;var r}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let n=Object.values(this.parsers).map(async r=>{let s=await r.parse();r.assignToOutput(t,s)});this.options.silentErrors&&(n=n.map(r=>r.catch(this.pushToErrors))),await Promise.all(n)}async extractThumbnail(){this.setup();let{options:t,file:n}=this,r=As.get("tiff",t);var s;if(n.tiff?s={start:0,type:"tiff"}:n.jpeg&&(s=await this.fileParser.getOrFindSegment("tiff")),s===void 0)return;let i=await this.fileParser.ensureSegmentChunk(s),l=this.parsers.tiff=new r(i,t,n),c=await l.extractThumbnail();return n.close&&n.close(),c}}class oc{static findPosition(t,n){let r=t.getUint16(n+2)+2,s=typeof this.headerLength=="function"?this.headerLength(t,n,r):this.headerLength,i=n+s,l=r-s;return{offset:n,length:r,headerLength:s,start:i,size:l,end:i+l}}static parse(t,n={}){return new this(t,new D_({[this.type]:n}),t).parse()}normalizeInput(t){return t instanceof Ls?t:new Ls(t)}constructor(t,n={},r){St(this,"errors",[]),St(this,"raw",new Map),St(this,"handleError",s=>{if(!this.options.silentErrors)throw s;this.errors.push(s.message)}),this.chunk=this.normalizeInput(t),this.file=r,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,n){let r=fQ.get(n),s=hQ.get(n),i=O_.get(n),l=this.options[n],c=l.reviveValues&&!!r,d=l.translateValues&&!!s,h=l.translateKeys&&!!i,f={};for(let[p,g]of t)c&&r.has(p)?g=r.get(p)(g):d&&s.has(p)&&(g=this.translateValue(g,s.get(p))),h&&i.has(p)&&(p=i.get(p)||p),f[p]=g;return f}translateValue(t,n){return n[t]||n.DEFAULT||t}assignToOutput(t,n){this.assignObjectToOutput(t,this.constructor.type,n)}assignObjectToOutput(t,n,r){if(this.globalOptions.mergeOutput)return Object.assign(t,r);t[n]?Object.assign(t[n],r):t[n]=r}}St(oc,"headerLength",4),St(oc,"type",void 0),St(oc,"multiSegment",!1),St(oc,"canHandle",()=>!1);function mQ(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function gQ(e){return e>=224&&e<=239}function yQ(e,t,n){for(let[r,s]of As)if(s.canHandle(e,t,n))return r}class i2 extends class{constructor(t,n,r){St(this,"errors",[]),St(this,"ensureSegmentChunk",async s=>{let i=s.start,l=s.size||65536;if(this.file.chunked)if(this.file.available(i,l))s.chunk=this.file.subarray(i,l);else try{s.chunk=await this.file.readChunk(i,l)}catch(c){jn(`Couldn't read segment: ${JSON.stringify(s)}. ${c.message}`)}else this.file.byteLength>i+l?s.chunk=this.file.subarray(i,l):s.size===void 0?s.chunk=this.file.subarray(i):jn("Segment unreachable: "+JSON.stringify(s));return s.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=r}injectSegment(t,n){this.options[t].enabled&&this.createParser(t,n)}createParser(t,n){let r=new(As.get(t))(n,this.options,this.file);return this.parsers[t]=r}createParsers(t){for(let n of t){let{type:r,chunk:s}=n,i=this.options[r];if(i&&i.enabled){let l=this.parsers[r];l&&l.append||l||this.createParser(r,s)}}}async readSegments(t){let n=t.map(this.ensureSegmentChunk);await Promise.all(n)}}{constructor(...t){super(...t),St(this,"appSegments",[]),St(this,"jpegSegments",[]),St(this,"unknownSegments",[])}static canHandle(t,n){return n===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(As.keyList())):(t=t===void 0?As.keyList().filter(n=>this.options[n].enabled):t.filter(n=>this.options[n].enabled&&As.has(n)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,n){this.setupSegmentFinderArgs(n);let{file:r,findAll:s,wanted:i,remaining:l}=this;if(!s&&this.file.chunked&&(s=Array.from(i).some(c=>{let d=As.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment}),s&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,r.byteLength),!this.options.onlyTiff&&r.chunked){let c=!1;for(;l.size>0&&!c&&(r.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=r,h=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(c=t>d&&!h?!await r.readNextChunk(t):!await r.readNextChunk(d),(t=this.findAppSegmentsInRange(t,r.byteLength))===void 0)return}}}findAppSegmentsInRange(t,n){n-=2;let r,s,i,l,c,d,{file:h,findAll:f,wanted:p,remaining:g,options:b}=this;for(;t<n;t++)if(h.getUint8(t)===255){if(r=h.getUint8(t+1),gQ(r)){if(s=h.getUint16(t+2),i=yQ(h,t,s),i&&p.has(i)&&(l=As.get(i),c=l.findPosition(h,t),d=b[i],c.type=i,this.appSegments.push(c),!f&&(l.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||g.delete(i)):g.delete(i),g.size===0)))break;b.recordUnknownSegments&&(c=oc.findPosition(h,t),c.marker=r,this.unknownSegments.push(c)),t+=s+1}else if(mQ(r)){if(s=h.getUint16(t+2),r===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:t,length:s,marker:r}),t+=s+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(n=>n.multiSegment))return;let t=function(n,r){let s,i,l,c=new Map;for(let d=0;d<n.length;d++)s=n[d],i=s[r],c.has(i)?l=c.get(i):c.set(i,l=[]),l.push(s);return Array.from(c)}(this.appSegments,"type");this.mergedAppSegments=t.map(([n,r])=>{let s=As.get(n,this.options);return s.handleMultiSegments?{type:n,chunk:s.handleMultiSegments(r)}:r[0]})}getSegment(t){return this.appSegments.find(n=>n.type===t)}async getOrFindSegment(t){let n=this.getSegment(t);return n===void 0&&(await this.findAppSegments(0,[t]),n=this.getSegment(t)),n}}St(i2,"type","jpeg"),WL.set("jpeg",i2);const vQ=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class xQ extends oc{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,n,r=new Map){let{pick:s,skip:i}=this.options[n];s=new Set(s);let l=s.size>0,c=i.size===0,d=this.chunk.getUint16(t);t+=2;for(let h=0;h<d;h++){let f=this.chunk.getUint16(t);if(l){if(s.has(f)&&(r.set(f,this.parseTag(t,f,n)),s.delete(f),s.size===0))break}else!c&&i.has(f)||r.set(f,this.parseTag(t,f,n));t+=12}return r}parseTag(t,n,r){let{chunk:s}=this,i=s.getUint16(t+2),l=s.getUint32(t+4),c=vQ[i];if(c*l<=4?t+=8:t=s.getUint32(t+8),(i<1||i>13)&&jn(`Invalid TIFF value type. block: ${r.toUpperCase()}, tag: ${n.toString(16)}, type: ${i}, offset ${t}`),t>s.byteLength&&jn(`Invalid TIFF value offset. block: ${r.toUpperCase()}, tag: ${n.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${s.byteLength}`),i===1)return s.getUint8Array(t,l);if(i===2)return(d=function(h){for(;h.endsWith("\0");)h=h.slice(0,-1);return h}(d=s.getString(t,l)).trim())===""?void 0:d;var d;if(i===7)return s.getUint8Array(t,l);if(l===1)return this.parseTagValue(i,t);{let h=new(function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(l),f=c;for(let p=0;p<l;p++)h[p]=this.parseTagValue(i,t),t+=f;return h}}parseTagValue(t,n){let{chunk:r}=this;switch(t){case 1:return r.getUint8(n);case 3:return r.getUint16(n);case 4:return r.getUint32(n);case 5:return r.getUint32(n)/r.getUint32(n+4);case 6:return r.getInt8(n);case 8:return r.getInt16(n);case 9:return r.getInt32(n);case 10:return r.getInt32(n)/r.getInt32(n+4);case 11:return r.getFloat(n);case 12:return r.getDouble(n);case 13:return r.getUint32(n);default:jn(`Invalid tiff type ${t}`)}}}class qv extends xQ{static canHandle(t,n){return t.getUint8(n+1)===225&&t.getUint32(n+4)===1165519206&&t.getUint16(n+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let n=this[t]();return n.catch!==void 0&&(n=n.catch(this.handleError)),n}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),n=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(n)}}parseBlock(t,n){let r=new Map;return this[n]=r,this.parseTags(t,n,r),r}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&jn("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&jn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,JC(this.options));let n=this.parseBlock(this.ifd0Offset,"ifd0");return n.size!==0?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,JC(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,n){let r=t.get(n);r&&r.length===1&&t.set(n,r[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",o2(...t.get(2),t.get(1))),t.set("longitude",o2(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),n=this.ifd1.get(514);return this.chunk.getUint8Array(t,n)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,n,r,s={};for(n of _n)if(t=this[n],!HL(t))if(r=this.canTranslate?this.translateBlock(t,n):Object.fromEntries(t),this.options.mergeOutput){if(n==="ifd1")continue;Object.assign(s,r)}else s[n]=r;return this.makerNote&&(s.makerNote=this.makerNote),this.userComment&&(s.userComment=this.userComment),s}assignToOutput(t,n){if(this.globalOptions.mergeOutput)Object.assign(t,n);else for(let[r,s]of Object.entries(n))this.assignObjectToOutput(t,r,s)}}function o2(e,t,n,r){var s=e+t/60+n/3600;return r!=="S"&&r!=="W"||(s*=-1),s}St(qv,"type","tiff"),St(qv,"headerLength",10),As.set("tiff",qv);const U_={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},U_,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},U_,{tiff:!1,ifd1:!0,mergeOutput:!1});const bQ=Object.assign({},U_,{firstChunkSize:4e4,ifd0:[274]});async function wQ(e){let t=new pQ(bQ);await t.read(e);let n=await t.parse();if(n&&n.ifd0)return n.ifd0[274]}const _Q=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let bd=!0,wd=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,n,r]=t;bd=Number(n)+.1*Number(r)<13.4,wd=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);bd=wd=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);bd=wd=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);bd=wd=Number(t)<77}}async function SQ(e){let t=await wQ(e);return Object.assign({canvas:bd,css:wd},_Q[t])}class NQ extends Ls{constructor(...t){super(...t),St(this,"ranges",new CQ),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,n,r){if(t===0&&this.byteLength===0&&r){let s=new DataView(r.buffer||r,r.byteOffset,r.byteLength);this._swapDataView(s)}else{let s=t+n;if(s>this.byteLength){let{dataView:i}=this._extend(s);this._swapDataView(i)}}}_extend(t){let n;n=VL?$L.allocUnsafe(t):new Uint8Array(t);let r=new DataView(n.buffer,n.byteOffset,n.byteLength);return n.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:n,dataView:r}}subarray(t,n,r=!1){return n=n||this._lengthToEnd(t),r&&this._tryExtend(t,n),this.ranges.add(t,n),super.subarray(t,n)}set(t,n,r=!1){r&&this._tryExtend(n,t.byteLength,t);let s=super.set(t,n);return this.ranges.add(n,s.byteLength),s}async ensureChunk(t,n){this.chunked&&(this.ranges.available(t,n)||await this.readChunk(t,n))}available(t,n){return this.ranges.available(t,n)}}class CQ{constructor(){St(this,"list",[])}get length(){return this.list.length}add(t,n,r=0){let s=t+n,i=this.list.filter(l=>a2(t,l.offset,s)||a2(t,l.end,s));if(i.length>0){t=Math.min(t,...i.map(c=>c.offset)),s=Math.max(s,...i.map(c=>c.end)),n=s-t;let l=i.shift();l.offset=t,l.length=n,l.end=s,this.list=this.list.filter(c=>!i.includes(c))}else this.list.push({offset:t,length:n,end:s})}available(t,n){let r=t+n;return this.list.some(s=>s.offset<=t&&r<=s.end)}}function a2(e,t,n){return e<=t&&t<=n}class jQ extends NQ{constructor(t,n){super(0),St(this,"chunksRead",0),this.input=t,this.options=n}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let n=this.options.chunkSize,r=await this.readChunk(t,n);return!!r&&r.byteLength===n}async readChunk(t,n){if(this.chunksRead++,(n=this.safeWrapAddress(t,n))!==0)return this._readChunk(t,n)}safeWrapAddress(t,n){return this.size!==void 0&&t+n>this.size?Math.max(0,this.size-t):n}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}F_.set("blob",class extends jQ{async readWhole(){this.chunked=!1;let e=await sb(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let n=t?e+t:void 0,r=this.input.slice(e,n),s=await sb(r);return this.set(s,e,!0)}});const PQ="5.0.0",TQ={version:PQ},kQ={strings:{generatingThumbnails:"Generating thumbnails..."}};function EQ(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(r){if(r.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(r=>{e.toBlob(r,t,n)}).then(r=>{if(r===null)throw new Error("cannot read image, probably an svg with external resources");return r}):Promise.resolve().then(()=>YZ(e.toDataURL(t,n),{})).then(r=>{if(r===null)throw new Error("could not extract blob, probably an old browser");return r})}function AQ(e,t){let n=e.width,r=e.height;(t.deg===90||t.deg===270)&&(n=e.height,r=e.width);const s=document.createElement("canvas");s.width=n,s.height=r;const i=s.getContext("2d");return i.translate(n/2,r/2),t.canvas&&(i.rotate(t.rad),i.scale(t.scaleX,t.scaleY)),i.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),s}function IQ(e){const t=e.width/e.height,n=5e6,r=4096;let s=Math.floor(Math.sqrt(n*t)),i=Math.floor(n/Math.sqrt(n*t));if(s>r&&(s=r,i=Math.round(s/t)),i>r&&(i=r,s=Math.round(t*i)),e.width>s){const l=document.createElement("canvas");return l.width=s,l.height=i,l.getContext("2d").drawImage(e,0,0,s,i),l}return e}const MQ={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class KL extends Km{constructor(n,r){super(n,{...MQ,...r});I(this,"queue");I(this,"queueProcessing");I(this,"defaultThumbnailDimension");I(this,"thumbnailType");I(this,"onFileAdded",n=>{!n.preview&&n.data&&EC(n.type)&&!n.isRemote&&this.addToQueue(n.id)});I(this,"onCancelRequest",n=>{const r=this.queue.indexOf(n.id);r!==-1&&this.queue.splice(r,1)});I(this,"onFileRemoved",n=>{const r=this.queue.indexOf(n.id);r!==-1&&this.queue.splice(r,1),n.preview&&kC(n.preview)&&URL.revokeObjectURL(n.preview)});I(this,"onRestored",()=>{this.uppy.getFiles().filter(r=>r.isRestored).forEach(r=>{(!r.preview||kC(r.preview))&&this.addToQueue(r.id)})});I(this,"onAllFilesRemoved",()=>{this.queue=[]});I(this,"waitUntilAllProcessed",n=>{n.forEach(s=>{const i=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",i,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const r=()=>{n.forEach(s=>{const i=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",i)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{r(),s()}):(r(),s())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=kQ,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(n,r,s){const i=URL.createObjectURL(n.data),l=new Promise((d,h)=>{const f=new Image;f.src=i,f.addEventListener("load",()=>{URL.revokeObjectURL(i),d(f)}),f.addEventListener("error",p=>{URL.revokeObjectURL(i),h(p.error||new Error("Could not create thumbnail"))})}),c=SQ(n.data).catch(()=>1);return Promise.all([l,c]).then(([d,h])=>{const f=this.getProportionalDimensions(d,r,s,h.deg),p=AQ(d,h),g=this.resizeImage(p,f.width,f.height);return EQ(g,this.thumbnailType,80)}).then(d=>URL.createObjectURL(d))}getProportionalDimensions(n,r,s,i){let l=n.width/n.height;if((i===90||i===270)&&(l=n.height/n.width),r!=null){let c=r;return n.width<r&&(c=n.width),{width:c,height:Math.round(c/l)}}if(s!=null){let c=s;return n.height<s&&(c=n.height),{width:Math.round(c*l),height:c}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/l)}}resizeImage(n,r,s){let i=IQ(n),l=Math.ceil(Math.log2(i.width/r));l<1&&(l=1);let c=r*2**(l-1),d=s*2**(l-1);const h=2;for(;l--;){const f=document.createElement("canvas");f.width=c,f.height=d,f.getContext("2d").drawImage(i,0,0,c,d),i=f,c=Math.round(c/h),d=Math.round(d/h)}return i}setPreviewURL(n,r){this.uppy.setFileState(n,{preview:r})}addToQueue(n){this.queue.push(n),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const n=this.uppy.getFile(this.queue.shift());return n?this.requestThumbnail(n).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(n){return EC(n.type)&&!n.isRemote?this.createThumbnail(n,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(r=>{this.setPreviewURL(n.id,r),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${n.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(n.id),r)}).catch(r=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${n.id}:`,"warning"),this.uppy.log(r,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(n.id),r)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}I(KL,"VERSION",TQ.version);const RQ="5.0.1",LQ={version:RQ};class QL extends Si{constructor(){super(...arguments);I(this,"fileInput",null);I(this,"folderInput",null);I(this,"mobilePhotoFileInput",null);I(this,"mobileVideoFileInput",null);I(this,"triggerFileInputClick",()=>{var n;(n=this.fileInput)==null||n.click()});I(this,"triggerFolderInputClick",()=>{var n;(n=this.folderInput)==null||n.click()});I(this,"triggerVideoCameraInputClick",()=>{var n;(n=this.mobileVideoFileInput)==null||n.click()});I(this,"triggerPhotoCameraInputClick",()=>{var n;(n=this.mobilePhotoFileInput)==null||n.click()});I(this,"onFileInputChange",n=>{this.props.handleInputChange(n),n.currentTarget.value=""});I(this,"renderHiddenInput",(n,r)=>{var s;return R("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:n,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(s=this.props.allowedFileTypes)==null?void 0:s.join(", "),ref:r})});I(this,"renderHiddenCameraInput",(n,r,s)=>{const l={photo:"image/*",video:"video/*"}[n];return R("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${n}`,onChange:this.onFileInputChange,capture:r===""?"environment":r,accept:l,ref:s})});I(this,"renderMyDeviceAcquirer",()=>R("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[R("div",{className:"uppy-DashboardTab-inner",children:R("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:R("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),R("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));I(this,"renderPhotoCamera",()=>R("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[R("div",{className:"uppy-DashboardTab-inner",children:R("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:R("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),R("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));I(this,"renderVideoCamera",()=>R("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[R("div",{className:"uppy-DashboardTab-inner",children:R("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:R("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),R("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));I(this,"renderBrowseButton",(n,r)=>{const s=this.props.acquirers.length;return R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:r,"data-uppy-super-focusable":s===0,children:n})});I(this,"renderDropPasteBrowseTagline",n=>{const r=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),i=this.props.fileManagerSelectionType,l=i.charAt(0).toUpperCase()+i.slice(1);return R("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):n>0?this.props.i18nArray(`dropPasteImport${l}`,{browseFiles:r,browseFolders:s,browse:r}):this.props.i18nArray(`dropPaste${l}`,{browseFiles:r,browseFolders:s,browse:r})})});I(this,"renderAcquirer",n=>{var r;return R("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":n.id,children:R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":n.id,"aria-controls":`uppy-DashboardContent-panel--${n.id}`,"aria-selected":((r=this.props.activePickerPanel)==null?void 0:r.id)===n.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(n.id),children:[R("div",{className:"uppy-DashboardTab-inner",children:n.icon()}),R("div",{className:"uppy-DashboardTab-name",children:n.name})]})})});I(this,"renderAcquirers",n=>{const r=[...n],s=r.splice(n.length-2,n.length);return R(no,{children:[r.map(i=>this.renderAcquirer(i)),R("span",{role:"presentation",style:{"white-space":"nowrap"},children:s.map(i=>this.renderAcquirer(i))})]})});I(this,"renderSourcesList",(n,r)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:i}=this.props;let l=[];const c="myDevice";r||l.push({key:c,elements:this.renderMyDeviceAcquirer()}),s&&l.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),i&&l.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),l.push(...n.map(p=>({key:p.id,elements:this.renderAcquirer(p)}))),l.length===1&&l[0].key===c&&(l=[]);const h=[...l],f=h.splice(l.length-2,l.length);return R(no,{children:[this.renderDropPasteBrowseTagline(l.length),R("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[h.map(({key:p,elements:g})=>R(no,{children:g},p)),R("span",{role:"presentation",style:{"white-space":"nowrap"},children:f.map(({key:p,elements:g})=>R(no,{children:g},p))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:n}=this.props,r=R("span",{children:[R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:R("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),R("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),s=n("poweredBy",{uppy:r});return R("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:s})}render(){const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:r,nativeCameraFacingMode:s}=this.props;return R("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,i=>{this.fileInput=i}),this.renderHiddenInput(!0,i=>{this.folderInput=i}),n&&this.renderHiddenCameraInput("photo",s,i=>{this.mobilePhotoFileInput=i}),r&&this.renderHiddenCameraInput("video",s,i=>{this.mobileVideoFileInput=i}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),R("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&R("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const FQ=e=>R("div",{className:Hs("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":!e.showAddFilesPanel,children:[R("div",{className:"uppy-DashboardContent-bar",children:[R("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18n("addingMoreFiles")}),R("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>e.toggleAddFilesPanel(!1),children:e.i18n("back")})]}),R(QL,{...e})]});function OQ(e){const t=e.files[e.fileCardFor],n=()=>{e.uppy.emit("file-editor:cancel",t),e.closeFileEditor()};return R("div",{className:Hs("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[R("div",{className:"uppy-DashboardContent-bar",children:[R("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18nArray("editing",{file:R("span",{className:"uppy-DashboardContent-titleFile",children:t.meta?t.meta.name:t.name})})}),R("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:e.i18n("cancel")}),R("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor,children:e.i18n("save")})]}),R("div",{className:"uppy-DashboardContent-panelBody",children:e.editors.map(r=>e.uppy.getPlugin(r.id).render(e.state))})]})}function DQ(){return R("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:R("g",{fill:"#686DE0",fillRule:"evenodd",children:[R("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),R("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),R("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function UQ(){return R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:R("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function BQ(){return R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:R("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function zQ(){return R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:R("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function $Q(){return R("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:R("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function VQ(){return R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:R("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[R("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),R("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function HQ(){return R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:R("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function B_(e){const t={color:"#838999",icon:VQ()};if(!e)return t;const n=e.split("/")[0],r=e.split("/")[1];return n==="text"?{color:"#5a5e69",icon:HQ()}:n==="image"?{color:"#686de0",icon:DQ()}:n==="audio"?{color:"#068dbb",icon:UQ()}:n==="video"?{color:"#19af67",icon:BQ()}:n==="application"&&r==="pdf"?{color:"#e25149",icon:zQ()}:n==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)!==-1?{color:"#00C469",icon:$Q()}:t}function qo(e){const{tagName:t}=e.target;if(t==="INPUT"||t==="TEXTAREA"){e.stopPropagation();return}e.preventDefault(),e.stopPropagation()}function YL(e){const{file:t}=e;if(t.preview)return R("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:n,icon:r}=B_(t.type);return R("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[R("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:n},children:r}),R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:R("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function WQ(e){const{computedMetaFields:t,requiredMetaFields:n,updateMeta:r,form:s,formState:i}=e,l={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map(c=>{const d=`uppy-Dashboard-FileCard-input-${c.id}`,h=n.includes(c.id);return R("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[R("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:d,children:c.name}),c.render!==void 0?c.render({value:i[c.id],onChange:f=>r(f,c.id),fieldCSSClasses:l,required:h,form:s.id},T_):R("input",{className:l.text,id:d,form:s.id,type:c.type||"text",required:h,value:i[c.id],placeholder:c.placeholder,onInput:f=>r(f.target.value,c.id),"data-uppy-super-focusable":!0})]},c.id)})}function qQ(e){const{files:t,fileCardFor:n,toggleFileCard:r,saveFileCard:s,metaFields:i,requiredMetaFields:l,openFileEditor:c,i18n:d,i18nArray:h,className:f,canEditFile:p}=e,g=()=>typeof i=="function"?i(t[n]):i,b=t[n],j=g()??[],_=p(b),w={};j.forEach(M=>{w[M.id]=b.meta[M.id]??""});const[S,x]=yu(w),N=Gm(M=>{M.preventDefault(),s(S,n)},[s,S,n]),P=(M,z)=>{x({...S,[z]:M})},E=()=>{r(!1)},[k]=yu(()=>{const M=document.createElement("form");return M.setAttribute("tabindex","-1"),M.id=R_(),M});return Zm(()=>(document.body.appendChild(k),k.addEventListener("submit",N),()=>{k.removeEventListener("submit",N),k.parentNode&&document.body.removeChild(k)}),[k,N]),R("div",{className:Hs("uppy-Dashboard-FileCard",f),"data-uppy-panelType":"FileCard",onDragOver:qo,onDragLeave:qo,onDrop:qo,onPaste:qo,children:[R("div",{className:"uppy-DashboardContent-bar",children:[R("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:h("editing",{file:R("span",{className:"uppy-DashboardContent-titleFile",children:b.meta?b.meta.name:b.name})})}),R("button",{className:"uppy-DashboardContent-back",type:"button",form:k.id,title:d("finishEditingFile"),onClick:E,children:d("cancel")})]}),R("div",{className:"uppy-Dashboard-FileCard-inner",children:[R("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:B_(b.type).color},children:[R(YL,{file:b}),_&&R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:M=>{N(M),c(b)},children:d("editImage")})]}),R("div",{className:"uppy-Dashboard-FileCard-info",children:R(WQ,{computedMetaFields:j,requiredMetaFields:l,updateMeta:P,form:k,formState:S})}),R("div",{className:"uppy-Dashboard-FileCard-actions",children:[R("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:k.id,children:d("saveChanges")}),R("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:E,form:k.id,children:d("cancel")})]})]})]})}function ZQ(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),s=n.length;if(r.length!==s)return!1;for(let i=0;i<s;i++){const l=n[i];if(e[l]!==t[l]||!Object.prototype.hasOwnProperty.call(t,l))return!1}return!0}function GQ(e,t="Copy the URL below"){return new Promise(n=>{const r=document.createElement("textarea");r.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),r.value=e,document.body.appendChild(r),r.select();const s=()=>{document.body.removeChild(r),window.prompt(t,e),n()};try{return document.execCommand("copy")?(document.body.removeChild(r),n()):s()}catch{return document.body.removeChild(r),s()}})}function KQ({file:e,uploadInProgressOrComplete:t,metaFields:n,canEditFile:r,i18n:s,onClick:i}){return!t&&n&&n.length>0||!t&&r(e)?R("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:e.meta.name}),title:s("editFileWithFilename",{file:e.meta.name}),onClick:()=>i(),children:R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:R("g",{fillRule:"evenodd",children:[R("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),R("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),R("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function QQ({i18n:e,onClick:t,file:n}){return R("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:n.meta.name}),title:e("removeFile",{file:n.meta.name}),onClick:()=>t(),children:R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[R("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),R("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function YQ({file:e,uppy:t,i18n:n}){const r=s=>{GQ(e.uploadURL,n("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>s.target.focus({preventScroll:!0}))};return R("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":n("copyLink"),title:n("copyLink"),onClick:s=>r(s),children:R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:R("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function XQ(e){const{uppy:t,file:n,uploadInProgressOrComplete:r,canEditFile:s,metaFields:i,showLinkToFileUploadResult:l,showRemoveButton:c,i18n:d,toggleFileCard:h,openFileEditor:f}=e;return R("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[R(KQ,{i18n:d,file:n,uploadInProgressOrComplete:r,canEditFile:s,metaFields:i,onClick:()=>{i&&i.length>0?h(!0,n.id):f(n)}}),l&&n.uploadURL?R(YQ,{file:n,uppy:t,i18n:d}):null,c?R(QQ,{i18n:d,file:n,onClick:()=>t.removeFile(n.id)}):null]})}const JQ=(e,t)=>(typeof t=="function"?t():t).filter(s=>s.id===e)[0].name;function XL(e){const{file:t,toggleFileCard:n,i18n:r,metaFields:s}=e,{missingRequiredMetaFields:i}=t;if(!(i!=null&&i.length))return null;const l=i.map(c=>JQ(c,s)).join(", ");return R("div",{className:"uppy-Dashboard-Item-errorMessage",children:[r("missingRequiredMetaFields",{smart_count:i.length,fields:l})," ",R("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>n(!0,t.id),children:r("editFile")})]})}const eY=e=>{const{author:t,name:n}=e.file.meta;function r(){return e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30}return R("div",{className:"uppy-Dashboard-Item-name",title:n,children:dL(n,r())})},tY=e=>{var s;const{author:t}=e.file.meta,n=(s=e.file.remote)==null?void 0:s.providerName,r="";return t?R("div",{className:"uppy-Dashboard-Item-author",children:[R("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:dL(t.name,13)}),n?R(no,{children:[` ${r} `,n,` ${r} `]}):null]}):null},nY=e=>e.file.size&&R("div",{className:"uppy-Dashboard-Item-statusSize",children:Oa(e.file.size)}),rY=e=>e.file.isGhost&&R("span",{children:["  ",R("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>e.toggleAddFilesPanel(!0),children:e.i18n("reSelect")})]}),sY=({file:e,onClick:t})=>e.error?R("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button",children:"?"}):null;function iY(e){const{file:t,i18n:n,toggleFileCard:r,metaFields:s,toggleAddFilesPanel:i,isSingleFile:l,containerHeight:c,containerWidth:d}=e;return R("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source,children:[R("div",{className:"uppy-Dashboard-Item-fileName",children:[eY({file:t,isSingleFile:l,containerHeight:c,containerWidth:d}),R(sY,{file:t,onClick:()=>alert(t.error)})]}),R("div",{className:"uppy-Dashboard-Item-status",children:[tY({file:t}),nY({file:t}),rY({file:t,toggleAddFilesPanel:i,i18n:n})]}),R(XL,{file:t,i18n:n,toggleFileCard:r,metaFields:s})]})}function oY(e){const{file:t,i18n:n,toggleFileCard:r,metaFields:s,showLinkToFileUploadResult:i}=e,c=t.preview?"rgba(255, 255, 255, 0.5)":B_(t.type).color;return R("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:c},children:[i&&t.uploadURL&&R("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name,children:R("span",{hidden:!0,children:t.meta.name})}),R(YL,{file:t}),R(XL,{file:t,i18n:n,toggleFileCard:r,metaFields:s})]})}function aY(e){if(!e.isUploaded){if(e.error&&!e.hideRetryButton){e.uppy.retryUpload(e.file.id);return}e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id)}}function l2(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function Zv(e){return R("div",{className:"uppy-Dashboard-Item-progress",children:R("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":l2(e),title:l2(e),onClick:()=>aY(e),children:e.children})})}function yp({children:e}){return R("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:e})}function Gv({progress:e}){const t=2*Math.PI*15;return R("g",{children:[R("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),R("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e})]})}function lY(e){return!e.file.progress.uploadStarted||e.file.progress.percentage===void 0?null:e.isUploaded?R("div",{className:"uppy-Dashboard-Item-progress",children:R("div",{className:"uppy-Dashboard-Item-progressIndicator",children:R(yp,{children:[R("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),R("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):e.recoveredState?null:e.error&&!e.hideRetryButton?R(Zv,{...e,children:R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[R("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),R("path",{d:"M7.9 3H10v2H7.9z"}),R("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),R("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):e.resumableUploads&&!e.hidePauseResumeButton?R(Zv,{...e,children:R(yp,{children:[R(Gv,{progress:e.file.progress.percentage}),e.file.isPaused?R("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):R("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[R("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),R("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!e.resumableUploads&&e.individualCancellation&&!e.hideCancelButton?R(Zv,{...e,children:R(yp,{children:[R(Gv,{progress:e.file.progress.percentage}),R("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):R("div",{className:"uppy-Dashboard-Item-progress",children:R("div",{className:"uppy-Dashboard-Item-progressIndicator",children:R(yp,{children:R(Gv,{progress:e.file.progress.percentage})})})})}class cY extends Si{componentDidMount(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}shouldComponentUpdate(t){return!ZQ(this.props,t)}componentDidUpdate(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}componentWillUnmount(){const{file:t}=this.props;t.preview||this.props.handleCancelThumbnail(t)}render(){const{file:t}=this.props,n=t.progress.preprocess||t.progress.postprocess,r=!!t.progress.uploadComplete&&!n&&!t.error,s=!!t.progress.uploadStarted||!!n,i=t.progress.uploadStarted&&!t.progress.uploadComplete||n,l=t.error||!1,{isGhost:c}=t;let d=(this.props.individualCancellation||!i)&&!r;r&&this.props.showRemoveButtonAfterComplete&&(d=!0);const h=Hs({"uppy-Dashboard-Item":!0,"is-inprogress":i&&!this.props.recoveredState,"is-processing":n,"is-complete":r,"is-error":!!l,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":c});return R("div",{className:h,id:`uppy_${t.id}`,role:this.props.role,children:[R("div",{className:"uppy-Dashboard-Item-preview",children:[R(oY,{file:t,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),R(lY,{uppy:this.props.uppy,file:t,error:l,isUploaded:r,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),R("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[R(iY,{file:t,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),R(XQ,{file:t,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:d,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function uY(e,t){const n=[];let r=[];return e.forEach(s=>{r.length<t?r.push(s):(n.push(r),r=[s])}),r.length&&n.push(r),n}function dY({id:e,i18n:t,uppy:n,files:r,resumableUploads:s,hideRetryButton:i,hidePauseResumeButton:l,hideCancelButton:c,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:h,metaFields:f,isSingleFile:p,toggleFileCard:g,handleRequestThumbnail:b,handleCancelThumbnail:j,recoveredState:_,individualCancellation:w,itemsPerRow:S,openFileEditor:x,canEditFile:N,toggleAddFilesPanel:P,containerWidth:E,containerHeight:k}){const M=S===1?71:200,z=I_(()=>{const F=(H,Y)=>Number(r[Y].isGhost)-Number(r[H].isGhost),J=Object.keys(r);return _&&J.sort(F),uY(J,S)},[r,S,_]),D=F=>R("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:F.map(J=>R(cY,{uppy:n,id:e,i18n:t,resumableUploads:s,individualCancellation:w,hideRetryButton:i,hidePauseResumeButton:l,hideCancelButton:c,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:h,metaFields:f,recoveredState:_,isSingleFile:p,containerWidth:E,containerHeight:k,toggleFileCard:g,handleRequestThumbnail:b,handleCancelThumbnail:j,role:"listitem",openFileEditor:x,canEditFile:N,toggleAddFilesPanel:P,file:r[J]},J))},F[0]);return p?R("div",{class:"uppy-Dashboard-files",children:D(z[0])}):R(MG,{class:"uppy-Dashboard-files",role:"list",data:z,renderRow:D,rowHeight:M})}const c2=300;class hY extends Si{constructor(){super(...arguments);I(this,"ref",_G())}componentWillEnter(n){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(n,c2)}componentWillLeave(n){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(n,c2)}render(){const{children:n}=this.props;return R("div",{className:"uppy-Informer-animated",ref:this.ref,children:n})}}function fY(e,t){return Object.assign(e,t)}function pY(e,t){return(e==null?void 0:e.key)??t}function mY(e,t){const n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=r=>{e.refs[t]=r})}function ad(e){const t={};for(let n=0;n<e.length;n++)if(e[n]!=null){const r=pY(e[n],n.toString(36));t[r]=e[n]}return t}function gY(e,t){e=e||{},t=t||{};const n=l=>Object.hasOwn(t,l)?t[l]:e[l],r={};let s=[];for(const l in e)Object.hasOwn(t,l)?s.length&&(r[l]=s,s=[]):s.push(l);const i={};for(const l in t){if(Object.hasOwn(r,l))for(let c=0;c<r[l].length;c++){const d=r[l][c];i[r[l][c]]=n(d)}i[l]=n(l)}for(let l=0;l<s.length;l++)i[s[l]]=n(s[l]);return i}const yY=e=>e;class JL extends Si{constructor(t,n){super(t,n),this.refs={},this.state={children:ad(To(To(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const t=this.state.children;for(const n in t)t[n]&&this.performAppear(n)}componentWillReceiveProps(t){const n=ad(To(t.children)||[]),r=this.state.children;this.setState(i=>({children:gY(i.children,n)}));let s;for(s in n)if(Object.hasOwn(n,s)){const i=r&&Object.hasOwn(r,s);n[s]&&i&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):n[s]&&!i&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in r)if(Object.hasOwn(r,s)){const i=n&&Object.hasOwn(n,s);r[s]&&!i&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){const{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);const{keysToLeave:n}=this;this.keysToLeave=[],n.forEach(this.performLeave)}_finishAbort(t){const n=this.keysToAbortLeave.indexOf(t);n!==-1&&this.keysToAbortLeave.splice(n,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillAppear?n.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){const n=this.refs[t];n!=null&&n.componentDidAppear&&n.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const r=ad(To(this.props.children)||[]);(!r||!Object.hasOwn(r,t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillEnter?n.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){const n=this.refs[t];n!=null&&n.componentDidEnter&&n.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const r=ad(To(this.props.children)||[]);(!r||!Object.hasOwn(r,t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;const r=this.refs[t];r!=null&&r.componentWillLeave?r.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;const r=this.refs[t];r!=null&&r.componentDidLeave&&r.componentDidLeave(),delete this.currentlyTransitioningKeys[t];const s=ad(To(this.props.children)||[]);if(s&&Object.hasOwn(s,t))this.performEnter(t);else{const i=fY({},this.state.children);delete i[t],this.setState({children:i})}}render({childFactory:t,transitionLeave:n,transitionName:r,transitionAppear:s,transitionEnter:i,transitionLeaveTimeout:l,transitionEnterTimeout:c,transitionAppearTimeout:d,component:h,...f},{children:p}){const g=Object.entries(p).map(([b,j])=>{if(!j)return;const _=mY(this,b);return SL(t(j),{ref:_,key:b})}).filter(Boolean);return T_(h,f,g)}}JL.defaultProps={component:"span",childFactory:yY};class u2 extends Si{render(){const{info:t}=this.props.uppy.getState();return R("div",{className:"uppy uppy-Informer",children:R(JL,{children:t.map(n=>R(hY,{children:R("p",{role:"alert",children:[n.message," ",n.details&&R("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`),children:"?"})]})},n.message))})})}}function vY({activePickerPanel:e,className:t,hideAllPanels:n,i18n:r,state:s,uppy:i}){const l=Od(null);return R("div",{className:Hs("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:qo,onDragLeave:qo,onDrop:qo,onPaste:qo,children:[R("div",{className:"uppy-DashboardContent-bar",children:[R("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:r("importFrom",{name:e.name})}),R("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:r("cancel")})]}),R("div",{ref:l,className:"uppy-DashboardContent-panelBody",children:i.getPlugin(e.id).render(s,l.current)})]})}const ti={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function xY(e,t,n,r={}){if(e)return ti.STATE_ERROR;if(t)return ti.STATE_COMPLETE;if(n)return ti.STATE_PAUSED;let s=ti.STATE_WAITING;const i=Object.keys(r);for(let l=0;l<i.length;l++){const{progress:c}=r[i[l]];if(c.uploadStarted&&!c.uploadComplete)return ti.STATE_UPLOADING;c.preprocess&&s!==ti.STATE_UPLOADING&&(s=ti.STATE_PREPROCESSING),c.postprocess&&s!==ti.STATE_UPLOADING&&s!==ti.STATE_PREPROCESSING&&(s=ti.STATE_POSTPROCESSING)}return s}function bY({files:e,i18n:t,isAllComplete:n,isAllErrored:r,isAllPaused:s,inProgressNotPausedFiles:i,newFiles:l,processingFiles:c}){switch(xY(r,n,s,e)){case"uploading":return t("uploadingXFiles",{smart_count:i.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:c.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:l.length});case"complete":return t("uploadComplete");case"error":return t("error")}}function wY(e){const{i18n:t,isAllComplete:n,hideCancelButton:r,maxNumberOfFiles:s,toggleAddFilesPanel:i,uppy:l}=e;let{allowNewUpload:c}=e;return c&&s&&(c=e.totalFileCount<e.maxNumberOfFiles),R("div",{className:"uppy-DashboardContent-bar",children:[!n&&!r?R("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>l.cancelAll(),children:t("cancel")}):R("div",{}),R("div",{className:"uppy-DashboardContent-title",children:R(bY,{...e})}),c?R("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>i(!0),children:[R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:R("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),R("span",{className:"uppy-DashboardContent-addMoreCaption",children:t("addMore")})]}):R("div",{})]})}const Hl="uppy-transition-slideDownUp",d2=250;function vp({children:e}){const[t,n]=yu(null),[r,s]=yu(""),i=Od(),l=Od(),c=Od(),d=Gm(()=>{s(`${Hl}-enter`),cancelAnimationFrame(c.current),clearTimeout(l.current),l.current=void 0,c.current=requestAnimationFrame(()=>{s(`${Hl}-enter ${Hl}-enter-active`),i.current=setTimeout(()=>{s("")},d2)})},[]),h=Gm(()=>{s(`${Hl}-leave`),cancelAnimationFrame(c.current),clearTimeout(i.current),i.current=void 0,c.current=requestAnimationFrame(()=>{s(`${Hl}-leave ${Hl}-leave-active`),l.current=setTimeout(()=>{n(null),s("")},d2)})},[]);return Zm(()=>{const f=To(e)[0];t!==f&&(f&&!t?d():t&&!f&&!l.current&&h(),n(f))},[e,t,d,h]),Zm(()=>()=>{clearTimeout(i.current),clearTimeout(l.current),cancelAnimationFrame(c.current)},[]),t?SL(t,{className:Hs(r,t.props.className)}):null}const ri={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},_Y="",h2=()=>` ${_Y} `;function SY(e){const{newFiles:t,isUploadStarted:n,recoveredState:r,i18n:s,uploadState:i,isSomeGhost:l,startUpload:c}=e,d=Hs("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":i===ri.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":l}),h=t&&n&&!r?s("uploadXNewFiles",{smart_count:t}):s("uploadXFiles",{smart_count:t});return R("button",{type:"button",className:d,"aria-label":s("uploadXFiles",{smart_count:t}),onClick:c,disabled:l,"data-uppy-super-focusable":!0,children:h})}function NY(e){const{i18n:t,uppy:n}=e;return R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:R("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),t("retry")]})}function CY(e){const{i18n:t,uppy:n}=e;return R("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:R("g",{fill:"none",fillRule:"evenodd",children:[R("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),R("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function jY(e){const{isAllPaused:t,i18n:n,isAllComplete:r,resumableUploads:s,uppy:i}=e,l=n(t?"resume":"pause");function c(){if(!r){if(!s){i.cancelAll();return}if(t){i.resumeAll();return}i.pauseAll()}}return R("button",{title:l,"aria-label":l,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:c,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:R("g",{fill:"none",fillRule:"evenodd",children:[R("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),R("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function PY(e){const{i18n:t,doneButtonHandler:n}=e;return R("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0,children:t("done")})}function eF(){return R("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:R("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function TY(e){const{progress:t}=e,{value:n,mode:r,message:s}=t;return R("div",{className:"uppy-StatusBar-content",children:[R(eF,{}),r==="determinate"?`${Math.round(n*100)}%  `:"",s]})}function kY(e){const{numUploads:t,complete:n,totalUploadedSize:r,totalSize:s,totalETA:i,i18n:l}=e,c=t>1,d=Oa(r);return R("div",{className:"uppy-StatusBar-statusSecondary",children:[c&&l("filesUploadedOfTotal",{complete:n,smart_count:t}),R("span",{className:"uppy-StatusBar-additionalInfo",children:[c&&h2(),s!=null?l("dataUploadedOfTotal",{complete:d,total:Oa(s)}):l("dataUploadedOfUnknown",{complete:d}),h2(),i!=null&&l("xTimeLeft",{time:mG(i)})]})]})}function tF(e){const{i18n:t,complete:n,numUploads:r}=e;return R("div",{className:"uppy-StatusBar-statusSecondary",children:t("filesUploadedOfTotal",{complete:n,smart_count:r})})}function EY(e){const{i18n:t,newFiles:n,startUpload:r}=e,s=Hs("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return R("div",{className:"uppy-StatusBar-statusSecondary",children:[R("div",{className:"uppy-StatusBar-statusSecondaryHint",children:t("xMoreFilesAdded",{smart_count:n})}),R("button",{type:"button",className:s,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:r,children:t("upload")})]})}function AY(e){const{i18n:t,supportsUploadProgress:n,totalProgress:r,hideProgressDetails:s,isUploadStarted:i,isAllComplete:l,isAllPaused:c,newFiles:d,numUploads:h,complete:f,totalUploadedSize:p,totalSize:g,totalETA:b,startUpload:j}=e,_=d&&i;if(!i||l)return null;const w=t(c?"paused":"uploading");function S(){return!c&&!_&&!s?n?R(kY,{numUploads:h,complete:f,totalUploadedSize:p,totalSize:g,totalETA:b,i18n:t}):R(tF,{i18n:t,complete:f,numUploads:h}):null}return R("div",{className:"uppy-StatusBar-content",title:w,children:[c?null:R(eF,{}),R("div",{className:"uppy-StatusBar-status",children:[R("div",{className:"uppy-StatusBar-statusPrimary",children:n&&r!==0?`${w}: ${r}%`:w}),S(),_?R(EY,{i18n:t,newFiles:d,startUpload:j}):null]})]})}function IY(e){const{i18n:t}=e;return R("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete"),children:R("div",{className:"uppy-StatusBar-status",children:R("div",{className:"uppy-StatusBar-statusPrimary",children:[R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:R("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),t("complete")]})})})}function MY(e){const{error:t,i18n:n,complete:r,numUploads:s}=e;function i(){const l=`${n("uploadFailed")} 

 ${t}`;alert(l)}return R("div",{className:"uppy-StatusBar-content",title:n("uploadFailed"),children:[R("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:R("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),R("div",{className:"uppy-StatusBar-status",children:[R("div",{className:"uppy-StatusBar-statusPrimary",children:[n("uploadFailed"),R("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:i,type:"button",children:"?"})]}),R(tF,{i18n:n,complete:r,numUploads:s})]})]})}function Kv(e){const t=[];let n="indeterminate",r;for(const{progress:i}of Object.values(e)){const{preprocess:l,postprocess:c}=i;r==null&&(l||c)&&({mode:n,message:r}=l||c),(l==null?void 0:l.mode)==="determinate"&&t.push(l.value),(c==null?void 0:c.mode)==="determinate"&&t.push(c.value)}const s=t.reduce((i,l)=>i+l/t.length,0);return{mode:n,message:r,value:s}}const{STATE_ERROR:f2,STATE_WAITING:RY,STATE_PREPROCESSING:Qv,STATE_UPLOADING:xp,STATE_POSTPROCESSING:Yv,STATE_COMPLETE:bp}=ri;function LY({newFiles:e,allowNewUpload:t,isUploadInProgress:n,isAllPaused:r,resumableUploads:s,error:i,hideUploadButton:l=void 0,hidePauseResumeButton:c=!1,hideCancelButton:d=!1,hideRetryButton:h=!1,recoveredState:f,uploadState:p,totalProgress:g,files:b,supportsUploadProgress:j,hideAfterFinish:_=!1,isSomeGhost:w,doneButtonHandler:S=void 0,isUploadStarted:x,i18n:N,startUpload:P,uppy:E,isAllComplete:k,hideProgressDetails:M=void 0,numUploads:z,complete:D,totalSize:F,totalETA:J,totalUploadedSize:H}){function Y(){switch(p){case Yv:case Qv:{const Oe=Kv(b);return Oe.mode==="determinate"?Oe.value*100:g}case f2:return null;case xp:return j?g:null;default:return g}}function Z(){switch(p){case Yv:case Qv:{const{mode:Oe}=Kv(b);return Oe==="indeterminate"}case xp:return!j;default:return!1}}const U=Y(),V=U??100,K=!i&&e&&(!n&&!r||f)&&t&&!l,O=!d&&p!==RY&&p!==bp,G=s&&!c&&p===xp,X=i&&!k&&!h,ce=S&&p===bp,Te=Hs("uppy-StatusBar-progress",{"is-indeterminate":Z()}),Ve=Hs("uppy-StatusBar",`is-${p}`,{"has-ghosts":w}),Ie=(()=>{switch(p){case Qv:case Yv:return R(TY,{progress:Kv(b)});case bp:return R(IY,{i18n:N});case f2:return R(MY,{error:i,i18n:N,numUploads:z,complete:D});case xp:return R(AY,{i18n:N,supportsUploadProgress:j,totalProgress:g,hideProgressDetails:M,isUploadStarted:x,isAllComplete:k,isAllPaused:r,newFiles:e,numUploads:z,complete:D,totalUploadedSize:H,totalSize:F,totalETA:J,startUpload:P});default:return null}})();return!(K||X||G||O||ce)&&!Ie||p===bp&&_?null:R("div",{className:Ve,children:[R("div",{className:Te,style:{width:`${V}%`},role:"progressbar","aria-label":`${V}%`,"aria-valuetext":`${V}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":U}),Ie,R("div",{className:"uppy-StatusBar-actions",children:[K?R(SY,{newFiles:e,isUploadStarted:x,recoveredState:f,i18n:N,isSomeGhost:w,startUpload:P,uploadState:p}):null,X?R(NY,{i18n:N,uppy:E}):null,G?R(jY,{isAllPaused:r,i18n:N,isAllComplete:k,resumableUploads:s,uppy:E}):null,O?R(CY,{i18n:N,uppy:E}):null,ce?R(PY,{i18n:N,doneButtonHandler:S}):null]})]})}const FY=2e3,OY=2e3;function DY(e,t,n,r){if(e)return ri.STATE_ERROR;if(t)return ri.STATE_COMPLETE;if(n)return ri.STATE_WAITING;let s=ri.STATE_WAITING;const i=Object.keys(r);for(let l=0;l<i.length;l++){const{progress:c}=r[i[l]];if(c.uploadStarted&&!c.uploadComplete)return ri.STATE_UPLOADING;c.preprocess&&(s=ri.STATE_PREPROCESSING),c.postprocess&&s!==ri.STATE_PREPROCESSING&&(s=ri.STATE_POSTPROCESSING)}return s}var Vo,ui,Qa,Qi,Dh,ug,nF;class UY extends Si{constructor(){super(...arguments);te(this,ug);te(this,Vo);te(this,ui);te(this,Qa);te(this,Qi);te(this,Dh,()=>{const{recoveredState:n}=this.props.uppy.getState();if(ne(this,Qa,null),ne(this,Qi,null),n){ne(this,ui,Object.values(n.files).reduce((r,{progress:s})=>r+(s.bytesUploaded||0),0)),this.props.uppy.emit("restore-confirmed");return}ne(this,Vo,performance.now()),ne(this,ui,0)});I(this,"startUpload",()=>this.props.uppy.upload().catch(()=>{}))}componentDidMount(){ne(this,Vo,performance.now()),ne(this,ui,this.props.uppy.getFiles().reduce((n,r)=>n+(r.progress.bytesUploaded||0),0)),this.props.uppy.on("upload",T(this,Dh))}componentWillUnmount(){this.props.uppy.off("upload",T(this,Dh))}render(){const{capabilities:n,files:r,allowNewUpload:s,totalProgress:i,error:l,recoveredState:c}=this.props.uppy.getState(),{newFiles:d,startedFiles:h,completeFiles:f,isUploadStarted:p,isAllComplete:g,isAllPaused:b,isUploadInProgress:j,isSomeGhost:_}=this.props.uppy.getObjectOfFilesPerState(),w=c?Object.values(r):d,S=!!n.resumableUploads,x=n.uploadProgress!==!1;let N=null,P=0;h.every(k=>k.progress.bytesTotal!=null&&k.progress.bytesTotal!==0)?(N=0,h.forEach(k=>{N+=k.progress.bytesTotal||0,P+=k.progress.bytesUploaded||0})):h.forEach(k=>{P+=k.progress.bytesUploaded||0});const E=ie(this,ug,nF).call(this,{uploaded:P,total:N});return R(LY,{error:l,uploadState:DY(l,g,c,r||{}),allowNewUpload:s,totalProgress:i,totalSize:N,totalUploadedSize:P,isAllComplete:g,isAllPaused:b,isUploadStarted:p,isUploadInProgress:j,isSomeGhost:_,recoveredState:c,complete:f.length,newFiles:w.length,numUploads:h.length,totalETA:E,files:r,i18n:this.props.i18n,uppy:this.props.uppy,startUpload:this.startUpload,doneButtonHandler:this.props.doneButtonHandler,resumableUploads:S,supportsUploadProgress:x,hideProgressDetails:this.props.hideProgressDetails,hideUploadButton:this.props.hideUploadButton,hideRetryButton:this.props.hideRetryButton,hidePauseResumeButton:this.props.hidePauseResumeButton,hideCancelButton:this.props.hideCancelButton,hideAfterFinish:this.props.hideAfterFinish})}}Vo=new WeakMap,ui=new WeakMap,Qa=new WeakMap,Qi=new WeakMap,Dh=new WeakMap,ug=new WeakSet,nF=function(n){if(n.total==null||n.total===0)return null;const r=n.total-n.uploaded;if(r<=0)return null;T(this,Vo)??ne(this,Vo,performance.now());const s=performance.now()-T(this,Vo);if(s===0)return Math.round((T(this,Qi)??0)/100)/10;if(T(this,ui)==null)return ne(this,ui,n.uploaded),null;const i=n.uploaded-T(this,ui);if(ne(this,ui,n.uploaded),i<=0)return Math.round((T(this,Qi)??0)/100)/10;const l=i/s;if(!Number.isFinite(l)||l<=0)return null;const c=T(this,Qa)==null?l:NC(l,T(this,Qa),FY,s);if(!Number.isFinite(c)||c<=0)return null;ne(this,Qa,c);const d=r/c;if(!Number.isFinite(d)||d<0)return null;const h=Math.max((T(this,Qi)??0)-s,0),f=T(this,Qi)==null?d:NC(d,h,OY,s);return!Number.isFinite(f)||f<0?null:(ne(this,Qi,f),ne(this,Vo,performance.now()),Math.round(f/100)/10)};const p2=900,m2=700,Xv=576,g2=330;function BY(e){const t=e.totalFileCount===0,n=e.totalFileCount===1,r=e.containerWidth>Xv,s=e.containerHeight>g2,i=Hs({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>Xv,"uppy-size--lg":e.containerWidth>m2,"uppy-size--xl":e.containerWidth>p2,"uppy-size--height-md":e.containerHeight>g2,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&n&&s});let l=1;e.containerWidth>p2?l=5:e.containerWidth>m2?l=4:e.containerWidth>Xv&&(l=3);const c=e.showSelectedFiles&&!t,d=e.recoveredState?Object.keys(e.recoveredState.files).length:null,h=e.files?Object.keys(e.files).filter(g=>e.files[g].isGhost).length:0,f=()=>h>0?e.i18n("recoveredXFiles",{smart_count:h}):e.i18n("recoveredAllFiles");return R("div",{className:i,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&fG(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop,children:[R("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),R("div",{className:"uppy-Dashboard-inner",role:e.inline?void 0:"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""},children:[e.inline?null:R("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal,children:R("span",{"aria-hidden":"true",children:""})}),R("div",{className:"uppy-Dashboard-innerWrap",children:[R("div",{className:"uppy-Dashboard-dropFilesHereHint",children:e.i18n("dropHint")}),c&&R(wY,{...e}),d&&R("div",{className:"uppy-Dashboard-serviceMsg",children:[R("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:R("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[R("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),R("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),R("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),R("strong",{className:"uppy-Dashboard-serviceMsg-title",children:e.i18n("sessionRestored")}),R("div",{className:"uppy-Dashboard-serviceMsg-text",children:f()})]}),c?R(dY,{id:e.id,i18n:e.i18n,uppy:e.uppy,files:e.files,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:n,itemsPerRow:l,containerWidth:e.containerWidth,containerHeight:e.containerHeight}):R(QL,{i18n:e.i18n,i18nArray:e.i18nArray,acquirers:e.acquirers,handleInputChange:e.handleInputChange,maxNumberOfFiles:e.maxNumberOfFiles,allowedFileTypes:e.allowedFileTypes,showNativePhotoCameraButton:e.showNativePhotoCameraButton,showNativeVideoCameraButton:e.showNativeVideoCameraButton,nativeCameraFacingMode:e.nativeCameraFacingMode,showPanel:e.showPanel,activePickerPanel:e.activePickerPanel,disableLocalFiles:e.disableLocalFiles,fileManagerSelectionType:e.fileManagerSelectionType,note:e.note,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy}),R(vp,{children:e.showAddFilesPanel?R(FQ,{...e,isSizeMD:r},"AddFiles"):null}),R(vp,{children:e.fileCardFor?R(qQ,{...e},"FileCard"):null}),R(vp,{children:e.activePickerPanel?R(vY,{...e},"Picker"):null}),R(vp,{children:e.showFileEditor?R(OQ,{...e},"Editor"):null}),R("div",{className:"uppy-Dashboard-progressindicators",children:[!e.disableInformer&&R(u2,{uppy:e.uppy}),!e.disableStatusBar&&R(UY,{uppy:e.uppy,i18n:e.i18n,hideProgressDetails:e.hideProgressDetails,hideUploadButton:e.hideUploadButton,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,hideAfterFinish:e.hideProgressAfterFinish,doneButtonHandler:e.doneButtonHandler}),!e.disableInformer&&R(u2,{uppy:e.uppy}),e.progressindicators.map(g=>e.uppy.getPlugin(g.id).render(e.state))]})]})]})]})}const zY={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video",uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function rF(e,t){if(t){const n=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(n)return n}return e}function $Y(){let e=!1;return DK((n,r)=>{const s=rF(n,r),i=s.contains(document.activeElement);if(i&&e)return;const l=s.querySelector("[data-uppy-super-focusable]");if(!(i&&!l))if(l)l.focus({preventScroll:!0}),e=!0;else{const c=s.querySelector(eL);c==null||c.focus({preventScroll:!0}),e=!1}},260)}function y2(e,t){const n=t[0];n&&(n.focus(),e.preventDefault())}function VY(e,t){const n=t[t.length-1];n&&(n.focus(),e.preventDefault())}function HY(e){return e.contains(document.activeElement)}function sF(e,t,n){const r=rF(n,t),s=Ld(r.querySelectorAll(eL)),i=s.indexOf(document.activeElement);HY(r)?e.shiftKey&&i===0?VY(e,s):!e.shiftKey&&i===s.length-1&&y2(e,s):y2(e,s)}function WY(e,t,n){t===null||sF(e,t,n)}const v2=9,qY=27;function x2(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const ZY={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:lQ,showLinkToFileUploadResult:!1,hideProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var sx,zc,Ya,Uh,$c,dg,hg,fg,Xa,pg,mg,Vc,pa,ob,ab;let GY=(sx=class extends Km{constructor(n,r){var i;const s=(r==null?void 0:r.autoOpen)??null;super(n,{...ZY,...r,autoOpen:s});te(this,pa);te(this,zc);I(this,"modalName",`uppy-Dashboard-${R_()}`);I(this,"superFocus",$Y());I(this,"ifFocusedOnUppyRecently",!1);I(this,"dashboardIsDisabled");I(this,"savedScrollPosition");I(this,"savedActiveElement");I(this,"resizeObserver");I(this,"darkModeMediaQuery");I(this,"makeDashboardInsidesVisibleAnywayTimeout");I(this,"removeTarget",n=>{const s=this.getPluginState().targets.filter(i=>i.id!==n.id);this.setPluginState({targets:s})});I(this,"addTarget",n=>{const r=n.id||n.constructor.name,s=n.title||r,i=n.type;if(i!=="acquirer"&&i!=="progressindicator"&&i!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const l={id:r,name:s,type:i},d=this.getPluginState().targets.slice();return d.push(l),this.setPluginState({targets:d}),this.el});I(this,"hideAllPanels",()=>{var s;const n=this.getPluginState(),r={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};n.activePickerPanel===r.activePickerPanel&&n.showAddFilesPanel===r.showAddFilesPanel&&n.showFileEditor===r.showFileEditor&&n.activeOverlayType===r.activeOverlayType||(this.setPluginState(r),this.uppy.emit("dashboard:close-panel",(s=n.activePickerPanel)==null?void 0:s.id))});I(this,"showPanel",n=>{const{targets:r}=this.getPluginState(),s=r.find(i=>i.type==="acquirer"&&i.id===n);this.setPluginState({activePickerPanel:s,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",n)});I(this,"canEditFile",n=>{const{targets:r}=this.getPluginState();return T(this,Xa).call(this,r).some(i=>this.uppy.getPlugin(i.id).canEditFile(n))});I(this,"openFileEditor",n=>{const{targets:r}=this.getPluginState(),s=T(this,Xa).call(this,r);this.setPluginState({showFileEditor:!0,fileCardFor:n.id||null,activeOverlayType:"FileEditor"}),s.forEach(i=>{this.uppy.getPlugin(i.id).selectFile(n)})});I(this,"closeFileEditor",()=>{const{metaFields:n}=this.getPluginState();n&&n.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});I(this,"saveFileEditor",()=>{const{targets:n}=this.getPluginState();T(this,Xa).call(this,n).forEach(s=>{this.uppy.getPlugin(s.id).save()}),this.closeFileEditor()});I(this,"openModal",()=>{const{promise:n,resolve:r}=x2();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const s=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",s,!1),r()};this.el.addEventListener("animationend",s,!1)}else this.setPluginState({isHidden:!1}),r();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),n});I(this,"closeModal",n=>{var d;const r=(n==null?void 0:n.manualClose)??!0,{isHidden:s,isClosing:i}=this.getPluginState();if(s||i)return;const{promise:l,resolve:c}=x2();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const h=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",h,!1),c()};this.el.addEventListener("animationend",h,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),c();return document.removeEventListener("keydown",this.handleKeyDownInModal),r&&this.opts.browserBackButtonClose&&(d=history.state)!=null&&d[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),l});I(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);I(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());I(this,"setDarkModeCapability",n=>{const{capabilities:r}=this.uppy.getState();this.uppy.setState({capabilities:{...r,darkMode:n}})});I(this,"handleSystemDarkModeChange",n=>{const r=n.matches;this.uppy.log(`[Dashboard] Dark mode is ${r?"on":"off"}`),this.setDarkModeCapability(r)});I(this,"toggleFileCard",(n,r)=>{const s=this.uppy.getFile(r);n?this.uppy.emit("dashboard:file-edit-start",s):this.uppy.emit("dashboard:file-edit-complete",s),this.setPluginState({fileCardFor:n?r:null,activeOverlayType:n?"FileCard":null})});I(this,"toggleAddFilesPanel",n=>{this.setPluginState({showAddFilesPanel:n,activeOverlayType:n?"AddFiles":null})});I(this,"addFiles",n=>{const r=n.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||s.webkitRelativePath||null}}));try{this.uppy.addFiles(r)}catch(s){this.uppy.log(s)}});I(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(n=>{const r=n[0],{width:s,height:i}=r.contentRect;this.setPluginState({containerWidth:s,containerHeight:i,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const n=this.getPluginState(),r=!this.opts.inline&&n.isHidden;!n.areInsidesReadyToBeVisible&&!r&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});I(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});I(this,"recordIfFocusedOnUppyRecently",n=>{this.el.contains(n.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});I(this,"disableInteractiveElements",n=>{const r=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],s=T(this,zc)??Ld(this.el.querySelectorAll(r)).filter(i=>!i.classList.contains("uppy-Dashboard-close"));for(const i of s)i.tagName==="A"?i.setAttribute("aria-disabled",n):i.disabled=n;n?ne(this,zc,s):ne(this,zc,null),this.dashboardIsDisabled=n});I(this,"updateBrowserHistory",()=>{var n;(n=history.state)!=null&&n[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});I(this,"handlePopState",n=>{var r;this.isModalOpen()&&(!n.state||!n.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((r=n.state)!=null&&r[this.modalName])&&history.back()});I(this,"handleKeyDownInModal",n=>{n.keyCode===qY&&this.requestCloseModal(),n.keyCode===v2&&sF(n,this.getPluginState().activeOverlayType,this.el)});I(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});I(this,"handlePaste",n=>{this.uppy.iteratePlugins(s=>{var i;s.type==="acquirer"&&((i=s.handleRootPaste)==null||i.call(s,n))});const r=Ld(n.clipboardData.files);r.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(r))});I(this,"handleInputChange",n=>{n.preventDefault();const r=Ld(n.currentTarget.files||[]);r.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(r))});I(this,"handleDragOver",n=>{n.preventDefault(),n.stopPropagation();const r=()=>{let c=!0;return this.uppy.iteratePlugins(d=>{var h;(h=d.canHandleRootDrop)!=null&&h.call(d,n)&&(c=!0)}),c},s=()=>{const{types:c}=n.dataTransfer;return c.some(d=>d==="Files")},i=r(),l=s();if(!i&&!l||this.opts.disabled||this.opts.disableLocalFiles&&(l||!i)||!this.uppy.getState().allowNewUpload){n.dataTransfer.dropEffect="none";return}n.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(n)});I(this,"handleDragLeave",n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(n)});I(this,"handleDrop",async n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(l=>{var c;l.type==="acquirer"&&((c=l.handleRootDrop)==null||c.call(l,n))});let r=!1;const s=l=>{this.uppy.log(l,"error"),r||(this.uppy.info(l.message,"error"),r=!0)};this.uppy.log("[Dashboard] Processing dropped files");const i=await uG(n.dataTransfer,{logDropError:s});i.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(i)),this.opts.onDrop(n)});I(this,"handleRequestThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",n)});I(this,"handleCancelThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",n)});I(this,"handleKeyDownInInline",n=>{n.keyCode===v2&&WY(n,this.getPluginState().activeOverlayType,this.el)});I(this,"handlePasteOnBody",n=>{this.el.contains(document.activeElement)&&this.handlePaste(n)});I(this,"handleComplete",({failed:n})=>{this.opts.closeAfterFinish&&!(n!=null&&n.length)&&this.requestCloseModal()});I(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});te(this,Ya,()=>{if(this.opts.disableThumbnailGenerator)return;const n=600,r=this.uppy.getFiles();if(r.length===1){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s==null||s.setOptions({thumbnailWidth:n});const i={...r[0],preview:void 0};s==null||s.requestThumbnail(i).then(()=>{s==null||s.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});te(this,Uh,n=>{const r=n[0],{metaFields:s}=this.getPluginState(),i=s&&s.length>0,l=this.canEditFile(r);i&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,r.id):l&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(r)});I(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const n=CC(this.opts.trigger);n?n.forEach(r=>r.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",T(this,Vc)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",T(this,Ya)),this.uppy.on("file-removed",T(this,Ya)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",T(this,Uh))});I(this,"removeEvents",()=>{const n=CC(this.opts.trigger);!this.opts.inline&&n&&n.forEach(r=>r.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",T(this,Vc)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",T(this,Ya)),this.uppy.off("file-removed",T(this,Ya)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",T(this,Uh))});I(this,"superFocusOnEachUpdate",()=>{const n=this.el.contains(document.activeElement),r=document.activeElement===document.body||document.activeElement===null,s=this.uppy.getState().info.length===0,i=!this.opts.inline;s&&(i||n||r&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});I(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});I(this,"saveFileCard",(n,r)=>{this.uppy.setFileMeta(r,n),this.toggleFileCard(!1,r)});te(this,$c,n=>{const r=this.uppy.getPlugin(n.id);return{...n,icon:r.icon||this.opts.defaultPickerIcon,render:r.render}});te(this,dg,n=>{const r=this.uppy.getPlugin(n.id);return typeof r.isSupported!="function"?!0:r.isSupported()});te(this,hg,n=>n.filter(r=>r.type==="acquirer"&&T(this,dg).call(this,r)).map(T(this,$c)));te(this,fg,n=>n.filter(r=>r.type==="progressindicator").map(T(this,$c)));te(this,Xa,n=>n.filter(r=>r.type==="editor").map(T(this,$c)));I(this,"render",n=>{const r=this.getPluginState(),{files:s,capabilities:i,allowNewUpload:l}=n,{newFiles:c,uploadStartedFiles:d,completeFiles:h,erroredFiles:f,inProgressFiles:p,inProgressNotPausedFiles:g,processingFiles:b,isUploadStarted:j,isAllComplete:_,isAllPaused:w}=this.uppy.getObjectOfFilesPerState(),S=T(this,hg).call(this,r.targets),x=T(this,fg).call(this,r.targets),N=T(this,Xa).call(this,r.targets);let P;return this.opts.theme==="auto"?P=i.darkMode?"dark":"light":P=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),BY({state:n,isHidden:r.isHidden,files:s,newFiles:c,uploadStartedFiles:d,completeFiles:h,erroredFiles:f,inProgressFiles:p,inProgressNotPausedFiles:g,processingFiles:b,isUploadStarted:j,isAllComplete:_,isAllPaused:w,totalFileCount:Object.keys(s).length,totalProgress:n.totalProgress,allowNewUpload:l,acquirers:S,theme:P,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:r.activePickerPanel,showFileEditor:r.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:r.isClosing,progressindicators:x,editors:N,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:n.recoveredState,metaFields:r.metaFields,resumableUploads:i.resumableUploads||!1,individualCancellation:i.individualCancellation,isMobileDevice:i.isMobileDevice,fileCardFor:r.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:r.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:r.containerWidth,containerHeight:r.containerHeight,areInsidesReadyToBeVisible:r.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:r.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop,disableInformer:this.opts.disableInformer,disableStatusBar:this.opts.disableStatusBar,hideProgressDetails:this.opts.hideProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideProgressAfterFinish:this.opts.hideProgressAfterFinish,doneButtonHandler:this.opts.doneButtonHandler})});te(this,pg,()=>{const{plugins:n}=this.opts;n.forEach(r=>{const s=this.uppy.getPlugin(r);s?s.mount(this,s):this.uppy.log(`[Uppy] Dashboard could not find plugin '${r}', make sure to uppy.use() the plugins you are specifying`,"warning")})});te(this,mg,()=>{this.uppy.iteratePlugins(T(this,Vc))});te(this,Vc,n=>{var s;const r=["acquirer","editor"];n&&!((s=n.opts)!=null&&s.target)&&r.includes(n.type)&&(this.getPluginState().targets.some(l=>n.id===l.id)||n.mount(this,n))});I(this,"install",()=>{var d;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:n,closeAfterFinish:r}=this.opts;if(n&&r)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:s,allowMultipleUploadBatches:i}=this.uppy.opts;(s||i)&&r&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:l}=this.opts;l&&this.mount(l,this),this.opts.disableThumbnailGenerator||this.uppy.use(KL,{id:ie(this,pa,ab).call(this),...ie(this,pa,ob).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const c=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${c?"on":"off"}`),this.setDarkModeCapability(c),this.opts.theme==="auto"&&((d=this.darkModeMediaQuery)==null||d.addListener(this.handleSystemDarkModeChange)),T(this,pg).call(this),T(this,mg).call(this),this.initEvents()});I(this,"uninstall",()=>{var r;if(!this.opts.disableThumbnailGenerator){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s&&this.uppy.removePlugin(s)}const{plugins:n}=this.opts;n.forEach(s=>{const i=this.uppy.getPlugin(s);i&&i.unmount()}),this.opts.theme==="auto"&&((r=this.darkModeMediaQuery)==null||r.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=zY,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(i=this.opts).onRequestCloseModal??(i.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(n){var r;super.setOptions(n),(r=this.uppy.getPlugin(ie(this,pa,ab).call(this)))==null||r.setOptions(ie(this,pa,ob).call(this))}},zc=new WeakMap,Ya=new WeakMap,Uh=new WeakMap,$c=new WeakMap,dg=new WeakMap,hg=new WeakMap,fg=new WeakMap,Xa=new WeakMap,pg=new WeakMap,mg=new WeakMap,Vc=new WeakMap,pa=new WeakSet,ob=function(){const{thumbnailWidth:n,thumbnailHeight:r,thumbnailType:s,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:n,thumbnailHeight:r,thumbnailType:s,waitForThumbnailsBeforeUpload:i,lazy:!i}},ab=function(){return`${this.id}:ThumbnailGenerator`},I(sx,"VERSION",LQ.version),sx);const KY=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],QY=/^(aria-|data-)/,iF=e=>Object.fromEntries(Object.entries(e).filter(([t])=>QY.test(t)||KY.includes(t)));function YY(e,t){const n=iF(e);return Object.keys(e).some(r=>!Object.hasOwn(n,r)&&e[r]!==t[r])}class XY extends v.Component{constructor(){super(...arguments);I(this,"container");I(this,"plugin")}componentDidMount(){this.installPlugin()}componentDidUpdate(n){if(n.uppy!==this.props.uppy)this.uninstallPlugin(n),this.installPlugin();else if(YY(this.props,n)){const{uppy:r,...s}={...this.props,target:this.container};this.plugin.setOptions(s)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:n,...r}={id:"Dashboard",...this.props,inline:!0,target:this.container};n.use(GY,r),this.plugin=n.getPlugin(r.id)}uninstallPlugin(n=this.props){const{uppy:r}=n;r.removePlugin(this.plugin)}render(){return v.createElement("div",{className:"uppy-Container",ref:n=>{this.container=n},...iF(this.props)})}}var oF={};function hs(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var JY=hs;hs.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};hs.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};hs.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};hs.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};hs.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};hs.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};hs.prototype.start=hs.prototype.try;hs.prototype.errors=function(){return this._errors};hs.prototype.attempts=function(){return this._attempts};hs.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var s=this._errors[r],i=s.message,l=(e[i]||0)+1;e[i]=l,l>=n&&(t=s,n=l)}return t};(function(e){var t=JY;e.operation=function(n){var r=e.timeouts(n);return new t(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},e.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in n)r[s]=n[s];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],l=0;l<r.retries;l++)i.push(this.createTimeout(l,r));return n&&n.forever&&!i.length&&i.push(this.createTimeout(l,r)),i.sort(function(c,d){return c-d}),i},e.createTimeout=function(n,r){var s=r.randomize?Math.random()+1:1,i=Math.round(s*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return i=Math.min(i,r.maxTimeout),i},e.wrap=function(n,r,s){if(r instanceof Array&&(s=r,r=null),!s){s=[];for(var i in n)typeof n[i]=="function"&&s.push(i)}for(var l=0;l<s.length;l++){var c=s[l],d=n[c];n[c]=(function(f){var p=e.operation(r),g=Array.prototype.slice.call(arguments,1),b=g.pop();g.push(function(j){p.retry(j)||(j&&(arguments[0]=p.mainError()),b.apply(this,arguments))}),p.attempt(function(){f.apply(n,g)})}).bind(n,d),n[c].options=r}}})(oF);var eX=oF;const tX=Ei(eX),nX=Object.prototype.toString,rX=e=>nX.call(e)==="[object Error]",sX=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function iX(e){return e&&rX(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:sX.has(e.message):!1}class lb extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const b2=(e,t,n)=>{const r=n.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=r,e};async function w2(e,t){return new Promise((n,r)=>{t={...t},t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.retries??(t.retries=10);const s=tX.operation(t),i=()=>{var c;s.stop(),r((c=t.signal)==null?void 0:c.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",i,{once:!0});const l=()=>{var c;(c=t.signal)==null||c.removeEventListener("abort",i),s.stop()};s.attempt(async c=>{try{const d=await e(c);l(),n(d)}catch(d){try{if(!(d instanceof Error))throw new TypeError(`Non-error was thrown: "${d}". You should only throw errors.`);if(d instanceof lb)throw d.originalError;if(d instanceof TypeError&&!iX(d))throw d;if(b2(d,c,t),await t.shouldRetry(d)||(s.stop(),r(d)),await t.onFailedAttempt(d),!s.retry(d))throw s.mainError()}catch(h){b2(h,c,t),l(),r(h)}}})})}const oX="5.0.0",aX={version:oX};class lX extends Error{constructor(){super("Authorization required");I(this,"isAuthError");this.name="AuthError",this.isAuthError=!0}}function cX(e){return e.replace(/\/$/,"")}const _2=10,uX=5*60*1e3,dX=401;class hX extends Error{constructor({statusCode:n,message:r}){super(r);I(this,"statusCode");this.name="HttpError",this.statusCode=n}}async function fX(e){if(e.status===dX)throw new lX;if(e.ok)return e.json();let t=`Failed request with status: ${e.status}. ${e.statusText}`,n;try{n=await e.json(),n.message&&(t=`${t} message: ${n.message}`),n.requestId&&(t=`${t} request-Id: ${n.requestId}`)}catch(r){throw new Error(t,{cause:r})}throw e.status>=400&&e.status<=499&&n.message?new bG(n.message):new hX({statusCode:e.status,message:t})}function pX(e,t,n){const{progress:r,bytesUploaded:s,bytesTotal:i}=t;r&&(e.uppy.log(`Upload progress: ${r}`),e.uppy.emit("upload-progress",n,{uploadStarted:n.progress.uploadStarted??0,bytesUploaded:s,bytesTotal:i}))}var Ja,ma,cb,gg,ub;class aF{constructor(t,n){te(this,ma);te(this,Ja);I(this,"uppy");I(this,"opts");te(this,gg,async({file:t,postBody:n,signal:r})=>{var i;if(((i=t.remote)==null?void 0:i.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(t.remote.url,{...t.remote.body,...n},{signal:r})).token});this.uppy=t,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),ne(this,Ja,n.companionHeaders)}setCompanionHeaders(t){ne(this,Ja,t)}[Symbol.for("uppy test: getCompanionHeaders")](){return T(this,Ja)}get hostname(){const{companion:t}=this.uppy.getState(),n=this.opts.companionUrl;return cX(t!=null&&t[n]?t[n]:n)}async headers(t=!1){return{...{Accept:"application/json",...t?void 0:{"Content-Type":"application/json"}},...T(this,Ja)}}onReceiveResponse(t){const{headers:n}=t,s=this.uppy.getState().companion||{},i=this.opts.companionUrl;n.has("i-am")&&n.get("i-am")!==s[i]&&this.uppy.setState({companion:{...s,[i]:n.get("i-am")}})}async request({path:t,method:n="GET",data:r,skipPostResponse:s,signal:i}){try{const l=await this.headers(!r),c=await eG(ie(this,ma,cb).call(this,t),{method:n,signal:i,headers:l,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return s||this.onReceiveResponse(c),await fX(c)}catch(l){throw l.isAuthError||l.name==="UserFacingApiError"||l.name==="AbortError"?l:new XZ(`Could not ${n} ${ie(this,ma,cb).call(this,t)}`,{cause:l})}}async get(t,n){return this.request({...n,path:t})}async post(t,n,r){return this.request({...r,path:t,method:"POST",data:n})}async delete(t,n,r){return this.request({...r,path:t,method:"DELETE",data:n})}async uploadRemoteFile(t,n,r){try{const{signal:s,getQueue:i}=r||{};return await w2(async()=>{var h;const l=(h=this.uppy.getFile(t.id))==null?void 0:h.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),ie(this,ma,ub).call(this,{file:t,queue:i(),signal:s});const d=await i().wrapPromiseFunction(async(...f)=>{try{return await T(this,gg).call(this,...f)}catch(p){if(p.isAuthError)throw new lb(p);if(p.cause==null)throw p;const g=p.cause,b=()=>[408,409,429,418,423].includes(g.statusCode)||g.statusCode>=500&&g.statusCode<=599&&![501,505].includes(g.statusCode);throw g.name==="HttpError"&&!b()?new lb(g):g}},{priority:-1})({file:t,postBody:n,signal:s}).abortOn(s);if(this.uppy.getFile(t.id))return this.uppy.setFileState(t.id,{serverToken:d}),ie(this,ma,ub).call(this,{file:this.uppy.getFile(t.id),queue:i(),signal:s})},{retries:_2,signal:s,onFailedAttempt:l=>this.uppy.log(`Retrying upload due to: ${l.message}`,"warning")})}catch(s){if(s.name==="AbortError")return;throw this.uppy.emit("upload-error",t,s),s}}}Ja=new WeakMap,ma=new WeakSet,cb=function(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`},gg=new WeakMap,ub=async function({file:t,queue:n,signal:r}){let s;const{capabilities:i}=this.uppy.getState();try{return await new Promise((l,c)=>{const d=t.serverToken,h=dG(t.remote.companionUrl);let f,p,g,{isPaused:b}=t;const j=(M,z)=>{if(f==null||f.readyState!==f.OPEN){this.uppy.log(`Cannot send "${M}" to socket ${t.id} because the socket state was ${String(f==null?void 0:f.readyState)}`,"warning");return}f.send(JSON.stringify({action:M,payload:z??{}}))};function _(){i.resumableUploads&&j(b?"pause":"resume")}const w=async()=>{p&&p.abort(),p=new AbortController;const M=D=>{var F;this.uppy.setFileState(t.id,{serverToken:null}),(F=p==null?void 0:p.abort)==null||F.call(p),c(D)};function z(){clearTimeout(g),!b&&(g=setTimeout(()=>M(new Error("Timeout waiting for message from Companion socket")),uX))}try{await n.wrapPromiseFunction(async()=>{await w2(async()=>new Promise((F,J)=>{f=new WebSocket(`${h}/api/${d}`),z(),f.addEventListener("close",()=>{f=void 0,J(new Error("Socket closed unexpectedly"))}),f.addEventListener("error",Y=>{this.uppy.log(`Companion socket error ${JSON.stringify(Y)}, closing socket`,"warning"),f==null||f.close()}),f.addEventListener("open",()=>{_()}),f.addEventListener("message",Y=>{var Z,U,V;z();try{const{action:K,payload:O}=JSON.parse(Y.data);switch(K){case"progress":{pX(this,O,this.uppy.getFile(t.id));break}case"success":{const G=(Z=O.response)==null?void 0:Z.responseText;this.uppy.emit("upload-success",this.uppy.getFile(t.id),{uploadURL:O.url,status:((U=O.response)==null?void 0:U.status)??200,body:G?JSON.parse(G):void 0}),(V=p==null?void 0:p.abort)==null||V.call(p),l();break}case"error":{const{message:G}=O.error;throw Object.assign(new Error(G),{cause:O.error})}default:this.uppy.log(`Companion socket unknown action ${K}`,"warning")}}catch(K){M(K)}});const H=()=>{this.uppy.log(`Closing socket ${t.id}`),clearTimeout(g),f&&f.close(),f=void 0};p.signal.addEventListener("abort",()=>{H()})}),{retries:_2,signal:p.signal,onFailedAttempt:()=>{p.signal.aborted||this.uppy.log(`Retrying websocket ${t.id}`)}})})().abortOn(p.signal)}catch(D){if(p.signal.aborted)return;M(D)}},S=M=>{i.resumableUploads&&(b=M,f&&_())},x=M=>{var z;i.individualCancellation&&M.id===t.id&&(j("cancel"),(z=p==null?void 0:p.abort)==null||z.call(p),this.uppy.log(`upload ${t.id} was removed`),l())},N=()=>{var M;j("cancel"),(M=p==null?void 0:p.abort)==null||M.call(p),this.uppy.log(`upload ${t.id} was canceled`),l()},P=(M,z)=>{(M==null?void 0:M.id)===t.id&&S(z)},E=()=>S(!0),k=()=>S(!1);this.uppy.on("file-removed",x),this.uppy.on("cancel-all",N),this.uppy.on("upload-pause",P),this.uppy.on("pause-all",E),this.uppy.on("resume-all",k),s=()=>{this.uppy.off("file-removed",x),this.uppy.off("cancel-all",N),this.uppy.off("upload-pause",P),this.uppy.off("pause-all",E),this.uppy.off("resume-all",k)},r.addEventListener("abort",()=>{p==null||p.abort()}),w()})}finally{s==null||s()}},I(aF,"VERSION",aX.version);const mX="5.0.0",gX={version:mX};function yX({method:e="PUT",CanonicalUri:t="/",CanonicalQueryString:n="",SignedHeaders:r,HashedPayload:s}){const i=Object.keys(r).map(l=>l.toLowerCase()).sort();return[e,t,n,...i.map(l=>`${l}:${r[l]}`),"",i.join(";"),s].join(`
`)}const z_=new TextEncoder,$_={name:"HMAC",hash:"SHA-256"};async function vX(e){const{subtle:t}=globalThis.crypto;return t.digest($_.hash,z_.encode(e))}async function xX(e){const{subtle:t}=globalThis.crypto;return t.importKey("raw",typeof e=="string"?z_.encode(e):e,$_,!1,["sign"])}function S2(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=t[r].toString(16).padStart(2,"0");return n}async function ld(e,t){const{subtle:n}=globalThis.crypto;return n.sign($_,await xX(e),z_.encode(t))}async function bX({accountKey:e,accountSecret:t,sessionToken:n,bucketName:r,Key:s,Region:i,expires:l,uploadId:c,partNumber:d}){const h="s3",f=`${h}.${i}.amazonaws.com`,p=`/${r}/${encodeURI(s).replace(/[;?:@&=+$,#!'()*]/g,D=>`%${D.charCodeAt(0).toString(16).toUpperCase()}`)}`,g="UNSIGNED-PAYLOAD",b=new Date().toISOString().replace(/[-:]|\.\d+/g,""),j=b.slice(0,8),_=`${j}/${i}/${h}/aws4_request`,w=new URL(`https://${f}${p}`);w.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),w.searchParams.set("X-Amz-Content-Sha256",g),w.searchParams.set("X-Amz-Credential",`${e}/${_}`),w.searchParams.set("X-Amz-Date",b),w.searchParams.set("X-Amz-Expires",l),w.searchParams.set("X-Amz-Security-Token",n),w.searchParams.set("X-Amz-SignedHeaders","host"),d&&w.searchParams.set("partNumber",d),c&&w.searchParams.set("uploadId",c),w.searchParams.set("x-id",d&&c?"UploadPart":"PutObject");const S=yX({CanonicalUri:p,CanonicalQueryString:w.search.slice(1),SignedHeaders:{host:f},HashedPayload:g}),x=S2(await vX(S)),N=["AWS4-HMAC-SHA256",b,_,x].join(`
`),P=await ld(`AWS4${t}`,j),E=await ld(P,i),k=await ld(E,h),M=await ld(k,"aws4_request"),z=S2(await ld(M,N));return w.searchParams.set("X-Amz-Signature",z),w}const wX=1024*1024,N2={getChunkSize(e){return Math.ceil(e.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}};function _X(e){if(typeof e=="string")return parseInt(e,10);if(typeof e=="number")return e;throw new TypeError("Expected a number")}const Wp=Symbol("pausing upload, not an actual error");var Cs,Xr,di,Yi,Xi,Bh,zh,Hc,el,Wc,$h,qc,Vh,Ws,lF,cF,db,Hh,Wh,uF;class SX{constructor(t,n){te(this,Ws);I(this,"options");te(this,Cs,new Uv);te(this,Xr,[]);te(this,di,[]);te(this,Yi);te(this,Xi);te(this,Bh,!1);te(this,zh);te(this,Hc);te(this,el);te(this,Wc);te(this,$h,t=>(t==null?void 0:t.cause)===Wp?null:T(this,zh).call(this,t));te(this,qc,1e4);te(this,Vh,5*wX);te(this,Hh,t=>n=>{if(!n.lengthComputable)return;T(this,di)[t].uploaded=_X(n.loaded);const r=T(this,di).reduce((s,i)=>s+i.uploaded,0);this.options.onProgress(r,T(this,Yi).size)});te(this,Wh,t=>n=>{T(this,Xr)[t]=null,T(this,di)[t].etag=n,T(this,di)[t].done=!0;const r={PartNumber:t+1,ETag:n};this.options.onPartComplete(r)});var r;this.options={...N2,...n},(r=this.options).getChunkSize??(r.getChunkSize=N2.getChunkSize),ne(this,Yi,t),ne(this,Xi,n.file),ne(this,Hc,this.options.onSuccess),ne(this,zh,this.options.onError),ne(this,el,this.options.shouldUseMultipart),ne(this,Wc,n.uploadId&&n.key),ie(this,Ws,lF).call(this)}start(){T(this,Bh)?(T(this,Cs).signal.aborted||T(this,Cs).abort(Wp),ne(this,Cs,new Uv),ie(this,Ws,db).call(this)):T(this,Wc)?(this.options.companionComm.restoreUploadFile(T(this,Xi),{uploadId:this.options.uploadId,key:this.options.key}),ie(this,Ws,db).call(this)):ie(this,Ws,cF).call(this)}pause(){T(this,Cs).abort(Wp),ne(this,Cs,new Uv)}abort(t){t!=null&&t.really?ie(this,Ws,uF).call(this):this.pause()}[Symbol.for("uppy test: getChunkState")](){return T(this,di)}}Cs=new WeakMap,Xr=new WeakMap,di=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Bh=new WeakMap,zh=new WeakMap,Hc=new WeakMap,el=new WeakMap,Wc=new WeakMap,$h=new WeakMap,qc=new WeakMap,Vh=new WeakMap,Ws=new WeakSet,lF=function(){const t=T(this,Yi).size,n=typeof T(this,el)=="function"?T(this,el).call(this,T(this,Xi)):!!T(this,el);if(n&&t>T(this,Vh)){let r=Math.max(this.options.getChunkSize(T(this,Yi)),T(this,Vh)),s=Math.floor(t/r);s>T(this,qc)&&(s=T(this,qc),r=t/T(this,qc)),ne(this,Xr,Array(s));for(let i=0,l=0;i<t;i+=r,l++){const c=Math.min(t,i+r),d=()=>{const h=i;return T(this,Yi).slice(h,c)};if(T(this,Xr)[l]={getData:d,onProgress:T(this,Hh).call(this,l),onComplete:T(this,Wh).call(this,l),shouldUseMultipart:n},T(this,Wc)){const h=i+r>t?t-i:r;T(this,Xr)[l].setAsUploaded=()=>{T(this,Xr)[l]=null,T(this,di)[l].uploaded=h}}}}else ne(this,Xr,[{getData:()=>T(this,Yi),onProgress:T(this,Hh).call(this,0),onComplete:T(this,Wh).call(this,0),shouldUseMultipart:n}]);ne(this,di,T(this,Xr).map(()=>({uploaded:0})))},cF=function(){this.options.companionComm.uploadFile(T(this,Xi),T(this,Xr),T(this,Cs).signal).then(T(this,Hc),T(this,$h)),ne(this,Bh,!0)},db=function(){this.options.companionComm.resumeUploadFile(T(this,Xi),T(this,Xr),T(this,Cs).signal).then(T(this,Hc),T(this,$h))},Hh=new WeakMap,Wh=new WeakMap,uF=function(){T(this,Cs).abort(),this.options.companionComm.abortFileUpload(T(this,Xi)).catch(t=>this.options.log(t))};function Hn(e){if(e!=null&&e.aborted)throw JR("The operation was aborted",{cause:e.reason})}function NX(e){const t=new URL(e);return t.search="",t.hash="",t.href}var qh,js,Zh,Gh,Kh,Qh,Zc,Gc,Kc,Qc,tl,Yc,Ps,Nl,dF,hb;class CX{constructor(t,n,r,s){te(this,Nl);te(this,qh);te(this,js,new WeakMap);te(this,Zh);te(this,Gh);te(this,Kh);te(this,Qh);te(this,Zc);te(this,Gc);te(this,Kc);te(this,Qc);te(this,tl);te(this,Yc);te(this,Ps);ne(this,Gc,t),ne(this,tl,r),ne(this,Ps,s),this.setOptions(n)}setOptions(t){const n=T(this,Gc);"abortMultipartUpload"in t&&ne(this,qh,n.wrapPromiseFunction(t.abortMultipartUpload,{priority:1})),"createMultipartUpload"in t&&ne(this,Zh,n.wrapPromiseFunction(t.createMultipartUpload,{priority:-1})),"signPart"in t&&ne(this,Gh,n.wrapPromiseFunction(t.signPart)),"listParts"in t&&ne(this,Qh,n.wrapPromiseFunction(t.listParts)),"completeMultipartUpload"in t&&ne(this,Qc,n.wrapPromiseFunction(t.completeMultipartUpload,{priority:1})),"retryDelays"in t&&ne(this,Kc,t.retryDelays??[]),"uploadPartBytes"in t&&ne(this,Yc,n.wrapPromiseFunction(t.uploadPartBytes,{priority:1/0})),"getUploadParameters"in t&&ne(this,Kh,n.wrapPromiseFunction(t.getUploadParameters))}async getUploadId(t,n){let r;for(;r=T(this,js).get(t.data),r!=null;)try{return await r}catch{}const s=T(this,Zh).call(this,T(this,Ps).call(this,t),n),i=()=>{s.abort(n.reason),T(this,js).delete(t.data)};return n.addEventListener("abort",i,{once:!0}),T(this,js).set(t.data,s),s.then(async l=>{n.removeEventListener("abort",i),T(this,tl).call(this,t,l),T(this,js).set(t.data,l)},()=>{n.removeEventListener("abort",i),T(this,js).delete(t.data)}),s}async abortFileUpload(t){const n=T(this,js).get(t.data);if(n==null)return;T(this,js).delete(t.data),T(this,tl).call(this,t,Object.create(null));let r;try{r=await n}catch{return}await T(this,qh).call(this,T(this,Ps).call(this,t),r)}async uploadFile(t,n,r){if(Hn(r),n.length===1&&!n[0].shouldUseMultipart)return ie(this,Nl,hb).call(this,t,n[0],r);const{uploadId:s,key:i}=await this.getUploadId(t,r);Hn(r);try{const l=await Promise.all(n.map((c,d)=>this.uploadChunk(t,d+1,c,r)));return Hn(r),await T(this,Qc).call(this,T(this,Ps).call(this,t),{key:i,uploadId:s,parts:l,signal:r},r).abortOn(r)}catch(l){throw(l==null?void 0:l.cause)!==Wp&&(l==null?void 0:l.name)!=="AbortError"&&this.abortFileUpload(t),l}}restoreUploadFile(t,n){T(this,js).set(t.data,n)}async resumeUploadFile(t,n,r){if(Hn(r),n.length===1&&n[0]!=null&&!n[0].shouldUseMultipart)return ie(this,Nl,hb).call(this,t,n[0],r);const{uploadId:s,key:i}=await this.getUploadId(t,r);Hn(r);const l=await T(this,Qh).call(this,T(this,Ps).call(this,t),{uploadId:s,key:i,signal:r},r).abortOn(r);Hn(r);const c=await Promise.all(n.map((d,h)=>{var g;const f=h+1,p=l.find(({PartNumber:b})=>b===f);return p==null?this.uploadChunk(t,f,d,r):((g=d==null?void 0:d.setAsUploaded)==null||g.call(d),{PartNumber:f,ETag:p.ETag})}));return Hn(r),T(this,Qc).call(this,T(this,Ps).call(this,t),{key:i,uploadId:s,parts:c,signal:r},r).abortOn(r)}async uploadChunk(t,n,r,s){Hn(s);const{uploadId:i,key:l}=await this.getUploadId(t,s),c=T(this,Kc).values(),d=T(this,Kc).values(),h=()=>{const f=c.next();return f==null||f.done?null:f.value};for(;;){Hn(s);const f=r.getData(),{onProgress:p,onComplete:g}=r;let b;try{b=await T(this,Gh).call(this,T(this,Ps).call(this,t),{uploadId:i,key:l,partNumber:n,body:f,signal:s}).abortOn(s)}catch(j){const _=h();if(_==null||s.aborted)throw j;await new Promise(w=>setTimeout(w,_));continue}Hn(s);try{return{PartNumber:n,...await T(this,Yc).call(this,{signature:b,body:f,size:f.size,onProgress:p,onComplete:g,signal:s}).abortOn(s)}}catch(j){if(!await ie(this,Nl,dF).call(this,j,d))throw j}}}}qh=new WeakMap,js=new WeakMap,Zh=new WeakMap,Gh=new WeakMap,Kh=new WeakMap,Qh=new WeakMap,Zc=new WeakMap,Gc=new WeakMap,Kc=new WeakMap,Qc=new WeakMap,tl=new WeakMap,Yc=new WeakMap,Ps=new WeakMap,Nl=new WeakSet,dF=async function(t,n){var i;const r=T(this,Gc),s=(i=t==null?void 0:t.source)==null?void 0:i.status;if(s==null)return!1;if(s===403&&t.message==="Request has expired"){if(!r.isPaused){if(r.limit===1||T(this,Zc)==null){const l=n.next();if(l==null||l.done)return!1;ne(this,Zc,l.value)}r.rateLimit(0),await new Promise(l=>setTimeout(l,T(this,Zc)))}}else if(s===429){if(!r.isPaused){const l=n.next();if(l==null||l.done)return!1;r.rateLimit(l.value)}}else{if(s>400&&s<500&&s!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)r.isPaused||(r.pause(),window.addEventListener("online",()=>{r.resume()},{once:!0}));else{const l=n.next();if(l==null||l.done)return!1;await new Promise(c=>setTimeout(c,l.value))}}return!0},hb=async function(t,n,r){const{method:s="POST",url:i,fields:l,headers:c}=await T(this,Kh).call(this,T(this,Ps).call(this,t),{signal:r}).abortOn(r);let d;const h=n.getData();if(s.toUpperCase()==="POST"){const j=new FormData;Object.entries(l).forEach(([_,w])=>j.set(_,w)),j.set("file",h),d=j}else d=h;const{onProgress:f,onComplete:p}=n,g=await T(this,Yc).call(this,{signature:{url:i,headers:c,method:s},body:d,size:h.size,onProgress:f,onComplete:p,signal:r}).abortOn(r),b=l==null?void 0:l.key;return T(this,tl).call(this,t,{key:b}),{...g,location:g.location??NX(i),bucket:l==null?void 0:l.bucket,key:b}};function Wl(e){if(e!=null&&e.error){const t=new Error(e.message);throw Object.assign(t,e.error),t}return e}function C2(e){const t=e.Expiration;if(t){const n=Math.floor((new Date(t)-Date.now())/1e3);if(n>9)return n}}function j2({meta:e,allowedMetaFields:t,querify:n=!1}){const r=t??Object.keys(e);return e?Object.fromEntries(r.filter(s=>e[s]!=null).map(s=>{const i=n?`metadata[${s}]`:s,l=String(e[s]);return[i,l]})):{}}const jX={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>(e.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]};var Xc,nr,yn,pb,No,Ts,hF,yg,Jc,fF,pF,Yh,eu,nl,Xh;const vg=class vg extends PL{constructor(n,r){super(n,{...jX,uploadPartBytes:vg.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...r});te(this,yn);te(this,Xc);te(this,nr);I(this,"requests");I(this,"uploaderEvents");I(this,"uploaders");te(this,Ts);te(this,yg,(n,{key:r,uploadId:s})=>{const i=this.uppy.getFile(n.id);i!=null&&this.uppy.setFileState(n.id,{s3Multipart:{...i.s3Multipart,key:r,uploadId:s}})});te(this,Jc,n=>this.uppy.getFile(n.id)||n);te(this,Yh,async n=>{if(n.length===0)return;const r=this.uppy.getFilesByIds(n),s=tG(r),i=nG(s);this.uppy.emit("upload-start",i);const l=s.map(d=>{if(d.isRemote){const h=()=>this.requests;T(this,nl).call(this,!1);const f=new AbortController,p=b=>{b.id===d.id&&f.abort()};this.uppy.on("file-removed",p);const g=this.uppy.getRequestClientForFile(d).uploadRemoteFile(d,ie(this,yn,pF).call(this,d),{signal:f.signal,getQueue:h});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",p)},{priority:-1})(),g}return ie(this,yn,fF).call(this,d)}),c=await Promise.allSettled(l);return T(this,nl).call(this,!0),c});te(this,eu,()=>{var n;(n=T(this,nr))==null||n.setCompanionHeaders(this.opts.headers)});te(this,nl,n=>{const{capabilities:r}=this.uppy.getState();this.uppy.setState({capabilities:{...r,resumableUploads:n}})});te(this,Xh,()=>{T(this,nl).call(this,!0)});this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",ie(this,yn,pb).call(this,r);const s={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:r!=null&&r.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:r!=null&&r.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const i of Object.keys(s))this.opts[i]==null&&(this.opts[i]=s[i].bind(this));this.requests=this.opts.rateLimitedQueue??new yG(this.opts.limit),ne(this,Xc,new CX(this.requests,this.opts,T(this,yg),T(this,Jc))),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return T(this,nr)}setOptions(n){T(this,Xc).setOptions(n),super.setOptions(n),ie(this,yn,pb).call(this,n)}resetUploaderReferences(n,r){this.uploaders[n]&&(this.uploaders[n].abort({really:(r==null?void 0:r.abort)||!1}),this.uploaders[n]=null),this.uploaderEvents[n]&&(this.uploaderEvents[n].remove(),this.uploaderEvents[n]=null)}createMultipartUpload(n,r){ie(this,yn,No).call(this,"createMultipartUpload"),Hn(r);const s=TC(this.opts.allowedMetaFields,n.meta),i=j2({meta:n.meta,allowedMetaFields:s});return T(this,nr).post("s3/multipart",{filename:n.name,type:n.type,metadata:i},{signal:r}).then(Wl)}listParts(n,{key:r,uploadId:s,signal:i},l){i??(i=l),ie(this,yn,No).call(this,"listParts"),Hn(i);const c=encodeURIComponent(r);return T(this,nr).get(`s3/multipart/${encodeURIComponent(s)}?key=${c}`,{signal:i}).then(Wl)}completeMultipartUpload(n,{key:r,uploadId:s,parts:i,signal:l},c){l??(l=c),ie(this,yn,No).call(this,"completeMultipartUpload"),Hn(l);const d=encodeURIComponent(r),h=encodeURIComponent(s);return T(this,nr).post(`s3/multipart/${h}/complete?key=${d}`,{parts:i.map(({ETag:f,PartNumber:p})=>({ETag:f,PartNumber:p}))},{signal:l}).then(Wl)}async createSignedURL(n,r){const s=await ie(this,yn,hF).call(this,r),i=C2(s.credentials)||604800,{uploadId:l,key:c,partNumber:d}=r;return{method:"PUT",expires:i,fields:{},url:`${await bX({accountKey:s.credentials.AccessKeyId,accountSecret:s.credentials.SecretAccessKey,sessionToken:s.credentials.SessionToken,expires:i,bucketName:s.bucket,Region:s.region,Key:c??`${crypto.randomUUID()}-${n.name}`,uploadId:l,partNumber:d})}`,headers:{"Content-Type":n.type}}}signPart(n,{uploadId:r,key:s,partNumber:i,signal:l}){if(ie(this,yn,No).call(this,"signPart"),Hn(l),r==null||s==null||i==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const c=encodeURIComponent(s);return T(this,nr).get(`s3/multipart/${encodeURIComponent(r)}/${i}?key=${c}`,{signal:l}).then(Wl)}abortMultipartUpload(n,{key:r,uploadId:s,signal:i}){ie(this,yn,No).call(this,"abortMultipartUpload");const l=encodeURIComponent(r),c=encodeURIComponent(s);return T(this,nr).delete(`s3/multipart/${c}?key=${l}`,void 0,{signal:i}).then(Wl)}getUploadParameters(n,r){ie(this,yn,No).call(this,"getUploadParameters");const{meta:s}=n,{type:i,name:l}=s,c=TC(this.opts.allowedMetaFields,n.meta),d=j2({meta:s,allowedMetaFields:c,querify:!0}),h=new URLSearchParams({filename:l,type:i,...d});return T(this,nr).get(`s3/params?${h}`,r)}static async uploadPartBytes({signature:{url:n,expires:r,headers:s,method:i="PUT"},body:l,size:c=l.size,onProgress:d,onComplete:h,signal:f}){if(Hn(f),n==null)throw new Error("Cannot upload to an undefined URL");return new Promise((p,g)=>{const b=new XMLHttpRequest;b.open(i,n,!0),s&&Object.keys(s).forEach(w=>{b.setRequestHeader(w,s[w])}),b.responseType="text",typeof r=="number"&&(b.timeout=r*1e3);function j(){b.abort()}function _(){f==null||f.removeEventListener("abort",j)}f==null||f.addEventListener("abort",j),b.upload.addEventListener("progress",w=>{d(w)}),b.addEventListener("abort",()=>{_(),g(JR())}),b.addEventListener("timeout",()=>{_();const w=new Error("Request has expired");w.source={status:403},g(w)}),b.addEventListener("load",()=>{if(_(),b.status===403&&b.responseText.includes("<Message>Request has expired</Message>")){const P=new Error("Request has expired");P.source=b,g(P);return}if(b.status<200||b.status>=300){const P=new Error("Non 2xx");P.source=b,g(P);return}d==null||d({loaded:c,lengthComputable:!0});const w=b.getAllResponseHeaders().trim().split(/[\r\n]+/),S={__proto__:null};for(const P of w){const E=P.split(": "),k=E.shift(),M=E.join(": ");S[k]=M}const{etag:x,location:N}=S;if(i.toUpperCase()==="POST"&&N==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),x==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}h==null||h(x),p({...S,ETag:x})}),b.addEventListener("error",w=>{_();const S=new Error("Unknown error");S.source=w.target,g(S)}),b.send(l)})}install(){T(this,nl).call(this,!0),this.uppy.addPreProcessor(T(this,eu)),this.uppy.addUploader(T(this,Yh)),this.uppy.on("cancel-all",T(this,Xh))}uninstall(){this.uppy.removePreProcessor(T(this,eu)),this.uppy.removeUploader(T(this,Yh)),this.uppy.off("cancel-all",T(this,Xh))}};Xc=new WeakMap,nr=new WeakMap,yn=new WeakSet,pb=function(n){n==null||!("endpoint"in n||"companionUrl"in n||"headers"in n||"companionHeaders"in n||"cookiesRule"in n||"companionCookiesRule"in n)||("companionUrl"in n&&!("endpoint"in n)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in n&&!("headers"in n)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in n&&!("cookiesRule"in n)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in n?ne(this,nr,new aF(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule})):("headers"in n&&T(this,eu).call(this),"cookiesRule"in n&&(T(this,nr).opts.companionCookiesRule=n.cookiesRule)))},No=function(n){if(!T(this,nr))throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${n}\` implementation.`)},Ts=new WeakMap,hF=async function(n){if(Hn(n==null?void 0:n.signal),T(this,Ts)==null){const{getTemporarySecurityCredentials:r}=this.opts;r===!0?(ie(this,yn,No).call(this,"getTemporarySecurityCredentials"),ne(this,Ts,T(this,nr).get("s3/sts",n).then(Wl))):ne(this,Ts,r(n)),ne(this,Ts,await T(this,Ts)),setTimeout(()=>{ne(this,Ts,null)},(C2(T(this,Ts).credentials)||0)*500)}return T(this,Ts)},yg=new WeakMap,Jc=new WeakMap,fF=function(n){return new Promise((r,s)=>{const i=(f,p)=>{const g=this.uppy.getFile(n.id);this.uppy.emit("upload-progress",g,{uploadStarted:g.progress.uploadStarted??0,bytesUploaded:f,bytesTotal:p})},l=f=>{this.uppy.log(f),this.uppy.emit("upload-error",n,f),this.resetUploaderReferences(n.id),s(f)},c=f=>{const p={body:{...f},status:200,uploadURL:f.location};this.resetUploaderReferences(n.id),this.uppy.emit("upload-success",T(this,Jc).call(this,n),p),f.location&&this.uppy.log(`Download ${n.name} from ${f.location}`),r(void 0)},d=new SX(n.data,{companionComm:T(this,Xc),log:(...f)=>this.uppy.log(...f),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:i,onError:l,onSuccess:c,onPartComplete:f=>{this.uppy.emit("s3-multipart:part-uploaded",T(this,Jc).call(this,n),f)},file:n,shouldUseMultipart:this.opts.shouldUseMultipart,...n.s3Multipart});this.uploaders[n.id]=d;const h=new RG(this.uppy);this.uploaderEvents[n.id]=h,h.onFileRemove(n.id,f=>{d.abort(),this.resetUploaderReferences(n.id,{abort:!0}),r(`upload ${f} was removed`)}),h.onCancelAll(n.id,()=>{d.abort(),this.resetUploaderReferences(n.id,{abort:!0}),r(`upload ${n.id} was canceled`)}),h.onFilePause(n.id,f=>{f?d.pause():d.start()}),h.onPauseAll(n.id,()=>{d.pause()}),h.onResumeAll(n.id,()=>{d.start()}),d.start()})},pF=function(n){var r;return{...(r=n.remote)==null?void 0:r.body,protocol:"s3-multipart",size:n.data.size,metadata:n.meta}},Yh=new WeakMap,eu=new WeakMap,nl=new WeakMap,Xh=new WeakMap,I(vg,"VERSION",gX.version);let fb=vg;function Ym({maxNumberOfFiles:e=1,maxFileSize:t=10485760,onGetUploadParameters:n,onStart:r,onComplete:s,buttonClassName:i,children:l}){const[c,d]=v.useState(!1),[h]=v.useState(()=>new Z0({restrictions:{maxNumberOfFiles:e,maxFileSize:t,allowedFileTypes:["image/*"]},autoProceed:!0}).use(fb,{shouldUseMultipart:!1,getUploadParameters:n}).on("file-added",()=>{const f=document.getElementById("uppy-progress");f&&(f.style.display="block"),r==null||r()}).on("complete",f=>{s==null||s(f),setTimeout(()=>{const p=document.getElementById("uppy-progress");p&&(p.style.display="none"),d(!1)},1500)}));return o.jsxs("div",{children:[o.jsx(le,{type:"button",onClick:()=>d(!0),className:i,children:l}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",onClick:()=>d(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",onClick:f=>f.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Upload Profile Photo"}),o.jsx(le,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100 transition-colors",children:o.jsx(oa,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-12 text-center bg-blue-50 hover:bg-blue-100 transition-all duration-200 cursor-pointer group",onDragOver:f=>{f.preventDefault(),f.currentTarget.classList.add("border-blue-500","bg-blue-100")},onDragLeave:f=>{f.preventDefault(),f.currentTarget.classList.remove("border-blue-500","bg-blue-100")},onDrop:f=>{f.preventDefault(),f.currentTarget.classList.remove("border-blue-500","bg-blue-100");const p=f.dataTransfer.files;p&&p.length>0&&(h.getFiles().forEach(g=>{h.removeFile(g.id)}),h.addFile({name:p[0].name,type:p[0].type,data:p[0]}))},onClick:()=>{const f=document.createElement("input");f.type="file",f.accept="image/*",f.onchange=p=>{const g=p.target.files;g&&g.length>0&&(h.getFiles().forEach(b=>{h.removeFile(b.id)}),h.addFile({name:g[0].name,type:g[0].type,data:g[0]}))},f.click()},children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"p-3 bg-blue-100 rounded-full group-hover:bg-blue-200 transition-colors",children:o.jsx(Lw,{className:"w-8 h-8 text-blue-500"})})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-700",children:"Upload an image"}),o.jsx("p",{className:"text-gray-500",children:"Drag and drop an image here, or click to browse"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Images only  Max 5MB  JPG, PNG, or GIF"})]})]})}),o.jsx("div",{className:"mt-4",style:{display:"none"},id:"uppy-progress",children:o.jsx(XY,{uppy:h,proudlyDisplayPoweredByUppy:!1,hideUploadButton:!0,height:150,theme:"light",hideProgressDetails:!1,hideRetryButton:!1,hideCancelButton:!1,hidePauseResumeButton:!0,hideProgressAfterFinish:!1})})]})]})})]})}const PX=gf({categoryId:_t().min(1,"Category is required"),subcategoryId:_t().min(1,"Subcategory is required"),title:_t().min(1,"Title is required"),description:_t().optional(),location:_t().min(1,"Location is required"),policeNotified:xc(["yes","no","not_needed","unsure"]).optional(),photoUrl:_t().optional()});function V_({isOpen:e,onClose:t,initialLocation:n}){const{toast:r}=Pn(),s=xa(),[i,l]=v.useState(""),[c,d]=v.useState(!1),[h,f]=v.useState(""),[p,g]=v.useState(!1),[b,j]=v.useState([]),[_,w]=v.useState([]),[S,x]=v.useState(!1);v.useEffect(()=>{e&&b.length===0&&N()},[e]),v.useEffect(()=>{i?P(i):w([])},[i]);const N=async()=>{try{x(!0);const H=await fetch("/api/categories");if(H.ok){const Y=await H.json();j(Y)}}catch(H){console.error("Failed to load categories:",H)}finally{x(!1)}},P=async H=>{try{const Y=await fetch(`/api/subcategories?categoryId=${H}`);if(Y.ok){const Z=await Y.json();w(Z)}}catch(Y){console.error("Failed to load subcategories:",Y),w([])}},E=Fm({resolver:Om(PX),defaultValues:{categoryId:"",subcategoryId:"",title:"",description:"",location:n||"",policeNotified:"unsure",photoUrl:""}}),k=async()=>({method:"PUT",url:(await(await On("POST","/api/objects/upload",{})).json()).uploadURL}),M=()=>{g(!0)},z=H=>{if(g(!1),H.successful&&H.successful.length>0){const Y=H.successful[0].uploadURL;f(Y),E.setValue("photoUrl",Y),r({title:"Photo Uploaded",description:"Your photo has been uploaded successfully."})}else r({title:"Upload Failed",description:"Failed to upload photo. Please try again.",variant:"destructive"})},D=Fn({mutationFn:async H=>{await On("POST","/api/incidents/report",H)},onSuccess:()=>{r({title:"Report Submitted! ",description:"Your incident will appear on the map shortly. Thank you for keeping the community informed."}),s.invalidateQueries({queryKey:["/api/unified"]}),E.reset(),t()},onError:H=>{if(B0(H)){r({title:"Login Required",description:"You need to be logged in to report incidents. Redirecting to login...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},1500);return}r({title:"Report Failed",description:H instanceof Error?H.message:"Failed to submit incident report. Please try again.",variant:"destructive"})}}),F=async()=>{if(!navigator.geolocation){r({title:"Location not available",description:"Your device doesn't support GPS location services.",variant:"destructive"});return}d(!0);try{const H=await new Promise((U,V)=>{navigator.geolocation.getCurrentPosition(U,V,{enableHighAccuracy:!0,timeout:1e4})}),Y=H.coords.latitude,Z=H.coords.longitude;try{const U=await fetch(`/api/location/reverse?lat=${Y}&lon=${Z}`);if(U.ok){const V=await U.json(),K=[];V.road&&K.push(V.road),V.suburb&&K.push(V.suburb),V.postcode&&K.push(V.postcode);const O=K.length>0?K.join(", "):`${Y.toFixed(4)}, ${Z.toFixed(4)}`;E.setValue("location",O),r({title:"Location found!",description:`Set to: ${O}`})}else throw new Error("Address lookup failed")}catch{const V=`${Y.toFixed(4)}, ${Z.toFixed(4)}`;E.setValue("location",V),r({title:"Location found!",description:`Set to coordinates: ${V}`})}}catch(H){let Y="Unable to get your location.";H.code===1?Y="Location access denied. Please enable location services and allow access in your browser.":H.code===2?Y="Location unavailable. Please check your GPS connection.":H.code===3&&(Y="Location request timed out. Please try again."),r({title:"Location failed",description:Y,variant:"destructive"})}finally{d(!1)}},J=H=>{D.mutate(H)};return o.jsx(il,{open:e,onOpenChange:t,children:o.jsxs(ra,{className:"w-[95vw] sm:max-w-lg lg:max-w-xl max-h-[90vh] flex flex-col",children:[o.jsxs(yl,{className:"flex-shrink-0",children:[o.jsx(vl,{children:"Share Community Information"}),o.jsx(ZI,{children:"Share local information, observations, or community updates to help keep neighbors informed and connected."})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6",children:o.jsx(KR,{...E,children:o.jsxs("form",{onSubmit:E.handleSubmit(J),className:"space-y-4",children:[o.jsx(ts,{control:E.control,name:"categoryId",render:({field:H})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Category"}),o.jsxs(ls,{value:H.value,onValueChange:Y=>{H.onChange(Y),l(Y),E.setValue("subcategoryId","")},children:[o.jsx(Rr,{children:o.jsx(zr,{"data-testid":"select-category",children:o.jsx(cs,{placeholder:"Choose a category"})})}),o.jsx($r,{position:"popper",sideOffset:4,className:"z-[9999]",side:"bottom",align:"start",children:S?o.jsx("div",{className:"px-2 py-2 text-sm text-gray-500",children:"Loading categories..."}):b.length>0?b.map(Y=>o.jsx(xn,{value:Y.id,children:Y.name},Y.id)):o.jsx("div",{className:"px-2 py-2 text-sm text-gray-500",children:"No categories available"})})]}),o.jsx(Lr,{})]})}),i&&o.jsx(ts,{control:E.control,name:"subcategoryId",render:({field:H})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Specific Type"}),o.jsxs(ls,{value:H.value,onValueChange:H.onChange,children:[o.jsx(Rr,{children:o.jsx(zr,{"data-testid":"select-subcategory",children:o.jsx(cs,{placeholder:"Choose specific type"})})}),o.jsx($r,{position:"popper",sideOffset:4,className:"z-[9999]",side:"bottom",align:"start",children:_.map(Y=>o.jsx(xn,{value:Y.id,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium",children:Y.name}),Y.description&&o.jsx("span",{className:"text-xs text-muted-foreground",children:Y.description})]})},Y.id))})]}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:E.control,name:"title",render:({field:H})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Title"}),o.jsx(Rr,{children:o.jsx(rt,{placeholder:"Brief description of what you want to share",...H,"data-testid":"input-incident-title"})}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:E.control,name:"location",render:({field:H})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Location"}),o.jsx(Rr,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Pi,{value:H.value,onChange:Y=>{H.onChange(Y)},onClear:()=>{H.onChange("")},placeholder:"Enter street address, intersection, or landmark...",disabled:!1})}),o.jsx(le,{type:"button",onClick:F,disabled:c,size:"sm",variant:"outline",className:"flex items-center gap-1 px-2 sm:px-3 flex-shrink-0","data-testid":"button-use-gps-location",children:c?o.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(x9,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs hidden sm:inline",children:"GPS"})]})})]})}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:E.control,name:"policeNotified",render:({field:H})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Have authorities been notified? (if applicable)"}),o.jsxs(ls,{onValueChange:H.onChange,defaultValue:H.value,children:[o.jsx(Rr,{children:o.jsx(zr,{"data-testid":"select-police-notified",children:o.jsx(cs,{placeholder:"Select option"})})}),o.jsxs($r,{position:"popper",sideOffset:4,className:"z-[9999]",side:"bottom",align:"start",children:[o.jsx(xn,{value:"yes",children:"Yes - Authorities have been notified"}),o.jsx(xn,{value:"no",children:"No - Authorities haven't been contacted yet"}),o.jsx(xn,{value:"not_needed",children:"Not applicable - No authorities needed"}),o.jsx(xn,{value:"unsure",children:"Unsure - Not sure if authorities are needed"})]})]}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:E.control,name:"description",render:({field:H})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Additional Details (Optional)"}),o.jsx(Rr,{children:o.jsx(Ii,{placeholder:"Provide additional context, details, or helpful information for the community...",className:"min-h-20",...H,"data-testid":"textarea-incident-description"})}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:E.control,name:"photoUrl",render:({field:H})=>o.jsxs(Ir,{className:"space-y-3",children:[o.jsxs(Mr,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx("div",{className:"p-1.5 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:o.jsx(Ew,{className:"w-4 h-4 text-white"})}),"Add Photo (Optional)"]}),o.jsx(Rr,{children:o.jsx("div",{className:"space-y-4",children:h?o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200 shadow-sm",children:[o.jsx("img",{src:h,alt:"Uploaded photo",className:"w-full h-48 object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),o.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:o.jsx("div",{className:"p-1.5 bg-green-500 rounded-full",children:o.jsx(rh,{className:"w-4 h-4 text-white"})})})]}),o.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:()=>{f(""),E.setValue("photoUrl","")},className:"absolute bottom-3 right-3 bg-white/90 backdrop-blur-sm hover:bg-white border-gray-200 hover:border-gray-300 shadow-sm",children:"Remove Photo"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded-2xl p-8 text-center bg-gradient-to-br from-blue-50/50 via-white to-purple-50/50 hover:from-blue-100/60 hover:via-white hover:to-purple-100/60 transition-all duration-300 hover:border-blue-400 hover:shadow-lg",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl transition-all duration-300 shadow-lg",children:o.jsx(Lw,{className:"w-8 h-8 text-white"})}),o.jsx("div",{className:"absolute -top-1 -right-1 p-1 bg-white rounded-full shadow-sm",children:o.jsx(m0,{className:"w-4 h-4 text-gray-600"})})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Add Photo"}),o.jsx("p",{className:"text-gray-600",children:"Choose an image to help share information"}),o.jsxs("div",{className:"flex items-center justify-center gap-4 pt-2",children:[o.jsx("div",{className:"px-3 py-1 bg-white/60 rounded-full border border-gray-200 text-xs text-gray-500",children:"JPG, PNG, GIF"}),o.jsx("div",{className:"px-3 py-1 bg-white/60 rounded-full border border-gray-200 text-xs text-gray-500",children:"Max 5MB"})]})]})]})}),o.jsx(Ym,{maxNumberOfFiles:1,maxFileSize:5242880,onGetUploadParameters:k,onStart:M,onComplete:z,buttonClassName:"w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium rounded-xl shadow-md hover:shadow-lg transition-all duration-200",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(m0,{className:"w-5 h-5"}),"Choose Photo"]})})]})})}),o.jsx(Lr,{})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:[o.jsx(le,{type:"button",variant:"outline",onClick:t,className:"flex-1 sm:flex-none px-6 py-3 border-gray-300 hover:border-gray-400 hover:bg-gray-50","data-testid":"button-cancel-report",children:"Cancel"}),o.jsx(le,{type:"submit",disabled:D.isPending||p,className:"flex-1 px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-submit-report",children:D.isPending?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting Report..."]}):p?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading Photo..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(rh,{className:"w-4 h-4"}),"Share Information"]})})]})]})})})]})})}function yi({onMenuToggle:e,onFilterToggle:t,showFilterButton:n}){var S;const{user:r,isAuthenticated:s}=Bn(),[i]=qr(),l=Qg(),[c,d]=v.useState(!1),[h,f]=v.useState(!1),[p,g]=v.useState(()=>typeof window<"u"&&localStorage.getItem("homeLocation")||""),{data:b}=Dt({queryKey:["/api/notifications"],enabled:s,retry:!1}),j=((S=b==null?void 0:b.filter(x=>!x.isRead))==null?void 0:S.length)||0,_=0,w=(x,N,P)=>{g(x),N&&(localStorage.setItem("homeLocation",x),localStorage.setItem("homeCoordinates",JSON.stringify(N)),localStorage.setItem("locationFilter","true"),P&&localStorage.setItem("homeBoundingBox",JSON.stringify(P)),window.dispatchEvent(new CustomEvent("locationChanged",{detail:{location:x,coordinates:N,boundingBox:P}}))),d(!1)};return o.jsxs("header",{className:"absolute top-0 left-0 right-0 z-20 bg-card border-b border-border",children:[o.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsxs("svg",{className:"w-5 h-5 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),o.jsx("circle",{cx:"12",cy:"12",r:"6",strokeWidth:"1.5"}),o.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),o.jsx("path",{strokeLinecap:"round",strokeWidth:"2",d:"M12 2v4M12 18v4M2 12h4M18 12h4"})]})}),o.jsx("div",{className:"flex items-center gap-2",children:l?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center bg-muted p-1 rounded-lg gap-1",children:[o.jsx(wt,{href:"/map",children:o.jsx(le,{variant:i==="/map"?"default":"ghost",size:"sm",className:"h-11 w-11 p-0 text-xs","data-testid":"button-map-view",children:o.jsx(AN,{className:"w-4 h-4"})})}),o.jsx(wt,{href:"/feed",children:o.jsx(le,{variant:i==="/feed"||i==="/"?"default":"ghost",size:"sm",className:"h-11 w-11 p-0 text-xs","data-testid":"button-feed-view",children:o.jsx(kN,{className:"w-4 h-4"})})}),o.jsx(wt,{href:"/messages",children:o.jsxs(le,{variant:i==="/messages"?"default":"ghost",size:"sm",className:"h-8 px-2 text-xs relative","data-testid":"button-messages-view",children:[o.jsx(uu,{className:"w-4 h-4"}),_>0]})})]}),(r==null?void 0:r.accountType)==="business"&&o.jsxs(Lv,{children:[o.jsx(Fv,{asChild:!0,children:o.jsx(le,{variant:i==="/business-dashboard"||i==="/advertise"||i==="/create-ad"?"default":"ghost",size:"sm",className:"h-11 w-11 p-0","data-testid":"button-business-menu",children:o.jsx(bv,{className:"w-4 h-4"})})}),o.jsxs(Bp,{align:"end",className:"w-40",children:[o.jsx(vs,{asChild:!0,children:o.jsxs(wt,{href:"/business-dashboard",className:"w-full",children:[o.jsx(bv,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),o.jsx(vs,{asChild:!0,children:o.jsxs(wt,{href:"/advertise",className:"w-full",children:[o.jsx(IN,{className:"w-4 h-4 mr-2"}),"Advertise"]})})]})]}),s&&r&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(le,{onClick:()=>f(!0),size:"sm",className:"h-11 w-11 p-0","data-testid":"button-report-mobile",children:o.jsx(Aw,{className:"w-4 h-4"})}),o.jsxs(Lv,{children:[o.jsx(Fv,{asChild:!0,children:o.jsxs(Zn,{className:"w-11 h-11 cursor-pointer hover:opacity-80 transition-opacity",children:[o.jsx(ca,{src:r.profileImageUrl||void 0,alt:r.firstName||"User"}),o.jsx(Gn,{className:"text-xs",children:r.accountType==="business"&&r.businessName?r.businessName[0].toUpperCase():r.firstName?r.firstName[0].toUpperCase():r.email?r.email[0].toUpperCase():"U"})]})}),o.jsxs(Bp,{align:"end",className:"w-48",children:[o.jsxs(vs,{onClick:()=>d(!0),children:[o.jsx(_r,{className:"w-4 h-4 mr-2"}),"Set Location"]}),o.jsx(vs,{asChild:!0,children:o.jsxs(wt,{href:"/profile",className:"flex items-center w-full",children:[o.jsx(Nm,{className:"w-4 h-4 mr-2"}),"Profile Settings"]})}),r&&r.role==="admin"&&o.jsx(vs,{asChild:!0,children:o.jsxs(wt,{href:"/admin",className:"flex items-center w-full",children:[o.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Admin Dashboard"]})}),o.jsx(T0,{}),o.jsxs(vs,{onClick:()=>window.location.href="/api/logout",className:"text-red-600",children:[o.jsx(EN,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]}):o.jsxs("div",{className:"flex items-center space-x-4",children:[n&&o.jsxs(le,{variant:"outline",size:"sm",onClick:t,className:"h-8","data-testid":"button-toggle-filter",children:[o.jsx(f9,{className:"w-4 h-4 mr-1"}),"Filter"]}),o.jsxs("div",{className:"flex items-center bg-muted p-1.5 rounded-lg gap-1",children:[o.jsx(wt,{href:"/map",children:o.jsxs(le,{variant:i==="/map"?"default":"ghost",size:"sm",className:"h-9 px-4 font-medium","data-testid":"button-map-view",children:[o.jsx(AN,{className:"w-4 h-4 mr-2"}),"Map"]})}),o.jsx(wt,{href:"/feed",children:o.jsxs(le,{variant:i==="/feed"||i==="/"?"default":"ghost",size:"sm",className:"h-9 px-4 font-medium","data-testid":"button-feed-view",children:[o.jsx(kN,{className:"w-4 h-4 mr-2"}),"Feed"]})}),o.jsx(wt,{href:"/messages",children:o.jsxs(le,{variant:i==="/messages"?"default":"ghost",size:"sm",className:"h-8 px-3 relative","data-testid":"button-messages-view",children:[o.jsx(uu,{className:"w-4 h-4 mr-2"}),"Messages",_>0]})}),(r==null?void 0:r.accountType)==="business"&&o.jsxs(o.Fragment,{children:[o.jsx(wt,{href:"/business-dashboard",children:o.jsxs(le,{variant:i==="/business-dashboard"?"default":"ghost",size:"sm",className:"h-9 px-4 font-medium","data-testid":"button-dashboard-view-desktop",children:[o.jsx(bv,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),o.jsx(wt,{href:"/advertise",children:o.jsxs(le,{variant:i==="/advertise"||i==="/create-ad"?"default":"ghost",size:"sm",className:"h-9 px-4 font-medium","data-testid":"button-advertise-view",children:[o.jsx(IN,{className:"w-4 h-4 mr-2"}),"Advertise"]})})]})]}),s&&r&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(wt,{href:"/notifications",children:o.jsxs(le,{variant:"ghost",size:"sm",className:"relative h-8 w-8 p-0","data-testid":"button-notifications",children:[o.jsx(wm,{className:"w-4 h-4"}),j>0&&o.jsx(rn,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 p-0 text-xs flex items-center justify-center",children:j})]})}),o.jsxs(Lv,{children:[o.jsx(Fv,{asChild:!0,children:o.jsxs("div",{className:"flex items-center space-x-2 p-1 hover:bg-muted rounded-lg transition-colors cursor-pointer","data-testid":"link-user-profile",children:[o.jsxs(Zn,{className:"w-8 h-8",children:[o.jsx(ca,{src:r.profileImageUrl||void 0,alt:r.firstName||"User"}),o.jsx(Gn,{className:"text-xs",children:r.accountType==="business"&&r.businessName?r.businessName[0].toUpperCase():r.firstName?r.firstName[0].toUpperCase():r.email?r.email[0].toUpperCase():"U"})]}),o.jsx("span",{className:"text-sm text-foreground hidden lg:block",children:r.accountType==="business"&&r.businessName?r.businessName:r.firstName||r.email})]})}),o.jsxs(Bp,{align:"end",className:"w-48",children:[o.jsxs(vs,{onClick:()=>d(!0),children:[o.jsx(_r,{className:"w-4 h-4 mr-2"}),"Set Location"]}),o.jsx(vs,{asChild:!0,children:o.jsxs(wt,{href:"/profile",className:"flex items-center w-full",children:[o.jsx(Nm,{className:"w-4 h-4 mr-2"}),"Profile Settings"]})}),r&&r.role==="admin"&&o.jsx(vs,{asChild:!0,children:o.jsxs(wt,{href:"/admin",className:"flex items-center w-full",children:[o.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Admin Dashboard"]})}),o.jsx(T0,{}),o.jsxs(vs,{onClick:()=>window.location.href="/api/logout",className:"text-red-600",children:[o.jsx(EN,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-muted rounded-lg transition-colors","data-testid":"button-menu-toggle",children:o.jsx(y9,{className:"w-5 h-5"})})]})})]}),o.jsx(il,{open:c,onOpenChange:d,children:o.jsxs(ra,{className:"sm:max-w-md",children:[o.jsx(yl,{children:o.jsxs(vl,{className:"flex items-center gap-2",children:[o.jsx(_r,{className:"w-5 h-5 text-primary"}),"Set Your Location"]})}),o.jsxs("div",{className:"space-y-6 pt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Search for your area"}),o.jsx(Pi,{value:"",onChange:w,placeholder:"Enter suburb, postcode, or area..."}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"This helps filter safety alerts and incidents to your local area"})]}),p&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Current Location"}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg border",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(_r,{className:"w-4 h-4 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:p}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Regional filtering enabled"})]})]}),o.jsx(le,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("homeLocation"),localStorage.removeItem("homeCoordinates"),localStorage.removeItem("homeBoundingBox"),localStorage.setItem("locationFilter","false"),g(""),window.dispatchEvent(new CustomEvent("locationChanged",{detail:{location:"",coordinates:null,boundingBox:null}})),d(!1)},className:"text-destructive hover:text-destructive",children:"Clear"})]})]})]})]})}),o.jsx(V_,{isOpen:h,onClose:()=>f(!1)})]})}function mF(e){var s,i,l,c,d,h,f,p,g,b,j,_,w;if(!e)return null;if(e.id)return e.id;if((s=e.properties)!=null&&s.id)return e.properties.id;if(e.source==="tmr"||((i=e.properties)==null?void 0:i.source)==="tmr"){const S=(l=e.properties)==null?void 0:l.id;if(S)return`tmr:${S}`}if((c=e.properties)!=null&&c.Master_Incident_Number)return`esq:${e.properties.Master_Incident_Number}`;if((d=e.properties)!=null&&d.Incident_Number)return`esq:${e.properties.Incident_Number}`;if((h=e.properties)!=null&&h.IncidentNumber)return`esq:${e.properties.IncidentNumber}`;if((f=e.properties)!=null&&f.userReported&&((p=e.properties)!=null&&p.reporterId))return e.properties.reporterId;const t=((g=e.properties)==null?void 0:g.Event_Type)||((b=e.properties)==null?void 0:b.event_type)||"",n=((j=e.properties)==null?void 0:j.description)||"",r=((_=e.properties)==null?void 0:_.Location)||((w=e.properties)==null?void 0:w.location)||"";return t||n||r?`generated:${t}-${n}-${r}`.replace(/[^a-zA-Z0-9:-]/g,"-"):null}function P2(e){var t,n,r,s;return e?(t=e.properties)!=null&&t.title?e.properties.title:e.title?e.title:(n=e.properties)!=null&&n.Event_Type?e.properties.Event_Type:(r=e.properties)!=null&&r.event_type?e.properties.event_type:(s=e.properties)!=null&&s.description?e.properties.description:"Incident":"Unknown Incident"}function T2(e){var n,r,s,i;if(!e)return"Unknown Location";if((n=e.properties)!=null&&n.location)return e.properties.location;if(e.location)return e.location;if((r=e.properties)!=null&&r.Location)return e.properties.Location;if((s=e.properties)!=null&&s.Locality)return e.properties.Locality;const t=(i=e.properties)==null?void 0:i.road_summary;return t!=null&&t.road_name&&(t!=null&&t.locality)?`${t.road_name}, ${t.locality}`:t!=null&&t.road_name?t.road_name:t!=null&&t.locality?t.locality:"Location not specified"}const k2={"792759f4-1b98-4665-b14c-44a54e9969e9":"Safety & Crime","9b1d58d9-cfd1-4c31-93e9-754276a5f265":"Infrastructure & Hazards","54d31da5-fc10-4ad2-8eca-04bac680e668":"Emergency Situations","d03f47a9-10fb-4656-ae73-92e959d7566a":"Wildlife & Nature","deaca906-3561-4f80-b79f-ed99561c3b04":"Community Issues","4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0":"Pets","d1dfcd4e-48e9-4e58-9476-4782a2a132f3":"Lost & Found"},E2={"97a99d33-f10a-4391-b22f-78631eff8805":"Violence & Threats","e6a187d7-428b-47e6-a2d0-617db1963aee":"Theft & Property Crime","7b1ba0b9-b9d5-437e-a106-886f96660f99":"Suspicious Activity","e39e8d3f-4358-4a91-ac09-38dbb25d4832":"Public Disturbances","ca42fc3b-9ac1-4054-a30e-c65650599d02":"Road Hazards","83b09678-a090-4b08-8123-e316524a0d57":"Utility Issues","d81dc944-8b65-4a14-96da-fc539e883249":"Building Problems","e03aeb13-b061-4bf1-b524-2037fdfd948f":"Environmental Hazards","c3980ed0-46b0-43df-b4d8-fa8a83ce9452":"Fire & Smoke","e69d5194-4885-47a2-985e-3568e30833dd":"Medical Emergencies","a6719ffd-b353-4dee-8969-dd917093285d":"Natural Disasters","3f7adaca-dcf9-4151-88ae-324041a8da30":"Chemical/Hazmat","819a1a14-e6f5-46e4-aefb-daa55e2c0342":"Dangerous Animals","668fe7c1-401a-4aff-a388-903622651418":"Animal Welfare","607f0066-5b11-4a06-ac14-5d136bafbcab":"Environmental Issues","7fbd7375-6352-4b50-b067-19c66c99ba96":"Pest Problems","7008ccc5-c376-4963-90f1-40023e943175":"Noise Complaints","67871bf3-f8e6-4692-8ef3-d1169bf0ed46":"Traffic Issues","8fc5a6e3-0333-45af-8199-adc37b7acaa9":"Public Space Problems","f8667a02-8d21-4d85-b207-d6841da18c68":"Events & Gatherings","3dc966d4-e732-4f91-8aa0-3fb00be77265":"Missing Pets","2dd8cb36-fc5d-4c34-a40f-196fcf79320d":"Found Pets","e23ad345-970c-44bf-9aaa-708a88d23072":"Lost Items","4c6da291-c786-4212-bc12-c77f16a5e016":"Found Items"};function TX(e){var n,r;if(!e)return"";let t="";return(n=e.properties)!=null&&n.categoryId?t=e.properties.categoryId:(r=e.properties)!=null&&r.category?t=e.properties.category:e.category&&(t=e.category),t&&k2[t]?k2[t]:t&&!t.includes("-")?t:""}function gF(e){var n,r;if(!e)return"";let t="";return(n=e.properties)!=null&&n.subcategoryId?t=e.properties.subcategoryId:(r=e.properties)!=null&&r.subcategory?t=e.properties.subcategory:e.subcategory&&(t=e.subcategory),t&&E2[t]?E2[t]:t&&!t.includes("-")?t:""}function qp(e){var n,r;if(!e)return null;const t=e.userId||((n=e.properties)==null?void 0:n.reporterId)||((r=e.properties)==null?void 0:r.userId);return t&&t.trim()!==""?t:null}function kX(e){if(!e)return null;const t=mF(e);return t?encodeURIComponent(t):null}function EX(e){try{return decodeURIComponent(e)}catch{return console.warn("Failed to decode incident ID:",e),e}}function AX(e){const t=kX(e);return t?`/incident/${t}`:null}function yF(e,t){const n=AX(e);n?t(n):console.warn("Could not create URL for incident:",e)}function vF(e){var n,r,s,i,l,c,d,h,f;if(!e)return{iconName:"AlertTriangle",color:"text-gray-500"};const t=e.source||((n=e.properties)==null?void 0:n.source);if(t==="tmr")return(((s=(r=e.properties)==null?void 0:r.event_type)==null?void 0:s.toLowerCase())||"").includes("congestion")?{iconName:"Timer",color:"text-orange-600"}:{iconName:"Car",color:"text-orange-600"};if(t==="emergency"){const p=e.GroupedType||((i=e.properties)==null?void 0:i.GroupedType);if(p){const b=String(p).toLowerCase();if(b.includes("rescue")||b.includes("crash"))return{iconName:"Crash",color:"text-orange-600"}}switch(e.subcategory||((l=e.properties)==null?void 0:l.subcategory)||""){case"Fire & Smoke":return{iconName:"Flame",color:"text-red-600"};case"Rescue Operation":return{iconName:"Crash",color:"text-orange-600"};case"Medical Emergencies":return{iconName:"Heart",color:"text-green-600"};case"Chemical/Hazmat":return{iconName:"AlertTriangle",color:"text-yellow-600"};case"Power/Gas Emergency":return{iconName:"Zap",color:"text-purple-600"};case"Storm/SES":return{iconName:"CloudLightning",color:"text-blue-600"};case"Public Safety":return{iconName:"Shield",color:"text-blue-600"};default:return{iconName:"Siren",color:"text-red-600"}}}if(t==="user"){switch(e.subcategory||(c=e.properties)!=null&&c.subcategory,gF(e)){case"Violence & Threats":return{iconName:"Shield",color:"text-red-600"};case"Theft & Property Crime":return{iconName:"ShieldAlert",color:"text-red-600"};case"Suspicious Activity":return{iconName:"Eye",color:"text-orange-600"};case"Public Disturbances":return{iconName:"AlertTriangle",color:"text-yellow-600"};case"Road Hazards":return{iconName:"Construction",color:"text-orange-600"};case"Utility Issues":return{iconName:"Zap",color:"text-yellow-600"};case"Building Problems":return{iconName:"Building",color:"text-gray-600"};case"Environmental Hazards":return{iconName:"AlertTriangle",color:"text-red-600"};case"Fire & Smoke":return{iconName:"Flame",color:"text-red-600"};case"Medical Emergencies":return{iconName:"Heart",color:"text-red-600"};case"Natural Disasters":return{iconName:"CloudLightning",color:"text-blue-600"};case"Chemical/Hazmat":return{iconName:"AlertTriangle",color:"text-purple-600"};case"Dangerous Animals":return{iconName:"Bug",color:"text-red-600"};case"Animal Welfare":return{iconName:"Heart",color:"text-green-600"};case"Environmental Issues":return{iconName:"Trees",color:"text-green-600"};case"Pest Problems":return{iconName:"Bug",color:"text-orange-600"};case"Noise Complaints":return{iconName:"Volume2",color:"text-blue-600"};case"Traffic Issues":return{iconName:"Car",color:"text-orange-600"};case"Public Space Problems":return{iconName:"MapPin",color:"text-gray-600"};case"Events & Gatherings":return{iconName:"Users",color:"text-blue-600"};case"Missing Pets":return{iconName:"Search",color:"text-orange-600"};case"Found Pets":return{iconName:"CheckCircle",color:"text-green-600"};case"Lost Items":return{iconName:"Search",color:"text-orange-600"};case"Found Items":return{iconName:"CheckCircle",color:"text-green-600"}}switch(((d=e.properties)==null?void 0:d.categoryId)||e.category){case"792759f4-1b98-4665-b14c-44a54e9969e9":return{iconName:"Shield",color:"text-red-600"};case"9b1d58d9-cfd1-4c31-93e9-754276a5f265":return{iconName:"Construction",color:"text-yellow-600"};case"54d31da5-fc10-4ad2-8eca-04bac680e668":return{iconName:"Zap",color:"text-red-500"};case"d03f47a9-10fb-4656-ae73-92e959d7566a":return{iconName:"Trees",color:"text-green-600"};case"deaca906-3561-4f80-b79f-ed99561c3b04":return{iconName:"Users",color:"text-blue-600"};case"4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0":return{iconName:"Heart",color:"text-pink-600"};case"d1dfcd4e-48e9-4e58-9476-4782a2a132f3":return{iconName:"Search",color:"text-indigo-600"};default:return{iconName:"Users",color:"text-purple-600"}}}return e.type==="traffic"||((h=e.properties)==null?void 0:h.category)==="traffic"?{iconName:"Car",color:"text-orange-600"}:(f=e.properties)!=null&&f.userReported?{iconName:"Users",color:"text-purple-600"}:{iconName:"AlertTriangle",color:"text-red-600"}}function IX(){const e=Qg(),[t,n]=v.useState(!1),[,r]=qr(),[s,i]=v.useState(!1),[l,c]=v.useState({showTrafficEvents:!0,showIncidents:!0,showQFES:!0,showUserReports:!0,showUserSafetyCrime:!0,showUserWildlife:!0,showUserCommunity:!0,showUserTraffic:!0,showUserLostFound:!0,showUserPets:!0,showActiveIncidents:!0,showResolvedIncidents:!1,showHighPriority:!0,showMediumPriority:!0,showLowPriority:!0,autoRefresh:!0,distanceFilter:"all",radius:50,locationFilter:!0,showExpiredIncidents:!1,agingSensitivity:"normal"}),{data:d=[]}=Dt({queryKey:["/api/categories"],select:g=>g||[]}),{data:h=[]}=Dt({queryKey:["/api/subcategories"],select:g=>g||[]});v.useEffect(()=>{if(d.length>0){const g={};d.forEach(b=>{g[b.id]=!0}),c(b=>({...b,...g}))}},[d]),v.useEffect(()=>{if(h.length>0){const g={};h.forEach(b=>{g[b.id]=!0}),c(b=>({...b,...g}))}},[h]),v.useEffect(()=>{const g=localStorage.getItem("homeLocation"),b=localStorage.getItem("homeCoordinates"),j=localStorage.getItem("homeBoundingBox"),_=localStorage.getItem("locationFilter");if(g&&b)try{const w=JSON.parse(b),S=j?JSON.parse(j):void 0;c(x=>({...x,homeLocation:g,homeCoordinates:w,homeBoundingBox:S,locationFilter:_?_==="true":!0}))}catch(w){console.error("Failed to load saved location:",w)}},[]),v.useEffect(()=>{const g=j=>{const{location:_,coordinates:w,boundingBox:S}=j.detail;c(x=>({...x,homeLocation:_,homeCoordinates:w,homeBoundingBox:S,locationFilter:!0}))},b=j=>{if(j.key==="homeLocation"){const _=localStorage.getItem("homeLocation"),w=localStorage.getItem("homeCoordinates"),S=localStorage.getItem("homeBoundingBox"),x=localStorage.getItem("locationFilter");if(_&&w)try{const N=JSON.parse(w),P=S?JSON.parse(S):void 0;c(E=>({...E,homeLocation:_,homeCoordinates:N,homeBoundingBox:P,locationFilter:x?x==="true":!0}))}catch(N){console.error("Failed to sync location from feed:",N)}else c(N=>({...N,homeLocation:"",homeCoordinates:void 0,homeBoundingBox:void 0,locationFilter:!1}))}};return window.addEventListener("locationChanged",g),window.addEventListener("storage",b),()=>{window.removeEventListener("locationChanged",g),window.removeEventListener("storage",b)}},[]),v.useEffect(()=>{l.homeLocation&&l.homeCoordinates&&(localStorage.setItem("homeLocation",l.homeLocation),localStorage.setItem("homeCoordinates",JSON.stringify(l.homeCoordinates)),localStorage.setItem("locationFilter",String(l.locationFilter)),l.homeBoundingBox&&localStorage.setItem("homeBoundingBox",JSON.stringify(l.homeBoundingBox)),window.dispatchEvent(new CustomEvent("locationChanged",{detail:{location:l.homeLocation,coordinates:l.homeCoordinates,boundingBox:l.homeBoundingBox}})))},[l.homeLocation,l.homeCoordinates,l.homeBoundingBox,l.locationFilter]);const f=(g,b)=>{g==="radius"&&console.log(" RADIUS CHANGE DEBUG:",{key:g,value:b,currentRadius:l.radius}),c(j=>({...j,[g]:b}))},p=()=>{n(!t)};return o.jsxs("div",{className:"relative h-dvh overflow-hidden bg-background",children:[o.jsx(yi,{onMenuToggle:p,onFilterToggle:p,showFilterButton:e}),o.jsx(cV,{isOpen:t,filters:l,onFilterChange:f,onClose:()=>n(!1)}),o.jsx("main",{className:`absolute top-16 right-0 bottom-0 left-0 transition-all duration-300 ${t&&!e?"left-80":"left-0"} ${e?"h-[calc(100dvh-4rem)]":""}`,children:o.jsx(tV,{filters:l,onEventSelect:g=>yF(g,r)})}),e?o.jsx("button",{onClick:()=>i(!0),className:"fixed bottom-6 left-6 w-14 h-14 bg-blue-500 text-white rounded-full shadow-lg z-30 flex items-center justify-center hover:bg-blue-600 transition-colors","data-testid":"button-community-report",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}):o.jsxs(le,{onClick:()=>i(!0),className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-30 shadow-lg","data-testid":"button-community-report",children:[o.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Share Community Update"]}),e&&!t&&o.jsx("button",{onClick:p,className:"fixed bottom-6 right-6 w-14 h-14 bg-primary text-primary-foreground rounded-full shadow-lg z-30 flex items-center justify-center hover:bg-primary/90 transition-colors","data-testid":"button-mobile-menu-toggle",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),o.jsx(V_,{isOpen:s,onClose:()=>i(!1)})]})}const Re=v.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Re.displayName="Card";const Ze=v.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ce("flex flex-col space-y-1.5 p-6",e),...t}));Ze.displayName="CardHeader";const Qe=v.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));Qe.displayName="CardTitle";const At=v.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));At.displayName="CardDescription";const De=v.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ce("p-6 pt-0",e),...t}));De.displayName="CardContent";const MX=v.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ce("flex items-center p-6 pt-0",e),...t}));MX.displayName="CardFooter";var hy="Tabs",[RX,mte]=Yn(hy,[Au]),xF=Au(),[LX,H_]=RX(hy),bF=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...h}=e,f=Eu(c),[p,g]=Ni({prop:r,onChange:s,defaultProp:i??"",caller:hy});return o.jsx(LX,{scope:n,baseId:bi(),value:p,onValueChange:g,orientation:l,dir:f,activationMode:d,children:o.jsx(Ae.div,{dir:f,"data-orientation":l,...h,ref:t})})});bF.displayName=hy;var wF="TabsList",_F=v.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=H_(wF,n),l=xF(n);return o.jsx(i_,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Ae.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});_F.displayName=wF;var SF="TabsTrigger",NF=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,l=H_(SF,n),c=xF(n),d=PF(l.baseId,r),h=TF(l.baseId,r),f=r===l.value;return o.jsx(o_,{asChild:!0,...c,focusable:!s,active:f,children:o.jsx(Ae.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:t,onMouseDown:me(e.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?l.onValueChange(r):p.preventDefault()}),onKeyDown:me(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(r)}),onFocus:me(e.onFocus,()=>{const p=l.activationMode!=="manual";!f&&!s&&p&&l.onValueChange(r)})})})});NF.displayName=SF;var CF="TabsContent",jF=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...l}=e,c=H_(CF,n),d=PF(c.baseId,r),h=TF(c.baseId,r),f=r===c.value,p=v.useRef(f);return v.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),o.jsx(Un,{present:s||f,children:({present:g})=>o.jsx(Ae.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:h,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:g&&i})})});jF.displayName=CF;function PF(e,t){return`${e}-trigger-${t}`}function TF(e,t){return`${e}-content-${t}`}var FX=bF,kF=_F,EF=NF,AF=jF;const IF=FX,W_=v.forwardRef(({className:e,...t},n)=>o.jsx(kF,{ref:n,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));W_.displayName=kF.displayName;const Ao=v.forwardRef(({className:e,...t},n)=>o.jsx(EF,{ref:n,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ao.displayName=EF.displayName;const Io=v.forwardRef(({className:e,...t},n)=>o.jsx(AF,{ref:n,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Io.displayName=AF.displayName;const oe=Symbol.for("drizzle:entityKind");function un(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,oe))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(oe in n&&n[oe]===t[oe])return!0;n=Object.getPrototypeOf(n)}return!1}var nj;nj=oe;class vu{constructor(t,n){I(this,"name");I(this,"keyAsName");I(this,"primary");I(this,"notNull");I(this,"default");I(this,"defaultFn");I(this,"onUpdateFn");I(this,"hasDefault");I(this,"isUnique");I(this,"uniqueName");I(this,"uniqueType");I(this,"dataType");I(this,"columnType");I(this,"enumValues");I(this,"generated");I(this,"generatedIdentity");I(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}I(vu,nj,"Column");var rj;rj=oe;class MF{constructor(t,n,r){I(this,"config");I(this,"$default",this.$defaultFn);I(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}I(MF,rj,"ColumnBuilder");const bc=Symbol.for("drizzle:Name");var sj;sj=oe;class RF{constructor(t,n){I(this,"reference");I(this,"_onUpdate","no action");I(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:s,foreignColumns:i}=t();return{name:r,columns:s,foreignTable:i[0].table,foreignColumns:i}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new LF(t,this)}}I(RF,sj,"PgForeignKeyBuilder");var ij;ij=oe;class LF{constructor(t,n){I(this,"reference");I(this,"onUpdate");I(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:r}=this.reference(),s=n.map(c=>c.name),i=r.map(c=>c.name),l=[this.table[bc],...s,r[0].table[bc],...i];return t??`${l.join("_")}_fk`}}I(LF,ij,"PgForeignKey");function OX(e,...t){return e(...t)}function DX(e){return new DF(e)}function FF(e,t){return`${e[bc]}_${t.join("_")}_unique`}var oj;oj=oe;class OF{constructor(t,n){I(this,"columns");I(this,"nullsNotDistinctConfig",!1);this.name=n,this.columns=t}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(t){return new UF(t,this.columns,this.nullsNotDistinctConfig,this.name)}}I(OF,oj,"PgUniqueConstraintBuilder");var aj;aj=oe;class DF{constructor(t){I(this,"name");this.name=t}on(...t){return new OF(t,this.name)}}I(DF,aj,"PgUniqueOnConstraintBuilder");var lj;lj=oe;class UF{constructor(t,n,r,s){I(this,"columns");I(this,"name");I(this,"nullsNotDistinct",!1);this.table=t,this.columns=n,this.name=s??FF(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=r}getName(){return this.name}}I(UF,lj,"PgUniqueConstraint");function A2(e,t,n){for(let r=t;r<e.length;r++){const s=e[r];if(s==="\\"){r++;continue}if(s==='"')return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(s===","||s==="}"))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}function BF(e,t=0){const n=[];let r=t,s=!1;for(;r<e.length;){const i=e[r];if(i===","){(s||r===t)&&n.push(""),s=!0,r++;continue}if(s=!1,i==="\\"){r+=2;continue}if(i==='"'){const[d,h]=A2(e,r+1,!0);n.push(d),r=h;continue}if(i==="}")return[n,r+1];if(i==="{"){const[d,h]=BF(e,r+1);n.push(d),r=h;continue}const[l,c]=A2(e,r,!1);n.push(l),r=c}return[n,r]}function UX(e){const[t]=BF(e,1);return t}function zF(e){return`{${e.map(t=>Array.isArray(t)?zF(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var cj,uj;class yt extends(uj=MF,cj=oe,uj){constructor(){super(...arguments);I(this,"foreignKeyConfigs",[])}array(n){return new VF(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:s,actions:i})=>OX((l,c)=>{const d=new RF(()=>{const h=l();return{columns:[n],foreignColumns:[h]}});return c.onUpdate&&d.onUpdate(c.onUpdate),c.onDelete&&d.onDelete(c.onDelete),d.build(r)},s,i))}buildExtraConfigColumn(n){return new $F(n,this.config)}}I(yt,cj,"PgColumnBuilder");var dj,hj;class it extends(hj=vu,dj=oe,hj){constructor(t,n){n.uniqueName||(n.uniqueName=FF(t,[n.name])),super(t,n),this.table=t}}I(it,dj,"PgColumn");var fj,pj;class $F extends(pj=it,fj=oe,pj){constructor(){super(...arguments);I(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});I(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}I($F,fj,"ExtraConfigColumn");var mj;mj=oe;class Zp{constructor(t,n,r,s){I(this,"name");I(this,"keyAsName");I(this,"type");I(this,"indexConfig");this.name=t,this.keyAsName=n,this.type=r,this.indexConfig=s}}I(Zp,mj,"IndexedColumn");var gj,yj;class VF extends(yj=yt,gj=oe,yj){constructor(t,n,r){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(t){const n=this.config.baseBuilder.build(t);return new mb(t,this.config,n)}}I(VF,gj,"PgArrayBuilder");var vj,xj;const xg=class xg extends(xj=it,vj=oe,xj){constructor(n,r,s,i){super(n,r);I(this,"size");this.baseColumn=s,this.range=i,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=UX(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const s=n.map(i=>i===null?null:un(this.baseColumn,xg)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return r?s:zF(s)}};I(xg,vj,"PgArray");let mb=xg;const I2=Symbol.for("drizzle:isPgEnum");function BX(e){return!!e&&typeof e=="function"&&I2 in e&&e[I2]===!0}var bj;bj=oe;class q_{constructor(t,n,r,s=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:r,isWith:s}}}I(q_,bj,"Subquery");const zX={startActiveSpan(e,t){return t()}},wc=Symbol.for("drizzle:ViewBaseConfig"),Jv=Symbol.for("drizzle:Schema"),M2=Symbol.for("drizzle:Columns"),R2=Symbol.for("drizzle:ExtraConfigColumns"),ex=Symbol.for("drizzle:OriginalName"),tx=Symbol.for("drizzle:BaseName"),Xm=Symbol.for("drizzle:IsAlias"),L2=Symbol.for("drizzle:ExtraConfigBuilder"),HF=Symbol.for("drizzle:IsDrizzleTable");var wj,_j,Sj,Nj,Cj,jj,Pj,Tj,kj,Ej;Ej=oe,kj=bc,Tj=ex,Pj=Jv,jj=M2,Cj=R2,Nj=tx,Sj=Xm,_j=HF,wj=L2;class or{constructor(t,n,r){I(this,kj);I(this,Tj);I(this,Pj);I(this,jj);I(this,Cj);I(this,Nj);I(this,Sj,!1);I(this,_j,!0);I(this,wj);this[bc]=this[ex]=t,this[Jv]=n,this[tx]=r}}I(or,Ej,"Table"),I(or,"Symbol",{Name:bc,Schema:Jv,OriginalName:ex,Columns:M2,ExtraConfigColumns:R2,BaseName:tx,IsAlias:Xm,ExtraConfigBuilder:L2});function WF(e){return typeof e=="object"&&e!==null&&HF in e}function $X(e){return e!=null&&typeof e.getSQL=="function"}function VX(e){var n;const t={sql:"",params:[]};for(const r of e)t.sql+=r.sql,t.params.push(...r.params),(n=r.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}var Aj;Aj=oe;class Jr{constructor(t){I(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new Qt([this])}}I(Jr,Aj,"StringChunk");var Ij;Ij=oe;const Ia=class Ia{constructor(t){I(this,"decoder",qF);I(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return zX.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(t,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:l,prepareTyping:c,inlineParams:d,paramStartIndex:h}=r;return VX(t.map(f=>{var p;if(un(f,Jr))return{sql:f.value.join(""),params:[]};if(un(f,Jm))return{sql:i(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const g=[new Jr("(")];for(const[b,j]of f.entries())g.push(j),b<f.length-1&&g.push(new Jr(", "));return g.push(new Jr(")")),this.buildQueryFromSourceParams(g,r)}if(un(f,Ia))return this.buildQueryFromSourceParams(f.queryChunks,{...r,inlineParams:d||f.shouldInlineParams});if(un(f,or)){const g=f[or.Symbol.Schema],b=f[or.Symbol.Name];return{sql:g===void 0||f[Xm]?i(b):i(g)+"."+i(b),params:[]}}if(un(f,vu)){const g=s.getColumnCasing(f);if(n.invokeSource==="indexes")return{sql:i(g),params:[]};const b=f.table[or.Symbol.Schema];return{sql:f.table[Xm]||b===void 0?i(f.table[or.Symbol.Name])+"."+i(g):i(b)+"."+i(f.table[or.Symbol.Name])+"."+i(g),params:[]}}if(un(f,KF)){const g=f[wc].schema,b=f[wc].name;return{sql:g===void 0||f[wc].isAlias?i(b):i(g)+"."+i(b),params:[]}}if(un(f,Z_)){if(un(f.value,eg))return{sql:l(h.value++,f),params:[f],typings:["none"]};const g=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(un(g,Ia))return this.buildQueryFromSourceParams([g],r);if(d)return{sql:this.mapInlineParam(g,r),params:[]};let b=["none"];return c&&(b=[c(f.encoder)]),{sql:l(h.value++,g),params:[g],typings:b}}return un(f,eg)?{sql:l(h.value++,f),params:[f],typings:["none"]}:un(f,Ia.Aliased)&&f.fieldAlias!==void 0?{sql:i(f.fieldAlias),params:[]}:un(f,q_)?f._.isWith?{sql:i(f._.alias),params:[]}:this.buildQueryFromSourceParams([new Jr("("),f._.sql,new Jr(") "),new Jm(f._.alias)],r):BX(f)?f.schema?{sql:i(f.schema)+"."+i(f.enumName),params:[]}:{sql:i(f.enumName),params:[]}:$X(f)?(p=f.shouldOmitSQLParens)!=null&&p.call(f)?this.buildQueryFromSourceParams([f.getSQL()],r):this.buildQueryFromSourceParams([new Jr("("),f.getSQL(),new Jr(")")],r):d?{sql:this.mapInlineParam(f,r),params:[]}:{sql:l(h.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const r=t.toString();return n(r==="[object Object]"?JSON.stringify(t):r)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Ia.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};I(Ia,Ij,"SQL");let Qt=Ia;var Mj;Mj=oe;class Jm{constructor(t){I(this,"brand");this.value=t}getSQL(){return new Qt([this])}}I(Jm,Mj,"Name");const qF={mapFromDriverValue:e=>e},ZF={mapToDriverValue:e=>e};({...qF,...ZF});var Rj;Rj=oe;class Z_{constructor(t,n=ZF){I(this,"brand");this.value=t,this.encoder=n}getSQL(){return new Qt([this])}}I(Z_,Rj,"Param");function Mt(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new Jr(e[0]));for(const[r,s]of t.entries())n.push(s,new Jr(e[r+1]));return new Qt(n)}(e=>{function t(){return new Qt([])}e.empty=t;function n(d){return new Qt(d)}e.fromList=n;function r(d){return new Qt([new Jr(d)])}e.raw=r;function s(d,h){const f=[];for(const[p,g]of d.entries())p>0&&h!==void 0&&f.push(h),f.push(g);return new Qt(f)}e.join=s;function i(d){return new Jm(d)}e.identifier=i;function l(d){return new eg(d)}e.placeholder=l;function c(d,h){return new Z_(d,h)}e.param=c})(Mt||(Mt={}));(e=>{var n;n=oe;const r=class r{constructor(i,l){I(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};I(r,n,"SQL.Aliased");let t=r;e.Aliased=t})(Qt||(Qt={}));var Lj;Lj=oe;class eg{constructor(t){this.name=t}getSQL(){return new Qt([this])}}I(eg,Lj,"Placeholder");const GF=Symbol.for("drizzle:IsDrizzleView");var Fj,Oj,Dj;Dj=oe,Oj=wc,Fj=GF;class KF{constructor({name:t,schema:n,selectedFields:r,query:s}){I(this,Oj);I(this,Fj,!0);this[wc]={name:t,originalName:t,schema:n,selectedFields:r,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new Qt([this])}}I(KF,Dj,"View");function HX(e){return typeof e=="object"&&e!==null&&GF in e}vu.prototype.getSQL=function(){return new Qt([this])};or.prototype.getSQL=function(){return new Qt([this])};q_.prototype.getSQL=function(){return new Qt([this])};function WX(e){return e[or.Symbol.Columns]}function qX(e){return e[wc].selectedFields}function Tn(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var Uj,Bj;class xf extends(Bj=yt,Uj=oe,Bj){generatedAlwaysAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}I(xf,Uj,"PgIntColumnBaseBuilder");var zj,$j;class QF extends($j=xf,zj=oe,$j){constructor(t){super(t,"number","PgBigInt53")}build(t){return new YF(t,this.config)}}I(QF,zj,"PgBigInt53Builder");var Vj,Hj;class YF extends(Hj=it,Vj=oe,Hj){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}I(YF,Vj,"PgBigInt53");var Wj,qj;class XF extends(qj=xf,Wj=oe,qj){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new JF(t,this.config)}}I(XF,Wj,"PgBigInt64Builder");var Zj,Gj;class JF extends(Gj=it,Zj=oe,Gj){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}I(JF,Zj,"PgBigInt64");function ZX(e,t){const{name:n,config:r}=Tn(e,t);return r.mode==="number"?new QF(n):new XF(n)}var Kj,Qj;class e3 extends(Qj=yt,Kj=oe,Qj){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new t3(t,this.config)}}I(e3,Kj,"PgBigSerial53Builder");var Yj,Xj;class t3 extends(Xj=it,Yj=oe,Xj){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}I(t3,Yj,"PgBigSerial53");var Jj,eP;class n3 extends(eP=yt,Jj=oe,eP){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new r3(t,this.config)}}I(n3,Jj,"PgBigSerial64Builder");var tP,nP;class r3 extends(nP=it,tP=oe,nP){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}I(r3,tP,"PgBigSerial64");function GX(e,t){const{name:n,config:r}=Tn(e,t);return r.mode==="number"?new e3(n):new n3(n)}var rP,sP;class s3 extends(sP=yt,rP=oe,sP){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new i3(t,this.config)}}I(s3,rP,"PgBooleanBuilder");var iP,oP;class i3 extends(oP=it,iP=oe,oP){getSQLType(){return"boolean"}}I(i3,iP,"PgBoolean");function Sr(e){return new s3(e??"")}var aP,lP;class o3 extends(lP=yt,aP=oe,lP){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new a3(t,this.config)}}I(o3,aP,"PgCharBuilder");var cP,uP;class a3 extends(uP=it,cP=oe,uP){constructor(){super(...arguments);I(this,"length",this.config.length);I(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}I(a3,cP,"PgChar");function KX(e,t={}){const{name:n,config:r}=Tn(e,t);return new o3(n,r)}var dP,hP;class l3 extends(hP=yt,dP=oe,hP){constructor(t){super(t,"string","PgCidr")}build(t){return new c3(t,this.config)}}I(l3,dP,"PgCidrBuilder");var fP,pP;class c3 extends(pP=it,fP=oe,pP){getSQLType(){return"cidr"}}I(c3,fP,"PgCidr");function QX(e){return new l3(e??"")}var mP,gP;class u3 extends(gP=yt,mP=oe,gP){constructor(t,n,r){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(t){return new d3(t,this.config)}}I(u3,mP,"PgCustomColumnBuilder");var yP,vP;class d3 extends(vP=it,yP=oe,vP){constructor(n,r){super(n,r);I(this,"sqlName");I(this,"mapTo");I(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}I(d3,yP,"PgCustomColumn");function YX(e){return(t,n)=>{const{name:r,config:s}=Tn(t,n);return new u3(r,s,e)}}var xP,bP;class Mu extends(bP=yt,xP=oe,bP){defaultNow(){return this.default(Mt`now()`)}}I(Mu,xP,"PgDateColumnBaseBuilder");var wP,_P;class h3 extends(_P=Mu,wP=oe,_P){constructor(t){super(t,"date","PgDate")}build(t){return new f3(t,this.config)}}I(h3,wP,"PgDateBuilder");var SP,NP;class f3 extends(NP=it,SP=oe,NP){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}I(f3,SP,"PgDate");var CP,jP;class p3 extends(jP=Mu,CP=oe,jP){constructor(t){super(t,"string","PgDateString")}build(t){return new m3(t,this.config)}}I(p3,CP,"PgDateStringBuilder");var PP,TP;class m3 extends(TP=it,PP=oe,TP){getSQLType(){return"date"}}I(m3,PP,"PgDateString");function XX(e,t){const{name:n,config:r}=Tn(e,t);return(r==null?void 0:r.mode)==="date"?new h3(n):new p3(n)}var kP,EP;class g3 extends(EP=yt,kP=oe,EP){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new y3(t,this.config)}}I(g3,kP,"PgDoublePrecisionBuilder");var AP,IP;class y3 extends(IP=it,AP=oe,IP){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}I(y3,AP,"PgDoublePrecision");function gb(e){return new g3(e??"")}var MP,RP;class v3 extends(RP=yt,MP=oe,RP){constructor(t){super(t,"string","PgInet")}build(t){return new x3(t,this.config)}}I(v3,MP,"PgInetBuilder");var LP,FP;class x3 extends(FP=it,LP=oe,FP){getSQLType(){return"inet"}}I(x3,LP,"PgInet");function JX(e){return new v3(e??"")}var OP,DP;class b3 extends(DP=xf,OP=oe,DP){constructor(t){super(t,"number","PgInteger")}build(t){return new w3(t,this.config)}}I(b3,OP,"PgIntegerBuilder");var UP,BP;class w3 extends(BP=it,UP=oe,BP){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}I(w3,UP,"PgInteger");function Rn(e){return new b3(e??"")}var zP,$P;class _3 extends($P=yt,zP=oe,$P){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new S3(t,this.config)}}I(_3,zP,"PgIntervalBuilder");var VP,HP;class S3 extends(HP=it,VP=oe,HP){constructor(){super(...arguments);I(this,"fields",this.config.intervalConfig.fields);I(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}I(S3,VP,"PgInterval");function eJ(e,t={}){const{name:n,config:r}=Tn(e,t);return new _3(n,r)}var WP,qP;class N3 extends(qP=yt,WP=oe,qP){constructor(t){super(t,"json","PgJson")}build(t){return new C3(t,this.config)}}I(N3,WP,"PgJsonBuilder");var ZP,GP;class C3 extends(GP=it,ZP=oe,GP){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}I(C3,ZP,"PgJson");function tJ(e){return new N3(e??"")}var KP,QP;class j3 extends(QP=yt,KP=oe,QP){constructor(t){super(t,"json","PgJsonb")}build(t){return new P3(t,this.config)}}I(j3,KP,"PgJsonbBuilder");var YP,XP;class P3 extends(XP=it,YP=oe,XP){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}I(P3,YP,"PgJsonb");function po(e){return new j3(e??"")}var JP,eT;class T3 extends(eT=yt,JP=oe,eT){constructor(t){super(t,"array","PgLine")}build(t){return new k3(t,this.config)}}I(T3,JP,"PgLineBuilder");var tT,nT;class k3 extends(nT=it,tT=oe,nT){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,s]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(s)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}I(k3,tT,"PgLine");var rT,sT;class E3 extends(sT=yt,rT=oe,sT){constructor(t){super(t,"json","PgLineABC")}build(t){return new A3(t,this.config)}}I(E3,rT,"PgLineABCBuilder");var iT,oT;class A3 extends(oT=it,iT=oe,oT){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,s]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(s)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}I(A3,iT,"PgLineABC");function nJ(e,t){const{name:n,config:r}=Tn(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new T3(n):new E3(n)}var aT,lT;class I3 extends(lT=yt,aT=oe,lT){constructor(t){super(t,"string","PgMacaddr")}build(t){return new M3(t,this.config)}}I(I3,aT,"PgMacaddrBuilder");var cT,uT;class M3 extends(uT=it,cT=oe,uT){getSQLType(){return"macaddr"}}I(M3,cT,"PgMacaddr");function rJ(e){return new I3(e??"")}var dT,hT;class R3 extends(hT=yt,dT=oe,hT){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new L3(t,this.config)}}I(R3,dT,"PgMacaddr8Builder");var fT,pT;class L3 extends(pT=it,fT=oe,pT){getSQLType(){return"macaddr8"}}I(L3,fT,"PgMacaddr8");function sJ(e){return new R3(e??"")}var mT,gT;class F3 extends(gT=yt,mT=oe,gT){constructor(t,n,r){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(t){return new O3(t,this.config)}}I(F3,mT,"PgNumericBuilder");var yT,vT;class O3 extends(vT=it,yT=oe,vT){constructor(n,r){super(n,r);I(this,"precision");I(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}I(O3,yT,"PgNumeric");function iJ(e,t){const{name:n,config:r}=Tn(e,t);return new F3(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}var xT,bT;class D3 extends(bT=yt,xT=oe,bT){constructor(t){super(t,"array","PgPointTuple")}build(t){return new U3(t,this.config)}}I(D3,xT,"PgPointTupleBuilder");var wT,_T;class U3 extends(_T=it,wT=oe,_T){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}I(U3,wT,"PgPointTuple");var ST,NT;class B3 extends(NT=yt,ST=oe,NT){constructor(t){super(t,"json","PgPointObject")}build(t){return new z3(t,this.config)}}I(B3,ST,"PgPointObjectBuilder");var CT,jT;class z3 extends(jT=it,CT=oe,jT){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}I(z3,CT,"PgPointObject");function oJ(e,t){const{name:n,config:r}=Tn(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new D3(n):new B3(n)}function aJ(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function F2(e,t){const n=new ArrayBuffer(8),r=new DataView(n);for(let s=0;s<8;s++)r.setUint8(s,e[t+s]);return r.getFloat64(0,!0)}function $3(e){const t=aJ(e);let n=0;const r=t[n];n+=1;const s=new DataView(t.buffer),i=s.getUint32(n,r===1);if(n+=4,i&536870912&&(s.getUint32(n,r===1),n+=4),(i&65535)===1){const l=F2(t,n);n+=8;const c=F2(t,n);return n+=8,[l,c]}throw new Error("Unsupported geometry type")}var PT,TT;class V3 extends(TT=yt,PT=oe,TT){constructor(t){super(t,"array","PgGeometry")}build(t){return new H3(t,this.config)}}I(V3,PT,"PgGeometryBuilder");var kT,ET;class H3 extends(ET=it,kT=oe,ET){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return $3(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}I(H3,kT,"PgGeometry");var AT,IT;class W3 extends(IT=yt,AT=oe,IT){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new q3(t,this.config)}}I(W3,AT,"PgGeometryObjectBuilder");var MT,RT;class q3 extends(RT=it,MT=oe,RT){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=$3(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}I(q3,MT,"PgGeometryObject");function lJ(e,t){const{name:n,config:r}=Tn(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new V3(n):new W3(n)}var LT,FT;class Z3 extends(FT=yt,LT=oe,FT){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new G3(t,this.config)}}I(Z3,LT,"PgRealBuilder");var OT,DT;class G3 extends(DT=it,OT=oe,DT){constructor(n,r){super(n,r);I(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}I(G3,OT,"PgReal");function cJ(e){return new Z3(e??"")}var UT,BT;class K3 extends(BT=yt,UT=oe,BT){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Q3(t,this.config)}}I(K3,UT,"PgSerialBuilder");var zT,$T;class Q3 extends($T=it,zT=oe,$T){getSQLType(){return"serial"}}I(Q3,zT,"PgSerial");function uJ(e){return new K3(e??"")}var VT,HT;class Y3 extends(HT=xf,VT=oe,HT){constructor(t){super(t,"number","PgSmallInt")}build(t){return new X3(t,this.config)}}I(Y3,VT,"PgSmallIntBuilder");var WT,qT;class X3 extends(qT=it,WT=oe,qT){constructor(){super(...arguments);I(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}I(X3,WT,"PgSmallInt");function dJ(e){return new Y3(e??"")}var ZT,GT;class J3 extends(GT=yt,ZT=oe,GT){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new eO(t,this.config)}}I(J3,ZT,"PgSmallSerialBuilder");var KT,QT;class eO extends(QT=it,KT=oe,QT){getSQLType(){return"smallserial"}}I(eO,KT,"PgSmallSerial");function hJ(e){return new J3(e??"")}var YT,XT;class tO extends(XT=yt,YT=oe,XT){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new nO(t,this.config)}}I(tO,YT,"PgTextBuilder");var JT,ek;class nO extends(ek=it,JT=oe,ek){constructor(){super(...arguments);I(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}I(nO,JT,"PgText");function Le(e,t={}){const{name:n,config:r}=Tn(e,t);return new tO(n,r)}var tk,nk;class rO extends(nk=Mu,tk=oe,nk){constructor(t,n,r){super(t,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(t){return new sO(t,this.config)}}I(rO,tk,"PgTimeBuilder");var rk,sk;class sO extends(sk=it,rk=oe,sk){constructor(n,r){super(n,r);I(this,"withTimezone");I(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}I(sO,rk,"PgTime");function fJ(e,t={}){const{name:n,config:r}=Tn(e,t);return new rO(n,r.withTimezone??!1,r.precision)}var ik,ok;class iO extends(ok=Mu,ik=oe,ok){constructor(t,n,r){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(t){return new oO(t,this.config)}}I(iO,ik,"PgTimestampBuilder");var ak,lk;class oO extends(lk=it,ak=oe,lk){constructor(n,r){super(n,r);I(this,"withTimezone");I(this,"precision");I(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));I(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}I(oO,ak,"PgTimestamp");var ck,uk;class aO extends(uk=Mu,ck=oe,uk){constructor(t,n,r){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(t){return new lO(t,this.config)}}I(aO,ck,"PgTimestampStringBuilder");var dk,hk;class lO extends(hk=it,dk=oe,hk){constructor(n,r){super(n,r);I(this,"withTimezone");I(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}I(lO,dk,"PgTimestampString");function Ge(e,t={}){const{name:n,config:r}=Tn(e,t);return(r==null?void 0:r.mode)==="string"?new aO(n,r.withTimezone??!1,r.precision):new iO(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var fk,pk;class cO extends(pk=yt,fk=oe,pk){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(Mt`gen_random_uuid()`)}build(t){return new uO(t,this.config)}}I(cO,fk,"PgUUIDBuilder");var mk,gk;class uO extends(gk=it,mk=oe,gk){getSQLType(){return"uuid"}}I(uO,mk,"PgUUID");function pJ(e){return new cO(e??"")}var yk,vk;class dO extends(vk=yt,yk=oe,vk){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new hO(t,this.config)}}I(dO,yk,"PgVarcharBuilder");var xk,bk;class hO extends(bk=it,xk=oe,bk){constructor(){super(...arguments);I(this,"length",this.config.length);I(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}I(hO,xk,"PgVarchar");function re(e,t={}){const{name:n,config:r}=Tn(e,t);return new dO(n,r)}var wk,_k;class fO extends(_k=yt,wk=oe,_k){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new pO(t,this.config)}}I(fO,wk,"PgBinaryVectorBuilder");var Sk,Nk;class pO extends(Nk=it,Sk=oe,Nk){constructor(){super(...arguments);I(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}I(pO,Sk,"PgBinaryVector");function mJ(e,t){const{name:n,config:r}=Tn(e,t);return new fO(n,r)}var Ck,jk;class mO extends(jk=yt,Ck=oe,jk){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new gO(t,this.config)}}I(mO,Ck,"PgHalfVectorBuilder");var Pk,Tk;class gO extends(Tk=it,Pk=oe,Tk){constructor(){super(...arguments);I(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}I(gO,Pk,"PgHalfVector");function gJ(e,t){const{name:n,config:r}=Tn(e,t);return new mO(n,r)}var kk,Ek;class yO extends(Ek=yt,kk=oe,Ek){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new vO(t,this.config)}}I(yO,kk,"PgSparseVectorBuilder");var Ak,Ik;class vO extends(Ik=it,Ak=oe,Ik){constructor(){super(...arguments);I(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}I(vO,Ak,"PgSparseVector");function yJ(e,t){const{name:n,config:r}=Tn(e,t);return new yO(n,r)}var Mk,Rk;class xO extends(Rk=yt,Mk=oe,Rk){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new bO(t,this.config)}}I(xO,Mk,"PgVectorBuilder");var Lk,Fk;class bO extends(Fk=it,Lk=oe,Fk){constructor(){super(...arguments);I(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}I(bO,Lk,"PgVector");function vJ(e,t){const{name:n,config:r}=Tn(e,t);return new xO(n,r)}function xJ(){return{bigint:ZX,bigserial:GX,boolean:Sr,char:KX,cidr:QX,customType:YX,date:XX,doublePrecision:gb,inet:JX,integer:Rn,interval:eJ,json:tJ,jsonb:po,line:nJ,macaddr:rJ,macaddr8:sJ,numeric:iJ,point:oJ,geometry:lJ,real:cJ,serial:uJ,smallint:dJ,smallserial:hJ,text:Le,time:fJ,timestamp:Ge,uuid:pJ,varchar:re,bit:mJ,halfvec:gJ,sparsevec:yJ,vector:vJ}}const yb=Symbol.for("drizzle:PgInlineForeignKeys"),O2=Symbol.for("drizzle:EnableRLS");var Ok,Dk,Uk,Bk,zk;class Dd extends(zk=or,Bk=oe,Uk=yb,Dk=O2,Ok=or.Symbol.ExtraConfigBuilder,zk){constructor(){super(...arguments);I(this,Uk,[]);I(this,Dk,!1);I(this,Ok)}}I(Dd,Bk,"PgTable"),I(Dd,"Symbol",Object.assign({},or.Symbol,{InlineForeignKeys:yb,EnableRLS:O2}));function bJ(e,t,n,r,s=e){const i=new Dd(e,r,s),l=typeof t=="function"?t(xJ()):t,c=Object.fromEntries(Object.entries(l).map(([f,p])=>{const g=p;g.setName(f);const b=g.build(i);return i[yb].push(...g.buildForeignKeys(b,i)),[f,b]})),d=Object.fromEntries(Object.entries(l).map(([f,p])=>{const g=p;g.setName(f);const b=g.buildExtraConfigColumn(i);return[f,b]})),h=Object.assign(i,c);return h[or.Symbol.Columns]=c,h[or.Symbol.ExtraConfigColumns]=d,n&&(h[Dd.Symbol.ExtraConfigBuilder]=n),Object.assign(h,{enableRLS:()=>(h[Dd.Symbol.EnableRLS]=!0,h)})}const Rt=(e,t,n)=>bJ(e,t,n,void 0);var $k;$k=oe;class wO{constructor(t,n){this.unique=t,this.name=n}on(...t){return new Gp(t.map(n=>{if(un(n,Qt))return n;n=n;const r=new Zp(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...t){return new Gp(t.map(n=>{if(un(n,Qt))return n;n=n;const r=new Zp(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,r}),this.unique,!0,this.name)}using(t,...n){return new Gp(n.map(r=>{if(un(r,Qt))return r;r=r;const s=new Zp(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),s}),this.unique,!0,this.name,t)}}I(wO,$k,"PgIndexBuilderOn");var Vk;Vk=oe;class Gp{constructor(t,n,r,s,i="btree"){I(this,"config");this.config={name:s,columns:t,unique:n,only:r,method:i}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new _O(this.config,t)}}I(Gp,Vk,"PgIndexBuilder");var Hk;Hk=oe;class _O{constructor(t,n){I(this,"config");this.config={...t,table:n}}}I(_O,Hk,"PgIndex");function hn(e){return new wO(!1,e)}const $t={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Jt(e,t){return t.includes(e.columnType)}function wJ(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const _J=N_([_t(),_h(),S_(),uR()]),SJ=N_([_J,dR(Hm()),ay(Hm())]),NJ=__(e=>e instanceof Buffer);function SO(e,t){const n=(t==null?void 0:t.zodInstance)??vZ,r=(t==null?void 0:t.coerce)??{};let s;return wJ(e)&&(s=e.enumValues.length?n.enum(e.enumValues):n.string()),s||(Jt(e,["PgGeometry","PgPointTuple"])?s=n.tuple([n.number(),n.number()]):Jt(e,["PgGeometryObject","PgPointObject"])?s=n.object({x:n.number(),y:n.number()}):Jt(e,["PgHalfVector","PgVector"])?(s=n.array(n.number()),s=e.dimensions?s.length(e.dimensions):s):Jt(e,["PgLine"])?s=n.tuple([n.number(),n.number(),n.number()]):Jt(e,["PgLineABC"])?s=n.object({a:n.number(),b:n.number(),c:n.number()}):Jt(e,["PgArray"])?(s=n.array(SO(e.baseColumn,n)),s=e.size?s.length(e.size):s):e.dataType==="array"?s=n.array(n.any()):e.dataType==="number"?s=CJ(e,n,r):e.dataType==="bigint"?s=jJ(e,n,r):e.dataType==="boolean"?s=r===!0||r.boolean?n.coerce.boolean():n.boolean():e.dataType==="date"?s=r===!0||r.date?n.coerce.date():n.date():e.dataType==="string"?s=PJ(e,n,r):e.dataType==="json"?s=SJ:e.dataType==="custom"?s=n.any():e.dataType==="buffer"&&(s=NJ)),s||(s=n.any()),s}function CJ(e,t,n){let r=e.getSQLType().includes("unsigned"),s,i,l=!1;Jt(e,["MySqlTinyInt","SingleStoreTinyInt"])?(s=r?0:$t.INT8_MIN,i=r?$t.INT8_UNSIGNED_MAX:$t.INT8_MAX,l=!0):Jt(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(s=r?0:$t.INT16_MIN,i=r?$t.INT16_UNSIGNED_MAX:$t.INT16_MAX,l=!0):Jt(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(s=r?0:$t.INT24_MIN,i=r?$t.INT24_UNSIGNED_MAX:$t.INT24_MAX,l=Jt(e,["MySqlMediumInt","SingleStoreMediumInt"])):Jt(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(s=r?0:$t.INT32_MIN,i=r?$t.INT32_UNSIGNED_MAX:$t.INT32_MAX,l=!0):Jt(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(s=r?0:$t.INT48_MIN,i=r?$t.INT48_UNSIGNED_MAX:$t.INT48_MAX):Jt(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||Jt(e,["MySqlSerial","SingleStoreSerial"]),s=r?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,l=!0):Jt(e,["MySqlYear","SingleStoreYear"])?(s=1901,i=2155,l=!0):(s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let c=n===!0||n!=null&&n.number?t.coerce.number():t.number();return c=c.min(s).max(i),l?c.int():c}function jJ(e,t,n){const r=e.getSQLType().includes("unsigned"),s=r?0n:$t.INT64_MIN,i=r?$t.INT64_UNSIGNED_MAX:$t.INT64_MAX;return(n===!0||n!=null&&n.bigint?t.coerce.bigint():t.bigint()).min(s).max(i)}function PJ(e,t,n){if(Jt(e,["PgUUID"]))return t.string().uuid();let r,s,i=!1;Jt(e,["PgVarchar","SQLiteText"])?r=e.length:Jt(e,["MySqlVarChar","SingleStoreVarChar"])?r=e.length??$t.INT16_UNSIGNED_MAX:Jt(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?r=$t.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?r=$t.INT24_UNSIGNED_MAX:e.textType==="text"?r=$t.INT16_UNSIGNED_MAX:r=$t.INT8_UNSIGNED_MAX),Jt(e,["PgChar","MySqlChar","SingleStoreChar"])&&(r=e.length,i=!0),Jt(e,["PgBinaryVector"])&&(s=/^[01]+$/,r=e.dimensions);let l=n===!0||n!=null&&n.string?t.coerce.string():t.string();return l=s?l.regex(s):l,r&&i?l.length(r):r?l.max(r):l}function NO(e){return WF(e)?WX(e):qX(e)}function CO(e,t,n,r){const s={};for(const[i,l]of Object.entries(e)){if(!un(l,vu)&&!un(l,Qt)&&!un(l,Qt.Aliased)&&typeof l=="object"){const p=WF(l)||HX(l)?NO(l):l;s[i]=CO(p,t[i]??{},n,r);continue}const c=t[i];if(c!==void 0&&typeof c!="function"){s[i]=c;continue}const d=un(l,vu)?l:void 0,h=d?SO(d,r):Hm(),f=typeof c=="function"?c(h):h;n.never(d)||(s[i]=f,d&&(n.nullable(d)&&(s[i]=s[i].nullable()),n.optional(d)&&(s[i]=s[i].optional())))}return gf(s)}const TJ={never:e=>{var t,n;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((n=e==null?void 0:e.generatedIdentity)==null?void 0:n.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},kn=(e,t)=>{const n=NO(e);return CO(n,{},TJ)},kJ=Rt("unified_incidents",{id:re("id").primaryKey(),source:re("source",{enum:["tmr","emergency","user"]}).notNull(),sourceId:re("source_id").notNull(),title:Le("title").notNull(),description:Le("description"),location:Le("location"),category:re("category").notNull(),subcategory:re("subcategory"),severity:re("severity",{enum:["low","medium","high","critical"]}).default("medium"),status:re("status",{enum:["active","resolved","monitoring","closed"]}).default("active"),geometry:po("geometry").notNull(),centroidLat:gb("centroid_lat").notNull(),centroidLng:gb("centroid_lng").notNull(),regionIds:Le("region_ids").array().default([]),geocell:re("geocell"),incidentTime:Ge("incident_time"),lastUpdated:Ge("last_updated").notNull().defaultNow(),publishedAt:Ge("published_at").notNull().defaultNow(),expiresAt:Ge("expires_at"),properties:po("properties").notNull().default("{}"),userId:re("user_id"),photoUrl:Le("photo_url"),verificationStatus:re("verification_status",{enum:["unverified","community_verified","official_verified"]}),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow(),version:Rn("version").default(1)},e=>[DX("unique_source_sourceid").on(e.source,e.sourceId),hn("idx_unified_source").on(e.source),hn("idx_unified_category").on(e.category),hn("idx_unified_severity").on(e.severity),hn("idx_unified_status").on(e.status),hn("idx_unified_centroid").on(e.centroidLat,e.centroidLng),hn("idx_unified_geocell").on(e.geocell),hn("idx_unified_region").using("gin",e.regionIds),hn("idx_unified_time").on(e.incidentTime),hn("idx_unified_updated").on(e.lastUpdated)]);kn(kJ).omit({id:!0,createdAt:!0,updatedAt:!0,version:!0}).extend({source:xc(["tmr","emergency","user"]),sourceId:_t().min(1,"Source ID is required"),severity:xc(["low","medium","high","critical"]).default("medium"),status:xc(["active","resolved","monitoring","closed"]).default("active"),category:_t().min(1,"Category is required"),title:_t().min(1,"Title is required"),centroidLat:_h().min(-90).max(90),centroidLng:_h().min(-180).max(180),regionIds:ay(_t()).default([])});Rt("sessions",{sid:re("sid").primaryKey(),sess:po("sess").notNull(),expire:Ge("expire").notNull()},e=>[hn("IDX_session_expire").on(e.expire)]);const G_=Rt("users",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),password:re("password"),email:re("email").unique(),firstName:re("first_name"),lastName:re("last_name"),displayName:re("display_name"),profileImageUrl:re("profile_image_url"),bio:Le("bio"),homeSuburb:re("home_suburb"),primarySuburb:re("primary_suburb"),verifiedResident:Sr("verified_resident").default(!1),phoneNumber:re("phone_number"),reputationScore:Rn("reputation_score").default(0),locationSharingLevel:re("location_sharing_level").default("suburb"),profileVisibility:re("profile_visibility").default("community"),allowDirectMessages:Sr("allow_direct_messages").default(!0),termsAccepted:Sr("terms_accepted").default(!1),termsAcceptedAt:Ge("terms_accepted_at"),accountType:re("account_type",{enum:["regular","business"]}).default("regular"),businessName:re("business_name"),businessDescription:re("business_description",{length:500}),businessWebsite:re("business_website"),businessPhone:re("business_phone"),businessAddress:re("business_address"),businessCategory:re("business_category"),role:re("role").default("user"),isOfficialAgency:Sr("is_official_agency").default(!1),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()}),EJ=Rt("traffic_events",{id:re("id").primaryKey(),eventType:Le("event_type").notNull(),eventSubtype:Le("event_subtype"),title:Le("title").notNull(),description:Le("description"),location:Le("location"),impact:Le("impact"),priority:Le("priority"),status:Le("status").notNull(),advice:Le("advice"),information:Le("information"),geometry:po("geometry"),properties:po("properties"),lastUpdated:Ge("last_updated").notNull(),nextInspection:Ge("next_inspection"),webLink:Le("web_link"),areaAlert:Sr("area_alert").default(!1),alertMessage:Le("alert_message")}),AJ=Rt("incidents",{id:re("id").primaryKey(),incidentType:Le("incident_type").notNull(),categoryId:re("category_id"),subcategoryId:re("subcategory_id"),title:Le("title").notNull(),description:Le("description"),location:Le("location"),status:Le("status").notNull(),priority:Le("priority"),agency:Le("agency"),photoUrl:Le("photo_url"),geometry:po("geometry"),properties:po("properties"),lastUpdated:Ge("last_updated").notNull(),publishedDate:Ge("published_date")}),IJ=Rt("comments",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),incidentId:re("incident_id").notNull(),userId:re("user_id").notNull(),parentCommentId:re("parent_comment_id"),content:Le("content").notNull(),helpfulScore:Rn("helpful_score").default(0),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()}),MJ=Rt("neighborhood_groups",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),name:re("name").notNull(),suburb:re("suburb").notNull(),description:Le("description"),memberCount:Rn("member_count").default(0),isPrivate:Sr("is_private").default(!1),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()}),RJ=Rt("user_neighborhood_groups",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),userId:re("user_id").notNull(),groupId:re("group_id").notNull(),role:re("role").default("member"),joinedAt:Ge("joined_at").defaultNow()}),LJ=Rt("emergency_contacts",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),userId:re("user_id").notNull(),contactUserId:re("contact_user_id"),contactName:re("contact_name").notNull(),contactPhone:re("contact_phone"),relationship:re("relationship"),createdAt:Ge("created_at").defaultNow()}),FJ=Rt("incident_follow_ups",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),incidentId:re("incident_id").notNull(),userId:re("user_id").notNull(),status:re("status").notNull(),description:Le("description").notNull(),photoUrl:Le("photo_url"),createdAt:Ge("created_at").defaultNow()}),OJ=Rt("categories",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),name:re("name").notNull(),description:Le("description"),icon:re("icon"),color:re("color"),order:Rn("order").default(0),isActive:Sr("is_active").default(!0),requiresApproval:Sr("requires_approval").default(!1),createdAt:Ge("created_at").defaultNow()}),DJ=Rt("subcategories",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),categoryId:re("category_id").notNull(),name:re("name").notNull(),description:Le("description"),icon:re("icon"),reportCount:Rn("report_count").default(0),isActive:Sr("is_active").default(!0),order:Rn("order").default(0),createdAt:Ge("created_at").defaultNow()}),UJ=Rt("comment_votes",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),commentId:re("comment_id").notNull(),userId:re("user_id").notNull(),voteType:re("vote_type").notNull(),createdAt:Ge("created_at").defaultNow()}),BJ=Rt("safety_check_ins",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),userId:re("user_id").notNull(),incidentId:re("incident_id"),status:re("status").notNull(),location:re("location"),message:Le("message"),isVisible:Sr("is_visible").default(!0),createdAt:Ge("created_at").defaultNow()}),zJ=Rt("conversations",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),user1Id:re("user1_id").notNull(),user2Id:re("user2_id").notNull(),lastMessageAt:Ge("last_message_at").defaultNow(),createdAt:Ge("created_at").defaultNow()}),$J=Rt("messages",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),conversationId:re("conversation_id").notNull(),senderId:re("sender_id").notNull(),content:Le("content").notNull(),isRead:Sr("is_read").default(!1),createdAt:Ge("created_at").defaultNow()}),VJ=Rt("notifications",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),userId:re("user_id").notNull(),type:re("type").notNull(),title:re("title").notNull(),message:Le("message").notNull(),entityId:re("entity_id"),entityType:re("entity_type"),fromUserId:re("from_user_id"),isRead:Sr("is_read").default(!1),createdAt:Ge("created_at").defaultNow()}),HJ=Rt("reports",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),reporterId:re("reporter_id").notNull(),entityType:re("entity_type").notNull(),entityId:re("entity_id").notNull(),reason:re("reason").notNull(),description:Le("description"),status:re("status").notNull().default("pending"),moderatorId:re("moderator_id"),moderatorNotes:Le("moderator_notes"),resolvedAt:Ge("resolved_at"),createdAt:Ge("created_at").defaultNow()}),WJ=Rt("incident_comments",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),incidentId:re("incident_id").notNull(),userId:re("user_id").notNull(),parentCommentId:re("parent_comment_id"),content:Le("content").notNull(),photoUrl:Le("photo_url"),photoUrls:Le("photo_urls").array().default([]),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()},e=>[hn("idx_incident_comments_incident_time").on(e.incidentId,e.createdAt.desc()),hn("idx_incident_comments_user").on(e.userId,e.incidentId),hn("idx_incident_comments_parent").on(e.parentCommentId)]),qJ=kn(G_).omit({createdAt:!0,updatedAt:!0});kn(EJ).omit({id:!0,lastUpdated:!0});kn(AJ).omit({id:!0,lastUpdated:!0});kn(IJ).omit({id:!0,createdAt:!0,updatedAt:!0});kn(WJ).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({content:_t().min(1,"Comment cannot be empty").max(1e3,"Comment too long"),photoUrls:ay(_t().url()).max(3,"Maximum 3 photos per comment").optional()});kn(MJ).omit({id:!0,createdAt:!0,updatedAt:!0});kn(RJ).omit({id:!0,joinedAt:!0});kn(LJ).omit({id:!0,createdAt:!0});kn(UJ).omit({id:!0,createdAt:!0});kn(BJ).omit({id:!0,createdAt:!0});kn(zJ).omit({id:!0,createdAt:!0,lastMessageAt:!0});kn($J).omit({id:!0,createdAt:!0});kn(VJ).omit({id:!0,createdAt:!0});kn(OJ).omit({id:!0,createdAt:!0});kn(DJ).omit({id:!0,createdAt:!0});kn(FJ).omit({id:!0,createdAt:!0});kn(HJ).omit({id:!0,createdAt:!0,resolvedAt:!0});const jO=Rt("ad_campaigns",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),businessName:re("business_name").notNull(),title:re("title").notNull(),content:Le("content").notNull(),imageUrl:Le("image_url"),websiteUrl:Le("website_url"),address:Le("address"),suburb:re("suburb",{length:100}).notNull(),cta:re("cta",{length:100}).default("Learn More"),targetSuburbs:Le("target_suburbs").array(),dailyBudget:Le("daily_budget"),totalBudget:Le("total_budget"),cpmRate:Le("cpm_rate").default("2.00"),status:re("status",{length:50}).default("active"),rejectionReason:Le("rejection_reason"),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()});Rt("ad_views",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),adCampaignId:re("ad_campaign_id").references(()=>jO.id),userId:re("user_id").references(()=>G_.id),durationMs:Rn("duration_ms").notNull(),userSuburb:re("user_suburb",{length:100}),ipAddress:re("ip_address"),userAgent:Le("user_agent"),viewedAt:Ge("viewed_at").notNull(),date:re("date").notNull()},e=>({campaignDateIdx:hn("idx_ad_campaign_date").on(e.adCampaignId,e.date),userDateIdx:hn("idx_ad_user_date").on(e.userId,e.date)}));Rt("ad_clicks",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),adCampaignId:re("ad_campaign_id").references(()=>jO.id),userId:re("user_id").references(()=>G_.id),ipAddress:re("ip_address"),clickedAt:Ge("clicked_at").notNull()});Rt("billing_plans",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),name:re("name").notNull(),description:Le("description"),pricePerDay:Le("price_per_day").notNull(),minimumDays:Rn("minimum_days").default(7),features:po("features"),isActive:Sr("is_active").default(!0),createdAt:Ge("created_at").defaultNow()});Rt("billing_cycles",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),campaignId:re("campaign_id").notNull(),planId:re("plan_id").notNull(),businessId:re("business_id").notNull(),status:re("status").notNull().default("active"),startDate:Ge("start_date").notNull(),endDate:Ge("end_date"),dailyRate:Le("daily_rate").notNull(),totalDays:Rn("total_days"),totalAmount:Le("total_amount"),stripeCustomerId:re("stripe_customer_id"),stripeSubscriptionId:re("stripe_subscription_id"),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()},e=>({businessDateIdx:hn("idx_billing_business_date").on(e.businessId,e.startDate),campaignIdx:hn("idx_billing_campaign").on(e.campaignId)}));Rt("payments",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),billingCycleId:re("billing_cycle_id").notNull(),businessId:re("business_id").notNull(),amount:Le("amount").notNull(),currency:re("currency",{length:3}).default("AUD"),status:re("status").notNull(),paymentMethod:re("payment_method").notNull(),stripePaymentIntentId:re("stripe_payment_intent_id"),stripeInvoiceId:re("stripe_invoice_id"),failureReason:Le("failure_reason"),paidAt:Ge("paid_at"),daysCharged:Rn("days_charged"),periodStart:Ge("period_start"),periodEnd:Ge("period_end"),createdAt:Ge("created_at").defaultNow()},e=>({businessDateIdx:hn("idx_payments_business_date").on(e.businessId,e.paidAt),statusIdx:hn("idx_payments_status").on(e.status)}));Rt("campaign_analytics",{id:re("id").primaryKey().default(Mt`gen_random_uuid()`),campaignId:re("campaign_id").notNull(),date:re("date").notNull(),totalViews:Rn("total_views").default(0),uniqueViews:Rn("unique_views").default(0),totalClicks:Rn("total_clicks").default(0),uniqueClicks:Rn("unique_clicks").default(0),ctr:Le("ctr").default("0"),impressionDuration:Rn("impression_duration").default(0),costPerView:Le("cost_per_view").default("0"),costPerClick:Le("cost_per_click").default("0"),totalSpent:Le("total_spent").default("0"),createdAt:Ge("created_at").defaultNow(),updatedAt:Ge("updated_at").defaultNow()},e=>({campaignDateIdx:hn("idx_campaign_analytics_date").on(e.campaignId,e.date)}));var K_="Radio",[ZJ,PO]=Yn(K_),[GJ,KJ]=ZJ(K_),TO=v.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:l,value:c="on",onCheck:d,form:h,...f}=e,[p,g]=v.useState(null),b=et(t,w=>g(w)),j=v.useRef(!1),_=p?h||!!p.closest("form"):!0;return o.jsxs(GJ,{scope:n,checked:s,disabled:l,children:[o.jsx(Ae.button,{type:"button",role:"radio","aria-checked":s,"data-state":IO(s),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:me(e.onClick,w=>{s||d==null||d(),_&&(j.current=w.isPropagationStopped(),j.current||w.stopPropagation())})}),_&&o.jsx(AO,{control:p,bubbles:!j.current,name:r,value:c,checked:s,required:i,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});TO.displayName=K_;var kO="RadioIndicator",EO=v.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,i=KJ(kO,n);return o.jsx(Un,{present:r||i.checked,children:o.jsx(Ae.span,{"data-state":IO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});EO.displayName=kO;var QJ="RadioBubbleInput",AO=v.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const l=v.useRef(null),c=et(l,i),d=Gg(n),h=Wg(t);return v.useEffect(()=>{const f=l.current;if(!f)return;const p=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==n&&b){const j=new Event("click",{bubbles:r});b.call(f,n),f.dispatchEvent(j)}},[d,n,r]),o.jsx(Ae.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});AO.displayName=QJ;function IO(e){return e?"checked":"unchecked"}var YJ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fy="RadioGroup",[XJ,gte]=Yn(fy,[Au,PO]),MO=Au(),RO=PO(),[JJ,eee]=XJ(fy),LO=v.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:l=!1,disabled:c=!1,orientation:d,dir:h,loop:f=!0,onValueChange:p,...g}=e,b=MO(n),j=Eu(h),[_,w]=Ni({prop:i,defaultProp:s??null,onChange:p,caller:fy});return o.jsx(JJ,{scope:n,name:r,required:l,disabled:c,value:_,onValueChange:w,children:o.jsx(i_,{asChild:!0,...b,orientation:d,dir:j,loop:f,children:o.jsx(Ae.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":c?"":void 0,dir:j,...g,ref:t})})})});LO.displayName=fy;var FO="RadioGroupItem",OO=v.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,i=eee(FO,n),l=i.disabled||r,c=MO(n),d=RO(n),h=v.useRef(null),f=et(t,h),p=i.value===s.value,g=v.useRef(!1);return v.useEffect(()=>{const b=_=>{YJ.includes(_.key)&&(g.current=!0)},j=()=>g.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",j)}},[]),o.jsx(o_,{asChild:!0,...c,focusable:!l,active:p,children:o.jsx(TO,{disabled:l,required:i.required,checked:p,...d,...s,name:i.name,ref:f,onCheck:()=>i.onValueChange(s.value),onKeyDown:me(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:me(s.onFocus,()=>{var b;g.current&&((b=h.current)==null||b.click())})})})});OO.displayName=FO;var tee="RadioGroupIndicator",DO=v.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=RO(n);return o.jsx(EO,{...s,...r,ref:t})});DO.displayName=tee;var UO=LO,BO=OO,nee=DO;const Q_=v.forwardRef(({className:e,...t},n)=>o.jsx(UO,{className:Ce("grid gap-2",e),...t,ref:n}));Q_.displayName=UO.displayName;const Ph=v.forwardRef(({className:e,...t},n)=>o.jsx(BO,{ref:n,className:Ce("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(nee,{className:"flex items-center justify-center",children:o.jsx(s5,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ph.displayName=BO.displayName;const ree=gf({email:_t().email("Valid email is required"),password:_t().min(1,"Password is required")}),see=qJ.pick({password:!0,email:!0,firstName:!0,lastName:!0,homeSuburb:!0,accountType:!0,businessName:!0,businessCategory:!0,businessDescription:!0,businessWebsite:!0,businessPhone:!0,businessAddress:!0}).extend({password:_t().min(6,"Password must be at least 6 characters"),confirmPassword:_t().min(1,"Please confirm your password"),homeSuburb:_t().min(1,"Home suburb is required"),accountType:xc(["regular","business"]).default("regular"),businessName:_t().optional(),businessCategory:_t().optional(),businessDescription:_t().optional(),businessWebsite:_t().optional(),businessPhone:_t().optional(),businessAddress:_t().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.accountType==="business"?e.businessName&&e.businessName.trim().length>0:!0,{message:"Business name is required for business accounts",path:["businessName"]}).refine(e=>e.accountType==="business"?e.businessCategory&&e.businessCategory.length>0:!0,{message:"Business category is required for business accounts",path:["businessCategory"]});function D2(){const{user:e,isLoading:t,loginMutation:n,registerMutation:r}=Bn(),[s,i]=v.useState("login");if(!t&&e)return o.jsx(_B,{to:"/"});const l=Fm({resolver:Om(ree),defaultValues:{email:"",password:""}}),c=Fm({resolver:Om(see),defaultValues:{password:"",confirmPassword:"",email:"",firstName:"",lastName:"",homeSuburb:"",accountType:"regular",businessName:"",businessCategory:"",businessDescription:"",businessWebsite:"",businessPhone:"",businessAddress:""}}),d=["Restaurant & Food","Retail & Shopping","Health & Fitness","Beauty & Wellness","Professional Services","Home & Garden","Education & Training","Entertainment & Events","Automotive","Technology","Other"],h=p=>{n.mutate(p)},f=p=>{const{confirmPassword:g,...b}=p;r.mutate(b)};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center",children:[o.jsxs("div",{className:"space-y-6 text-center lg:text-left",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:"QLD Community Connect"}),o.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Stay informed and connected with your Queensland community"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8",children:[o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o.jsx(Ci,{className:"h-8 w-8 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Local Updates"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Stay informed about your area"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o.jsx(fc,{className:"h-8 w-8 text-orange-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Road Conditions"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Current traffic updates"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o.jsx(co,{className:"h-8 w-8 text-green-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Community Sharing"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Neighbor updates and tips"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o.jsx(_r,{className:"h-8 w-8 text-purple-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Location Based"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Suburb-level filtering"})]})]})]})]}),o.jsx("div",{className:"w-full max-w-md mx-auto",children:o.jsxs(IF,{value:s,onValueChange:i,className:"w-full",children:[o.jsxs(W_,{className:"grid w-full grid-cols-2",children:[o.jsx(Ao,{value:"login","data-testid":"tab-login",children:"Sign In"}),o.jsx(Ao,{value:"register","data-testid":"tab-register",children:"Sign Up"})]}),o.jsx(Io,{value:"login",children:o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Sign In"}),o.jsx(At,{children:"Sign in to your account to stay connected with your community"})]}),o.jsx(De,{children:o.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"login-email",children:"Email"}),o.jsx(rt,{id:"login-email","data-testid":"input-login-email",type:"email",...l.register("email"),placeholder:"Enter your email"}),l.formState.errors.email&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-login-email",children:l.formState.errors.email.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"login-password",children:"Password"}),o.jsx(rt,{id:"login-password","data-testid":"input-login-password",type:"password",...l.register("password"),placeholder:"Enter your password"}),l.formState.errors.password&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-login-password",children:l.formState.errors.password.message})]}),o.jsx(le,{type:"submit",className:"w-full",disabled:n.isPending,"data-testid":"button-login",children:n.isPending?"Signing in...":"Sign In"})]})})]})}),o.jsx(Io,{value:"register",children:o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Create Account"}),o.jsx(At,{children:"Join the QLD Community Connect to share updates and stay informed"})]}),o.jsx(De,{children:o.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(be,{children:"Account Type"}),o.jsxs(Q_,{value:c.watch("accountType"),onValueChange:p=>c.setValue("accountType",p),children:[o.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[o.jsx(Ph,{value:"regular",id:"personal"}),o.jsx(be,{htmlFor:"personal",className:"flex-1 cursor-pointer",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(sh,{className:"w-5 h-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Personal Account"}),o.jsx("div",{className:"text-sm text-gray-600",children:"For individuals staying informed about local safety"})]})]})})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[o.jsx(Ph,{value:"business",id:"business"}),o.jsx(be,{htmlFor:"business",className:"flex-1 cursor-pointer",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(cu,{className:"w-5 h-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Business Account"}),o.jsx("div",{className:"text-sm text-gray-600",children:"For businesses wanting to advertise to local customers"})]})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-firstName",children:c.watch("accountType")==="business"?"Contact First Name":"First Name"}),o.jsx(rt,{id:"register-firstName","data-testid":"input-register-firstName",...c.register("firstName"),placeholder:c.watch("accountType")==="business"?"Contact first name":"First name"}),c.formState.errors.firstName&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-firstName",children:c.formState.errors.firstName.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-lastName",children:c.watch("accountType")==="business"?"Contact Last Name":"Last Name"}),o.jsx(rt,{id:"register-lastName","data-testid":"input-register-lastName",...c.register("lastName"),placeholder:c.watch("accountType")==="business"?"Contact last name":"Last name"}),c.formState.errors.lastName&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-lastName",children:c.formState.errors.lastName.message})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-email",children:"Email"}),o.jsx(rt,{id:"register-email","data-testid":"input-register-email",type:"email",...c.register("email"),placeholder:"Enter your email"}),c.formState.errors.email&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-email",children:c.formState.errors.email.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-homeSuburb",children:"Home Suburb"}),o.jsx(Pi,{value:c.watch("homeSuburb"),onChange:p=>c.setValue("homeSuburb",p),placeholder:"Start typing your suburb, city, or postcode...","data-testid":"input-register-homeSuburb"}),c.formState.errors.homeSuburb&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-homeSuburb",children:c.formState.errors.homeSuburb.message})]}),c.watch("accountType")==="business"&&o.jsxs("div",{className:"space-y-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[o.jsxs("h3",{className:"font-medium text-green-800 flex items-center gap-2",children:[o.jsx(cu,{className:"w-4 h-4"}),"Business Information"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-businessName",children:"Business Name *"}),o.jsx(rt,{id:"register-businessName","data-testid":"input-register-businessName",...c.register("businessName"),placeholder:"Your Business Name"}),c.formState.errors.businessName&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-businessName",children:c.formState.errors.businessName.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-businessCategory",children:"Business Category *"}),o.jsxs(ls,{value:c.watch("businessCategory"),onValueChange:p=>c.setValue("businessCategory",p),children:[o.jsx(zr,{"data-testid":"select-register-businessCategory",children:o.jsx(cs,{placeholder:"Select category"})}),o.jsx($r,{children:d.map(p=>o.jsx(xn,{value:p,children:p},p))})]}),c.formState.errors.businessCategory&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-businessCategory",children:c.formState.errors.businessCategory.message})]}),o.jsxs("div",{className:"md:col-span-2 space-y-2",children:[o.jsx(be,{htmlFor:"register-businessDescription",children:"Business Description"}),o.jsx(Ii,{id:"register-businessDescription","data-testid":"textarea-register-businessDescription",...c.register("businessDescription"),placeholder:"Brief description of your business...",rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-businessWebsite",children:"Website URL"}),o.jsx(rt,{id:"register-businessWebsite","data-testid":"input-register-businessWebsite",...c.register("businessWebsite"),placeholder:"https://yourwebsite.com"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-businessPhone",children:"Phone Number"}),o.jsx(rt,{id:"register-businessPhone","data-testid":"input-register-businessPhone",...c.register("businessPhone"),placeholder:"(07) 1234 5678"})]}),o.jsxs("div",{className:"md:col-span-2 space-y-2",children:[o.jsx(be,{htmlFor:"register-businessAddress",children:"Business Address"}),o.jsx(Pi,{value:c.watch("businessAddress"),onChange:p=>c.setValue("businessAddress",p),placeholder:"Enter your business address...","data-testid":"input-register-businessAddress"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-password",children:"Password"}),o.jsx(rt,{id:"register-password","data-testid":"input-register-password",type:"password",...c.register("password"),placeholder:"Create a password"}),c.formState.errors.password&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-password",children:c.formState.errors.password.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"register-confirmPassword",children:"Confirm Password"}),o.jsx(rt,{id:"register-confirmPassword","data-testid":"input-register-confirmPassword",type:"password",...c.register("confirmPassword"),placeholder:"Confirm your password"}),c.formState.errors.confirmPassword&&o.jsx("p",{className:"text-sm text-red-600","data-testid":"error-register-confirmPassword",children:c.formState.errors.confirmPassword.message})]}),o.jsx(le,{type:"submit",className:"w-full",disabled:r.isPending,"data-testid":"button-register",children:r.isPending?"Creating account...":"Create Account"})]})})]})})]})})]})})}var iee="Separator",U2="horizontal",oee=["horizontal","vertical"],zO=v.forwardRef((e,t)=>{const{decorative:n,orientation:r=U2,...s}=e,i=aee(r)?r:U2,c=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(Ae.div,{"data-orientation":i,...c,...s,ref:t})});zO.displayName=iee;function aee(e){return oee.includes(e)}var $O=zO;const tg=v.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>o.jsx($O,{ref:s,decorative:n,orientation:t,className:Ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));tg.displayName=$O.displayName;const VO=({comment:e,depth:t=0,replyingTo:n,setReplyingTo:r,replyContent:s,setReplyContent:i,handleSubmitReply:l,user:c,isAuthenticated:d,createCommentMutation:h,getTimeAgo:f})=>{var b,j,_,w,S,x,N,P;const g=Math.min(t,3);return o.jsxs("div",{className:`${g>0?"ml-6 md:ml-8":""}`,children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Zn,{className:"w-9 h-9 md:w-8 md:h-8 flex-shrink-0",children:(b=e.user)!=null&&b.profileImageUrl?o.jsx("img",{src:e.user.profileImageUrl,alt:((j=e.user)==null?void 0:j.displayName)||"User",className:"w-full h-full object-cover"}):o.jsx(Gn,{className:"bg-primary text-primary-foreground text-xs md:text-sm",children:(((_=e.user)==null?void 0:_.displayName)||((w=e.user)==null?void 0:w.firstName)||"U").charAt(0).toUpperCase()})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"bg-background rounded-lg px-3 py-2 md:px-4 md:py-3 shadow-sm border border-border/50",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-sm md:text-base",children:(S=e.user)!=null&&S.firstName&&((x=e.user)!=null&&x.lastName)?`${e.user.firstName} ${e.user.lastName}`:((N=e.user)==null?void 0:N.displayName)||((P=e.user)==null?void 0:P.firstName)||"Anonymous"}),o.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:f(e.createdAt)})]}),o.jsx("p",{className:"text-sm md:text-base text-foreground break-words leading-relaxed",children:e.content}),e.photoUrls&&e.photoUrls.length>0&&o.jsx("div",{className:`mt-3 grid gap-2 ${e.photoUrls.length===1?"grid-cols-1":e.photoUrls.length===2?"grid-cols-2":"grid-cols-2 md:grid-cols-3"}`,children:e.photoUrls.map((E,k)=>o.jsx("img",{src:E,alt:`Photo ${k+1}`,className:"w-full h-32 md:h-40 object-cover rounded border border-border cursor-pointer hover:opacity-90 transition-opacity",onClick:M=>{M.stopPropagation(),window.open(E,"_blank")},"data-testid":`img-comment-photo-${e.id}-${k}`},k))}),g<3&&o.jsx("div",{className:"mt-2 pt-2",children:o.jsxs(le,{variant:"ghost",size:"sm",onClick:E=>{E.stopPropagation(),E.preventDefault(),r(n===e.id?null:e.id)},className:"h-7 px-2 text-xs text-muted-foreground hover:text-foreground","data-testid":`button-reply-${e.id}`,children:[o.jsx(_9,{className:"w-3 h-3 mr-1"}),"Reply"]})})]}),n===e.id&&o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx(Zn,{className:"w-7 h-7 flex-shrink-0",children:c!=null&&c.profileImageUrl?o.jsx("img",{src:c.profileImageUrl,alt:(c==null?void 0:c.displayName)||"You",className:"w-full h-full object-cover"}):o.jsx(Gn,{className:"bg-primary text-primary-foreground text-xs",children:((c==null?void 0:c.displayName)||(c==null?void 0:c.firstName)||"Y").charAt(0).toUpperCase()})}),o.jsxs("div",{className:"flex-1 flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Write a reply...",value:s,onChange:E=>i(E.target.value),onKeyPress:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),E.stopPropagation(),l(e.id))},onClick:E=>E.stopPropagation(),onFocus:E=>E.stopPropagation(),disabled:!d||h.isPending,className:"flex-1 px-2 py-1 text-sm rounded border border-border bg-background focus:ring-1 focus:ring-primary focus:border-transparent outline-none disabled:opacity-50","data-testid":`input-reply-${e.id}`}),o.jsx(le,{onClick:E=>{E.stopPropagation(),E.preventDefault(),l(e.id)},disabled:!d||!s.trim()||h.isPending,size:"sm",className:"h-8 w-8 px-0","data-testid":`button-submit-reply-${e.id}`,children:h.isPending?o.jsx("div",{className:"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin"}):o.jsx(Mw,{className:"w-3 h-3"})})]})]})]})]}),e.replies&&e.replies.length>0&&o.jsx("div",{className:"mt-3 space-y-3",children:e.replies.map(E=>o.jsx(VO,{comment:E,depth:g+1,replyingTo:n,setReplyingTo:r,replyContent:s,setReplyContent:i,handleSubmitReply:l,user:c,isAuthenticated:d,createCommentMutation:h,getTimeAgo:f},E.id))})]},e.id)};function HO({incident:e,onClose:t}){const{user:n,isAuthenticated:r}=Bn(),{toast:s}=Pn(),[i,l]=v.useState(""),[c,d]=v.useState(null),[h,f]=v.useState(""),[p,g]=v.useState([]),[b,j]=v.useState([]),[_,w]=v.useState(!1),S=v.useRef(null),x=mF(e),{data:N,isLoading:P}=Dt({queryKey:[`/api/incidents/${x}/social/comments`],queryFn:async()=>{const U=await fetch(`/api/incidents/${x}/social/comments`);if(!U.ok)throw new Error("Failed to fetch comments");return U.json()},enabled:!!x}),E=(N==null?void 0:N.comments)||[],k=U=>{const V=Array.from(U.target.files||[]);if(p.length+V.length>3){s({title:"Too many photos",description:"Maximum 3 photos allowed per comment",variant:"destructive"});return}if(V.filter(O=>O.size>5*1024*1024).length>0){s({title:"File too large",description:"Each photo must be less than 5MB",variant:"destructive"});return}g(O=>[...O,...V])},M=U=>{g(V=>V.filter((K,O)=>O!==U))},z=async()=>{if(p.length===0)return[];w(!0);try{const U=new FormData;p.forEach(O=>{U.append("photos",O)});const V=await fetch("/api/upload/comment-photos",{method:"POST",body:U,credentials:"include"});if(!V.ok){const O=await V.json();throw new Error(O.error||"Photo upload failed")}return(await V.json()).urls||[]}catch(U){throw s({title:"Photo upload failed",description:U.message||"Failed to upload photos",variant:"destructive"}),U}finally{w(!1)}},D=Fn({mutationFn:async({content:U,parentCommentId:V,photoUrls:K})=>On("POST",`/api/incidents/${x}/social/comments`,{content:U,parentCommentId:V||null,photoUrls:K||[]}),onSuccess:()=>{l(""),f(""),d(null),g([]),j([]),ss.invalidateQueries({queryKey:[`/api/incidents/${x}/social/comments`]}),s({title:"Comment posted",description:"Your comment has been added successfully."})},onError:U=>{s({title:"Error",description:U.message||"Failed to post comment",variant:"destructive"})}}),F=async()=>{if(!r){s({title:"Please log in",description:"You need to log in to comment",variant:"destructive"});return}if(i.trim())try{const U=await z();D.mutate({content:i.trim(),photoUrls:U})}catch{return}},J=U=>{if(!r){s({title:"Please log in",description:"You need to log in to reply",variant:"destructive"});return}h.trim()&&D.mutate({content:h.trim(),parentCommentId:U})},H=U=>{const V=new Map,K=[];return U.forEach(O=>{V.set(O.id,{...O,replies:[]})}),U.forEach(O=>{O.parentCommentId&&V.has(O.parentCommentId)?V.get(O.parentCommentId).replies.push(V.get(O.id)):K.push(V.get(O.id))}),K},Y=U=>{if(!U)return"Unknown time";const V=new Date(U),O=Math.floor((new Date().getTime()-V.getTime())/(1e3*60));return O<1?"Just now":O<60?`${O}m ago`:O<1440?`${Math.floor(O/60)}h ago`:`${Math.floor(O/1440)}d ago`},Z=H(E);return o.jsx("div",{className:"border-t border-border/50 bg-muted/20",children:o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"flex justify-end mb-4 md:hidden",children:o.jsx(le,{variant:"ghost",size:"sm",onClick:t,className:"h-10 w-10 p-0 hover:bg-background min-h-[44px]","data-testid":"button-close-comments",children:o.jsx(oa,{className:"w-5 h-5"})})}),o.jsx("div",{className:"space-y-3 md:space-y-4 mb-4",children:P?o.jsxs("div",{className:"text-center py-4 md:py-6",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-muted border-t-primary rounded-full animate-spin mx-auto mb-2"}),o.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Loading comments..."})]}):Z.length===0?o.jsxs("div",{className:"text-center py-6 md:py-8",children:[o.jsx(uu,{className:"w-8 h-8 md:w-10 md:h-10 mx-auto mb-2 text-muted-foreground opacity-50"}),o.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"No comments yet"}),o.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Be the first to comment!"})]}):Z.map(U=>o.jsx(VO,{comment:U,depth:0,replyingTo:c,setReplyingTo:d,replyContent:h,setReplyContent:f,handleSubmitReply:J,user:n,isAuthenticated:r,createCommentMutation:D,getTimeAgo:Y},U.id))}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Zn,{className:"w-9 h-9 md:w-8 md:h-8 flex-shrink-0 mt-1",children:n!=null&&n.profileImageUrl?o.jsx("img",{src:n.profileImageUrl,alt:(n==null?void 0:n.displayName)||"You",className:"w-full h-full object-cover"}):o.jsx(Gn,{className:"bg-primary text-primary-foreground text-xs md:text-sm",children:((n==null?void 0:n.displayName)||(n==null?void 0:n.firstName)||"Y").charAt(0).toUpperCase()})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{onClick:U=>U.stopPropagation(),children:[p.length>0&&o.jsx("div",{className:"mb-2 flex gap-2 flex-wrap",children:p.map((U,V)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:URL.createObjectURL(U),alt:`Upload ${V+1}`,className:"w-20 h-20 object-cover rounded border border-border"}),o.jsx("button",{onClick:()=>M(V),className:"absolute -top-2 -right-2 w-6 h-6 bg-destructive text-destructive-foreground rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`button-remove-photo-${V}`,children:o.jsx(oa,{className:"w-4 h-4"})})]},V))}),o.jsxs("div",{className:"flex gap-2 items-end",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(Ii,{placeholder:r?"Write a comment...":"Please log in to comment",value:i,onChange:U=>l(U.target.value),onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),F())},onClick:U=>U.stopPropagation(),onFocus:U=>U.stopPropagation(),disabled:!r||D.isPending||_,className:"min-h-[100px] resize-none text-sm md:text-base","data-testid":"input-comment"}),o.jsx("input",{ref:S,type:"file",accept:"image/*",multiple:!0,onChange:k,className:"hidden","data-testid":"input-photo-upload"}),o.jsxs(le,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var U;return(U=S.current)==null?void 0:U.click()},disabled:!r||p.length>=3||D.isPending||_,className:"mt-2 h-8 text-xs text-muted-foreground hover:text-foreground","data-testid":"button-add-photo",children:[o.jsx(Ew,{className:"w-4 h-4 mr-1"}),"Add Photo ",p.length>0&&`(${p.length}/3)`]})]}),o.jsx(le,{onClick:F,disabled:!r||!i.trim()||D.isPending||_,size:"sm",className:"h-12 w-12 md:h-10 md:w-10 px-0 min-h-[44px] md:min-h-[40px] mb-[2px]","data-testid":"button-submit-comment",children:D.isPending||_?o.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):o.jsx(Mw,{className:"w-4 h-4"})})]})]})})]})]})})}function lee({incidentId:e}){const{data:t}=Dt({queryKey:[`/api/incidents/${e}/social/comments`],queryFn:async()=>{const r=await fetch(`/api/incidents/${e}/social/comments`);if(!r.ok)throw new Error("Failed to fetch comment count");return await r.json()},enabled:!!e,staleTime:3e4}),n=(t==null?void 0:t.count)||0;return o.jsx("span",{className:"text-muted-foreground ml-1",children:n})}function cee(e={threshold:.5,minViewTime:2e3,maxViewsPerDay:3}){const{user:t}=Bn(),n=v.useRef(null),r=v.useRef(new Map),s=v.useRef(new Set),i=v.useCallback(async(f,p)=>{if(!(s.current.has(f)&&s.current.size>=e.maxViewsPerDay))try{(await fetch("/api/ads/track-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adId:f,duration:p,userSuburb:t==null?void 0:t.homeSuburb,timestamp:new Date().toISOString()})})).ok&&(s.current.add(f),console.log(`Ad view tracked: ${f}, duration: ${p}ms`))}catch(g){console.error("Failed to track ad view:",g)}},[t==null?void 0:t.homeSuburb,e.maxViewsPerDay]),l=v.useCallback(f=>{if(r.current.has(f))return;const p=Date.now(),g=setTimeout(()=>{const b=Date.now()-p;i(f,b),r.current.delete(f)},e.minViewTime);r.current.set(f,{startTime:p,timer:g})},[i,e.minViewTime]),c=v.useCallback(f=>{const p=r.current.get(f);p&&(clearTimeout(p.timer),r.current.delete(f))},[]),d=v.useCallback(f=>{n.current||(n.current=new IntersectionObserver(p=>{p.forEach(g=>{const b=g.target.getAttribute("data-ad-id");b&&(g.isIntersecting&&g.intersectionRatio>=e.threshold?l(b):c(b))})},{threshold:[e.threshold],rootMargin:"0px"})),f&&n.current.observe(f)},[l,c,e.threshold]),h=v.useCallback(f=>{if(n.current&&f){const p=f.getAttribute("data-ad-id");p&&c(p),n.current.unobserve(f)}},[c]);return v.useEffect(()=>()=>{r.current.forEach(({timer:f})=>clearTimeout(f)),r.current.clear(),n.current&&n.current.disconnect()},[]),{observeAd:d,unobserveAd:h}}function uee({ad:e,onAdClick:t}){const n=v.useRef(null),{observeAd:r,unobserveAd:s}=cee();v.useEffect(()=>{const l=n.current;if(l)return r(l),()=>s(l)},[r,s]);const i=()=>{fetch("/api/ads/track-click",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adId:e.id,timestamp:new Date().toISOString()})}).catch(console.error),t(e.id),e.websiteUrl&&window.open(e.websiteUrl,"_blank","noopener,noreferrer")};return o.jsx(Re,{ref:n,"data-ad-id":e.id,className:"mb-4 border-l-4 border-l-blue-500 bg-gradient-to-r from-blue-50 to-white","data-testid":`sponsored-post-${e.id}`,children:o.jsxs(De,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(rn,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300",children:o.jsx("span",{className:"text-xs font-medium",children:"Sponsored"})}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(_r,{className:"w-3 h-3 mr-1"}),e.suburb]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[e.imageUrl&&o.jsx("img",{src:e.imageUrl,alt:"Business Logo",className:"w-8 h-8 rounded object-cover"}),o.jsx("h3",{className:"font-semibold text-gray-900",children:e.businessName})]}),o.jsx("h4",{className:"font-medium text-gray-800",children:e.title}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.content}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx(_r,{className:"w-4 h-4 inline mr-1"}),e.address]}),o.jsxs(le,{onClick:i,size:"sm",className:"bg-blue-600 hover:bg-blue-700","data-testid":`ad-cta-${e.id}`,children:[e.cta,o.jsx(d9,{className:"w-4 h-4 ml-1"})]})]})]})]})})}function vb(e){var n,r,s,i,l,c;const t=e.source||((n=e.properties)==null?void 0:n.source);if(t==="tmr")return{name:"Transport and Main Roads",type:"TMR Official",avatar:"TMR",color:"bg-gradient-to-br from-orange-500 to-orange-600",photoUrl:null};if(t==="emergency")return{name:"QFES Queensland",type:"QFES Official",avatar:"QFES",color:"bg-gradient-to-br from-red-500 to-red-600",photoUrl:null};if(e.type==="traffic")return{name:"Transport and Main Roads",type:"TMR Official",avatar:"TMR",color:"bg-gradient-to-br from-orange-500 to-orange-600",photoUrl:null};if(!((r=e.properties)!=null&&r.userReported)&&!t){const d=((i=(s=e.properties)==null?void 0:s.Event_Type)==null?void 0:i.toLowerCase())||"",h=((c=(l=e.properties)==null?void 0:l.description)==null?void 0:c.toLowerCase())||"";if(d||h)return{name:"QFES Queensland",type:"QFES Official",avatar:"QFES",color:"bg-gradient-to-br from-red-500 to-red-600",photoUrl:null}}return null}function dee(e){var n,r;return(e.source||((n=e.properties)==null?void 0:n.source))==="user"||((r=e.properties)==null?void 0:r.userReported)===!0}function nx({className:e,...t}){return o.jsx("div",{className:Ce("animate-pulse rounded-md bg-muted",e),...t})}function hee(e){const{data:t,isLoading:n,isError:r}=Dt({queryKey:["/api/batch-users",e],queryFn:async()=>{if(!e)return null;const s=await fetch(`/api/batch-users?ids=${encodeURIComponent(e)}`,{credentials:"include"});if(!s.ok)throw new Error(`Failed to fetch user: ${s.status}`);return(await s.json()).find(l=>l.id===e)||null},enabled:!!e,staleTime:6e5,retry:0,refetchOnWindowFocus:!1,gcTime:9e5});return{user:t||null,loading:n,error:r||!!(e&&!n&&!t)}}function xb({userId:e,className:t,variant:n="default",showAccountType:r=!1}){const{user:s,loading:i,error:l}=hee(e);if(i)return o.jsxs("div",{className:Ce("flex items-center gap-2",t),"data-testid":`reporter-attribution-loading-${e||"unknown"}`,children:[o.jsx(nx,{className:"h-8 w-8 rounded-full flex-shrink-0"}),n!=="minimal"&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(nx,{className:"h-4 w-20"}),n==="default"&&r&&o.jsx(nx,{className:"h-3 w-16"})]})]});if(!e)return o.jsxs("div",{className:Ce("flex items-center gap-2",t),"data-testid":"reporter-attribution-no-userid",children:[o.jsx(Zn,{className:Ce("flex-shrink-0",n==="compact"||n==="minimal"?"h-6 w-6":"h-8 w-8"),children:o.jsx(Gn,{className:"bg-muted text-muted-foreground",children:o.jsx(sh,{className:"h-3 w-3"})})}),n!=="minimal"&&o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{className:Ce("text-muted-foreground",n==="compact"?"text-xs":"text-sm"),children:"Anonymous"})})]});if(l||!s)return o.jsxs("div",{className:Ce("flex items-center gap-2",t),"data-testid":`reporter-attribution-error-${e}`,children:[o.jsx(Zn,{className:Ce("flex-shrink-0",n==="compact"||n==="minimal"?"h-6 w-6":"h-8 w-8"),children:o.jsx(Gn,{className:"bg-muted text-muted-foreground",children:o.jsx(sh,{className:"h-3 w-3"})})}),n!=="minimal"&&o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{className:Ce("text-muted-foreground",n==="compact"?"text-xs":"text-sm"),children:"User not found"})})]});const c=s.displayName||(s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:null)||s.firstName||s.lastName||"Community User",d=(s.displayName||s.firstName||c).charAt(0).toUpperCase(),h=s.isOfficialAgency||e.startsWith("agency:");return o.jsxs("div",{className:Ce("flex items-center gap-2",t),"data-testid":`reporter-attribution-${e}`,children:[o.jsxs(Zn,{className:Ce("flex-shrink-0",n==="compact"||n==="minimal"?"h-6 w-6":"h-8 w-8"),children:[s.avatarUrl?o.jsx(ca,{src:s.avatarUrl,alt:c,"data-testid":`reporter-avatar-${e}`}):null,o.jsx(Gn,{className:Ce(h?"bg-blue-600 text-white border-2 border-blue-700":"bg-primary text-primary-foreground"),"data-testid":`reporter-avatar-fallback-${e}`,children:d})]}),n!=="minimal"&&o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsx("span",{className:Ce("font-medium truncate",n==="compact"?"text-xs":"text-sm"),"data-testid":`reporter-name-${e}`,children:c}),n==="default"&&r&&o.jsxs(o.Fragment,{children:[h&&o.jsxs(rn,{variant:"default",className:"text-xs w-fit bg-blue-600 hover:bg-blue-700 text-white","data-testid":`reporter-official-badge-${e}`,children:[o.jsx(Ci,{className:"h-3 w-3 mr-1"}),"Official"]}),!h&&s.accountType==="business"&&o.jsxs(rn,{variant:"secondary",className:"text-xs w-fit","data-testid":`reporter-account-type-${e}`,children:[o.jsx(s9,{className:"h-3 w-3 mr-1"}),"Business"]})]})]})]})}const fee=({className:e="w-5 h-5"})=>o.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:e,children:[o.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"}),o.jsx("path",{d:"M6.2 8.8l-1.3-2.5 2.5 1.3 1.3-2.5 1.3 2.5 2.5-1.3-1.3 2.5 2.5 1.3-2.5 1.3 1.3 2.5-2.5-1.3-1.3 2.5-1.3-2.5-2.5 1.3 1.3-2.5z"})]});function B2(){var Ie,ye,ue,fe,Oe,Ye,He,Xe,tt,Lt,Yt,En,Pr,fr,Zs,Zr,$,Q,se,Se,ve,pe,Me,ft;const{user:e}=Bn(),{toast:t}=Pn();Qg();const[,n]=qr(),[r,s]=v.useState(""),[i,l]=v.useState(!0),[c,d]=v.useState(!1),[h,f]=v.useState(new Set),[p,g]=v.useState({showTrafficEvents:!0,showIncidents:!0,showQFES:!0,showUserReports:!0,showUserSafetyCrime:!0,showUserWildlife:!0,showUserCommunity:!0,showUserTraffic:!0,showUserLostFound:!0,showUserPets:!0,showActiveIncidents:!0,showResolvedIncidents:!1,showHighPriority:!0,showMediumPriority:!0,showLowPriority:!0,autoRefresh:!0,distanceFilter:"all",locationFilter:!0,showExpiredIncidents:!1,agingSensitivity:"normal"}),{data:b=[]}=Dt({queryKey:["/api/categories"],select:W=>W||[]}),{data:j=[]}=Dt({queryKey:["/api/subcategories"],select:W=>W||[]});v.useEffect(()=>{if(b.length>0){const W={};b.forEach(xe=>{W[xe.id]=!0}),g(xe=>({...xe,...W}))}},[b]),v.useEffect(()=>{if(j.length>0){const W={};j.forEach(xe=>{W[xe.id]=!0}),g(xe=>({...xe,...W}))}},[j]),v.useEffect(()=>{const W=localStorage.getItem("homeLocation"),xe=localStorage.getItem("homeCoordinates"),ge=localStorage.getItem("homeBoundingBox"),Ee=localStorage.getItem("locationFilter");if(W&&xe)try{const Ue=JSON.parse(xe),ct=ge?JSON.parse(ge):void 0;g($e=>({...$e,homeLocation:W,homeCoordinates:Ue,homeBoundingBox:ct,locationFilter:Ee?Ee==="true":!0}))}catch(Ue){console.error("Failed to load saved location:",Ue)}},[]),v.useEffect(()=>{const W=ge=>{const{location:Ee,coordinates:Ue,boundingBox:ct}=ge.detail;g($e=>({...$e,homeLocation:Ee,homeCoordinates:Ue,homeBoundingBox:ct,locationFilter:!0}))},xe=ge=>{if(ge.key==="homeLocation"){const Ee=localStorage.getItem("homeLocation"),Ue=localStorage.getItem("homeCoordinates"),ct=localStorage.getItem("homeBoundingBox");if(Ee&&Ue)try{const $e=JSON.parse(Ue),Tt=ct?JSON.parse(ct):void 0;g(ht=>({...ht,homeLocation:Ee,homeCoordinates:$e,homeBoundingBox:Tt}))}catch($e){console.error("Failed to load updated location:",$e)}}};return window.addEventListener("locationChanged",W),window.addEventListener("storage",xe),()=>{window.removeEventListener("locationChanged",W),window.removeEventListener("storage",xe)}},[]);const{events:_,incidents:w,regionalEvents:S,regionalIncidents:x}=Qw(p),N=p.locationFilter?S:_,P=p.locationFilter?x:w;console.log(" FEED: Using",N.length,"events,",P.length,"incidents (location filter:",p.locationFilter+")"),v.useEffect(()=>{p.homeLocation?s(p.homeLocation):e!=null&&e.homeSuburb?s(e.homeSuburb):e!=null&&e.primarySuburb&&s(e.primarySuburb)},[p.homeLocation,e==null?void 0:e.homeSuburb,e==null?void 0:e.primarySuburb]);const E=Fn({mutationFn:async()=>{const W=await fetch("/api/incidents/refresh",{method:"POST"});if(!W.ok)throw new Error("Failed to refresh incidents");return W.json()},onSuccess:()=>{ss.invalidateQueries({queryKey:["/api/unified"]}),t({title:"Data refreshed",description:"Incidents have been updated from emergency services"})},onError:W=>{t({title:"Refresh failed",description:W.message||"Failed to refresh incident data",variant:"destructive"})}}),k=N.filter(()=>p.showTrafficEvents===!0),M=P.filter(W=>{var ge,Ee,Ue,ct,$e,Tt,ht,kt,An,Gs,ps,vt,pn,Tr,pr,Ks,_a;const xe=W.source||((ge=W.properties)==null?void 0:ge.source);if(xe==="user"){const zn=(Ee=W.properties)==null?void 0:Ee.categoryId;return zn==="792759f4-1b98-4665-b14c-44a54e9969e9"?p.showUserSafetyCrime===!0:zn==="d03f47a9-10fb-4656-ae73-92e959d7566a"?p.showUserWildlife===!0:zn==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"?p.showUserTraffic===!0:zn==="deaca906-3561-4f80-b79f-ed99561c3b04"?p.showUserCommunity===!0:zn==="d1dfcd4e-48e9-4e58-9476-4782a2a132f3"?p.showUserLostFound===!0:zn==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"?p.showUserPets===!0:p.showUserCommunity===!0}else{if(xe==="tmr")return p.showTrafficEvents===!0;if(xe==="emergency"){const zn=((ct=(Ue=W.properties)==null?void 0:Ue.Event_Type)==null?void 0:ct.toLowerCase())||"",mr=((Tt=($e=W.properties)==null?void 0:$e.description)==null?void 0:Tt.toLowerCase())||"";return zn.includes("fire")||zn.includes("burn")||zn.includes("hazmat")||mr.includes("fire")?p.showQFES===!0:p.showIncidents===!0}else if((ht=W.properties)==null?void 0:ht.userReported){const mr=(kt=W.properties)==null?void 0:kt.categoryId;return mr==="792759f4-1b98-4665-b14c-44a54e9969e9"?p.showUserSafetyCrime===!0:mr==="d03f47a9-10fb-4656-ae73-92e959d7566a"?p.showUserWildlife===!0:mr==="9b1d58d9-cfd1-4c31-93e9-754276a5f265"?p.showUserTraffic===!0:mr==="deaca906-3561-4f80-b79f-ed99561c3b04"?p.showUserCommunity===!0:mr==="d1dfcd4e-48e9-4e58-9476-4782a2a132f3"?p.showUserLostFound===!0:mr==="4ea3a6f0-c49e-4baf-9ca5-f074ca2811b0"?p.showUserPets===!0:p.showUserCommunity===!0}else return((ps=(Gs=(An=W.properties)==null?void 0:An.incidentType)==null?void 0:Gs.toLowerCase())==null?void 0:ps.includes("fire"))||((Tr=(pn=(vt=W.properties)==null?void 0:vt.GroupedType)==null?void 0:pn.toLowerCase())==null?void 0:Tr.includes("fire"))||((_a=(Ks=(pr=W.properties)==null?void 0:pr.description)==null?void 0:Ks.toLowerCase())==null?void 0:_a.includes("fire"))?p.showQFES===!0:p.showIncidents===!0}}),{data:z=[]}=Dt({queryKey:["/api/ads"],enabled:!!(e!=null&&e.homeSuburb)}),D=[...M.map(W=>({...W,type:"incident"})),...k.map(W=>({...W,type:"traffic"}))],F=new Map;for(const W of D){let xe;if(W.type==="traffic")xe=((Ie=W.properties)==null?void 0:Ie.id)||((ye=W.properties)==null?void 0:ye.event_id)||`traffic-${(ue=W.properties)==null?void 0:ue.description}-${(Oe=(fe=W.properties)==null?void 0:fe.road_summary)==null?void 0:Oe.road_name}`;else if((Ye=W.properties)!=null&&Ye.userReported)xe=W.id||`user-${(He=W.properties)==null?void 0:He.title}-${(Xe=W.properties)==null?void 0:Xe.createdAt}`;else{const ge=((tt=W.properties)==null?void 0:tt.IncidentNumber)||((Lt=W.properties)==null?void 0:Lt.incidentNumber),Ee=((Yt=W.properties)==null?void 0:Yt.ObjectId)||((En=W.properties)==null?void 0:En.objectId),Ue=((Pr=W.properties)==null?void 0:Pr.Description)||((fr=W.properties)==null?void 0:fr.description),ct=((Zs=W.properties)==null?void 0:Zs.Event_Type)||((Zr=W.properties)==null?void 0:Zr.event_type),$e=(($=W.properties)==null?void 0:$.Location)||((Q=W.properties)==null?void 0:Q.location);xe=ge||Ee||`esq-${ct}-${Ue}-${$e}`||W.id||`incident-${Date.now()}-${Math.random()}`}if(F.has(xe)){const ge=F.get(xe),Ee=new Date(((se=ge.properties)==null?void 0:se.incidentTime)||((Se=ge.properties)==null?void 0:Se.lastUpdated)||((ve=ge.properties)==null?void 0:ve.publishedAt)||0);new Date(((pe=W.properties)==null?void 0:pe.incidentTime)||((Me=W.properties)==null?void 0:Me.lastUpdated)||((ft=W.properties)==null?void 0:ft.publishedAt)||0)>Ee&&F.set(xe,W)}else F.set(xe,W)}const H=Array.from(F.values()).sort((W,xe)=>{var Ue,ct,$e,Tt,ht,kt;const ge=new Date(((Ue=W.properties)==null?void 0:Ue.incidentTime)||((ct=W.properties)==null?void 0:ct.lastUpdated)||(($e=W.properties)==null?void 0:$e.publishedAt)||0);return new Date(((Tt=xe.properties)==null?void 0:Tt.incidentTime)||((ht=xe.properties)==null?void 0:ht.lastUpdated)||((kt=xe.properties)==null?void 0:kt.publishedAt)||0).getTime()-ge.getTime()}),Y=v.useMemo(()=>{const W=[...H],xe=[...z],ge=6;let Ee=0;for(let Ue=ge;Ue<W.length&&Ee<xe.length;Ue+=ge)W.splice(Ue,0,{type:"ad",ad:xe[Ee],id:`ad-${xe[Ee].id}-${Ue}`}),Ee++,Ue++;return W},[H,z]),Z=!1,U=v.useCallback(W=>{console.log(`Ad clicked: ${W}`)},[]),V=W=>{var ct,$e,Tt;if(W.type==="ad")return"Unknown time";const xe=((ct=W.properties)==null?void 0:ct.incidentTime)||(($e=W.properties)==null?void 0:$e.lastUpdated)||((Tt=W.properties)==null?void 0:Tt.publishedAt);if(!xe)return"Unknown time";const ge=new Date(xe),Ue=Math.floor((new Date().getTime()-ge.getTime())/(1e3*60));return Ue<1?"Just now":Ue<60?`${Ue}m ago`:Ue<1440?`${Math.floor(Ue/60)}h ago`:`${Math.floor(Ue/1440)}d ago`},K=W=>{const{iconName:xe,color:ge}=vF(W),Ee=`w-5 h-5 ${ge}`;switch(xe){case"Car":return o.jsx(Id,{className:Ee});case"Timer":return o.jsx(P9,{className:Ee});case"Shield":return o.jsx(Ci,{className:Ee});case"Construction":return o.jsx(o5,{className:Ee});case"Zap":return o.jsx(Fw,{className:Ee});case"Trees":return o.jsx(Rw,{className:Ee});case"Users":return o.jsx(co,{className:Ee});case"Heart":return o.jsx(cf,{className:Ee});case"Search":return o.jsx(Iw,{className:Ee});case"Flame":return o.jsx(kw,{className:Ee});case"Crash":return o.jsx(fee,{className:Ee});case"Ambulance":return o.jsx(t9,{className:Ee});case"CloudLightning":return o.jsx(c9,{className:Ee});case"Siren":return o.jsx(N9,{className:Ee});case"AlertTriangle":default:return o.jsx(fc,{className:Ee})}},O=W=>{var xe,ge,Ee,Ue,ct;if(W.type==="ad")return"";if((xe=W.properties)!=null&&xe.title){const $e=W.properties.title,ht=X(W).split(",")[0];return $e.toLowerCase().includes("accident")?` Accident on ${ht}`:$e.toLowerCase().includes("congestion")?` Heavy Traffic - ${ht}`:$e.toLowerCase().includes("roadwork")?` Roadwork on ${ht}`:$e.toLowerCase().includes("hazard")?` Hazard on ${ht}`:$e.toLowerCase().includes("closure")?` ${ht} Closed`:$e.toLowerCase().includes("fire")?` Fire Emergency - ${ht}`:$e.toLowerCase().includes("medical")?` Medical Emergency - ${ht}`:$e.toLowerCase().includes("police")?` Police Incident - ${ht}`:((ge=W.properties)==null?void 0:ge.category)==="traffic"?` ${$e} - ${ht}`:` ${$e} - ${ht}`}return W.type==="traffic"?((Ee=W.properties)!=null&&Ee.description,` Traffic Alert - ${X(W).split(",")[0]}`):(Ue=W.properties)!=null&&Ue.userReported?((ct=W.properties)==null?void 0:ct.title)||" Community Report":" Emergency Update"},G=W=>{var ge,Ee,Ue,ct,$e,Tt;if(W.type==="ad")return"";const xe=((ge=W.properties)==null?void 0:ge.description)||"";if(((Ee=W.properties)==null?void 0:Ee.category)==="traffic"){const ht=((ct=(Ue=W.properties)==null?void 0:Ue.originalProperties)==null?void 0:ct.advice)||"";if(xe.toLowerCase().includes("proceed with caution"))return"Exercise caution when driving through this area ";if(xe.toLowerCase().includes("delays"))return"Expect delays - plan extra travel time ";if(xe.toLowerCase().includes("closed"))return"Road closure affecting traffic flow ";if(xe.toLowerCase().includes("congestion"))return"Heavy traffic in the area - consider alternate routes ";const kt=ht&&ht.length>xe.length?ht:xe,An=kt.substring(0,80);return An.length<kt.length?An+"...":An||"Traffic disruption reported"}if(($e=W.properties)!=null&&$e.userReported)return((Tt=W.properties)==null?void 0:Tt.description)||"";if(xe){const ht=xe.replace(/Status:.*$/i,"").trim(),kt=ht.substring(0,100);return kt.length<ht.length?kt+"...":kt||"Emergency response in progress"}return"Emergency response in progress"},X=W=>{var Ue,ct,$e,Tt,ht,kt,An,Gs,ps,vt;if(W.type==="ad")return"Location not specified";if((Ue=W.properties)!=null&&Ue.location)return W.properties.location;if(W.type==="traffic"){const pn=(ct=W.properties)==null?void 0:ct.road_summary,Tr=(pn==null?void 0:pn.road_name)||"",pr=(pn==null?void 0:pn.locality)||"";return Tr&&pr?`${Tr}, ${pr}`:Tr||pr||"Location not specified"}if(($e=W.properties)!=null&&$e.userReported)return((Tt=W.properties)==null?void 0:Tt.locationDescription)||((ht=W.properties)==null?void 0:ht.location)||((kt=W.properties)==null?void 0:kt.suburb)||"Location not specified";if((An=W.properties)!=null&&An.locationDescription)return W.properties.locationDescription;const xe=((Gs=W.properties)==null?void 0:Gs.Location)||"",ge=((ps=W.properties)==null?void 0:ps.Locality)||"",Ee=((vt=W.properties)==null?void 0:vt.LocationDescription)||"";return xe&&ge&&xe!==ge?`${xe}, ${ge}`:xe||ge||Ee||"Location not specified"},ce=W=>{yF(W,n)},Te=async W=>{var ct;const xe=W.id||((ct=W.properties)==null?void 0:ct.id),ge=`${window.location.origin}?incident=${encodeURIComponent(xe)}`,Ee=O(W),Ue=`${Ee} - ${X(W)}`;if(navigator.share)try{await navigator.share({title:Ee,text:Ue,url:ge}),t({title:"Shared successfully",description:"Incident details have been shared"})}catch($e){$e.name!=="AbortError"&&console.error("Error sharing:",$e)}else try{await navigator.clipboard.writeText(ge),t({title:"Link copied to clipboard",description:"You can now paste the incident link anywhere"})}catch($e){console.error("Error copying to clipboard:",$e),t({title:"Unable to copy link",description:"Please share this page manually",variant:"destructive"})}},Ve=W=>{var ge;const xe=W.id||((ge=W.properties)==null?void 0:ge.id);xe&&f(Ee=>{const Ue=new Set(Ee);return Ue.has(xe)?Ue.delete(xe):Ue.add(xe),Ue})};return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx(yi,{onMenuToggle:()=>{}}),o.jsxs("div",{className:"max-w-2xl mx-auto px-4 pt-20 pb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("div",{children:o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Safety Feed"})}),o.jsxs(le,{variant:"outline",size:"sm",onClick:()=>E.mutate(),disabled:E.isPending,className:"gap-2","data-testid":"button-refresh-incidents",children:[o.jsx(w9,{className:`w-4 h-4 ${E.isPending?"animate-spin":""}`}),E.isPending?"Refreshing...":"Refresh"]})]}),Z,o.jsx("div",{className:"space-y-4",children:H.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"bg-green-50 dark:bg-green-950 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Ci,{className:"w-12 h-12 text-green-600"})}),o.jsx("h3",{className:"text-xl font-bold text-foreground mb-3",children:"All Clear!"}),o.jsx("p",{className:"text-muted-foreground text-lg",children:"No recent incidents reported across Queensland"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Check back later for updates"})]}):o.jsx(o.Fragment,{children:Y.map((W,xe)=>{var $e,Tt,ht,kt,An,Gs,ps;if(W.type==="ad")return o.jsx(uee,{ad:{id:W.ad.id,businessName:W.ad.businessName,title:W.ad.title,content:W.ad.content,imageUrl:W.ad.imageUrl,websiteUrl:W.ad.websiteUrl,address:W.ad.address,suburb:W.ad.suburb,cta:W.ad.cta},onAdClick:U},W.id);const ge=W,Ee=(vt,pn)=>{var Tr,pr,Ks,_a,zn,mr;return vt.type==="traffic"?`traffic-${((Tr=vt.properties)==null?void 0:Tr.id)||((pr=vt.properties)==null?void 0:pr.event_id)||pn}`:(Ks=vt.properties)!=null&&Ks.userReported?`user-${((_a=vt.properties)==null?void 0:_a.id)||pn}`:`incident-${((zn=vt.properties)==null?void 0:zn.Master_Incident_Number)||((mr=vt.properties)==null?void 0:mr.id)||pn}`},Ue=vb(ge),ct=dee(ge);return($e=ge.properties)==null||$e.userReported,o.jsx(Re,{className:"bg-card hover:bg-card/80 border border-border hover:shadow-lg transition-all duration-300 cursor-pointer group overflow-hidden",onClick:()=>ce(ge),"data-testid":`card-incident-${xe}`,children:o.jsxs(De,{className:"p-0",children:[o.jsx("div",{className:"p-4 pb-3",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[ct?o.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-all flex items-center gap-3",onClick:qp(ge)?vt=>{vt.stopPropagation(),n(`/users/${qp(ge)}`)}:void 0,children:o.jsx(xb,{userId:qp(ge),variant:"default"})}):Ue?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Zn,{className:"w-12 h-12 ring-2 ring-primary/20",children:o.jsx(Gn,{className:`${Ue.color} text-white font-bold text-sm shadow-lg`,children:Ue.avatar})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{className:"font-bold text-foreground text-base",children:Ue.name}),o.jsx(rn,{variant:"default",className:"text-xs px-2 py-1 font-medium bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700",children:Ue.type.split(" ")[0]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:V(ge)})]})]}):(()=>{var pr,Ks;const vt=O(ge).toLowerCase(),pn=G(ge).toLowerCase(),Tr=((Ks=(pr=ge.properties)==null?void 0:pr.Event_Type)==null?void 0:Ks.toLowerCase())||"";return vt.includes("fire")||vt.includes("qf")||Tr.includes("fire")||pn.includes("fire")||pn.includes("qfes")||vt.includes("rescue")||vt.includes("ambulance")||vt.includes("police")||vt.includes("hazmat")?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Zn,{className:"w-12 h-12 ring-2 ring-primary/20",children:o.jsx(Gn,{className:"bg-gradient-to-br from-red-500 to-red-600 text-white font-bold text-sm shadow-lg",children:"ES"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{className:"font-bold text-foreground text-base",children:"Emergency Services"}),o.jsx(rn,{variant:"default",className:"text-xs px-2 py-1 font-medium bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700",children:"Official"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:V(ge)})]})]}):o.jsx(xb,{userId:null,variant:"default"})})(),o.jsx(le,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:o.jsx(u9,{className:"w-4 h-4"})})]})})}),o.jsx("div",{className:"px-4 pb-2",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-full bg-gradient-to-br from-primary/10 to-primary/5 group-hover:from-primary/20 group-hover:to-primary/10 transition-all duration-300",children:K(ge)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-foreground text-base leading-tight mb-1 break-words hyphens-auto w-full",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",overflowWrap:"break-word"},children:O(ge)}),o.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed mb-2 break-words w-full",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",overflowWrap:"break-word"},children:G(ge)}),(ge.photoUrl||((Tt=ge.properties)==null?void 0:Tt.photoUrl))&&o.jsx("div",{className:"mb-3 -mx-1",children:o.jsx("img",{src:ge.photoUrl||((ht=ge.properties)==null?void 0:ht.photoUrl),alt:"Incident photo",className:"w-full h-48 object-cover rounded-lg border border-gray-200",loading:"lazy",onError:vt=>{vt.target.style.display="none"}})}),o.jsxs("div",{className:"flex items-start gap-2 text-xs md:text-sm text-muted-foreground",children:[o.jsx(_r,{className:"w-3 h-3 md:w-4 md:h-4 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"break-words hyphens-auto leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",overflowWrap:"break-word"},children:X(ge)})]})]})]})}),o.jsx(tg,{className:"opacity-50"}),o.jsx("div",{className:"px-4 py-2 border-t border-border/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[o.jsxs(le,{variant:"ghost",size:"sm",className:`flex items-center gap-1 transition-colors px-3 py-2 h-auto text-xs md:text-sm min-h-[44px] ${h.has(ge.id||((kt=ge.properties)==null?void 0:kt.id))?"text-blue-500 hover:text-blue-600":"hover:text-blue-500"}`,onClick:vt=>{vt.stopPropagation(),Ve(ge)},"data-testid":`button-comments-${ge.id||((An=ge.properties)==null?void 0:An.id)}`,children:[o.jsx(uu,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Comments"}),o.jsx(lee,{incidentId:ge.id||((Gs=ge.properties)==null?void 0:Gs.id)})]}),o.jsxs(le,{variant:"ghost",size:"sm",className:"flex items-center gap-1 hover:text-green-500 transition-colors px-3 py-2 h-auto text-xs md:text-sm min-h-[44px]",onClick:vt=>{vt.stopPropagation(),Te(ge)},children:[o.jsx(l5,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),o.jsxs(le,{variant:"ghost",size:"sm",className:"flex items-center gap-1 hover:text-purple-500 transition-colors px-3 py-2 h-auto text-xs md:text-sm min-h-[44px]",onClick:vt=>{vt.stopPropagation(),ce(ge)},children:[o.jsx(m9,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Details"})]})]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:V(ge)})]})}),h.has(ge.id||((ps=ge.properties)==null?void 0:ps.id))&&o.jsx("div",{className:"px-4 pb-4 border-t border-blue-200/60 bg-blue-50/30",children:o.jsx(HO,{incident:ge,onClose:()=>Ve(ge)})})]})},Ee(ge,xe))})})})]}),o.jsx(V_,{isOpen:c,onClose:()=>d(!1)}),o.jsx("div",{className:"fixed bottom-6 right-4 md:right-6 z-30",children:o.jsx(le,{onClick:()=>d(!0),className:"shadow-xl h-12 w-12 md:h-14 md:w-14 rounded-full bg-primary hover:bg-primary/90 text-primary-foreground transition-all","data-testid":"button-report-incident",children:o.jsx(Aw,{className:"w-5 h-5 md:w-6 md:h-6"})})})]})}function pee(){const{user:e}=Bn(),{toast:t}=Pn(),n=xa(),[r,s]=v.useState(!1),[i,l]=v.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",primarySuburb:(e==null?void 0:e.primarySuburb)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||"",bio:(e==null?void 0:e.bio)||"",businessName:(e==null?void 0:e.businessName)||"",businessCategory:(e==null?void 0:e.businessCategory)||"",businessDescription:(e==null?void 0:e.businessDescription)||"",businessWebsite:(e==null?void 0:e.businessWebsite)||"",businessPhone:(e==null?void 0:e.businessPhone)||"",businessAddress:(e==null?void 0:e.businessAddress)||""}),c=Fn({mutationFn:async b=>{const j=await fetch("/api/user/profile",{method:"PUT",body:JSON.stringify(b),headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(!j.ok)throw new Error("Failed to update profile");return j.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/auth/user"]}),s(!1),t({title:"Profile updated",description:"Your profile has been updated successfully."})},onError:()=>{t({title:"Update failed",description:"Failed to update profile. Please try again.",variant:"destructive"})}}),d=Fn({mutationFn:async b=>{const j=await fetch("/api/user/profile-photo",{method:"PUT",body:JSON.stringify({photoURL:b}),headers:{"Content-Type":"application/json"}});if(!j.ok)throw new Error("Failed to update profile photo");return j.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/auth/user"]}),t({title:"Photo updated",description:"Your profile photo has been updated successfully."})},onError:()=>{t({title:"Upload failed",description:"Failed to update profile photo. Please try again.",variant:"destructive"})}}),h=async()=>{const b=await fetch("/api/objects/upload",{method:"POST",headers:{"Content-Type":"application/json"}});if(!b.ok)throw new Error("Failed to get upload URL");return{method:"PUT",url:(await b.json()).uploadURL}},f=b=>{if(b.successful&&b.successful[0]){const j=b.successful[0].uploadURL;d.mutate(j)}},p=()=>{c.mutate(i)},g=()=>{l({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",primarySuburb:(e==null?void 0:e.primarySuburb)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||"",bio:(e==null?void 0:e.bio)||"",businessName:(e==null?void 0:e.businessName)||"",businessCategory:(e==null?void 0:e.businessCategory)||"",businessDescription:(e==null?void 0:e.businessDescription)||"",businessWebsite:(e==null?void 0:e.businessWebsite)||"",businessPhone:(e==null?void 0:e.businessPhone)||"",businessAddress:(e==null?void 0:e.businessAddress)||""}),s(!1)};return e?o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx(wt,{href:"/",children:o.jsxs(le,{variant:"ghost",size:"sm","data-testid":"button-back-home",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Map"]})}),o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"User Profile"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsxs("div",{className:"relative flex-shrink-0",children:[o.jsxs(Zn,{className:"w-20 h-20",children:[o.jsx(ca,{src:e.profileImageUrl||void 0,alt:e.firstName||"User"}),o.jsx(Gn,{className:"text-lg",children:e.firstName?e.firstName[0].toUpperCase():e.email?e.email[0].toUpperCase():"U"})]}),o.jsx("div",{className:"absolute -bottom-2 -right-2",children:o.jsx(Ym,{maxNumberOfFiles:1,maxFileSize:5242880,onGetUploadParameters:h,onComplete:f,buttonClassName:"rounded-full w-8 h-8 p-0 bg-primary hover:bg-primary/90",children:o.jsx(m0,{className:"w-4 h-4"})})})]}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx(Qe,{className:"text-xl truncate","data-testid":"text-user-name",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.firstName||e.email}),o.jsxs(At,{className:"block",children:[o.jsx("span",{className:"block truncate","data-testid":"text-user-email",children:e.email}),o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsxs(rn,{variant:"secondary",className:"text-xs",children:[o.jsx(u5,{className:"w-3 h-3 mr-1"}),"Member"]})})]}),e.primarySuburb&&o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[o.jsx(_r,{className:"w-3 h-3 flex-shrink-0"}),o.jsx("span",{className:"truncate","data-testid":"text-user-suburb",children:e.primarySuburb})]})]})]}),!r&&o.jsx(le,{onClick:()=>s(!0),className:"w-full sm:w-auto flex-shrink-0","data-testid":"button-edit-profile",children:"Edit Profile"})]})}),o.jsx(De,{children:r?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"firstName",children:"First Name"}),o.jsx(rt,{id:"firstName",value:i.firstName,onChange:b=>l(j=>({...j,firstName:b.target.value})),"data-testid":"input-first-name"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"lastName",children:"Last Name"}),o.jsx(rt,{id:"lastName",value:i.lastName,onChange:b=>l(j=>({...j,lastName:b.target.value})),"data-testid":"input-last-name"})]})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"primarySuburb",children:"Primary Suburb"}),o.jsx(rt,{id:"primarySuburb",value:i.primarySuburb,onChange:b=>l(j=>({...j,primarySuburb:b.target.value})),placeholder:"e.g., Brisbane, Fortitude Valley","data-testid":"input-suburb"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"phoneNumber",children:"Phone Number"}),o.jsx(rt,{id:"phoneNumber",value:i.phoneNumber,onChange:b=>l(j=>({...j,phoneNumber:b.target.value})),placeholder:"e.g., +61 4XX XXX XXX","data-testid":"input-phone"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"bio",children:"Bio"}),o.jsx(rt,{id:"bio",value:i.bio,onChange:b=>l(j=>({...j,bio:b.target.value})),placeholder:"Tell others about yourself...","data-testid":"input-bio"})]}),e.accountType==="business"&&o.jsxs(o.Fragment,{children:[o.jsx(tg,{className:"my-6"}),o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Business Information"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessName",children:"Business Name"}),o.jsx(rt,{id:"businessName",value:i.businessName,onChange:b=>l(j=>({...j,businessName:b.target.value})),placeholder:"Your business name","data-testid":"input-business-name"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessCategory",children:"Business Category"}),o.jsx(rt,{id:"businessCategory",value:i.businessCategory,onChange:b=>l(j=>({...j,businessCategory:b.target.value})),placeholder:"e.g., Restaurant & Food","data-testid":"input-business-category"})]})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessDescription",children:"Business Description"}),o.jsx(rt,{id:"businessDescription",value:i.businessDescription,onChange:b=>l(j=>({...j,businessDescription:b.target.value})),placeholder:"Describe your business...","data-testid":"input-business-description"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessWebsite",children:"Business Website"}),o.jsx(rt,{id:"businessWebsite",value:i.businessWebsite,onChange:b=>l(j=>({...j,businessWebsite:b.target.value})),placeholder:"https://yourbusiness.com","data-testid":"input-business-website"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessPhone",children:"Business Phone"}),o.jsx(rt,{id:"businessPhone",value:i.businessPhone,onChange:b=>l(j=>({...j,businessPhone:b.target.value})),placeholder:"(07) 1234 5678","data-testid":"input-business-phone"})]})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessAddress",children:"Business Address"}),o.jsx(rt,{id:"businessAddress",value:i.businessAddress,onChange:b=>l(j=>({...j,businessAddress:b.target.value})),placeholder:"123 Business Street, City QLD 4000","data-testid":"input-business-address"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(le,{onClick:p,disabled:c.isPending,"data-testid":"button-save-profile",children:c.isPending?"Saving...":"Save Changes"}),o.jsx(le,{variant:"outline",onClick:g,"data-testid":"button-cancel-edit",children:"Cancel"})]})]}):o.jsxs("div",{className:"space-y-4",children:[e.bio&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"About"}),o.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-user-bio",children:e.bio})]}),e.phoneNumber&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"Contact"}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(a5,{className:"w-3 h-3"}),o.jsx("span",{"data-testid":"text-user-phone",children:e.phoneNumber})]})]}),e.accountType==="business"&&o.jsxs(o.Fragment,{children:[o.jsx(tg,{className:"my-4"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-3",children:"Business Information"}),o.jsxs("div",{className:"space-y-3",children:[e.businessName&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Business Name"}),o.jsx("p",{className:"font-medium","data-testid":"text-business-name",children:e.businessName})]}),e.businessCategory&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Category"}),o.jsx("p",{className:"font-medium","data-testid":"text-business-category",children:e.businessCategory})]}),e.businessDescription&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-business-description",children:e.businessDescription})]}),e.businessWebsite&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Website"}),o.jsx("p",{className:"font-medium","data-testid":"text-business-website",children:o.jsx("a",{href:e.businessWebsite,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e.businessWebsite})})]}),e.businessPhone&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Business Phone"}),o.jsx("p",{className:"font-medium","data-testid":"text-business-phone",children:e.businessPhone})]}),e.businessAddress&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Address"}),o.jsx("p",{className:"font-medium","data-testid":"text-business-address",children:e.businessAddress})]})]})]})]})]})})]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{className:"text-lg",children:"Community Stats"})}),o.jsxs(De,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Reputation Score"}),o.jsxs(rn,{variant:"secondary","data-testid":"text-reputation-score",children:[o.jsx(Ci,{className:"w-3 h-3 mr-1"}),e.reputationScore||0]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Reports Submitted"}),o.jsx("span",{className:"font-medium","data-testid":"text-reports-count",children:"0"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Comments Posted"}),o.jsx("span",{className:"font-medium","data-testid":"text-comments-count",children:"0"})]})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{className:"text-lg",children:"Account Info"})}),o.jsxs(De,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Member Since"}),o.jsx("span",{className:"text-sm font-medium","data-testid":"text-member-since",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Account Status"}),o.jsx(rn,{variant:"default","data-testid":"badge-account-status",children:"Active"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Privacy Level"}),o.jsx("span",{className:"text-sm font-medium","data-testid":"text-privacy-level",children:"Public"})]})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{className:"text-lg",children:"Quick Actions"})}),o.jsxs(De,{className:"space-y-2",children:[o.jsx(wt,{href:"/feed",children:o.jsxs(le,{variant:"outline",className:"w-full justify-start","data-testid":"button-view-feed",children:[o.jsx(co,{className:"w-4 h-4 mr-2"}),"View Activity Feed"]})}),o.jsx(le,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/api/logout","data-testid":"button-sign-out",children:"Sign Out"})]})]})]})]})]})}):o.jsx("div",{children:"Loading..."})}function mee(){const{userId:e}=sf(),{user:t,isAuthenticated:n}=Bn(),[,r]=qr(),{data:s,isLoading:i}=Dt({queryKey:["/api/users",e],enabled:!!e}),l=(t==null?void 0:t.id)===e;if(!n||!e)return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{children:"Please log in to view user profiles."})})})]});if(i)return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{children:"Loading user profile..."})})})]});if(!s)return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"User Not Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested user profile could not be found."}),o.jsx(wt,{href:"/",children:o.jsx(le,{children:"Back to Home"})})]})})]});const c=s;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"mb-6",children:o.jsx(wt,{href:"/",children:o.jsxs(le,{variant:"ghost",className:"mb-4","data-testid":"button-back-to-map",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Map"]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx(Re,{children:o.jsx(Ze,{children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[o.jsx("div",{className:"relative",children:o.jsxs(Zn,{className:"w-24 h-24","data-testid":"img-user-avatar",children:[o.jsx(ca,{src:c.profileImageUrl||void 0,alt:c.firstName||"User"}),o.jsx(Gn,{className:"text-2xl",children:c.firstName?c.firstName[0].toUpperCase():c.email?c.email[0].toUpperCase():"U"})]})}),o.jsx("div",{className:"flex-1 text-center sm:text-left",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(Qe,{className:"text-2xl","data-testid":"text-user-name",children:c.firstName&&c.lastName?`${c.firstName} ${c.lastName}`:c.firstName||c.email}),o.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-2",children:[o.jsxs(rn,{variant:"secondary",className:"text-xs",children:[o.jsx(u5,{className:"w-3 h-3 mr-1"}),"Member"]}),c.verifiedResident&&o.jsxs(rn,{variant:"default",className:"text-xs",children:[o.jsx(y0,{className:"w-3 h-3 mr-1"}),"Verified Resident"]})]}),c.primarySuburb&&o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1 text-sm text-muted-foreground",children:[o.jsx(_r,{className:"w-3 h-3"}),o.jsx("span",{"data-testid":"text-user-suburb",children:c.primarySuburb})]})]})}),!l&&c.allowDirectMessages&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs(le,{className:"w-full",onClick:async()=>{try{const d=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otherUserId:e})});if(d.ok){const h=await d.json();r(`/messages/${h.id}`)}}catch(d){console.error("Failed to start conversation:",d)}},"data-testid":"button-send-message",children:[o.jsx(Fp,{className:"w-4 h-4 mr-2"}),"Send Message"]}),c.email&&c.profileVisibility==="public"&&o.jsxs(le,{variant:"outline",size:"sm","data-testid":"button-email",children:[o.jsx(g9,{className:"w-4 h-4 mr-2"}),"Email"]})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsxs(Qe,{className:"text-lg flex items-center gap-2",children:[o.jsx(sh,{className:"w-5 h-5"}),"About"]})}),o.jsxs(De,{className:"space-y-4",children:[c.bio?o.jsx("div",{children:o.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-user-bio",children:c.bio})}):o.jsx("div",{children:o.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No bio provided"})}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(r5,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs("span",{className:"text-muted-foreground",children:["Member since ",new Date(c.createdAt||"").toLocaleDateString("en-AU",{month:"long",year:"numeric"})]})]})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{className:"text-lg",children:"Community Stats"})}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Reputation Score"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(y0,{className:"w-4 h-4 text-yellow-500"}),o.jsx("span",{className:"font-medium","data-testid":"text-reputation-score",children:c.reputationScore||0})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Reports Submitted"}),o.jsx("span",{className:"font-medium",children:"0"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Comments Posted"}),o.jsx("span",{className:"font-medium",children:"0"})]})]})]})]}),c.phoneNumber&&c.profileVisibility!=="private"&&o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{className:"text-lg",children:"Contact Information"})}),o.jsx(De,{children:o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(a5,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{"data-testid":"text-user-phone",children:c.phoneNumber})]})})]})]})]})]})}function gee(e,t){return v.useReducer((n,r)=>t[n][r]??n,e)}var Y_="ScrollArea",[WO,yte]=Yn(Y_),[yee,fs]=WO(Y_),qO=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...l}=e,[c,d]=v.useState(null),[h,f]=v.useState(null),[p,g]=v.useState(null),[b,j]=v.useState(null),[_,w]=v.useState(null),[S,x]=v.useState(0),[N,P]=v.useState(0),[E,k]=v.useState(!1),[M,z]=v.useState(!1),D=et(t,J=>d(J)),F=Eu(s);return o.jsx(yee,{scope:n,type:r,dir:F,scrollHideDelay:i,scrollArea:c,viewport:h,onViewportChange:f,content:p,onContentChange:g,scrollbarX:b,onScrollbarXChange:j,scrollbarXEnabled:E,onScrollbarXEnabledChange:k,scrollbarY:_,onScrollbarYChange:w,scrollbarYEnabled:M,onScrollbarYEnabledChange:z,onCornerWidthChange:x,onCornerHeightChange:P,children:o.jsx(Ae.div,{dir:F,...l,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});qO.displayName=Y_;var ZO="ScrollAreaViewport",GO=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,l=fs(ZO,n),c=v.useRef(null),d=et(t,c,l.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GO.displayName=ZO;var Mi="ScrollAreaScrollbar",X_=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=fs(Mi,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=s,c=e.orientation==="horizontal";return v.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),s.type==="hover"?o.jsx(vee,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(xee,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(KO,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(J_,{...r,ref:t}):null});X_.displayName=Mi;var vee=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=fs(Mi,e.__scopeScrollArea),[i,l]=v.useState(!1);return v.useEffect(()=>{const c=s.scrollArea;let d=0;if(c){const h=()=>{window.clearTimeout(d),l(!0)},f=()=>{d=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Un,{present:n||i,children:o.jsx(KO,{"data-state":i?"visible":"hidden",...r,ref:t})})}),xee=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=fs(Mi,e.__scopeScrollArea),i=e.orientation==="horizontal",l=my(()=>d("SCROLL_END"),100),[c,d]=gee("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,s.scrollHideDelay,d]),v.useEffect(()=>{const h=s.viewport,f=i?"scrollLeft":"scrollTop";if(h){let p=h[f];const g=()=>{const b=h[f];p!==b&&(d("SCROLL"),l()),p=b};return h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[s.viewport,i,d,l]),o.jsx(Un,{present:n||c!=="hidden",children:o.jsx(J_,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:me(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:me(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),KO=v.forwardRef((e,t)=>{const n=fs(Mi,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,l]=v.useState(!1),c=e.orientation==="horizontal",d=my(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?h:f)}},10);return xu(n.viewport,d),xu(n.content,d),o.jsx(Un,{present:r||i,children:o.jsx(J_,{"data-state":i?"visible":"hidden",...s,ref:t})})}),J_=v.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=fs(Mi,e.__scopeScrollArea),i=v.useRef(null),l=v.useRef(0),[c,d]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=eD(c.viewport,c.content),f={...r,sizes:c,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function p(g,b){return Cee(g,l.current,c,b)}return n==="horizontal"?o.jsx(bee,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollLeft,b=z2(g,c,s.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=p(g,s.dir))}}):n==="vertical"?o.jsx(wee,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollTop,b=z2(g,c);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=p(g))}}):null}),bee=v.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=fs(Mi,e.__scopeScrollArea),[l,c]=v.useState(),d=v.useRef(null),h=et(t,d,i.onScrollbarXChange);return v.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),o.jsx(YO,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":py(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(i.viewport){const g=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(g),nD(g,p)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:rg(l.paddingLeft),paddingEnd:rg(l.paddingRight)}})}})}),wee=v.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=fs(Mi,e.__scopeScrollArea),[l,c]=v.useState(),d=v.useRef(null),h=et(t,d,i.onScrollbarYChange);return v.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),o.jsx(YO,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":py(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(i.viewport){const g=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(g),nD(g,p)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:rg(l.paddingTop),paddingEnd:rg(l.paddingBottom)}})}})}),[_ee,QO]=WO(Mi),YO=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:p,...g}=e,b=fs(Mi,n),[j,_]=v.useState(null),w=et(t,D=>_(D)),S=v.useRef(null),x=v.useRef(""),N=b.viewport,P=r.content-r.viewport,E=Kt(f),k=Kt(d),M=my(p,10);function z(D){if(S.current){const F=D.clientX-S.current.left,J=D.clientY-S.current.top;h({x:F,y:J})}}return v.useEffect(()=>{const D=F=>{const J=F.target;(j==null?void 0:j.contains(J))&&E(F,P)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[N,j,P,E]),v.useEffect(k,[r,k]),xu(j,M),xu(b.content,M),o.jsx(_ee,{scope:n,scrollbar:j,hasThumb:s,onThumbChange:Kt(i),onThumbPointerUp:Kt(l),onThumbPositionChange:k,onThumbPointerDown:Kt(c),children:o.jsx(Ae.div,{...g,ref:w,style:{position:"absolute",...g.style},onPointerDown:me(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),S.current=j.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),z(D))}),onPointerMove:me(e.onPointerMove,z),onPointerUp:me(e.onPointerUp,D=>{const F=D.target;F.hasPointerCapture(D.pointerId)&&F.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=x.current,b.viewport&&(b.viewport.style.scrollBehavior=""),S.current=null})})})}),ng="ScrollAreaThumb",XO=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=QO(ng,e.__scopeScrollArea);return o.jsx(Un,{present:n||s.hasThumb,children:o.jsx(See,{ref:t,...r})})}),See=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=fs(ng,n),l=QO(ng,n),{onThumbPositionChange:c}=l,d=et(t,p=>l.onThumbChange(p)),h=v.useRef(void 0),f=my(()=>{h.current&&(h.current(),h.current=void 0)},100);return v.useEffect(()=>{const p=i.viewport;if(p){const g=()=>{if(f(),!h.current){const b=jee(p,c);h.current=b,c()}};return c(),p.addEventListener("scroll",g),()=>p.removeEventListener("scroll",g)}},[i.viewport,f,c]),o.jsx(Ae.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(e.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),j=p.clientX-b.left,_=p.clientY-b.top;l.onThumbPointerDown({x:j,y:_})}),onPointerUp:me(e.onPointerUp,l.onThumbPointerUp)})});XO.displayName=ng;var e1="ScrollAreaCorner",JO=v.forwardRef((e,t)=>{const n=fs(e1,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(Nee,{...e,ref:t}):null});JO.displayName=e1;var Nee=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=fs(e1,n),[i,l]=v.useState(0),[c,d]=v.useState(0),h=!!(i&&c);return xu(s.scrollbarX,()=>{var p;const f=((p=s.scrollbarX)==null?void 0:p.offsetHeight)||0;s.onCornerHeightChange(f),d(f)}),xu(s.scrollbarY,()=>{var p;const f=((p=s.scrollbarY)==null?void 0:p.offsetWidth)||0;s.onCornerWidthChange(f),l(f)}),h?o.jsx(Ae.div,{...r,ref:t,style:{width:i,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function rg(e){return e?parseInt(e,10):0}function eD(e,t){const n=e/t;return isNaN(n)?0:n}function py(e){const t=eD(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Cee(e,t,n,r="ltr"){const s=py(n),i=s/2,l=t||i,c=s-l,d=n.scrollbar.paddingStart+l,h=n.scrollbar.size-n.scrollbar.paddingEnd-c,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return tD([d,h],p)(e)}function z2(e,t,n="ltr"){const r=py(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,l=t.content-t.viewport,c=i-r,d=n==="ltr"?[0,l]:[l*-1,0],h=R0(e,d);return tD([0,l],[0,c])(h)}function tD(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function nD(e,t){return e>0&&e<t}var jee=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},l=n.left!==i.left,c=n.top!==i.top;(l||c)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function my(e,t){const n=Kt(e),r=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),v.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function xu(e,t){const n=Kt(t);on(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var rD=qO,Pee=GO,Tee=JO;const sg=v.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(rD,{ref:r,className:Ce("relative overflow-hidden",e),...n,children:[o.jsx(Pee,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(sD,{}),o.jsx(Tee,{})]}));sg.displayName=rD.displayName;const sD=v.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(X_,{ref:r,orientation:t,className:Ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(XO,{className:"relative flex-1 rounded-full bg-border"})}));sD.displayName=X_.displayName;function rx(){var w,S,x,N;const{conversationId:e}=sf(),{user:t}=Bn(),[n,r]=v.useState(""),s=xa(),[,i]=qr(),{data:l=[],isLoading:c}=Dt({queryKey:["/api/conversations"]}),{data:d=[],isLoading:h}=Dt({queryKey:["/api/conversations",e,"messages"],enabled:!!e}),{data:f={},isLoading:p}=Dt({queryKey:["/api/users/batch",l.map(P=>`${P.user1Id}-${P.user2Id}`).join(",")],queryFn:async()=>{const P=Array.from(new Set(l.flatMap(k=>[k.user1Id,k.user2Id]).filter(k=>k!==(t==null?void 0:t.id)))),E={};return await Promise.all(P.map(async k=>{try{const M=await fetch(`/api/users/${k}`,{credentials:"include"});if(M.ok){const z=await M.json();E[k]=z}}catch(M){console.error(`Failed to fetch user ${k}:`,M)}})),E},enabled:l.length>0}),g=Fn({mutationFn:async P=>(await On("POST",`/api/conversations/${e}/messages`,{content:P})).json(),onSuccess:()=>{r(""),s.invalidateQueries({queryKey:["/api/conversations",e,"messages"]}),s.invalidateQueries({queryKey:["/api/conversations"]})}}),b=async P=>{if(P.preventDefault(),!!n.trim())try{await g.mutateAsync(n.trim())}catch(E){console.error("Failed to send message:",E)}},j=P=>{const E=P.user1Id===(t==null?void 0:t.id)?P.user2Id:P.user1Id;return f[E]},_=l.find(P=>P.id===e);return c||l.length>0&&p?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{onMenuToggle:()=>{}}),o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx("div",{className:"text-center",children:"Loading conversations..."})})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{onMenuToggle:()=>{}}),o.jsx("div",{className:"container mx-auto px-4 pt-20 pb-4 max-w-7xl",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",style:{height:"calc(100vh - 140px)"},children:[o.jsxs(Re,{className:"lg:col-span-1 flex flex-col",children:[o.jsx(Ze,{className:"flex-shrink-0 pb-4",children:o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(Fp,{className:"w-5 h-5"}),"Messages"]})}),o.jsx(De,{className:"p-0 flex-1 overflow-hidden",children:o.jsx(sg,{style:{height:"calc(100vh - 240px)"},children:l.length===0?o.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[o.jsx(co,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:"No conversations yet"}),o.jsx("p",{className:"text-sm",children:"Start messaging other users!"})]}):o.jsx("div",{className:"space-y-1",children:l.map(P=>{var M,z;const E=j(P),k=P.id===e;return o.jsx(le,{variant:k?"secondary":"ghost",className:"w-full justify-start p-3 h-auto",onClick:()=>{i(`/messages/${P.id}`)},"data-testid":`conversation-${P.id}`,children:o.jsxs("div",{className:"flex items-center cursor-pointer",onClick:D=>{D.stopPropagation(),E!=null&&E.id&&i(`/users/${E.id}`)},"data-testid":`profile-link-${E==null?void 0:E.id}`,children:[o.jsxs(Zn,{className:"w-10 h-10 mr-3",children:[o.jsx(ca,{src:(E==null?void 0:E.profileImageUrl)||void 0,alt:(E==null?void 0:E.firstName)||"User"}),o.jsx(Gn,{children:((M=E==null?void 0:E.firstName)==null?void 0:M[0])||((z=E==null?void 0:E.email)==null?void 0:z[0])||"U"})]}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"font-medium text-sm hover:underline",children:E!=null&&E.firstName&&(E!=null&&E.lastName)?`${E.firstName} ${E.lastName}`:(E==null?void 0:E.email)||"Unknown User"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:P.lastMessageAt?new Date(P.lastMessageAt).toLocaleDateString():"No messages yet"})]})]})},P.id)})})})})]}),o.jsx(Re,{className:"lg:col-span-2 flex flex-col",children:e&&_?o.jsxs(o.Fragment,{children:[o.jsx(Ze,{className:"flex-shrink-0 pb-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(le,{variant:"ghost",size:"sm",onClick:()=>{i("/messages")},className:"lg:hidden",children:o.jsx(lr,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{const P=j(_);P!=null&&P.id&&i(`/users/${P.id}`)},"data-testid":`header-profile-link-${(w=j(_))==null?void 0:w.id}`,children:[o.jsxs(Zn,{className:"w-8 h-8",children:[o.jsx(ca,{src:((S=j(_))==null?void 0:S.profileImageUrl)||void 0,alt:"User"}),o.jsx(Gn,{children:((N=(x=j(_))==null?void 0:x.firstName)==null?void 0:N[0])||"U"})]}),o.jsx("div",{children:o.jsx(Qe,{className:"text-lg hover:underline",children:(()=>{const P=j(_);return P!=null&&P.firstName&&(P!=null&&P.lastName)?`${P.firstName} ${P.lastName}`:(P==null?void 0:P.email)||"Unknown User"})()})})]})]})}),o.jsxs(De,{className:"flex flex-col flex-1 overflow-hidden p-4",style:{height:"calc(100vh - 240px)"},children:[o.jsx(sg,{className:"flex-1 mb-4",children:h?o.jsx("div",{className:"text-center py-4",children:"Loading messages..."}):d.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Fp,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:"No messages yet"}),o.jsx("p",{className:"text-sm",children:"Start the conversation!"})]}):o.jsx("div",{className:"space-y-4 p-2",children:d.slice().reverse().map(P=>{const E=P.senderId===(t==null?void 0:t.id);return o.jsx("div",{className:`flex ${E?"justify-end":"justify-start"}`,"data-testid":`message-${P.id}`,children:o.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${E?"bg-primary text-primary-foreground":"bg-muted"}`,children:[o.jsx("p",{className:"text-sm",children:P.content}),o.jsx("p",{className:"text-xs opacity-70 mt-1",children:P.createdAt?new Date(P.createdAt).toLocaleTimeString():""})]})},P.id)})})}),o.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[o.jsx(rt,{value:n,onChange:P=>r(P.target.value),placeholder:"Type a message...",disabled:g.isPending,"data-testid":"input-new-message"}),o.jsx(le,{type:"submit",disabled:g.isPending||!n.trim(),"data-testid":"button-send",children:o.jsx(Mw,{className:"w-4 h-4"})})]})]})]}):o.jsx(De,{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center text-muted-foreground",children:[o.jsx(Fp,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg",children:"Select a conversation to start messaging"})]})})})]})})]})}function kee(){const[e,t]=v.useState(!1),[n,r]=v.useState(!1),[s,i]=v.useState(!1),[l,c]=v.useState("default"),{toast:d}=Pn();v.useEffect(()=>{const b="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;t(b),b&&(c(Notification.permission),h())},[]);const h=async()=>{try{const j=await(await navigator.serviceWorker.ready).pushManager.getSubscription();r(!!j)}catch(b){console.error("Error checking subscription status:",b)}},f=async()=>{if(!e)return d({title:"Not Supported",description:"Push notifications are not supported on this device.",variant:"destructive"}),!1;if(l==="granted")return!0;const b=await Notification.requestPermission();return c(b),b==="granted"?(d({title:"Notifications Enabled",description:"You'll now receive safety alerts for your area."}),!0):(b==="denied"&&d({title:"Notifications Blocked",description:"Please enable notifications in your browser settings to receive safety alerts.",variant:"destructive"}),!1)};return{isSupported:e,isSubscribed:n,isLoading:s,permission:l,subscribe:async()=>{if((!e||l!=="granted")&&!await f())return!1;i(!0);try{const b=await navigator.serviceWorker.register("/sw.js");await navigator.serviceWorker.ready;const j=await b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Eee("BNXnNJlwtD-_OLQ_8YE3WRe3dXHO_-ZI2sGE7zJyR5eKjsEMAp0diFzOl1ZUgQzfOjm4Cf8PSQ7c1-oIqY2GsHw")});if(!(await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:{endpoint:j.endpoint,keys:{p256dh:$2(j.getKey("p256dh")),auth:$2(j.getKey("auth"))}}})})).ok)throw new Error("Failed to save subscription");return r(!0),d({title:"Notifications Enabled",description:"You'll receive safety alerts for incidents in your area."}),!0}catch(b){return console.error("Error subscribing to push notifications:",b),d({title:"Subscription Failed",description:"Unable to enable push notifications. Please try again.",variant:"destructive"}),!1}finally{i(!1)}},unsubscribe:async()=>{i(!0);try{const j=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return j&&(await j.unsubscribe(),await fetch("/api/push/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:j.endpoint})})),r(!1),d({title:"Notifications Disabled",description:"You will no longer receive push notifications."}),!0}catch(b){return console.error("Error unsubscribing from push notifications:",b),d({title:"Unsubscribe Failed",description:"Unable to disable push notifications. Please try again.",variant:"destructive"}),!1}finally{i(!1)}},requestPermission:f}}function Eee(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}function $2(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);return window.btoa(n)}var gy="Switch",[Aee,vte]=Yn(gy),[Iee,Mee]=Aee(gy),iD=v.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:h,form:f,...p}=e,[g,b]=v.useState(null),j=et(t,N=>b(N)),_=v.useRef(!1),w=g?f||!!g.closest("form"):!0,[S,x]=Ni({prop:s,defaultProp:i??!1,onChange:h,caller:gy});return o.jsxs(Iee,{scope:n,checked:S,disabled:c,children:[o.jsx(Ae.button,{type:"button",role:"switch","aria-checked":S,"aria-required":l,"data-state":cD(S),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:j,onClick:me(e.onClick,N=>{x(P=>!P),w&&(_.current=N.isPropagationStopped(),_.current||N.stopPropagation())})}),w&&o.jsx(lD,{control:g,bubbles:!_.current,name:r,value:d,checked:S,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});iD.displayName=gy;var oD="SwitchThumb",aD=v.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=Mee(oD,n);return o.jsx(Ae.span,{"data-state":cD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});aD.displayName=oD;var Ree="SwitchBubbleInput",lD=v.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const l=v.useRef(null),c=et(l,i),d=Gg(n),h=Wg(t);return v.useEffect(()=>{const f=l.current;if(!f)return;const p=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==n&&b){const j=new Event("click",{bubbles:r});b.call(f,n),f.dispatchEvent(j)}},[d,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lD.displayName=Ree;function cD(e){return e?"checked":"unchecked"}var uD=iD,Lee=aD;const dD=v.forwardRef(({className:e,...t},n)=>o.jsx(uD,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:o.jsx(Lee,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));dD.displayName=uD.displayName;function Fee(){const{isSupported:e,isSubscribed:t,isLoading:n,permission:r,subscribe:s,unsubscribe:i,requestPermission:l}=kee(),[c,d]=v.useState(!1),h=async()=>{t?await i():await s()},f=async()=>{d(!0);try{(await fetch("/api/push/test",{method:"POST",headers:{"Content-Type":"application/json"}})).ok&&r==="granted"&&new Notification("Test Notification",{body:"Push notifications are working! You'll receive alerts about safety incidents in your area.",icon:"/icon-192x192.png",tag:"test-notification"})}catch(p){console.error("Error testing notification:",p)}finally{d(!1)}};return e?o.jsxs(Re,{className:"w-full max-w-md",children:[o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(wm,{className:"w-5 h-5 text-primary"}),"Push Notifications",t&&o.jsxs(rn,{variant:"secondary",className:"ml-auto",children:[o.jsx(C9,{className:"w-3 h-3 mr-1"}),"Active"]})]}),o.jsx(At,{children:"Get instant alerts about safety incidents in your area"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${r==="granted"?"bg-green-500":r==="denied"?"bg-red-500":"bg-yellow-500"}`}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:r==="granted"?"Permissions Granted":r==="denied"?"Permissions Denied":"Permissions Needed"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:r==="granted"?"Ready to receive notifications":r==="denied"?"Enable in browser settings to receive alerts":"Allow notifications to get safety alerts"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(be,{htmlFor:"notifications-toggle",className:"text-sm font-medium",children:"Safety Alerts"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive notifications about incidents near you"})]}),o.jsx(dD,{id:"notifications-toggle",checked:t,onCheckedChange:h,disabled:n||r==="denied"})]}),o.jsxs("div",{className:"space-y-2",children:[r==="default"&&o.jsxs(le,{onClick:l,className:"w-full",variant:"default",children:[o.jsx(wm,{className:"w-4 h-4 mr-2"}),"Enable Notifications"]}),r==="denied"&&o.jsx("div",{className:"text-center p-3 bg-destructive/10 rounded-lg",children:o.jsx("p",{className:"text-sm text-destructive",children:"Notifications are blocked. Please enable them in your browser settings."})}),t&&o.jsx(le,{onClick:f,disabled:c,className:"w-full",variant:"outline",size:"sm",children:c?"Testing...":"Test Notification"})]}),o.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("p",{className:"font-medium",children:"You'll be notified about:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[o.jsx("li",{children:"Emergency incidents in your area"}),o.jsx("li",{children:"Major traffic events and road closures"}),o.jsx("li",{children:"Community safety alerts"}),o.jsx("li",{children:"Crime reports and suspicious activity"})]})]})]})]}):o.jsxs(Re,{className:"w-full max-w-md",children:[o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(r9,{className:"w-5 h-5 text-muted-foreground"}),"Push Notifications"]}),o.jsx(At,{children:"Stay informed about safety incidents in your area"})]}),o.jsx(De,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx(fc,{className:"w-5 h-5 text-amber-500"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Not Supported"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Push notifications aren't available on this device or browser."})]})]})})]})}function Oee(){const{isAuthenticated:e}=Bn();return e?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{onMenuToggle:()=>{}}),o.jsxs("div",{className:"max-w-2xl mx-auto px-4 pt-20 pb-6",children:[o.jsx("div",{className:"mb-6",children:o.jsx(wt,{href:"/",children:o.jsxs(le,{variant:"ghost",size:"sm",className:"gap-2",children:[o.jsx(lr,{className:"w-4 h-4"}),"Back to Feed"]})})}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Notification Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage how you receive safety alerts and incident notifications."})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Fee,{}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{className:"text-lg",children:"About Safety Notifications"}),o.jsx(At,{children:"How we keep you informed about incidents in your area"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:" Emergency Incidents"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time alerts from QLD Emergency Services about active incidents requiring immediate attention."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:" Traffic Events"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Major road closures, crashes, and traffic disruptions that may affect your travel."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:" Community Reports"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Verified reports from your neighbors about safety concerns, suspicious activity, and local incidents."})]})]}),o.jsxs("div",{className:"pt-4 border-t border-border",children:[o.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Your Privacy"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications are sent based on your selected location preferences. We never share your exact location or personal information. You can disable notifications at any time."})]})]})]})]})]})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(yi,{onMenuToggle:()=>{}}),o.jsx("div",{className:"max-w-2xl mx-auto px-4 pt-20 pb-6",children:o.jsxs("div",{className:"text-center py-16",children:[o.jsx(wm,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Sign In Required"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Please sign in to manage your notification preferences."}),o.jsx(le,{asChild:!0,children:o.jsx(wt,{href:"/api/login",children:"Sign In"})})]})})]})}const V2={"gift-supplies":{icon:v0,name:"Gift & Supplies Store",description:"Perfect for gift shops, stationery stores, party supplies, crafts",sampleHeadlines:["Unique Gifts for Every Occasion","Local Handmade Treasures","Party Supplies & More"],sampleContent:["Discover locally-sourced gifts, handmade crafts, and unique finds that you won't find anywhere else.","From birthday parties to weddings - we have all the supplies you need to make your event special.","Supporting local artisans with a curated selection of one-of-a-kind gifts and supplies."],sampleCtas:["Shop Now","Browse Gifts","Visit Store","See Collection"],tips:"Highlight what makes your products unique - local, handmade, hard-to-find items work well!"},"food-cafe":{icon:i5,name:"Caf & Food",description:"Coffee shops, restaurants, bakeries, food trucks",sampleHeadlines:["Fresh Coffee Daily","Made-to-Order Delights","Local Ingredients, Big Flavors"],sampleContent:["Start your day right with our freshly roasted coffee and homemade pastries made with local ingredients.","Authentic flavors, generous portions, and friendly service in the heart of your neighborhood.","From quick coffee to family dinners - we're your local gathering place for great food."],sampleCtas:["Order Now","View Menu","Book Table","Try Today"],tips:"Focus on freshness, local ingredients, and the experience customers will have!"},professional:{icon:d5,name:"Professional Service",description:"Dentists, mechanics, lawyers, consultants, home services",sampleHeadlines:["Expert Service You Can Trust","Professional Results, Local Care","Same-Day Service Available"],sampleContent:["Over 15 years serving the local community with honest pricing and expert craftsmanship.","Professional service with a personal touch - we treat your family like our own.","Licensed, insured, and committed to getting the job done right the first time."],sampleCtas:["Book Now","Get Quote","Call Today","Schedule"],tips:"Emphasize trust, experience, and reliability. Mention credentials and guarantees!"},"health-beauty":{icon:cf,name:"Health & Beauty",description:"Salons, spas, fitness, wellness, beauty supplies",sampleHeadlines:["Look & Feel Your Best","Relaxation & Renewal","Your Wellness Journey Starts Here"],sampleContent:["Treat yourself to a rejuvenating experience with our skilled professionals and premium products.","From everyday maintenance to special occasion glamour - we help you look and feel amazing.","Your health and happiness are our priority. Experience the difference personalized care makes."],sampleCtas:["Book Appointment","Try Today","Learn More","Get Started"],tips:"Focus on the transformation and how customers will feel after your service!"}},Dee=[{label:"$25/day",value:"25.00",desc:"Great for local testing"},{label:"$50/day",value:"50.00",desc:"Recommended starter"},{label:"$75/day",value:"75.00",desc:"High visibility"},{label:"$100/day",value:"100.00",desc:"Maximum reach"}];function Uee(){const{user:e}=Bn(),{toast:t}=Pn(),[n,r]=v.useState("gift-supplies"),[s,i]=v.useState({businessName:"",title:"",content:"",websiteUrl:"",address:"",suburb:"",cta:"",targetSuburbs:[],dailyBudget:"50.00",totalBudget:"1000.00",logoUrl:"",backgroundUrl:""}),l=w=>({"Restaurant & Food":"food-cafe","Food & Beverage":"food-cafe",Cafe:"food-cafe",Restaurant:"food-cafe","Gift & Supplies":"gift-supplies",Retail:"gift-supplies","Gift Shop":"gift-supplies","Health & Beauty":"health-beauty",Beauty:"health-beauty",Fitness:"health-beauty",Wellness:"health-beauty","Professional Service":"professional",Legal:"professional",Automotive:"professional","Home Services":"professional"})[w]||"gift-supplies";v.useEffect(()=>{if(e&&e.accountType==="business"){if(e.businessCategory){const w=l(e.businessCategory);r(w)}i(w=>({...w,businessName:e.businessName||"",websiteUrl:e.businessWebsite||"",address:e.businessAddress||"",suburb:e.homeSuburb||""}))}},[e]);const[c,d]=v.useState(!1),h=V2[n],f=async()=>{try{console.log("Requesting logo upload URL...");const w=await fetch("/api/objects/upload",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log("Response status:",w.status),console.log("Response headers:",Object.fromEntries(w.headers.entries())),!w.ok)throw new Error(`HTTP ${w.status}: ${w.statusText}`);const S=await w.text();console.log("Raw response text:",S);let x;try{x=JSON.parse(S)}catch(N){throw console.error("JSON parse error:",N),new Error("Invalid JSON response from server")}if(console.log("Parsed logo upload response:",x),!x.uploadURL)throw new Error("No upload URL received");return{method:"PUT",url:x.uploadURL}}catch(w){throw console.error("Logo upload error:",w),t({title:"Upload Error",description:"Failed to get upload URL for logo. Please try again.",variant:"destructive"}),w}},p=async()=>{try{console.log("Requesting background upload URL...");const w=await fetch("/api/objects/upload",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log("Response status:",w.status),!w.ok)throw new Error(`HTTP ${w.status}: ${w.statusText}`);const S=await w.text();console.log("Raw response text:",S);let x;try{x=JSON.parse(S)}catch(N){throw console.error("JSON parse error:",N),new Error("Invalid JSON response from server")}if(console.log("Parsed background upload response:",x),!x.uploadURL)throw new Error("No upload URL received");return{method:"PUT",url:x.uploadURL}}catch(w){throw console.error("Background upload error:",w),t({title:"Upload Error",description:"Failed to get upload URL for background. Please try again.",variant:"destructive"}),w}},g=async w=>{if(w.successful&&w.successful[0]){const S=w.successful[0].uploadURL;console.log("Logo upload completed, URL:",S);try{const x=await fetch("/api/objects/process-upload",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uploadURL:S,type:"logo"})});if(x.ok){const N=await x.json();i(P=>({...P,logoUrl:N.viewURL})),t({title:"Logo uploaded successfully!",description:"Your business logo is now ready for your ad."})}else throw new Error("Failed to process upload")}catch(x){console.error("Error processing logo upload:",x),i(N=>({...N,logoUrl:S})),t({title:"Logo uploaded!",description:"Upload completed, processing..."})}}},b=async w=>{if(w.successful&&w.successful[0]){const S=w.successful[0].uploadURL;console.log("Background upload completed, URL:",S);try{const x=await fetch("/api/objects/process-upload",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uploadURL:S,type:"background"})});if(x.ok){const N=await x.json();i(P=>({...P,backgroundUrl:N.viewURL})),t({title:"Background image uploaded successfully!",description:"Your ad background is now ready."})}else throw new Error("Failed to process upload")}catch(x){console.error("Error processing background upload:",x),i(N=>({...N,backgroundUrl:S})),t({title:"Background uploaded!",description:"Upload completed, processing..."})}}},j=Fn({mutationFn:async()=>{if(!s.businessName.trim())throw new Error("Business name is required");if(!s.title.trim())throw new Error("Headline is required");if(!s.content.trim())throw new Error("Description is required");if(!s.suburb.trim())throw new Error("Suburb is required");if(!s.cta.trim())throw new Error("Call-to-action button text is required");const w={...s,status:"pending",template:n};return console.log("Submitting ad data:",w),On("POST","/api/ads/create",w)},onSuccess:()=>{t({title:"Ad Submitted Successfully!",description:"Your ad will be reviewed for approval now."}),setTimeout(()=>{window.location.href="/"},2e3)},onError:w=>{t({title:"Submission Failed",description:w.message||"Please try again.",variant:"destructive"})}}),_=()=>o.jsxs(Re,{className:"mb-4 border-l-4 border-l-blue-500 bg-gradient-to-r from-blue-50 to-white overflow-hidden",children:[s.backgroundUrl&&o.jsx("div",{className:"h-32 bg-cover bg-center relative",style:{backgroundImage:`url(${s.backgroundUrl})`},children:o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})}),o.jsxs(De,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(rn,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300",children:o.jsx("span",{className:"text-xs font-medium",children:"Sponsored"})}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(h.icon,{className:"w-3 h-3 mr-1"}),s.suburb||"Your Suburb"]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[s.logoUrl&&o.jsx("img",{src:s.logoUrl,alt:"Business Logo",className:"w-8 h-8 rounded object-cover"}),o.jsx("h3",{className:"font-semibold text-gray-900",children:s.businessName||"Your Business Name"})]}),o.jsx("h4",{className:"font-medium text-gray-800",children:s.title||"Your Headline Here"}),o.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:s.content||"Your compelling business description will appear here..."}),o.jsxs("div",{className:"flex items-center justify-between pt-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:s.address||"Your Address"}),o.jsx(le,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:s.cta||"Learn More"})]})]})]})]});return c?o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs(le,{variant:"ghost",onClick:()=>d(!1),children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Editor"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Ad Preview"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-3",children:"How your ad will appear in the feed:"}),o.jsx(_,{})]}),o.jsx(Re,{children:o.jsxs(De,{className:"p-6",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Ad Performance Estimate"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Daily Budget"}),o.jsxs("div",{className:"font-semibold",children:["$",s.dailyBudget]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Estimated Daily Views"}),o.jsx("div",{className:"font-semibold",children:Math.round(parseFloat(s.dailyBudget)*2.5)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Target Area"}),o.jsx("div",{className:"font-semibold",children:s.suburb||"Not set"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Expected Clicks"}),o.jsxs("div",{className:"font-semibold",children:[Math.round(parseFloat(s.dailyBudget)*.15),"/day"]})]})]})]})}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(le,{onClick:()=>j.mutate(),disabled:j.isPending||!s.businessName||!s.title||!s.content||!s.suburb||!s.cta,className:"flex-1","data-testid":"button-submit-ad",children:j.isPending?"Submitting...":"Submit Ad for Review"}),o.jsx(le,{variant:"outline",onClick:()=>d(!1),children:"Edit More"})]})]})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx(wt,{href:"/",children:o.jsxs(le,{variant:"ghost",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Feed"]})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Create Your Ad"}),o.jsx("p",{className:"text-gray-600",children:"Reach local customers in your area"})]})]}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(b9,{className:"w-5 h-5"}),"Choose Your Business Type"]})}),o.jsx(De,{className:"space-y-3",children:Object.entries(V2).map(([w,S])=>{const x=S.icon;return o.jsx("button",{onClick:()=>r(w),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${n===w?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,"data-testid":`template-${w}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(x,{className:"w-5 h-5 mt-1 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:S.name}),o.jsx("div",{className:"text-sm text-gray-600",children:S.description})]})]})},w)})})]}),o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{children:"Business Details"})}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessName",children:"Business Name *"}),o.jsx(rt,{id:"businessName",value:s.businessName,onChange:w=>i(S=>({...S,businessName:w.target.value})),placeholder:"Your Business Name","data-testid":"input-business-name"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"suburb",children:"Suburb *"}),o.jsx(Pi,{value:s.suburb,onChange:w=>i(S=>({...S,suburb:w})),placeholder:"e.g., Caloundra, Maroochydore..."})]})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"address",children:"Business Address"}),o.jsx(Pi,{value:s.address,onChange:w=>i(S=>({...S,address:w})),placeholder:"123 Main Street, Suburb..."})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"website",children:"Website URL"}),o.jsx(rt,{id:"website",value:s.websiteUrl,onChange:w=>i(S=>({...S,websiteUrl:w.target.value})),placeholder:"https://yourbusiness.com.au","data-testid":"input-website"})]})]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Ad Content"}),o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:h.tips})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"title",children:"Headline *"}),o.jsx(rt,{id:"title",value:s.title,onChange:w=>i(S=>({...S,title:w.target.value})),placeholder:"Compelling headline that grabs attention",maxLength:60,"data-testid":"input-headline"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"content",children:"Description *"}),o.jsx(Ii,{id:"content",value:s.content,onChange:w=>i(S=>({...S,content:w.target.value})),placeholder:"Describe your business and what makes it special",maxLength:200,rows:4,"data-testid":"input-content"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"cta",children:"Call-to-Action Button *"}),o.jsx(rt,{id:"cta",value:s.cta,onChange:w=>i(S=>({...S,cta:w.target.value})),placeholder:"e.g., Shop Now",maxLength:15,"data-testid":"input-cta"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{children:"Business Logo"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ym,{maxNumberOfFiles:1,maxFileSize:5242880,onGetUploadParameters:f,onComplete:g,buttonClassName:"w-full",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx(Lw,{className:"w-4 h-4"}),s.logoUrl?"Change Logo":"Upload Logo"]})}),s.logoUrl&&o.jsx("div",{className:"text-xs text-green-600",children:" Logo uploaded"})]})]}),o.jsxs("div",{children:[o.jsx(be,{children:"Background Image"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ym,{maxNumberOfFiles:1,maxFileSize:5242880,onGetUploadParameters:p,onComplete:b,buttonClassName:"w-full",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx(Ew,{className:"w-4 h-4"}),s.backgroundUrl?"Change Background":"Upload Background"]})}),s.backgroundUrl&&o.jsx("div",{className:"text-xs text-green-600",children:" Background uploaded"})]})]})]})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{children:"Budget & Targeting"})}),o.jsx(De,{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(be,{htmlFor:"budget",children:"Daily Budget"}),o.jsxs(ls,{value:s.dailyBudget,onValueChange:w=>i(S=>({...S,dailyBudget:w})),children:[o.jsx(zr,{"data-testid":"select-budget",children:o.jsx(cs,{})}),o.jsx($r,{children:Dee.map(w=>o.jsx(xn,{value:w.value,children:o.jsxs("div",{children:[o.jsx("div",{children:w.label}),o.jsx("div",{className:"text-xs text-gray-500",children:w.desc})]})},w.value))})]})]})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(Tw,{className:"w-5 h-5"}),"Live Preview"]})}),o.jsxs(De,{children:[o.jsx(_,{}),o.jsx(le,{onClick:()=>d(!0),className:"w-full mt-4",disabled:!s.businessName||!s.title||!s.content||!s.cta,"data-testid":"button-preview",children:"Full Preview & Submit"})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{children:o.jsx(Qe,{children:"Ad Tips"})}),o.jsxs(De,{className:"space-y-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Headlines:"})," Keep under 60 characters. Focus on your unique value."]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Description:"})," Explain benefits, not just features. What will customers gain?"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Call-to-Action:"}),' Use action words. "Shop Now" works better than "Click Here".']}),o.jsxs("div",{children:[o.jsx("strong",{children:"Local Appeal:"}),' Mention your suburb or "local" to connect with community.']})]})]})]})]})]})}const Bee=["Restaurant & Food","Retail & Shopping","Health & Fitness","Beauty & Wellness","Professional Services","Home & Garden","Education & Training","Entertainment & Events","Automotive","Technology","Other"];function zee(){const{user:e,isAuthenticated:t}=Bn(),[,n]=qr(),{toast:r}=Pn(),s=xa(),[i,l]=v.useState({businessName:"",businessDescription:"",businessWebsite:"",businessPhone:"",businessAddress:"",businessCategory:""}),c=Fn({mutationFn:async()=>{if(!i.businessName.trim())throw new Error("Business name is required");if(!i.businessCategory)throw new Error("Business category is required");return On("POST","/api/users/upgrade-to-business",i)},onSuccess:()=>{r({title:"Business Account Created!",description:"Welcome to QLD Safety Monitor Business. You can now create advertisements."}),s.invalidateQueries({queryKey:["/api/auth/user"]}),n("/business-dashboard")},onError:h=>{r({title:"Upgrade Failed",description:h.message||"There was an error upgrading your account.",variant:"destructive"})}}),d=(h,f)=>{l(p=>({...p,[h]:f}))};return t?(e==null?void 0:e.accountType)==="business"?o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Already a Business Account"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is already set up for business use."}),o.jsx(wt,{href:"/business-dashboard",children:o.jsx(le,{children:"Go to Business Dashboard"})})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx(wt,{href:"/",children:o.jsxs(le,{variant:"ghost","data-testid":"button-back",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Feed"]})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Upgrade to Business Account"}),o.jsx("p",{className:"text-gray-600",children:"Join thousands of local businesses reaching Queensland customers"})]})]}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx(Re,{children:o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(c5,{className:"w-5 h-5 text-blue-600"}),"Reach Local Customers"]}),o.jsx(At,{children:"Get your business noticed by residents in your local area with targeted advertising"})]})}),o.jsx(Re,{children:o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(co,{className:"w-5 h-5 text-green-600"}),"Community Trust"]}),o.jsx(At,{children:"Build trust with verified business profiles and customer reviews in the safety community"})]})}),o.jsx(Re,{children:o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(y0,{className:"w-5 h-5 text-purple-600"}),"Performance Analytics"]}),o.jsx(At,{children:"Track your campaign performance with detailed analytics and customer insights"})]})}),o.jsx(Re,{children:o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(cu,{className:"w-5 h-5 text-orange-600"}),"Professional Features"]}),o.jsx(At,{children:"Access business-only features including ad creation, campaign management, and customer analytics"})]})})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Business Information"}),o.jsx(At,{children:"Tell us about your business to complete your upgrade"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessName",children:"Business Name *"}),o.jsx(rt,{id:"businessName",value:i.businessName,onChange:h=>d("businessName",h.target.value),placeholder:"Your Business Name","data-testid":"input-business-name"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessCategory",children:"Business Category *"}),o.jsxs(ls,{value:i.businessCategory,onValueChange:h=>d("businessCategory",h),children:[o.jsx(zr,{"data-testid":"select-business-category",children:o.jsx(cs,{placeholder:"Select your business category"})}),o.jsx($r,{children:Bee.map(h=>o.jsx(xn,{value:h,children:h},h))})]})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessDescription",children:"Business Description"}),o.jsx(Ii,{id:"businessDescription",value:i.businessDescription,onChange:h=>d("businessDescription",h.target.value),placeholder:"Brief description of your business...",rows:3,"data-testid":"textarea-business-description"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessWebsite",children:"Website URL"}),o.jsx(rt,{id:"businessWebsite",value:i.businessWebsite,onChange:h=>d("businessWebsite",h.target.value),placeholder:"https://yourwebsite.com","data-testid":"input-business-website"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessPhone",children:"Phone Number"}),o.jsx(rt,{id:"businessPhone",value:i.businessPhone,onChange:h=>d("businessPhone",h.target.value),placeholder:"(07) 1234 5678","data-testid":"input-business-phone"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessAddress",children:"Business Address"}),o.jsx(Pi,{value:i.businessAddress,onChange:h=>d("businessAddress",h),placeholder:"Enter your business address...","data-testid":"input-business-address"})]}),o.jsx(le,{onClick:()=>c.mutate(),disabled:c.isPending||!i.businessName||!i.businessCategory,className:"w-full mt-6","data-testid":"button-upgrade-business",children:c.isPending?"Creating Business Account...":"Upgrade to Business Account"}),o.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Upgrading is free and gives you access to business features immediately"})]})]})]})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Authentication Required"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to upgrade to a business account."}),o.jsx(wt,{href:"/auth",children:o.jsx(le,{children:"Log In"})})]})}function $ee(){const{user:e,isAuthenticated:t}=Bn(),[,n]=qr(),{data:r=[],isLoading:s}=Dt({queryKey:["/api/ads/my-campaigns"],enabled:t&&(e==null?void 0:e.accountType)==="business"}),{data:i=[],isLoading:l}=Dt({queryKey:["/api/ads/analytics"],enabled:t&&(e==null?void 0:e.accountType)==="business"}),{data:c=[],isLoading:d}=Dt({queryKey:["/api/billing/plans"],enabled:t&&(e==null?void 0:e.accountType)==="business"}),{data:h=[],isLoading:f}=Dt({queryKey:["/api/billing/history"],enabled:t&&(e==null?void 0:e.accountType)==="business"}),{data:p=[],isLoading:g}=Dt({queryKey:["/api/billing/cycles"],enabled:t&&(e==null?void 0:e.accountType)==="business"}),b=i.map(k=>({campaignId:k.campaignId,views:k.totalViews??0,clicks:k.totalClicks??0,spend:parseFloat(k.totalSpent??"0"),ctr:parseFloat(k.ctr??"0"),cpm:(k.totalViews??0)>0?parseFloat(k.totalSpent??"0")/(k.totalViews??1)*1e3:0})),j=p.find(k=>k.status==="active"),_=j?c.find(k=>k.id===j.planId):null;if(!t)return o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Authentication Required"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access your business dashboard."}),o.jsx(wt,{href:"/auth",children:o.jsx(le,{children:"Log In"})})]});if((e==null?void 0:e.accountType)!=="business")return o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Business Account Required"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"This dashboard is only available for business accounts."}),o.jsx(wt,{href:"/business-upgrade",children:o.jsx(le,{children:"Upgrade to Business Account"})})]});const w=b.reduce((k,M)=>k+M.views,0),S=b.reduce((k,M)=>k+M.clicks,0),x=b.reduce((k,M)=>k+M.spend,0),N=b.length>0?b.reduce((k,M)=>k+M.ctr,0)/b.length:0,P=k=>{switch(k){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=k=>b.find(M=>M.campaignId===k);return o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(wt,{href:"/",children:o.jsxs(le,{variant:"ghost","data-testid":"button-back",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Feed"]})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Business Dashboard"}),o.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",e.businessName||e.firstName]})]})]}),o.jsx(wt,{href:"/create-ad",children:o.jsxs(le,{"data-testid":"button-create-new-ad",children:[o.jsx(Aw,{className:"w-4 h-4 mr-2"}),"Create New Ad"]})})]}),o.jsxs(IF,{defaultValue:"overview",className:"space-y-6",children:[o.jsxs(W_,{children:[o.jsx(Ao,{value:"overview",children:"Overview"}),o.jsx(Ao,{value:"campaigns",children:"Campaigns"}),o.jsx(Ao,{value:"analytics",children:"Analytics"}),o.jsx(Ao,{value:"billing",children:"Billing"}),o.jsx(Ao,{value:"settings",children:"Settings"})]}),o.jsxs(Io,{value:"overview",className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Tw,{className:"w-4 h-4 text-blue-600"}),"Total Views"]})}),o.jsxs(De,{children:[o.jsx("div",{className:"text-2xl font-bold",children:w.toLocaleString()}),o.jsx("p",{className:"text-xs text-gray-600",children:"All campaigns"})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(v9,{className:"w-4 h-4 text-green-600"}),"Total Clicks"]})}),o.jsxs(De,{children:[o.jsx("div",{className:"text-2xl font-bold",children:S.toLocaleString()}),o.jsx("p",{className:"text-xs text-gray-600",children:"All campaigns"})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(c5,{className:"w-4 h-4 text-purple-600"}),"Click Rate"]})}),o.jsxs(De,{children:[o.jsxs("div",{className:"text-2xl font-bold",children:[N.toFixed(2),"%"]}),o.jsx("p",{className:"text-xs text-gray-600",children:"Average CTR"})]})]}),o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Sm,{className:"w-4 h-4 text-orange-600"}),"Total Spend"]})}),o.jsxs(De,{children:[o.jsxs("div",{className:"text-2xl font-bold",children:["$",x.toFixed(2)]}),o.jsx("p",{className:"text-xs text-gray-600",children:"All campaigns"})]})]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Recent Campaigns"}),o.jsx(At,{children:"Your latest advertising campaigns"})]}),o.jsx(De,{children:s?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading campaigns..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"No campaigns yet"}),o.jsx(wt,{href:"/create-ad",children:o.jsx(le,{children:"Create Your First Ad"})})]}):o.jsx("div",{className:"space-y-3",children:r.slice(0,3).map(k=>{const M=E(k.id);return o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"font-semibold",children:k.title}),o.jsx(rn,{className:P(k.status??"pending"),children:k.status??"pending"})]}),o.jsx("p",{className:"text-sm text-gray-600",children:k.content}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:["Budget: $",k.dailyBudget,"/day"]}),o.jsxs("span",{children:["Target: ",k.suburb]}),M&&o.jsxs(o.Fragment,{children:[o.jsxs("span",{children:["Views: ",M.views]}),o.jsxs("span",{children:["Clicks: ",M.clicks]})]})]})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx(le,{variant:"outline",size:"sm",children:o.jsx(Nm,{className:"w-3 h-3"})})})]},k.id)})})})]})]}),o.jsx(Io,{value:"campaigns",className:"space-y-6",children:o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"All Campaigns"}),o.jsx(At,{children:"Manage your advertising campaigns"})]}),o.jsx(De,{children:s?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading campaigns..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"No campaigns yet"}),o.jsx(wt,{href:"/create-ad",children:o.jsx(le,{children:"Create Your First Ad"})})]}):o.jsx("div",{className:"space-y-4",children:r.map(k=>{const M=E(k.id);return o.jsx("div",{className:"border rounded-lg p-6",children:o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold",children:k.title}),o.jsx(rn,{className:P(k.status??"pending"),children:k.status??"pending"})]}),o.jsx("p",{className:"text-gray-600 mb-3",children:k.content}),k.status==="rejected"&&k.rejectionReason&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-3",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Ad Rejected"}),o.jsx("p",{className:"text-sm text-red-700",children:k.rejectionReason})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Daily Budget:"}),o.jsxs("div",{className:"font-semibold",children:["$",k.dailyBudget]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Target Area:"}),o.jsx("div",{className:"font-semibold",children:k.suburb})]}),M&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Views:"}),o.jsx("div",{className:"font-semibold",children:M.views})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Clicks:"}),o.jsx("div",{className:"font-semibold",children:M.clicks})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 ml-4",children:[k.status==="active"?o.jsxs(le,{variant:"outline",size:"sm","data-testid":`button-pause-${k.id}`,onClick:()=>{alert("Pause campaign functionality coming soon!")},children:[o.jsx(o9,{className:"w-4 h-4 mr-1"}),"Pause"]}):k.status==="paused"?o.jsxs(le,{variant:"outline",size:"sm","data-testid":`button-resume-${k.id}`,onClick:()=>{alert("Resume campaign functionality coming soon!")},children:[o.jsx(a9,{className:"w-4 h-4 mr-1"}),"Resume"]}):k.status==="rejected"?o.jsxs(le,{variant:"default",size:"sm","data-testid":`button-resubmit-${k.id}`,onClick:()=>window.location.href=`/edit-ad/${k.id}`,children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit & Resubmit"]}):null,o.jsx(le,{variant:"outline",size:"sm","data-testid":`button-edit-${k.id}`,onClick:()=>{console.log("Edit button clicked for campaign:",k.id),n(`/edit-ad/${k.id}`)},children:o.jsx(Nm,{className:"w-4 h-4"})})]})]})},k.id)})})})]})}),o.jsx(Io,{value:"analytics",className:"space-y-6",children:o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Campaign Analytics"}),o.jsx(At,{children:"Detailed performance metrics for your campaigns"})]}),o.jsx(De,{children:o.jsx("p",{className:"text-gray-600",children:"Detailed analytics coming soon..."})})]})}),o.jsxs(Io,{value:"billing",className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Sm,{className:"w-4 h-4 text-green-600"}),"Current Plan"]})}),o.jsx(De,{children:d?o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})]}):c.filter(k=>k.isActive)[0]?o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold",children:c.filter(k=>k.isActive)[0].name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["$",c.filter(k=>k.isActive)[0].pricePerDay,"/day"]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.filter(k=>k.isActive)[0].minimumDays||7," day minimum"]})]}):o.jsx("div",{className:"text-sm text-gray-500",children:"No active plan"})})]}),o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(MN,{className:"w-4 h-4 text-blue-600"}),"Total Payments"]})}),o.jsx(De,{children:f?o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"text-lg font-bold",children:["$",h.filter(k=>k.status==="completed").reduce((k,M)=>k+parseFloat(M.amount),0).toFixed(2)]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[h.filter(k=>k.status==="completed").length," completed payments"]})]})})]}),o.jsxs(Re,{children:[o.jsx(Ze,{className:"pb-2",children:o.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(r5,{className:"w-4 h-4 text-purple-600"}),"Days Purchased"]})}),o.jsx(De,{children:f?o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})]}):o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold",children:h.filter(k=>k.status==="completed").reduce((k,M)=>k+(M.daysCharged??0),0)}),o.jsx("p",{className:"text-sm text-gray-600",children:"Total advertising days"})]})})]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(TN,{className:"w-5 h-5"}),"Payment History"]}),o.jsx(At,{children:"View your billing and payment records"})]}),o.jsx(De,{children:f?o.jsx("div",{className:"space-y-3",children:[...Array(3)].map((k,M)=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-32"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-24"})]}),o.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-16"})]},M))}):h.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(MN,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payments yet"}),o.jsx("p",{className:"text-gray-500",children:"Your payment history will appear here once you make your first purchase."})]}):o.jsx("div",{className:"space-y-3",children:h.map(k=>o.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`payment-${k.id}`,children:o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-medium",children:["$",k.amount," ",k.currency]}),o.jsx(rn,{variant:k.status==="completed"?"default":k.status==="pending"?"secondary":k.status==="failed"?"destructive":"outline","data-testid":`status-${k.status}`,children:k.status})]}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[k.daysCharged??0," days  ",k.periodStart?new Date(k.periodStart).toLocaleDateString():"N/A"," - ",k.periodEnd?new Date(k.periodEnd).toLocaleDateString():"N/A"]}),o.jsxs("div",{className:"text-xs text-gray-400",children:["Payment: ",k.createdAt?new Date(k.createdAt).toLocaleDateString():"N/A"," via ",k.paymentMethod]})]}),o.jsx("div",{className:"text-right",children:k.paidAt&&o.jsxs("div",{className:"text-sm text-green-600",children:["Paid ",new Date(k.paidAt).toLocaleDateString()]})})]})})},k.id))})})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Available Plans"}),o.jsx(At,{children:"Choose the advertising plan that works for your business"})]}),o.jsx(De,{children:d?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(2)].map((k,M)=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-4"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse"})]})]},M))}):c.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(TN,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No plans available"}),o.jsx("p",{className:"text-gray-500",children:"Billing plans will be available soon."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(k=>{const M=(_==null?void 0:_.id)===k.id,z=Array.isArray(k.features)?k.features:[];return o.jsxs("div",{className:`border rounded-lg p-4 ${M?"border-blue-500 bg-blue-50":"border-gray-200"}`,"data-testid":`plan-${k.id}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold",children:k.name}),M&&o.jsx(rn,{children:"Current Plan"})]}),o.jsx("p",{className:"text-gray-600 mb-3",children:k.description}),o.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:["$",k.pricePerDay,o.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/day"})]}),o.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[k.minimumDays||7," day minimum purchase"]}),z&&z.length>0&&o.jsx("div",{className:"space-y-1 mb-4",children:z.map((D,F)=>o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),D]},F))}),o.jsx("div",{className:"text-xs text-gray-500",children:"Payments processed securely via Stripe"})]},k.id)})})})]})]}),o.jsx(Io,{value:"settings",className:"space-y-6",children:o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Business Settings"}),o.jsx(At,{children:"Manage your business account settings"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Business Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Business Name:"}),o.jsx("div",{className:"font-semibold",children:e.businessName||"Not set"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Category:"}),o.jsx("div",{className:"font-semibold",children:e.businessCategory||"Not set"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Website:"}),o.jsx("div",{className:"font-semibold",children:e.businessWebsite||"Not set"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Phone:"}),o.jsx("div",{className:"font-semibold",children:e.businessPhone||"Not set"})]})]})]}),o.jsx(le,{variant:"outline","data-testid":"button-edit-business-info",onClick:()=>{n("/profile")},children:"Edit Business Information"})]})]})})]})]})}const Vee=["Restaurant & Food","Retail & Shopping","Health & Fitness","Beauty & Wellness","Professional Services","Home & Garden","Education & Training","Entertainment & Events","Automotive","Technology","Other"];function H2(){const{user:e}=Bn(),[,t]=qr(),{toast:n}=Pn(),r=xa(),[s,i]=v.useState("personal"),[l,c]=v.useState({businessName:"",businessDescription:"",businessWebsite:"",businessPhone:"",businessAddress:"",businessCategory:""}),d=Fn({mutationFn:async()=>{if(s==="personal")return On("POST","/api/users/complete-setup",{accountType:"regular"});if(!l.businessName.trim())throw new Error("Business name is required");if(!l.businessCategory)throw new Error("Business category is required");return On("POST","/api/users/complete-setup",{accountType:"business",...l})},onSuccess:()=>{n({title:"Account Setup Complete!",description:s==="business"?"Welcome to QLD Safety Monitor Business. You can now create advertisements.":"Welcome to QLD Safety Monitor! Your account is ready to use."}),r.invalidateQueries({queryKey:["/api/auth/user"]}),t("/")},onError:p=>{n({title:"Setup Failed",description:p.message||"There was an error setting up your account.",variant:"destructive"})}}),h=(p,g)=>{c(b=>({...b,[p]:g}))},f=()=>s==="personal"?!0:l.businessName.trim()&&l.businessCategory;return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Complete Your Account Setup"}),o.jsxs("p",{className:"text-gray-600",children:["Welcome ",(e==null?void 0:e.firstName)||(e==null?void 0:e.email),"! Let's set up your account."]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Choose Your Account Type"}),o.jsx(At,{children:"Select the type of account that best fits your needs"})]}),o.jsxs(De,{className:"space-y-6",children:[o.jsx(Q_,{value:s,onValueChange:p=>i(p),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[o.jsx(Ph,{value:"personal",id:"personal"}),o.jsx(be,{htmlFor:"personal",className:"flex-1 cursor-pointer",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(sh,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Personal Account"}),o.jsx("div",{className:"text-sm text-gray-600",children:"For individuals who want to stay informed about local safety and community events"})]})]})})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[o.jsx(Ph,{value:"business",id:"business"}),o.jsx(be,{htmlFor:"business",className:"flex-1 cursor-pointer",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(cu,{className:"w-6 h-6 text-green-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Business Account"}),o.jsx("div",{className:"text-sm text-gray-600",children:"For businesses who want to advertise to local Queensland customers"})]})]})})]})]})}),s==="business"&&o.jsxs("div",{className:"space-y-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[o.jsxs("h3",{className:"font-semibold text-green-800 flex items-center gap-2",children:[o.jsx(cu,{className:"w-4 h-4"}),"Business Information"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessName",children:"Business Name *"}),o.jsx(rt,{id:"businessName",value:l.businessName,onChange:p=>h("businessName",p.target.value),placeholder:"Your Business Name","data-testid":"input-business-name"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessCategory",children:"Business Category *"}),o.jsxs(ls,{value:l.businessCategory,onValueChange:p=>h("businessCategory",p),children:[o.jsx(zr,{"data-testid":"select-business-category",children:o.jsx(cs,{placeholder:"Select category"})}),o.jsx($r,{children:Vee.map(p=>o.jsx(xn,{value:p,children:p},p))})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(be,{htmlFor:"businessDescription",children:"Business Description"}),o.jsx(Ii,{id:"businessDescription",value:l.businessDescription,onChange:p=>h("businessDescription",p.target.value),placeholder:"Brief description of your business...",rows:3,"data-testid":"textarea-business-description"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessWebsite",children:"Website URL"}),o.jsx(rt,{id:"businessWebsite",value:l.businessWebsite,onChange:p=>h("businessWebsite",p.target.value),placeholder:"https://yourwebsite.com","data-testid":"input-business-website"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessPhone",children:"Phone Number"}),o.jsx(rt,{id:"businessPhone",value:l.businessPhone,onChange:p=>h("businessPhone",p.target.value),placeholder:"(07) 1234 5678","data-testid":"input-business-phone"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(be,{htmlFor:"businessAddress",children:"Business Address"}),o.jsx(Pi,{value:l.businessAddress,onChange:p=>h("businessAddress",p),placeholder:"Enter your business address...","data-testid":"input-business-address"})]})]})]}),o.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsxs("h3",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[o.jsx(rh,{className:"w-4 h-4"}),"What you'll get:"]}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("li",{children:" Access to real-time safety information for Queensland"}),o.jsx("li",{children:" Community incident reporting and discussion"}),o.jsx("li",{children:" Local traffic and emergency updates"}),s==="business"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:" Create targeted advertisements for local customers"}),o.jsx("li",{children:" Business analytics and campaign management"}),o.jsx("li",{children:" Verified business profile in the community"})]})]})]}),o.jsx(le,{onClick:()=>d.mutate(),disabled:d.isPending||!f(),className:"w-full","data-testid":"button-complete-setup",children:d.isPending?"Setting up your account...":o.jsxs(o.Fragment,{children:["Complete Setup",o.jsx(n9,{className:"w-4 h-4 ml-2"})]})}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:"You can change your account type later in your profile settings"})]})]})]})})}function W2(){const[e,t]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(!1),{toast:l}=Pn(),[,c]=qr(),d=async h=>{h.preventDefault(),i(!0);try{const p=await(await On("POST","/api/login",{email:e,password:n})).json();p.success?(l({title:"Login Successful",description:`Welcome back, ${p.user.firstName}!`}),c("/")):l({title:"Login Failed",description:p.message||"Invalid credentials",variant:"destructive"})}catch(f){l({title:"Login Error",description:f.message||"Something went wrong",variant:"destructive"})}finally{i(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs(Re,{className:"w-full max-w-md",children:[o.jsxs(Ze,{className:"text-center",children:[o.jsx(Qe,{className:"text-2xl font-bold",children:"Login"}),o.jsx(At,{children:"Enter your email and password to access your account"})]}),o.jsxs(De,{children:[o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"email",children:"Email"}),o.jsx(rt,{id:"email",type:"email",value:e,onChange:h=>t(h.target.value),placeholder:"Enter your email",required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{htmlFor:"password",children:"Password"}),o.jsx(rt,{id:"password",type:"password",value:n,onChange:h=>r(h.target.value),placeholder:"Enter your password",required:!0,"data-testid":"input-password"})]}),o.jsx(le,{type:"submit",className:"w-full",disabled:s,"data-testid":"button-login",children:s?"Logging in...":"Login"})]}),o.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Test Business Account:"}),o.jsxs("p",{className:"text-sm text-blue-700",children:[o.jsx("strong",{children:"Email:"})," sarah.mitchell@sunshinecoastcoffee.com.au",o.jsx("br",{}),o.jsx("strong",{children:"Password:"})," Coffee123!"]}),o.jsx(le,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{t("sarah.mitchell@sunshinecoastcoffee.com.au"),r("Coffee123!")},"data-testid":"button-fill-test-credentials",children:"Fill Test Credentials"})]})]})]})})}function Hee(){const{user:e,isLoading:t,isAuthenticated:n}=Bn(),{toast:r}=Pn(),s=xa(),[i,l]=v.useState(""),[c,d]=v.useState(null);v.useEffect(()=>{if(!t){if(!n){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}if(e&&e.role!=="admin"){r({title:"Access Denied",description:"You need admin privileges to access this page.",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},1e3);return}}},[]);const{data:h,isLoading:f,error:p}=Dt({queryKey:["/api/admin/ads/pending"],retry:!1,enabled:n&&(e==null?void 0:e.role)==="admin"}),g=Fn({mutationFn:async w=>On("PUT",`/api/admin/ads/${w}/approve`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/ads/pending"]}),r({title:"Ad Approved",description:"The advertisement has been approved and is now live."})},onError:w=>{if(B0(w)){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}r({title:"Error",description:"Failed to approve advertisement. Please try again.",variant:"destructive"})}}),b=Fn({mutationFn:async({adId:w,reason:S})=>On("PUT",`/api/admin/ads/${w}/reject`,{reason:S}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/ads/pending"]}),l(""),d(null),r({title:"Ad Rejected",description:"The advertisement has been rejected."})},onError:w=>{if(B0(w)){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}r({title:"Error",description:"Failed to reject advertisement. Please try again.",variant:"destructive"})}});if(t)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(!n||(e==null?void 0:e.role)!=="admin")return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Admin privileges required"})]})});if(f)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(p)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Admin Dashboard"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please try refreshing the page"})]})});const j=w=>{g.mutate(w)},_=(w,S)=>{if(!S.trim()){r({title:"Rejection Reason Required",description:"Please provide a reason for rejecting this ad.",variant:"destructive"});return}b.mutate({adId:w,reason:S})};return o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs(le,{variant:"ghost",onClick:()=>window.location.href="/",className:"flex items-center gap-2","data-testid":"button-back-to-home",children:[o.jsx(lr,{className:"w-4 h-4"}),"Back to Home"]}),o.jsxs(le,{variant:"outline",onClick:()=>window.location.href="/feed",className:"flex items-center gap-2","data-testid":"button-back-to-feed",children:[o.jsx(p9,{className:"w-4 h-4"}),"Feed"]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Dashboard"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review and approve pending advertisements"})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs(rn,{variant:"outline",className:"flex items-center gap-2",children:[o.jsx(Pw,{className:"w-4 h-4"}),(h==null?void 0:h.length)||0," Pending Ads"]})})}),!h||h.length===0?o.jsx(Re,{children:o.jsxs(De,{className:"text-center py-12",children:[o.jsx(rh,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"All caught up!"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"There are no pending advertisements to review."})]})}):o.jsx("div",{className:"grid gap-6",children:h.map(w=>o.jsxs(Re,{className:"overflow-hidden",children:[o.jsx(Ze,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs(Qe,{className:"flex items-center gap-2",children:[o.jsx(cu,{className:"w-5 h-5"}),w.businessName]}),o.jsx(At,{className:"text-lg font-medium mt-1",children:w.title})]}),o.jsx(rn,{variant:"secondary",children:new Date(w.createdAt).toLocaleDateString()})]})}),o.jsx(De,{children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Ad Preview"}),o.jsxs("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-800",children:[w.imageUrl&&o.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-48 object-cover rounded-lg mb-4"}),o.jsx("h5",{className:"font-bold text-lg mb-2",children:w.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:w.content}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-sm text-gray-500",children:["by ",w.businessName]}),o.jsx(le,{size:"sm",variant:"outline",children:w.cta})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Ad Details"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_r,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-sm",children:[w.address?`${w.address}, `:"",w.suburb]})]}),w.websiteUrl&&o.jsxs("div",{className:"text-sm",children:[o.jsx("strong",{children:"Website:"})," ",o.jsx("a",{href:w.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:w.websiteUrl})]}),w.targetSuburbs&&w.targetSuburbs.length>0&&o.jsxs("div",{className:"text-sm",children:[o.jsx("strong",{children:"Target Areas:"})," ",w.targetSuburbs.join(", ")]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[w.dailyBudget&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Sm,{className:"w-4 h-4"}),o.jsxs("span",{children:["Daily: $",w.dailyBudget]})]}),w.totalBudget&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Sm,{className:"w-4 h-4"}),o.jsxs("span",{children:["Total: $",w.totalBudget]})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsxs(le,{onClick:()=>j(w.id),disabled:g.isPending,className:"flex items-center gap-2","data-testid":`button-approve-${w.id}`,children:[o.jsx(rh,{className:"w-4 h-4"}),g.isPending?"Approving...":"Approve"]}),o.jsxs(il,{children:[o.jsx(wH,{asChild:!0,children:o.jsxs(le,{variant:"destructive",className:"flex items-center gap-2",onClick:()=>d(w.id),"data-testid":`button-reject-${w.id}`,children:[o.jsx(l9,{className:"w-4 h-4"}),"Reject"]})}),o.jsxs(ra,{children:[o.jsx(yl,{children:o.jsx(vl,{children:"Reject Advertisement"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Please provide a reason for rejecting this advertisement:"}),o.jsx(Ii,{placeholder:"Reason for rejection...",value:i,onChange:S=>l(S.target.value),"data-testid":"textarea-rejection-reason"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(le,{onClick:()=>_(w.id,i),disabled:b.isPending,variant:"destructive","data-testid":"button-confirm-reject",children:b.isPending?"Rejecting...":"Confirm Rejection"}),o.jsx(le,{variant:"outline",onClick:()=>{l(""),d(null)},children:"Cancel"})]})]})]})]})]})]})]})})]},w.id))})]})})}const Wee={"gift-supplies":{icon:v0,name:"Gift & Supplies Store",description:"Perfect for gift shops, stationery stores, party supplies, crafts",sampleCtas:["Shop Now","Browse Gifts","Visit Store","See Collection"]},"food-cafe":{icon:i5,name:"Caf & Food",description:"Coffee shops, restaurants, bakeries, food trucks",sampleCtas:["Order Now","View Menu","Book Table","Try Today"]},professional:{icon:d5,name:"Professional Service",description:"Dentists, mechanics, lawyers, consultants, home services",sampleCtas:["Book Now","Get Quote","Call Today","Schedule"]},"health-beauty":{icon:cf,name:"Health & Beauty",description:"Salons, spas, fitness, wellness, beauty supplies",sampleCtas:["Book Now","Learn More","Visit Us","Get Started"]},retail:{icon:v0,name:"General Retail",description:"Clothing stores, electronics, home goods, bookstores",sampleCtas:["Shop Now","Browse Deals","Visit Store","See Offers"]},community:{icon:co,name:"Community Service",description:"Community groups, nonprofits, educational services",sampleCtas:["Learn More","Join Us","Get Involved","Find Out How"]}},qee=["Brisbane","Gold Coast","Sunshine Coast","Toowoomba","Cairns","Townsville","Ipswich","Logan","Geelong","Ballarat","Mackay","Rockhampton","Bundaberg","Hervey Bay","Gladstone","Mount Isa","Maryborough","Gympie","Kingaroy","Charleville","Roma","Dalby","Chinchilla","Warwick","Stanthorpe","Goondiwindi","Emerald","Longreach","Winton","Blackall"];function Zee(){const{user:e,isAuthenticated:t}=Bn(),{toast:n}=Pn(),[,r]=qr(),i=sf().id,[l,c]=v.useState("gift-supplies"),[d,h]=v.useState(!1),[f,p]=v.useState({businessName:"",title:"",content:"",websiteUrl:"",address:"",suburb:"",cta:"",targetSuburbs:[],dailyBudget:"50.00",totalBudget:"1000.00",logoUrl:"",backgroundUrl:""}),{data:g,isLoading:b,error:j}=Dt({queryKey:[`/api/ads/${i}`],enabled:!!i&&t});v.useEffect(()=>{g&&p({businessName:g.businessName||"",title:g.title||"",content:g.content||"",websiteUrl:g.websiteUrl||"",address:g.address||"",suburb:g.suburb||"",cta:g.cta||"Learn More",targetSuburbs:g.targetSuburbs||[],dailyBudget:g.dailyBudget||"50.00",totalBudget:g.totalBudget||"1000.00",logoUrl:g.imageUrl||"",backgroundUrl:g.backgroundUrl||""})},[g]);const _=Wee[l],w=Fn({mutationFn:async()=>{if(!f.businessName.trim())throw new Error("Business name is required");if(!f.title.trim())throw new Error("Headline is required");if(!f.content.trim())throw new Error("Description is required");if(!f.suburb.trim())throw new Error("Suburb is required");if(!f.cta.trim())throw new Error("Call-to-action button text is required");const x={...f,status:"pending",template:l};return console.log("Updating ad data:",x),On("PUT",`/api/ads/${i}`,x)},onSuccess:()=>{n({title:"Ad Updated & Resubmitted!",description:"Your updated ad will be reviewed for approval again."}),setTimeout(()=>{r("/business-dashboard")},2e3)},onError:x=>{n({title:"Update Failed",description:x.message||"Please try again.",variant:"destructive"})}}),S=()=>o.jsxs(Re,{className:"mb-4 border-l-4 border-l-blue-500 bg-gradient-to-r from-blue-50 to-white overflow-hidden",children:[f.backgroundUrl&&o.jsx("div",{className:"h-32 bg-cover bg-center relative",style:{backgroundImage:`url(${f.backgroundUrl})`},children:o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})}),o.jsxs(De,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(rn,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300",children:o.jsx("span",{className:"text-xs font-medium",children:"Sponsored"})}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(_.icon,{className:"w-3 h-3 mr-1"}),f.suburb||"Your Suburb"]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[f.logoUrl&&o.jsx("img",{src:f.logoUrl,alt:"Business Logo",className:"w-8 h-8 rounded object-cover"}),o.jsx("h3",{className:"font-semibold text-gray-900",children:f.businessName||"Your Business Name"})]}),o.jsx("h4",{className:"font-medium text-gray-800",children:f.title||"Your Headline Here"}),o.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:f.content||"Your compelling business description will appear here..."}),o.jsxs("div",{className:"flex items-center justify-between pt-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:f.address||"Your Address"}),o.jsx(le,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:f.cta||"Learn More"})]})]})]})]});return t?(e==null?void 0:e.accountType)!=="business"?o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Business Account Required"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"This feature is only available for business accounts."})]}):b?o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading ad data..."})]}):j||!g?o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx(wv,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Ad Not Found"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"The ad you're trying to edit doesn't exist or you don't have permission to edit it."}),o.jsxs(le,{onClick:()=>r("/business-dashboard"),children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]}):d?o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs(le,{variant:"ghost",onClick:()=>h(!1),children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Editor"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Preview Your Updated Ad"}),o.jsx("p",{className:"text-gray-600",children:"See how your ad will appear to users"})]})]}),g.rejectionReason&&o.jsx(Re,{className:"mb-6 border-orange-200 bg-orange-50",children:o.jsx(De,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(wv,{className:"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-orange-800 mb-1",children:"Previous Rejection Reason"}),o.jsx("p",{className:"text-sm text-orange-700",children:g.rejectionReason}),o.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"Please ensure you've addressed this feedback before resubmitting."})]})]})})}),o.jsx(S,{}),o.jsxs("div",{className:"flex gap-4 mt-6",children:[o.jsx(le,{onClick:()=>w.mutate(),disabled:w.isPending,className:"flex-1","data-testid":"button-submit-updated-ad",children:w.isPending?"Updating...":"Update & Resubmit for Review"}),o.jsx(le,{variant:"outline",onClick:()=>h(!1),children:"Edit More"})]})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsxs(le,{variant:"ghost",onClick:()=>r("/business-dashboard"),children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Edit Your Ad"}),o.jsx("p",{className:"text-gray-600",children:"Update your ad and resubmit for approval"})]})]}),g.rejectionReason&&o.jsx(Re,{className:"mb-6 border-red-200 bg-red-50",children:o.jsx(De,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(wv,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-red-800 mb-1",children:"Rejection Reason"}),o.jsx("p",{className:"text-sm text-red-700",children:g.rejectionReason}),o.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Please address this feedback in your updated ad."})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Business Information"}),o.jsx(At,{children:"Basic details about your business"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"businessName",children:"Business Name *"}),o.jsx(rt,{id:"businessName",value:f.businessName,onChange:x=>p({...f,businessName:x.target.value}),placeholder:"Your Business Name","data-testid":"input-business-name"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"address",children:"Business Address"}),o.jsx(rt,{id:"address",value:f.address,onChange:x=>p({...f,address:x.target.value}),placeholder:"123 Main St, City","data-testid":"input-address"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"websiteUrl",children:"Website URL"}),o.jsx(rt,{id:"websiteUrl",value:f.websiteUrl,onChange:x=>p({...f,websiteUrl:x.target.value}),placeholder:"https://yourwebsite.com","data-testid":"input-website"})]})]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Ad Content"}),o.jsx(At,{children:"Create compelling ad copy"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"title",children:"Headline *"}),o.jsx(rt,{id:"title",value:f.title,onChange:x=>p({...f,title:x.target.value}),placeholder:"Catchy headline for your ad","data-testid":"input-title"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"content",children:"Description *"}),o.jsx(Ii,{id:"content",value:f.content,onChange:x=>p({...f,content:x.target.value}),placeholder:"Describe what makes your business special...",rows:4,"data-testid":"textarea-content"})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"cta",children:"Call-to-Action Button Text *"}),o.jsxs(ls,{value:f.cta,onValueChange:x=>p({...f,cta:x}),children:[o.jsx(zr,{"data-testid":"select-cta",children:o.jsx(cs,{placeholder:"Choose button text"})}),o.jsx($r,{children:_.sampleCtas.map(x=>o.jsx(xn,{value:x,children:x},x))})]})]})]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Targeting"}),o.jsx(At,{children:"Choose where your ad will be shown"})]}),o.jsxs(De,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(be,{htmlFor:"suburb",children:"Primary Suburb *"}),o.jsxs(ls,{value:f.suburb,onValueChange:x=>p({...f,suburb:x}),children:[o.jsx(zr,{"data-testid":"select-suburb",children:o.jsx(cs,{placeholder:"Choose your primary suburb"})}),o.jsx($r,{children:qee.map(x=>o.jsx(xn,{value:x,children:x},x))})]})]}),o.jsxs("div",{children:[o.jsx(be,{htmlFor:"dailyBudget",children:"Daily Budget"}),o.jsxs(ls,{value:f.dailyBudget,onValueChange:x=>p({...f,dailyBudget:x}),children:[o.jsx(zr,{"data-testid":"select-budget",children:o.jsx(cs,{})}),o.jsxs($r,{children:[o.jsx(xn,{value:"25.00",children:"$25/day"}),o.jsx(xn,{value:"50.00",children:"$50/day"}),o.jsx(xn,{value:"100.00",children:"$100/day"}),o.jsx(xn,{value:"200.00",children:"$200/day"})]})]})]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Live Preview"}),o.jsx(At,{children:"See how your updated ad will look"})]}),o.jsxs(De,{children:[o.jsx(S,{}),o.jsx(le,{onClick:()=>h(!0),className:"w-full","data-testid":"button-preview-and-submit",children:"Preview & Update Ad"})]})]})})]})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Authentication Required"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to edit your ad."})]})}const Gee=gf({title:_t().min(1,"Title is required"),description:_t().optional(),location:_t().min(1,"Location is required"),categoryId:_t().min(1,"Category is required"),subcategoryId:_t().min(1,"Subcategory is required")});function Kee({params:e}){const{toast:t}=Pn(),[,n]=qr(),[r,s]=v.useState(""),[i,l]=v.useState([]),[c,d]=v.useState([]),h=e.id,{data:f,isLoading:p}=Dt({queryKey:["/api/incidents",h],queryFn:async()=>{const w=await fetch(`/api/incidents/${h}`);if(!w.ok)throw new Error("Failed to fetch incident");return w.json()},enabled:!!h});v.useEffect(()=>{(async()=>{try{const S=await fetch("/api/categories");if(S.ok){const x=await S.json();l(x)}}catch(S){console.error("Failed to load categories:",S)}})()},[]),v.useEffect(()=>{r?(async S=>{try{const x=await fetch(`/api/subcategories?categoryId=${S}`);if(x.ok){const N=await x.json();d(N)}}catch(x){console.error("Failed to load subcategories:",x),d([])}})(r):d([])},[r]);const g=Fm({resolver:Om(Gee),defaultValues:{title:"",description:"",location:"",categoryId:"",subcategoryId:""}});v.useEffect(()=>{if(f&&f.properties){const w=f.properties;g.reset({title:w.title||"",description:w.description||"",location:w.location||w.locationDescription||"",categoryId:w.categoryId||"",subcategoryId:w.subcategoryId||""}),s(w.categoryId||"")}},[f,g]);const b=Fn({mutationFn:async w=>{const S=await On("PUT",`/api/unified-incidents/${h}`,w);if(!S.ok)throw new Error("Failed to update incident");return S.json()},onSuccess:()=>{t({title:"Incident Updated! ",description:"Your incident report has been updated successfully."}),ss.invalidateQueries({queryKey:["/api/incidents"]}),ss.invalidateQueries({queryKey:["/api/incidents",h]}),n("/")},onError:w=>{t({title:"Update Failed",description:w.message||"Failed to update incident. Please try again.",variant:"destructive"})}}),j=w=>{b.mutate(w)},_=()=>{n("/")};return p?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading incident..."})]})}):f?o.jsx("div",{className:"min-h-screen bg-background pb-20",children:o.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsxs(le,{variant:"ghost",onClick:_,children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Edit Incident Report"}),o.jsx("p",{className:"text-muted-foreground",children:"Update your community incident report"})]})]}),o.jsxs(Re,{children:[o.jsxs(Ze,{children:[o.jsx(Qe,{children:"Incident Details"}),o.jsx(At,{children:"Make changes to your incident report"})]}),o.jsx(De,{children:o.jsx(KR,{...g,children:o.jsxs("form",{onSubmit:g.handleSubmit(j),className:"space-y-6",children:[o.jsx(ts,{control:g.control,name:"categoryId",render:({field:w})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Category"}),o.jsxs(ls,{value:w.value,onValueChange:S=>{w.onChange(S),s(S),g.setValue("subcategoryId","")},children:[o.jsx(Rr,{children:o.jsx(zr,{"data-testid":"select-edit-category",children:o.jsx(cs,{placeholder:"Choose a category"})})}),o.jsx($r,{children:i.map(S=>o.jsx(xn,{value:S.id,children:S.name},S.id))})]}),o.jsx(Lr,{})]})}),r&&o.jsx(ts,{control:g.control,name:"subcategoryId",render:({field:w})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Specific Type"}),o.jsxs(ls,{value:w.value,onValueChange:w.onChange,children:[o.jsx(Rr,{children:o.jsx(zr,{"data-testid":"select-edit-subcategory",children:o.jsx(cs,{placeholder:"Choose specific type"})})}),o.jsx($r,{children:c.map(S=>o.jsx(xn,{value:S.id,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium",children:S.name}),S.description&&o.jsx("span",{className:"text-xs text-muted-foreground",children:S.description})]})},S.id))})]}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:g.control,name:"title",render:({field:w})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Title"}),o.jsx(Rr,{children:o.jsx(rt,{placeholder:"Brief description of the incident",...w,"data-testid":"input-edit-title"})}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:g.control,name:"location",render:({field:w})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Location"}),o.jsx(Rr,{children:o.jsx(Pi,{value:w.value,onChange:S=>w.onChange(S),onClear:()=>w.onChange(""),placeholder:"Enter street address, intersection, or landmark...",disabled:!1})}),o.jsx(Lr,{})]})}),o.jsx(ts,{control:g.control,name:"description",render:({field:w})=>o.jsxs(Ir,{children:[o.jsx(Mr,{children:"Description (Optional)"}),o.jsx(Rr,{children:o.jsx(Ii,{placeholder:"Provide additional details about the incident...",className:"min-h-24",...w,"data-testid":"textarea-edit-description"})}),o.jsx(Lr,{})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t",children:[o.jsxs(le,{type:"button",variant:"outline",onClick:_,className:"flex-1 sm:flex-none","data-testid":"button-cancel-edit",children:[o.jsx(oa,{className:"w-4 h-4 mr-2"}),"Cancel"]}),o.jsxs(le,{type:"submit",disabled:b.isPending,className:"flex-1","data-testid":"button-save-edit",children:[o.jsx(S9,{className:"w-4 h-4 mr-2"}),b.isPending?"Saving...":"Save Changes"]})]})]})})})]})]})}):o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Incident Not Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"The incident you're trying to edit doesn't exist."}),o.jsxs(le,{onClick:()=>n("/"),children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back to Feed"]})]})})}function Qee({asModal:e=!0,incidentId:t}){var Y,Z,U,V,K,O,G,X,ce,Te,Ve,Ie;const{incidentId:n}=sf(),[,r]=qr();Bn();const{toast:s}=Pn(),i=t||n,[l,c]=v.useState(!1),d=i?EX(i):null,{data:h,isLoading:f}=Dt({queryKey:["/api/unified"],staleTime:1*60*1e3}),p=((Y=h==null?void 0:h.features)==null?void 0:Y.find(ye=>{var ue,fe,Oe,Ye,He;if(!d)return!1;if(ye.id===d||((ue=ye.properties)==null?void 0:ue.id)===d)return!0;if(d.startsWith("esq:")){const Xe=d.substring(4);return((fe=ye.properties)==null?void 0:fe.Master_Incident_Number)===Xe||((Oe=ye.properties)==null?void 0:Oe.Incident_Number)===Xe||((Ye=ye.properties)==null?void 0:Ye.IncidentNumber)===Xe}return((He=ye.properties)==null?void 0:He.reporterId)===d}))||null,{data:g}=Dt({queryKey:["/api/incidents",d,"comments"],queryFn:async()=>{if(!d)return null;const ye=await fetch(`/api/incidents/${d}/social/comments`);if(!ye.ok)throw new Error("Failed to fetch comments");return ye.json()},enabled:!!d,staleTime:1*60*1e3}),b=()=>{c(!l)},j=async()=>{if(!p)return;const ye=`${window.location.origin}/incident/${i}`,ue=P2(p),fe=`${ue} - ${T2(p)}`;if(navigator.share)try{await navigator.share({title:ue,text:fe,url:ye}),s({title:"Shared successfully",description:"Incident shared successfully."});return}catch{}try{await navigator.clipboard.writeText(ye),s({title:"Link copied",description:"Incident link copied to clipboard."})}catch{s({title:"Share failed",description:"Unable to copy link to clipboard.",variant:"destructive"})}},_=()=>{window.history.length>1?window.history.back():r("/")};if(!f&&!p)return o.jsx(il,{open:!0,onOpenChange:_,children:o.jsxs(ra,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx(yl,{children:o.jsx(vl,{children:"Incident Not Found"})}),o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("p",{className:"text-muted-foreground mb-4",children:"The incident you're looking for could not be found."}),o.jsxs(le,{onClick:_,children:[o.jsx(lr,{className:"h-4 w-4 mr-2"}),"Go Back"]})]})]})});if(f)return o.jsx(il,{open:!0,onOpenChange:_,children:o.jsx(ra,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading incident details..."})]})})});const w=P2(p),S=T2(p),x=TX(p),N=gF(p),P=qp(p),{iconName:E,color:k}=vF(p),M=(p==null?void 0:p.source)||((Z=p==null?void 0:p.properties)==null?void 0:Z.source)||"unknown";M==="user"||((U=p==null?void 0:p.properties)==null||U.userReported);const z=((V=p==null?void 0:p.properties)==null?void 0:V.description)||((K=p==null?void 0:p.properties)==null?void 0:K.Event_Type)||((O=p==null?void 0:p.properties)==null?void 0:O.details)||"No description available",D=((G=p==null?void 0:p.properties)==null?void 0:G.incidentTime)||((X=p==null?void 0:p.properties)==null?void 0:X.lastUpdated)||((ce=p==null?void 0:p.properties)==null?void 0:ce.publishedAt)||((Te=p==null?void 0:p.properties)==null?void 0:Te.createdAt),J=(ye=>({Car:Id,AlertTriangle:fc,Shield:Ci,Flame:kw,Heart:cf,Users:co,Construction:o5,Trees:Rw,Search:Iw,Zap:Fw})[ye]||fc)(E),H=o.jsx("div",{className:"relative",children:o.jsxs(Re,{className:"border-0 shadow-lg bg-gradient-to-br from-white via-gray-50/30 to-white",children:[o.jsx(Ze,{className:`pb-3 pt-4 px-3 md:px-6 rounded-t-lg ${M==="emergency"?"bg-gradient-to-br from-red-50 to-red-100/50 border-red-200":M==="tmr"?"bg-gradient-to-br from-orange-50 to-orange-100/50 border-orange-200":M==="user"?"bg-gradient-to-br from-purple-50 to-purple-100/50 border-purple-200":"bg-gradient-to-br from-gray-50 to-gray-100/50 border-gray-200"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`flex-shrink-0 w-11 h-11 md:w-12 md:h-12 rounded-xl flex items-center justify-center shadow-lg ring-2 ${M==="emergency"?"bg-gradient-to-br from-red-500 to-red-600 ring-red-200":M==="tmr"?"bg-gradient-to-br from-orange-500 to-orange-600 ring-orange-200":M==="user"?"bg-gradient-to-br from-purple-500 to-purple-600 ring-purple-200":"bg-gradient-to-br from-gray-500 to-gray-600 ring-gray-200"}`,children:o.jsx(J,{className:"h-5 w-5 md:h-6 md:w-6 text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[o.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900 leading-tight pr-8","data-testid":"incident-title",children:w}),o.jsxs("div",{className:"flex items-center gap-1.5 text-gray-700",children:[o.jsx(_r,{className:"h-3.5 w-3.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-medium","data-testid":"incident-location",children:S})]}),x&&o.jsxs(rn,{variant:"secondary",className:`${M==="emergency"?"bg-red-100 text-red-800 hover:bg-red-200":M==="tmr"?"bg-orange-100 text-orange-800 hover:bg-orange-200":M==="user"?"bg-purple-100 text-purple-800 hover:bg-purple-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"} text-xs font-medium`,children:[x,N?`  ${N}`:""]}),(()=>{const ye=vb(p);return ye?o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(Zn,{className:`h-6 w-6 ${ye.color} text-white`,children:o.jsx(Gn,{className:"bg-transparent text-white text-[10px] font-semibold",children:ye.avatar})}),o.jsx("span",{className:"font-semibold text-gray-900",children:ye.name})]}):P?o.jsx("div",{className:"text-xs text-gray-600",children:o.jsx("span",{className:"font-medium",children:"Community Report"})}):null})()]})]})}),o.jsxs(De,{className:"space-y-4 p-3 md:p-6",children:[P&&!vb(p)&&o.jsxs("div",{className:"rounded-xl p-3 md:p-4 border-l-4 bg-purple-50 border-purple-200",children:[o.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600 mb-2",children:"Reported by"}),o.jsx(xb,{userId:P,variant:"default",showAccountType:!0})]}),((p==null?void 0:p.photoUrl)||((Ve=p==null?void 0:p.properties)==null?void 0:Ve.photoUrl))&&o.jsx(Re,{className:"border border-gray-200/60 shadow-sm",children:o.jsx(De,{className:"p-0",children:o.jsx("img",{src:p.photoUrl||((Ie=p.properties)==null?void 0:Ie.photoUrl),alt:"Incident photo",className:"w-full h-64 object-cover rounded-lg",loading:"lazy",onError:ye=>{const ue=ye.target.closest(".border-gray-200\\/60");ue&&(ue.style.display="none")}})})}),o.jsx(Re,{className:"border border-gray-200/60 shadow-sm",children:o.jsxs(De,{className:"p-3 md:p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(fc,{className:"h-4 w-4 text-gray-500"}),o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Description"})]}),o.jsx("p",{className:"text-sm md:text-base text-gray-800 leading-relaxed whitespace-pre-wrap","data-testid":"incident-description",children:z})]})}),D&&o.jsx(Re,{className:"border border-gray-200/60 shadow-sm",children:o.jsxs(De,{className:"p-3 md:p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Pw,{className:"h-4 w-4 text-gray-500"}),o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Time"})]}),o.jsx("p",{className:"text-sm md:text-base text-gray-800",children:new Date(D).toLocaleString()})]})}),o.jsx("div",{className:"sticky bottom-0 -mx-3 md:mx-0 md:static",children:o.jsx(Re,{className:"border-t md:border border-gray-200/60 shadow-sm rounded-none md:rounded-lg",children:o.jsx(De,{className:"p-2 md:p-3",children:o.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[o.jsxs(le,{variant:"ghost",size:"sm",className:`flex-1 md:flex-none flex items-center justify-center gap-2 transition-colors px-4 py-3 h-12 text-sm font-medium ${l?"text-blue-600 bg-blue-50 hover:bg-blue-100":"hover:text-blue-600 hover:bg-blue-50"}`,onClick:b,"data-testid":`button-comments-${d}`,children:[o.jsx(uu,{className:"w-4 h-4"}),o.jsx("span",{children:"Comments"}),o.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",(g==null?void 0:g.count)||0,")"]})]}),o.jsxs(le,{variant:"ghost",size:"sm",className:"flex-1 md:flex-none flex items-center justify-center gap-2 transition-colors px-4 py-3 h-12 text-sm font-medium hover:text-green-600 hover:bg-green-50",onClick:j,"data-testid":`button-share-${d}`,children:[o.jsx(l5,{className:"w-4 h-4"}),o.jsx("span",{children:"Share"})]})]})})})}),l&&o.jsxs("div",{className:"-mx-3 md:mx-0 bg-blue-50/50 border-t border-blue-200 md:rounded-lg md:border",children:[o.jsx("div",{className:"p-3 md:p-4 border-b border-blue-200 bg-white/80 backdrop-blur-sm sticky top-0 z-10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(uu,{className:"h-4 w-4 text-blue-600"}),o.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["Comments (",(g==null?void 0:g.count)||0,")"]})]}),o.jsx(le,{variant:"ghost",size:"sm",onClick:()=>c(!1),className:"h-8 w-8 p-0","data-testid":"close-comments",children:o.jsx(oa,{className:"h-4 w-4"})})]})}),o.jsx("div",{className:"bg-white",children:o.jsx(HO,{incident:p,onClose:()=>c(!1)})})]})]})]})});return e?o.jsx(il,{open:!0,onOpenChange:_,children:o.jsxs(ra,{className:"max-w-3xl max-h-[95vh] flex flex-col p-0",children:[o.jsx(yl,{className:"sr-only",children:o.jsx(vl,{children:"Incident Details"})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6",children:H})]})}):o.jsx("div",{className:"container max-w-3xl mx-auto p-3 md:p-6",children:H})}function Yee(e){return o.jsx(Qee,{asModal:!0,...e})}function Xee({isOpen:e,onAccept:t}){const[n,r]=v.useState(!1),[s,i]=v.useState(!1),{toast:l}=Pn(),c=Fn({mutationFn:async()=>(await On("POST","/api/user/accept-terms")).json(),onSuccess:()=>{ss.invalidateQueries({queryKey:["/api/auth/user"]}),l({title:"Terms accepted",description:"Welcome to QLD Safety Monitor! You can now use all features."}),t()},onError:h=>{console.error("Terms acceptance error:",h),l({title:"Error accepting terms",description:h.message||"Please try again later",variant:"destructive"})}}),d=()=>{if(!n||!s){l({title:"Please complete all requirements",description:"You must read the terms and check the agreement box to continue",variant:"destructive"});return}c.mutate()};return o.jsx(il,{open:e,onOpenChange:()=>{},children:o.jsxs(ra,{className:"w-[95vw] max-w-2xl h-[90vh] max-h-[90vh] flex flex-col p-0 bg-gradient-to-br from-white via-gray-50 to-white border-0 shadow-2xl","data-testid":"modal-terms-conditions","aria-describedby":"terms-description",children:[o.jsx(yl,{className:"p-6 pb-4 flex-shrink-0 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:o.jsx(h9,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx(vl,{className:"text-xl font-bold text-gray-900",children:"Terms and Conditions"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please read and accept our terms to continue"})]})]})}),o.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col min-h-0 max-h-full",children:[o.jsx("div",{id:"terms-description",className:"sr-only",children:"Terms and Conditions document that must be read and accepted to use QLD Safety Monitor"}),o.jsx(sg,{className:"flex-1 pr-4 h-0 min-h-[200px] max-h-[60vh] md:max-h-[50vh]",onScrollCapture:()=>r(!0),children:o.jsxs("div",{className:"space-y-6 text-sm text-gray-700 leading-relaxed",children:[o.jsxs("section",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx(Ci,{className:"w-5 h-5 text-blue-600"}),"Welcome to QLD Safety Monitor"]}),o.jsx("p",{children:"By using QLD Safety Monitor, you agree to these terms and conditions. This platform helps Queensland residents stay informed about safety incidents, traffic events, and community safety updates."})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"1. Acceptance of Terms"}),o.jsx("p",{children:"By accessing or using QLD Safety Monitor, you acknowledge that you have read, understood, and agree to be bound by these terms and conditions."})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"2. User Responsibilities"}),o.jsxs("ul",{className:"space-y-2 ml-4",children:[o.jsx("li",{children:" Provide accurate and truthful information when reporting incidents"}),o.jsx("li",{children:" Respect other community members and maintain civil discourse"}),o.jsx("li",{children:" Do not share false, misleading, or harmful information"}),o.jsx("li",{children:" Use the platform only for legitimate safety and community purposes"}),o.jsx("li",{children:" Report content that violates community guidelines"})]})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"3. Content Guidelines"}),o.jsx("p",{children:"All user-generated content must be appropriate and relevant to community safety. Prohibited content includes:"}),o.jsxs("ul",{className:"space-y-2 ml-4 mt-2",children:[o.jsx("li",{children:" Spam, harassment, or abusive language"}),o.jsx("li",{children:" False emergency reports or hoax incidents"}),o.jsx("li",{children:" Personal attacks or discriminatory content"}),o.jsx("li",{children:" Content that violates privacy or safety of others"}),o.jsx("li",{children:" Commercial advertisements or promotional material"})]})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"4. Privacy and Data"}),o.jsx("p",{children:"We respect your privacy and handle your data in accordance with our privacy policy. By using this service:"}),o.jsxs("ul",{className:"space-y-2 ml-4 mt-2",children:[o.jsx("li",{children:" Your profile information may be visible to other community members"}),o.jsx("li",{children:" Incident reports you submit become part of the public safety record"}),o.jsx("li",{children:" We may share anonymized data with relevant authorities for public safety"}),o.jsx("li",{children:" Location data is used only for incident reporting and safety features"})]})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"5. Emergency Situations"}),o.jsxs("p",{children:[o.jsx("strong",{children:"Important:"})," QLD Safety Monitor is not a replacement for emergency services. For immediate emergencies:"]}),o.jsxs("ul",{className:"space-y-2 ml-4 mt-2",children:[o.jsx("li",{children:" Call 000 for police, fire, or ambulance"}),o.jsx("li",{children:" Use official emergency channels for urgent situations"}),o.jsx("li",{children:" This platform is for community awareness and non-urgent safety information"})]})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"6. Account Termination"}),o.jsx("p",{children:"We reserve the right to suspend or terminate accounts that violate these terms or engage in harmful behavior. Users who repeatedly violate community guidelines may be permanently banned."})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"7. Disclaimer"}),o.jsx("p",{children:'QLD Safety Monitor provides information "as is" without warranties. We are not responsible for the accuracy of user-submitted content or any actions taken based on information from this platform.'})]}),o.jsxs("section",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"8. Changes to Terms"}),o.jsx("p",{children:"These terms may be updated periodically. Continued use of the platform constitutes acceptance of any changes. Users will be notified of significant changes."})]}),o.jsx("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsx("p",{className:"text-blue-800 font-medium",children:"By accepting these terms, you confirm that you are at least 13 years old and have the legal capacity to enter into this agreement."})})]})}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 space-y-4 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kr,{id:"read-terms",checked:n,onCheckedChange:h=>r(h===!0),"data-testid":"checkbox-read-terms"}),o.jsx("label",{htmlFor:"read-terms",className:"text-sm text-gray-700",children:"I have read the entire Terms and Conditions document"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kr,{id:"accept-terms",checked:s,onCheckedChange:h=>i(h===!0),"data-testid":"checkbox-accept-terms"}),o.jsx("label",{htmlFor:"accept-terms",className:"text-sm text-gray-700",children:"I agree to the Terms and Conditions and will follow the community guidelines"})]})]})]}),o.jsx(qI,{className:"p-6 pt-4 bg-gray-50 border-t border-gray-200 flex-shrink-0",children:o.jsx(le,{onClick:d,disabled:!n||!s||c.isPending,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3","data-testid":"button-accept-terms",children:c.isPending?"Accepting...":"Accept Terms and Continue"})})]})})}function Jee(){const{user:e,isLoading:t}=Bn(),n=!!e,[r,s]=v.useState(!1),[i]=qr(),[l,c]=v.useState("/"),d=i.match(/^\/incident\/(.+)$/),h=!!d;v.useEffect(()=>{!h&&i!==l&&c(i)},[i,h,l]),v.useEffect(()=>{e&&e.id&&!e.termsAccepted?s(!0):s(!1)},[e]);const f=e&&!e.accountType;if(v.useEffect(()=>{ss.prefetchQuery({queryKey:["/api/unified"],queryFn:async()=>{const b=await fetch("/api/unified");return b.ok?b.json():null},staleTime:1*60*1e3})},[]),t)return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!n)return o.jsxs(dN,{children:[o.jsx(xo,{path:"/login",component:W2}),o.jsx(xo,{path:"/",component:D2}),o.jsx(xo,{component:D2})]});const p=h?l:i,g=b=>{if(f)return o.jsx(H2,{});if(b.startsWith("/edit-ad/")||b.startsWith("/edit-incident/")||b.startsWith("/users/")||b.startsWith("/messages/"))return o.jsxs(dN,{location:b,children:[o.jsx(xo,{path:"/edit-ad/:id",component:Zee}),o.jsx(xo,{path:"/edit-incident/:id",component:Kee}),o.jsx(xo,{path:"/users/:userId",component:mee}),o.jsx(xo,{path:"/messages/:conversationId",component:rx}),o.jsx(xo,{path:"/messages",component:rx})]});switch(b){case"/map":return o.jsx(IX,{});case"/feed":return o.jsx(B2,{});case"/advertise":case"/create-ad":return o.jsx(Uee,{});case"/business-upgrade":return o.jsx(zee,{});case"/business-dashboard":return o.jsx($ee,{});case"/account-setup":return o.jsx(H2,{});case"/profile":return o.jsx(pee,{});case"/messages":return o.jsx(rx,{});case"/notifications":return o.jsx(Oee,{});case"/admin":return o.jsx(Hee,{});case"/login":return o.jsx(W2,{});default:return o.jsx(B2,{})}};return o.jsxs(o.Fragment,{children:[g(p),h&&d&&o.jsx(Yee,{incidentId:d[1]}),o.jsx(Xee,{isOpen:r,onAccept:()=>s(!1)})]})}function ete(){return o.jsx(HB,{client:ss,children:o.jsxs(Z$,{children:[o.jsx(c7,{}),o.jsx(Jee,{})]})})}rA(document.getElementById("root")).render(o.jsx(ete,{}));
